(function(t){function e(e){for(var i,r,o=e[0],c=e[1],u=e[2],l=0,h=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&h.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(h.length)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,r=1;r<n.length;r++){var o=n[r];0!==a[o]&&(i=!1)}i&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var i={},r={app:0},a={app:0},s=[];function o(t){return c.p+"static/js/"+({analyser:"analyser",exporter:"exporter","w-free-write":"w-free-write","w-novel-quickstart":"w-novel-quickstart","w-plot-workshop":"w-plot-workshop","w-setting-workshop":"w-setting-workshop","w-writers-unblock":"w-writers-unblock"}[t]||t)+"."+{analyser:"15f87b18",exporter:"7d341a41","w-free-write":"3c893b89","w-novel-quickstart":"5bc1242c","w-plot-workshop":"dc813fe9","w-setting-workshop":"3549b8da","w-writers-unblock":"27f1e8ad"}[t]+".js"}function c(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={analyser:1,exporter:1,"w-free-write":1,"w-novel-quickstart":1,"w-plot-workshop":1,"w-setting-workshop":1,"w-writers-unblock":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var i="static/css/"+({analyser:"analyser",exporter:"exporter","w-free-write":"w-free-write","w-novel-quickstart":"w-novel-quickstart","w-plot-workshop":"w-plot-workshop","w-setting-workshop":"w-setting-workshop","w-writers-unblock":"w-writers-unblock"}[t]||t)+"."+{analyser:"e777c0a2",exporter:"da28a4fd","w-free-write":"cf797f0f","w-novel-quickstart":"474aebfb","w-plot-workshop":"1f6b3f4b","w-setting-workshop":"bb1f4443","w-writers-unblock":"cd0b4b56"}[t]+".css",a=c.p+i,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var u=s[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===i||l===a))return e()}var h=document.getElementsByTagName("style");for(o=0;o<h.length;o++){u=h[o],l=u.getAttribute("data-href");if(l===i||l===a)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var i=e&&e.target&&e.target.src||a,s=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=i,delete r[t],d.parentNode.removeChild(d),n(s)},d.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){r[t]=0})));var i=a[t];if(0!==i)if(i)e.push(i[2]);else{var s=new Promise((function(e,n){i=a[t]=[e,n]}));e.push(i[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(t);var h=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=a[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",h.name="ChunkLoadError",h.type=i,h.request=r,n[1](h)}a[t]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=i,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(n,i,function(e){return t[e]}.bind(null,i));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var h=0;h<u.length;h++)e(u[h]);var d=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("1112")},"0555":function(t,e,n){t.exports=n.p+"static/img/modal-logo.99cae3a0.png"},"061b":function(t,e,n){},"09e2":function(t,e,n){},1112:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=n("3652"),a=n.n(r),s=n("2955"),o=n.n(s),c=(n("4de4"),n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),n("53ca")),u=n("8c4f"),l=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},h=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"not-found"},[n("h3",[t._v("Something went wrong.")]),n("p",[t._v(" This page doesn't exist. If you're having trouble with the app, please contact us at "),n("a",{attrs:{href:"mailto:support@edwardtheapp.com"}},[t._v("support@edwardtheapp.com")]),t._v(". ")])])])}],d={},p=d,f=(n("24bb"),n("2877")),v=Object(f["a"])(p,l,h,!1,null,"00a62670",null),m=v.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"composer-wrap"},[t.hasChapters?n("div",{staticClass:"composer"},[n("div",{staticClass:"map-wrap"},[n("text-map",{attrs:{"editor-element":t.editorElement,"data-stream":t.activeChapter.content,mark:t.mark},on:{select:t.selectMap}})],1),n("div",{staticClass:"editor-wrap"},[n("tabs-list",{attrs:{"active-index":t.activeChapterIndex,"data-array":t.allChapters,"filter-tabs":t.isViewing,"item-name":"Chapter"},on:{add:t.addChapter,hover:t.hoverChapter,unhover:t.unhoverChapter,"update:activeIndex":t.selectChapter}}),n("div",{ref:"editorContainer",staticClass:"below-tabs"},[n("div",{staticClass:"stats",class:{active:t.showStats}},[n("div",{staticClass:"stats-content"},[n("p",[n("b",[t._v(t._s(t.activeChapter.title))])]),n("p",[t._v(t._s(t.chapterWordCount)+" words")]),n("p",[t._v(t._s(t.chapterParagraphCount)+" paragraphs")]),n("p",[t._v(t._s(t.chapterPageCount)+" pages")]),n("p",[t._v(t._s(t.chapterReadTimeMinutes)+" minute read")]),n("br"),n("p",[n("b",[t._v(t._s(t.documentTitle)+" (Full document)")])]),n("p",[t._v(t._s(t.documentWordCount)+" words")]),n("p",[t._v(t._s(t.documentPageCount)+" pages")]),n("p",[t._v(t._s(t.documentReadTimeMinutes)+" minute read")])])]),n("div",{staticClass:"define"},[n("word-define",{attrs:{word:t.mark}})],1),n("quill-editor",{ref:"textEditor",attrs:{content:t.activeChapter.content,"content-id":t.activeChapter.guid,"scroll-to":t.scrollTo,container:t.editorContainerNode},on:{"update:content":t.updateContent,"update:selection":t.updateSelection}})],1)],1),n("div",{staticClass:"sidebar-wrap"},[n("div",{staticClass:"sidebar-options"},[n("div",{staticClass:"plan-switch"},[n("button",{staticClass:"switch-label",class:{active:"outline"===t.sidebar},on:{click:function(e){return t.switchOutline()}}},[n("img",{attrs:{src:"img/icons_outline-green.png"}}),n("div",{staticClass:"switch-label-text"},[t._v(" Outline ")])]),n("hr",{staticClass:"vert"}),n("button",{staticClass:"switch-label",class:{active:"plan"===t.sidebar},on:{click:function(e){return t.switchPlans()}}},[n("img",{attrs:{src:"img/icons_plan-green.png"}}),n("div",{staticClass:"switch-label-text"},[t._v(" Plan ")])]),t.isPremium?[n("hr",{staticClass:"vert"}),n("button",{staticClass:"switch-label",class:{active:"workshop"===t.sidebar},on:{click:function(e){return t.switchWorkshops()}}},[n("img",{attrs:{src:"img/icons_workshops-green.png"}}),n("div",{staticClass:"switch-label-text"},[t._v(" Workshops ")])])]:t._e()],2)]),n("div",{directives:[{name:"show",rawName:"v-show",value:"plan"===t.sidebar,expression:"sidebar === 'plan'"}],staticClass:"sidebar-content"},[n("div",{staticClass:"archived-filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.archived,expression:"filters.archived"}],attrs:{id:"showArchivedTopics-p",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.archived)?t._i(t.filters.archived,null)>-1:t.filters.archived},on:{change:function(e){var n=t.filters.archived,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);i.checked?s<0&&t.$set(t.filters,"archived",n.concat([a])):s>-1&&t.$set(t.filters,"archived",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"archived",r)}}}),n("label",{attrs:{for:"showArchivedTopics-p"}},[t._v("Show Archived")])]),t.hasPlans?[n("plans-list",{attrs:{"filter-plans":t.showPlan,"filter-sections":t.showSection,"show-subheader":!1}})]:[n("div",[t._v("No plans yet.")]),n("div",[n("router-link",{attrs:{to:"/plan"}},[t._v(" Start planning ")])],1)]],2),n("div",{directives:[{name:"show",rawName:"v-show",value:"outline"===t.sidebar,expression:"sidebar === 'outline'"}],staticClass:"sidebar-content"},[n("div",{staticClass:"archived-filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.archived,expression:"filters.archived"}],attrs:{id:"showArchivedTopics-o",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.archived)?t._i(t.filters.archived,null)>-1:t.filters.archived},on:{change:function(e){var n=t.filters.archived,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);i.checked?s<0&&t.$set(t.filters,"archived",n.concat([a])):s>-1&&t.$set(t.filters,"archived",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"archived",r)}}}),n("label",{attrs:{for:"showArchivedTopics-o"}},[t._v("Show Archived")])]),t.hasTopics?[n("div",{staticClass:"topic-list-wrap"},[n("topic-list",{attrs:{chapter:t.activeChapter,"filter-topics":t.showTopic,topics:t.allTopics}})],1)]:[n("div",[t._v("No outline yet.")]),n("div",[n("router-link",{attrs:{to:"/outline"}},[t._v(" Start outlining ")])],1)]],2),n("div",{directives:[{name:"show",rawName:"v-show",value:"workshop"===t.sidebar,expression:"sidebar === 'workshop'"}],staticClass:"sidebar-content"},[n("div",{staticClass:"archived-filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.archived,expression:"filters.archived"}],attrs:{id:"showArchivedTopics-w",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.archived)?t._i(t.filters.archived,null)>-1:t.filters.archived},on:{change:function(e){var n=t.filters.archived,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);i.checked?s<0&&t.$set(t.filters,"archived",n.concat([a])):s>-1&&t.$set(t.filters,"archived",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"archived",r)}}}),n("label",{attrs:{for:"showArchivedTopics-w"}},[t._v("Show Archived")])]),t.hasWorkshops?[n("workshop-list",{ref:"workshopList",attrs:{"filter-workshops":t.showWorkshop}})]:[n("h3",[t._v("No workshops completed yet.")]),n("div",[t._v(" See More > Workshops in the main menu to get started. ")])]],2)])]):n("div",[n("div",[t._v("No chapters yet.")]),n("div",[n("router-link",{attrs:{to:"/outline"}},[t._v(" Create one ")])],1)])])},w=[],C=(n("7db0"),n("caad"),n("c975"),n("a15b"),n("b0c0"),n("ac1f"),n("2532"),n("466d"),n("5319"),n("8410")),k=n("7f24"),y=n("7d4e"),b=n("bec3"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.viewingPlans.length>0,expression:"viewingPlans.length > 0"}],staticClass:"plans-wrap"},[n("tabs-list",{attrs:{"active-index":t.activePlanIndex,"data-array":t.allPlans,"filter-tabs":t.filterPlans,"item-name":"Plan"},on:{add:t.addPlan,"update:activeIndex":t.selectPlan}}),t.activePlan?n("div",{staticClass:"plan"},[t.showSubheader?n("div",{staticClass:"plan-head"},[n("h2",{staticClass:"plan-title"},[t._v(" "+t._s(t.activePlan.title)+" ")]),n("div",{staticClass:"plan-actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.activePlan.archived,expression:"!activePlan.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"plan-action button-icon",attrs:{title:"Archive"},on:{click:function(e){return t.archivePlan({index:t.activePlanIndex})}}},[n("span",{staticClass:"fas fa-archive"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.activePlan.archived,expression:"activePlan.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"plan-action button-icon",attrs:{title:"Un-archive"},on:{click:function(e){return t.restorePlan({index:t.activePlanIndex})}}},[n("span",{staticClass:"fas fa-box-open"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.activePlan.archived,expression:"activePlan.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"plan-action plan-action-danger button-icon",attrs:{title:"Delete Forever"},on:{click:function(e){return t.deletePlan({index:t.activePlanIndex})}}},[n("span",{staticClass:"fas fa-trash"})])])]):t._e(),n("h3",[t._v("Add/rearrange sections")]),n("div",{staticClass:"plan-body"},[n("div",{staticClass:"chips-wrap section-chips"},[n("chips-list",{attrs:{name:"Section","name-prop":"title","data-array":t.activePlanSections,"filter-chips":t.filterSections,"is-deletable":t.isDeletable},on:{add:t.addSection,delete:t.archiveSection,rearrange:t.rearrangeSection,restore:t.restoreSection,update:t.renameSection}})],1),n("div",{staticClass:"sections"},t._l(t.activePlan.sections,(function(e,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.filterSections(e),expression:"filterSections(section)"}],key:e.guid,staticClass:"section"},[n("div",{staticClass:"section-head"},[n("h5",{staticClass:"section-title"},[t._v(" "+t._s(e.title)+" ")]),n("div",{staticClass:"section-actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing(i),expression:"!isEditing(index)"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"section-action",attrs:{title:"Edit"},on:{click:function(e){return t.editSection(i)}}},[n("span",{staticClass:"fas fa-edit"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing(i),expression:"isEditing(index)"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"section-action",attrs:{title:"Save"},on:{click:function(e){return t.endEditSection()}}},[n("span",{staticClass:"fas fa-check"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.archived,expression:"!section.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"section-action",attrs:{title:"Archive"},on:{click:function(e){return t.archiveSection({index:i})}}},[n("span",{staticClass:"fas fa-archive"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.archived,expression:"section.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"section-action",attrs:{title:"Un-archive"},on:{click:function(e){return t.restoreSection({index:i})}}},[n("span",{staticClass:"fas fa-box-open"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.archived,expression:"section.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"section-action button-red",attrs:{title:"Delete forever"},on:{click:function(e){return t.deleteSection({index:i})}}},[n("span",{staticClass:"fas fa-trash"})])])]),n("div",{staticClass:"section-content"},[t.isEditing(i)?t._e():n("div",{staticClass:"content-static"},[n("div",{domProps:{innerHTML:t._s(t.getHtml(e))}}),e.archived||t.getTextContent(e.content)?t._e():n("span",{staticClass:"content-placeholder"},[t._v(" No content yet. Click "),n("span",{staticClass:"fas fa-edit"}),t._v(" to add some. ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isEditing(i),expression:"isEditing(index)"}],staticClass:"content-editable"},[n("quill-editor",{ref:"quillEditor",refInFor:!0,attrs:{content:e.content,"content-id":t.activePlan.guid},on:{"update:content":function(n){return t.updateContent(e,n)},"shortcut:done":function(e){return t.endEditSection()}}})],1)])])})),0)])]):t._e(),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"helpSectionChipsModal",staticClass:"help"},[n("p",[t._v("This is the section list. It's the easiest place to add, archive, restore, rename, and rearrange sections.")]),n("p",[t._v('To add a section, type its name into the "New Section" box and click "Add".')]),n("p",[t._v(' To archive a section, click the "X" next to its name in the list. Archiving a section removes it from your document without deleting it permanently. ')]),n("p",[t._v('To restore an archived section, check the "Show Archived" box, then click the "+" next to its name in the list.')]),n("p",[t._v("To rename a section, click the pencil icon next to its name in the list.")]),n("p",[t._v("To rearrange a section, click and drag it to where you want it to go.")])])])],1)},P=[],T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chip-list-wrap"},[n("draggable",{staticClass:"chip-list",attrs:{options:t.draggableOptions},model:{value:t.reactiveArray,callback:function(e){t.reactiveArray=e},expression:"reactiveArray"}},[t._l(t.reactiveArray,(function(e,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.filterChips(e),expression:"filterChips(chip)"}],key:i,staticClass:"chip",class:{light:!t.isDeletable(e)}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showChipInput(i),expression:"!showChipInput(index)"}],staticClass:"chip-content"},[n("span",{staticClass:"chip-draggable"},[t._v(" "+t._s(e[t.nameProp])+" ")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.isDeletable(e),expression:"isDeletable(chip)"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"button-icon chip-action-button action-rename",attrs:{title:"Rename"},on:{click:function(n){return t.renameChip(i,e[t.nameProp])}}},[n("span",{staticClass:"fas fa-edit"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.isDeletable(e),expression:"isDeletable(chip)"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"button-icon chip-action-button action-delete",attrs:{title:"Archive"},on:{click:function(e){return t.deleteChip(i)}}},[n("span",{staticClass:"fas fa-archive"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:!t.isDeletable(e),expression:"!isDeletable(chip)"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"button-icon chip-action-button action-restore",attrs:{title:"Un-archive"},on:{click:function(e){return t.restoreChip(i)}}},[n("span",{staticClass:"fas fa-box-open"})])]),t.showChipInput(i)?n("div",{staticClass:"chip-content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.chipValues[i],expression:"chipValues[index]"}],staticClass:"chip-internal-input",attrs:{placeholder:e[t.nameProp]},domProps:{value:t.chipValues[i]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveChipValue(i)},input:function(e){e.target.composing||t.$set(t.chipValues,i,e.target.value)}}}),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"button-green chip-internal-button",attrs:{disabled:!t.chipValues[i],title:"Save"},on:{click:function(e){return t.saveChipValue(i)}}},[n("span",{staticClass:"u-center-all fas fa-save"})]),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"button-red chip-internal-button",attrs:{title:"Cancel"},on:{click:function(e){return t.cancelRename(i)}}},[n("span",{staticClass:"u-center-all fas fa-times-circle"})])]):t._e()])})),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"chip-content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newChip,expression:"newChip"}],staticClass:"chip-input",attrs:{placeholder:t.placeholder},domProps:{value:t.newChip},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addNewChip(e)},input:function(e){e.target.composing||(t.newChip=e.target.value)}}}),n("button",{staticClass:"button-green chip-add-button",attrs:{disabled:!t.newChip},on:{click:t.addNewChip}},[t._v(" Add ")])])])],2)],1)},O=[],S=(n("99af"),n("fb6a"),n("a434"),n("310e")),E=n.n(S),x=n("1940"),A=n.n(x),I=n("efa2"),N={components:{draggable:E.a},computed:{placeholder:function(){return"New ".concat(this.name,"...")},reactiveArray:{get:function(){return this.dataArray},set:function(t){this.$emit("rearrange",t)}}},data:function(){return{chipValues:[],draggableOptions:{animation:100,draggable:".chip",group:this.name,handle:".chip-draggable"},newChip:""}},directives:{tooltip:I["a"]},methods:{addNewChip:function(){var t=this.assertUnique(this.dataArray,this.nameProp,this.newChip);t&&(this.$emit("add",this.newChip),this.newChip="")},assertUnique:function(t,e,n){var i=t.find((function(t){return t[e]===n}));return!i||(A()({icon:"error",text:"Sorry, ".concat(this.name.toLowerCase()," ").concat(e,'s must be unique. "').concat(n,'" is already in use.\n                 Please choose a different ').concat(e,".")}),!1)},cancelRename:function(t){this.$set(this.chipValues,t,null)},deleteChip:function(t){this.$emit("delete",{index:t})},renameChip:function(t,e){this.$set(this.chipValues,t,e)},restoreChip:function(t){this.$emit("restore",{index:t})},saveChipValue:function(t){var e=this.dataArray.slice();e.splice(t,1);var n=this.assertUnique(e,this.nameProp,this.chipValues[t]);n&&(this.$emit("update",{index:t,value:this.chipValues[t]}),this.$set(this.chipValues,t,null))},showChipInput:function(t){return"string"===typeof this.chipValues[t]}},props:{dataArray:{required:!0,type:Array},filterChips:{required:!0,type:Function},isDeletable:{required:!0,type:Function},name:{required:!0,type:String},nameProp:{required:!0,type:String}}},D=N,W=(n("fb99"),Object(f["a"])(D,T,O,!1,null,"71787b38",null)),R=W.exports,j=n("1c03"),$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabs"},[t._l(t.dataArray,(function(e,i){return n("button",{directives:[{name:"show",rawName:"v-show",value:t.filterTabs(e),expression:"filterTabs(item)"}],key:e.guid,staticClass:"button-tab",class:{active:t.isActive(i)},on:{click:function(e){return t.selectItem(i)},mouseover:function(e){return t.hoverItem(i)},mouseout:function(e){return t.unhoverItem()}}},[t._v(" "+t._s(e.title)+" ")])})),t.canAdd?n("button",{directives:[{name:"show",rawName:"v-show",value:!t.showAddItem,expression:"!showAddItem"}],staticClass:"button-tab add-button",on:{click:t.showNewItem}},[n("span",{staticClass:"fas fa-plus"})]):t._e(),t.canAdd?n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddItem,expression:"showAddItem"}],staticClass:"button-tab add-tab"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem,expression:"newItem"}],staticClass:"tab-input",attrs:{placeholder:"New "+t.itemName+"..."},domProps:{value:t.newItem},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addItem(e)},input:function(e){e.target.composing||(t.newItem=e.target.value)}}}),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{arrow:!1},expression:"{ arrow: false }"}],staticClass:"button-green tab-internal-button",attrs:{title:"Save"},on:{click:t.addItem}},[n("span",{staticClass:"fas fa-save"})]),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{arrow:!1},expression:"{ arrow: false }"}],staticClass:"button-red tab-internal-button",attrs:{title:"Cancel"},on:{click:t.cancelAddItem}},[n("span",{staticClass:"fas fa-times-circle"})])]):t._e()],2)},L=[],M=(n("a9e3"),{components:{},computed:{},directives:{tooltip:I["a"]},data:function(){return{newItem:"",showAddItem:!1,tabCache:new k["b"]("CURRENT_".concat(this.itemName,"_TAB"))}},methods:{addItem:function(){this.$emit("add",this.newItem),this.newItem="",this.showAddItem=!1},hoverItem:function(t){this.$emit("hover",t)},isActive:function(t){return t===this.activeIndex},selectItem:function(t){this.$emit("update:activeIndex",t)},showNewItem:function(){this.showAddItem=!0},cancelAddItem:function(){this.showAddItem=!1,this.newItem=""},unhoverItem:function(){this.$emit("unhover")}},mounted:function(){var t=this.tabCache.cacheGet();t&&t<this.dataArray.length?this.selectItem(t):this.selectItem(0)},props:{activeIndex:{required:!0,type:Number},dataArray:{required:!0,type:Array},filterTabs:{required:!0,type:Function},itemName:{required:!0,type:String},canAdd:{required:!1,default:!0,type:Boolean}},watch:{activeIndex:function(t){this.tabCache.cacheSet(t)}}}),G=M,K=(n("f840"),Object(f["a"])(G,$,L,!1,null,"476162f6",null)),U=K.exports,q=function(t,e){var n=1,i=60;return!(e.length<n||e.length>i)||(A()({icon:"error",text:"Sorry, ".concat(t," titles must be between ").concat(n," and ").concat(i," letters.")}),!1)},F={components:{ChipsList:R,QuillEditor:j["a"],TabsList:U},computed:{activePlan:function(){return this.allPlans[this.activePlanIndex]},activePlanSections:function(){return this.activePlan&&this.activePlan.sections||[]},allPlans:function(){return this.$store.state.chapters.plans||[]},viewingPlans:function(){var t=this;return this.allPlans.filter((function(e){return t.filterPlans(e)}))}},data:function(){return{activePlanIndex:-1,editingSectionIndex:-1}},directives:{tooltip:I["a"]},methods:{addPlan:function(t){if(q("plan",t)){var e={archived:!1,guid:Object(b["a"])(),title:t,sections:[]};this.$store.commit(C["b"],{plan:e}),console.log(this.activePlanIndex)}},addSection:function(t){if(q("section",t)){var e={archived:!1,content:null,guid:Object(b["a"])(),tags:[],title:t};this.$store.commit(C["c"],{plan:this.activePlan,section:e})}},archivePlan:function(t){var e=t.index;this.$store.commit(C["g"],{plan:this.allPlans[e]}),e!==this.activePlanIndex||this.filterPlans(this.allPlans[e])||this.selectPlan(-1)},archiveSection:function(t){var e=t.index;this.$store.commit(C["h"],{plan:this.activePlan,section:this.activePlan.sections[e]})},deletePlan:function(t){var e=this,n=t.index;A()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this plan? Its sections and all of their content will be lost. This cannot be undone.",title:"Delete Forever?"}).then((function(t){t&&(e.$store.commit(C["k"],{plan:e.allPlans[n]}),n===e.activePlanIndex&&e.selectPlan(-1))}))},deleteSection:function(t){var e=this,n=t.index;A()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this section? Its content will be lost. This cannot be undone.",title:"Delete Forever?"}).then((function(t){t&&e.$store.commit(C["l"],{plan:e.activePlan,section:e.activePlan.sections[n]})}))},editSection:function(t){this.editingSectionIndex=t,this.$refs.quillEditor[t].focus()},endEditSection:function(){this.editingSectionIndex=-1},getHtml:function(t){return Object(y["b"])(t.content)},getTextContent:function(t){return Object(y["a"])(t)},helpClick:function(t,e){A()({content:t,title:e})},isDeletable:function(t){return!t.archived},isEditing:function(t){return this.editingSectionIndex===t},rearrangeSection:function(t){this.$store.commit(C["r"],{plan:this.activePlan,sections:t})},renameSection:function(t){var e=t.index,n=t.value;q("section",n)&&this.$store.commit(C["A"],{plan:this.activePlan,section:this.activePlan.sections[e],newTitle:n})},restorePlan:function(t){var e=t.index;this.$store.commit(C["u"],{plan:this.allPlans[e]})},restoreSection:function(t){var e=t.index;this.$store.commit(C["v"],{plan:this.activePlan,section:this.activePlan.sections[e]})},selectPlan:function(t){-1===t&&(t=0),this.allPlans[t]&&this.allPlans[t].archived&&!this.filterPlans(this.allPlans[t])&&(t=this.allPlans.indexOf(this.viewingPlans[0])),this.activePlanIndex=t},updateContent:function(t,e){var n=e.content,i=e.contentId,r=this.allPlans.find((function(t){return t.guid===i}));this.$store.commit(C["B"],{plan:r,newContent:n,section:t})},updateTags:function(t,e){this.$store.commit(C["C"],{plan:this.activePlan,newTags:e,section:t})}},mounted:function(){this.helpSectionChipsModal=this.$refs.helpSectionChipsModal},props:{filterPlans:{required:!0,type:Function},filterSections:{required:!0,type:Function},showSubheader:{required:!0,type:Boolean}}},H=F,V=(n("e5e9"),Object(f["a"])(H,_,P,!1,null,"08268966",null)),z=V.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{ref:"mapWrap",staticClass:"map",on:{click:t.mapClick}},[n("div",{ref:"map",staticClass:"map-inner",domProps:{innerHTML:t._s(t.mapHtml)}})]),n("text-magnifier",{attrs:{html:t.mapHtml,"magnify-el":t.mapNode,mark:t.mark,"wrap-el":t.mapWrapNode}})],1)},X=[],J=(n("1276"),n("498a"),n("2909")),Q=(n("5f02"),n("b047")),Y=n.n(Q),Z=n("6f56"),tt=n.n(Z),et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrap",staticClass:"magnifier-wrap",class:{show:t.show}},[n("div",{ref:"magnifier",staticClass:"magnifier"},[n("div",{ref:"magnifierContent",staticClass:"magnifier-content map"})])])},nt=[],it={data:function(){return{cachedHtml:"",magnifyRadius:50,scale:5,show:!1,wrapElBoundingClientRect:null}},destroyed:function(){this.magnifyEl.removeEventListener("mousemove",this.mouseMove),this.magnifyEl.removeEventListener("mouseleave",this.mouseLeave)},methods:{getRelativeCoords:function(t,e){var n=t.clientX-e.left,i=t.clientY-e.top;return{x:n,y:i}},mouseLeave:function(){this.show=!1},mouseMove:function(t){this.cachedHtml!==this.html&&(this.cachedHtml=this.html);var e=this.getRelativeCoords(t,this.magnifyEl.getBoundingClientRect()),n=e.x,i=e.y;n=this.transformCoord(n,65),i=this.transformCoord(i,30);var r=this.$refs.magnifier.style;r.left="".concat(n,"px"),r.top="".concat(i,"px");var a=this.getRelativeCoords(t,this.wrapElBoundingClientRect),s=a.y,o=this.$refs.wrap.style;o.top="".concat(s-60,"px"),this.show=!0},refresh:function(){var t=this.magnifyEl.cloneNode(!0),e=this.$refs.magnifierContent;e.innerHTML="",e.appendChild(t)},transformCoord:function(t,e){return-t*this.scale+e}},mounted:function(){var t=this,e=this;this.$nextTick((function(){t.wrapElBoundingClientRect=t.wrapEl.getBoundingClientRect(),t.magnifyEl.addEventListener("mousemove",e.mouseMove),t.magnifyEl.addEventListener("mouseleave",e.mouseLeave)}))},props:{html:{required:!0,type:String},magnifyEl:{required:!0,type:null},mark:{required:!0,type:String},wrapEl:{required:!0,type:null}},watch:{cachedHtml:function(){this.refresh()},mark:function(){this.refresh()}}},rt=it,at=(n("5a5d"),Object(f["a"])(rt,et,nt,!1,null,"2b7f0647",null)),st=at.exports,ot={components:{TextMagnifier:st},data:function(){return{mapHtml:"",mapNode:null,mapWrapNode:null,markInstance:null,mouse:{x:null,y:null}}},methods:{mapClick:function(t){var e=t.target;if("mark"!==e.tagName.toLowerCase()){var n=Object(J["a"])(e.parentNode.classList);if(!n.includes("wrap"))if(n.includes("map-inner")){var i=Object(J["a"])(e.parentNode.childNodes).indexOf(e);this.$emit("select",{paragraphIndex:i,searchTermIndex:-1})}else this.mapClick({target:e.parentNode})}else this.markClick({target:e})},markClick:function(t){var e=t.target,n=this.$refs.map,i=Object(J["a"])(n.querySelectorAll("mark")),r=i.indexOf(e),a=e.parentNode,s=Object(J["a"])(a.parentNode.childNodes).indexOf(a);this.$emit("select",{paragraphIndex:s,searchTermIndex:r})},updateMap:function(){if(this.editorElement){var t=this.editorElement.$el.querySelector(".ql-editor");this.mapHtml=t.innerHTML}}},mounted:function(){this.$nextTick(this.updateMap),this.markInstance=new tt.a(this.$refs.map),this.mapNode=this.$refs.map,this.mapWrapNode=this.$refs.mapWrap},props:{dataStream:{required:!0,type:null},editorElement:{required:!0,type:null},mark:{default:null,type:String}},watch:{dataStream:Y()((function(){this.updateMap()}),250),mark:function(t){this.markInstance.unmark(),t.length<3||ct(t)>3||this.markInstance.mark(t,{separateWordSearch:!1})}}};function ct(t){return t.trim().split(/\s/).length}var ut=ot,lt=(n("5e74"),Object(f["a"])(ut,B,X,!1,null,"0a50dd92",null)),ht=lt.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},t._l(t.chapterTopics,(function(e,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showTopic(e),expression:"showTopic(topic)"}],key:e.guid,staticClass:"topic"},[n("div",{staticClass:"topic-head"},[n("h5",{staticClass:"topic-title"},[t._v(" "+t._s(t.getMasterTopic(e).title)+" ")]),n("div",{staticClass:"topic-actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing(i),expression:"!isEditing(index)"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"topic-action",attrs:{title:"Edit"},on:{click:function(e){return t.editTopic(i)}}},[n("span",{staticClass:"fas fa-edit"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing(i),expression:"isEditing(index)"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"topic-action",attrs:{title:"Save"},on:{click:function(e){return t.endEditTopic()}}},[n("span",{staticClass:"fas fa-check"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:!t.getMasterTopic(e).archived,expression:"!getMasterTopic(topic).archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"topic-action",attrs:{title:"Archive"},on:{click:function(e){return t.archiveTopic({index:i})}}},[n("span",{staticClass:"fas fa-archive"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.getMasterTopic(e).archived,expression:"getMasterTopic(topic).archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"topic-action",attrs:{title:"Un-archive"},on:{click:function(e){return t.restoreTopic({index:i})}}},[n("span",{staticClass:"fas fa-box-open"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.getMasterTopic(e).archived,expression:"getMasterTopic(topic).archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"topic-action button-red",attrs:{title:"Delete forever"},on:{click:function(e){return t.deleteTopic({index:i})}}},[n("span",{staticClass:"fas fa-trash"})])])]),n("div",{staticClass:"topic-content"},[t.isEditing(i)?t._e():n("div",{staticClass:"content-static"},[n("div",{domProps:{innerHTML:t._s(t.getHtml(e))}}),t.showActions(e)&&!t.getTextContent(e.content)?n("span",{staticClass:"content-placeholder"},[t._v(" No content yet. Click "),n("span",{staticClass:"fas fa-edit"}),t._v(" to add some. ")]):t._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isEditing(i),expression:"isEditing(index)"}],staticClass:"content-editable"},[n("quill-editor",{ref:"quillEditor",refInFor:!0,attrs:{content:e.content,"content-id":t.chapter.guid},on:{"update:content":function(n){return t.updateContent(e,n)},"shortcut:done":function(e){return t.endEditTopic()}}})],1)])])})),0)},pt=[],ft={components:{QuillEditor:j["a"]},directives:{tooltip:I["a"]},computed:{allChapters:function(){return this.$store.state.chapters.chapters},chapterTopics:function(){var t=this;return this.chapter?this.topics.map((function(e){return t.getTopic(t.chapter,e)})).filter((function(t){return!!t})):[]}},data:function(){return{editingTopicIndex:-1}},methods:{archiveTopic:function(t){var e=t.index;this.$store.commit(C["i"],{topic:this.topics[e]})},deleteTopic:function(t){var e=this,n=t.index;A()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this topic? It will be deleted from every chapter.\n               This cannot be undone.",title:"Delete from every chapter?"}).then((function(t){t&&e.$store.commit(C["m"],{topic:e.topics[n]})}))},editTopic:function(t){this.editingTopicIndex=t,this.$refs.quillEditor[t].focus()},endEditTopic:function(){this.editingTopicIndex=-1},getHtml:function(t){return Object(y["b"])(t.content)},getMasterTopic:function(t){return this.topics.find((function(e){return e.guid===t.guid}))||{}},getTopic:function(t,e){return t.topics||(t.topics={}),t.topics[e.guid]||this.$store.commit(C["e"],{chapter:t,topic:e}),t.topics[e.guid]},getTextContent:function(t){return Object(y["a"])(t)},isEditing:function(t){return this.editingTopicIndex===t},restoreTopic:function(t){var e=t.index;this.$store.commit(C["w"],{topic:this.topics[e]})},showActions:function(t){return!this.getMasterTopic(t).archived&&!this.chapter.archived},showTopic:function(t){return!!t&&this.filterTopics(t)},updateContent:function(t,e){var n=e.content,i=e.contentId,r=this.allChapters.find((function(t){return t.guid===i})),a=r.topics[t.guid];this.$store.commit(C["E"],{chapter:r,newContent:n,topic:a})}},props:{chapter:{required:!0,type:Object},filterTopics:{required:!0,type:Function},topics:{required:!0,type:Array}}},vt=ft,mt=(n("a676"),Object(f["a"])(vt,dt,pt,!1,null,"95e4884a",null)),gt=mt.exports,wt=n("ade3"),Ct="UPDATE_SELECTION",kt={state:{selection:{range:null,text:""}},mutations:Object(wt["a"])({},Ct,(function(t,e){t.selection=e}))},yt=kt,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showActions,expression:"showActions"}],staticClass:"actions"},[n("div",{staticClass:"define-icon",domProps:{innerHTML:t._s(t.defineIcon)}}),n("div",{staticClass:"define-buttons"},[n("a",{staticClass:"define-link",attrs:{href:t.gDefineUrl,target:"_blank"}},[n("button",{staticClass:"define-button"},[t._v("Define")])]),n("a",{staticClass:"define-link",attrs:{href:t.gSynonymUrl,target:"_blank"}},[n("button",{staticClass:"define-button"},[t._v("Synonyms")])])])])])},_t=[],Pt=n("d884"),Tt=n.n(Pt),Ot={components:{},computed:{gDefineUrl:function(){var t=this.word.trim().replace(/\s+/g,"+");return"https://www.google.com/#q=define+".concat(t)},gSynonymUrl:function(){var t=encodeURI(this.word.trim());return"http://www.thesaurus.com/browse/".concat(t)},showActions:function(){return!!this.word.trim()}},data:function(){return{defineIcon:Tt.a.book.toSVG({height:30,width:30}),linkIcon:Tt.a["link-external"].toSVG({height:20,width:20}),xIcon:Tt.a.x.toSVG({height:20,width:20})}},methods:{},props:{word:{required:!0,type:String}}},St=Ot,Et=(n("1c5c"),Object(f["a"])(St,bt,_t,!1,null,"1ef4dcac",null)),xt=Et.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.workshops.length>0,expression:"workshops.length > 0"}],staticClass:"workshops-wrap"},[n("tabs-list",{attrs:{"active-index":t.activeWorkshopNameIndex,"data-array":t.workshopNameTabs,"filter-tabs":function(){return!0},"item-name":"Workshop","can-add":!1},on:{"update:activeIndex":t.selectWorkshopNameIndex}}),n("div",[n("div",[n("h3",[t._v(" "+t._s(t.currentWorkshopDisplayName)+" ")])]),n("div",[n("div",{staticClass:"workshop-select"},[n("div",{staticClass:"workshop-select-label"},[t._v(" Select a workshop: ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedWorkshopGuid,expression:"selectedWorkshopGuid"}],staticClass:"workshop-select-dropdown",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedWorkshopGuid=e.target.multiple?n:n[0]}}},t._l(t.filteredSelectableWorkshops,(function(e){return n("option",{key:e.guid,domProps:{value:e.guid}},[t._v(" "+t._s(e.title)+" ")])})),0)]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.activeWorkshopsTitle,expression:"activeWorkshopsTitle"}],staticClass:"workshops"},[n("div",{staticClass:"workshop-item"},[n("div",{staticClass:"workshop-header"},[n("div",{staticClass:"workshop-title"},[t._v(" "+t._s(t.activeWorkshopsTitle)+" ("+t._s(t.activeWorkshopsDate)+") ")]),n("div",{staticClass:"workshop-actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.firstActiveWorkshop.archived,expression:"!firstActiveWorkshop.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"workshop-action",attrs:{title:"Archive"},on:{click:function(e){return t.archiveActiveWorkshops()}}},[n("span",{staticClass:"fas fa-archive"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.firstActiveWorkshop.archived,expression:"firstActiveWorkshop.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"workshop-action",attrs:{title:"Un-archive"},on:{click:function(e){return t.restoreActiveWorkshops()}}},[n("span",{staticClass:"fas fa-box-open"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.firstActiveWorkshop.archived,expression:"firstActiveWorkshop.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"workshop-action button-red",attrs:{title:"Delete forever"},on:{click:function(e){return t.deleteActiveWorkshops()}}},[n("span",{staticClass:"fas fa-trash"})])])]),t._l(t.activeWorkshops,(function(e){return n("div",{key:e.guid+"|"+e.order,staticClass:"workshop-content"},[n("div",{domProps:{innerHTML:t._s(t.getHtml(e))}})])}))],2)])])])],1)},It=[],Nt=(n("a4d3"),n("e01a"),n("d28b"),n("e935")),Dt=n("eed6"),Wt=n.n(Dt),Rt=n("6c59"),jt={components:{TabsList:U},directives:{tooltip:I["a"]},computed:{currentWorkshopDisplayName:function(){return Rt["a"][this.currentWorkshopName].displayName},currentWorkshopName:function(){return-1===this.activeWorkshopNameIndex?this.workshopNames[0]:this.workshopNames[this.activeWorkshopNameIndex]||{}},activeWorkshops:function(){var t=this;return this.viewingWorkshops.filter((function(e){return e.guid===t.selectedWorkshopGuid}))},activeWorkshopsDate:function(){return this.activeWorkshops&&this.activeWorkshops.length&&new Date(this.activeWorkshops[0].date).toLocaleDateString()},activeWorkshopsTitle:function(){return this.firstActiveWorkshop.title},filteredSelectableWorkshops:function(){var t=this;return this.selectableWorkshops.filter((function(e){return t.filterWorkshops(e)}))},firstActiveWorkshop:function(){return this.activeWorkshops&&this.activeWorkshops.length&&this.activeWorkshops[0]||{}},selectableWorkshops:function(){return this.viewingWorkshops.filter((function(t){return 0===t.order})).slice(0).sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}))},viewingWorkshops:function(){var t=this;return this.workshops.filter((function(e){return e.workshopName===t.currentWorkshopName}))},workshopNames:function(){return Wt()(this.workshops.map((function(t){return t.workshopName})))},workshopNameTabs:function(){return this.workshopNames.map((function(t){return{title:Rt["a"][t].displayName}}))},workshops:function(){return this.$store.state.workshop.workshops}},data:function(){return{activeWorkshopNameIndex:-1,selectedWorkshopGuid:null}},methods:{archiveActiveWorkshops:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.activeWorkshops[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;this.$store.commit(Nt["b"],{workshop:a})}}catch(s){e=!0,n=s}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}},deleteActiveWorkshops:function(){var t=this;A()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this workshop? All of its content will be lost. This cannot be undone.",title:"Delete Forever?"}).then((function(e){if(e){var n=!0,i=!1,r=void 0;try{for(var a,s=t.activeWorkshops[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;t.$store.commit(Nt["c"],{workshop:o})}}catch(c){i=!0,r=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}t.selectableWorkshops&&t.selectableWorkshops.length?t.selectedWorkshopGuid=t.selectableWorkshops[0].guid:t.selectWorkshopNameIndex(-1)}}))},getHtml:function(t){return Object(y["b"])(t.content)},restoreActiveWorkshops:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.activeWorkshops[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;this.$store.commit(Nt["f"],{workshop:a})}}catch(s){e=!0,n=s}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}},selectWorkshopGuid:function(t){this.selectedWorkshopGuid=t},selectWorkshopName:function(t){this.activeWorkshopNameIndex=this.workshopNames.indexOf(t)},selectWorkshopNameIndex:function(t){-1===t&&(t=0,this.selectDefaultWorkshop()),this.activeWorkshopNameIndex=t},selectDefaultWorkshop:function(){this.viewingWorkshops&&this.viewingWorkshops.length&&(this.selectedWorkshopGuid=this.viewingWorkshops[0].guid)}},mounted:function(){this.selectDefaultWorkshop()},props:{filterWorkshops:{required:!0,type:Function}}},$t=jt,Lt=(n("384e"),Object(f["a"])($t,At,It,!1,null,"2b85936c",null)),Mt=Lt.exports,Gt=new k["b"]("COMPOSER_PLAN_SWITCH"),Kt={components:{PlansList:z,QuillEditor:j["a"],TabsList:U,TextMap:ht,TopicList:gt,WordDefine:xt,WorkshopList:Mt},computed:{activeChapter:function(){return-1===this.activeChapterIndex?this.viewingChapters[0]:this.allChapters[this.activeChapterIndex]||{}},allChapters:function(){return this.$store.state.chapters.chapters},allPlans:function(){return this.$store.state.chapters.plans||[]},allTopics:function(){return this.$store.state.chapters.topics},allWorkshops:function(){return this.$store.state.workshop.workshops},chapterPageCount:function(){return this.getPageCount(this.textContent)},chapterParagraphCount:function(){return this.getParagraphCount(this.textContent)},chapterReadTimeMinutes:function(){return this.getReadTimeMinutes(this.textContent)},chapterWordCount:function(){return this.getWordCount(this.textContent)},documentFullText:function(){return this.$store.state.chapters.chapters.map((function(t){return t.content})).map((function(t){return Object(y["a"])(t)})).join(" ")},documentPageCount:function(){return this.getPageCount(this.documentFullText)},documentReadTimeMinutes:function(){return this.getReadTimeMinutes(this.documentFullText)},documentTitle:function(){return this.$store.state.document.currentDocument.name},documentWordCount:function(){return this.getWordCount(this.documentFullText)},hasChapters:function(){return this.viewingChapters&&this.viewingChapters.length},hasPlans:function(){return this.allPlans&&this.allPlans.length},hasTopics:function(){return this.allTopics&&this.allTopics.length},hasWorkshops:function(){return this.allWorkshops&&this.allWorkshops.length},isPremium:function(){return this.$store.state.user.user.isPremium},mark:function(){return this.selection.text},selection:function(){return this.$store.state.composer.selection},textContent:function(){return Object(y["a"])(this.activeChapter.content)},viewingChapters:function(){return this.allChapters.filter((function(t){return!t.archived}))},viewingPlans:function(){var t=this;return this.allPlans.filter((function(e){return!e.archived||t.filters.archived}))}},data:function(){return{activeChapterIndex:-1,editorContainerNode:null,editorElement:null,filters:{archived:!1},newChapter:"",scrollTo:{paragraphIndex:-1,searchTermIndex:-1},sidebar:"outline",showStats:!1}},methods:{addChapter:function(t){if(q("chapter",t)){var e={archived:!1,content:null,guid:Object(b["a"])(),title:t,topics:{}};this.$store.commit(C["a"],{chapter:e})}},getMasterTopic:function(t){return this.allTopics.find((function(e){return e.guid===t.guid}))},getReadTimeMinutes:function(t){return Math.ceil(this.getWordCount(t)/275)},getPageCount:function(t){return Math.ceil(this.getWordCount(t)/300)},getParagraphCount:function(t){return(t.match(/[\n]+/g)||[]).length},getWordCount:function(t){return(t.match(/[^\s]+/g)||[]).length},hoverChapter:function(){this.showStats=!0},isActive:function(t){return t===this.activeChapterIndex},isViewing:function(t){return!t.archived||this.filters.archived},selectChapter:function(t){-1===t&&(t=0),this.allChapters[t].archived&&!this.filters.archived&&(t=this.allChapters.indexOf(this.viewingChapters[0])),this.activeChapterIndex=t},selectMap:function(t){this.scrollTo=t},showPlan:function(t){return this.viewingPlans.includes(t)},showSection:function(t){return!t.archived||this.filters.archived},showTopic:function(t){var e=this.getMasterTopic(t);return!e||!e.archived||this.filters.archived},showWorkshop:function(t){return!t.archived||this.filters.archived},switchOutline:function(){this.sidebar="outline",Gt.cacheSet("outline")},switchPlans:function(){this.sidebar="plan",Gt.cacheSet("plan")},switchWorkshops:function(){this.sidebar="workshop",Gt.cacheSet("workshop")},unhoverChapter:function(){this.showStats=!1},updateContent:function(t){var e=t.content,n=t.contentId,i=this.allChapters.find((function(t){return t.guid===n}));i&&this.$store.commit(C["y"],{chapter:i,newContent:e})},updateSelection:function(t){this.$store.commit(Ct,t)}},mounted:function(){this.editorContainerNode=this.$refs.editorContainer,this.editorElement=this.$refs.textEditor,this.sidebar=Gt.cacheGet()||"outline";var t=this.$route.query.chapter;if(t){var e=this.allChapters.find((function(e){return e.guid===t}));e.archived&&(this.filters.archived=!0),this.selectChapter(this.allChapters.indexOf(e)||-1)}var n=this.$route.query.workshop,i=this.$route.query.workshopName;if(i&&n){this.switchWorkshops();var r=this.allWorkshops.find((function(t){return t.guid===n}));r.archived&&(this.filters.archived=!0),this.$refs.workshopList.selectWorkshopName(i),this.$refs.workshopList.selectWorkshopGuid(n)}this.$router.replace("/write")}},Ut=Kt,qt=(n("577c"),Object(f["a"])(Ut,g,w,!1,null,"0adf0965",null)),Ft=qt.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"document"},[n("div",{staticClass:"title"},[n("h1",[t._v(" "+t._s(t.documentName)+" ")])]),n("div",{staticClass:"actions"},[n("label",{staticClass:"name-label",attrs:{for:"documentNameInput"}},[t._v("Change document name:")]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newDocumentName,expression:"newDocumentName"}],staticClass:"name-input",attrs:{id:"documentNameInput",type:"text"},domProps:{value:t.newDocumentName},on:{input:function(e){e.target.composing||(t.newDocumentName=e.target.value)}}}),n("button",{staticClass:"button-green",on:{click:function(e){return t.saveDocumentName()}}},[t._v(" Save ")])])]),n("hr"),n("div",{staticClass:"actions"},[n("button",{staticClass:"button-red",on:{click:function(e){return t.deleteDocument()}}},[t._v(" Delete Document ")])])])])},Vt=[],zt=n("8fdb"),Bt={components:{},computed:{documentGuid:function(){return this.$store.state.document.currentDocument.guid},documentName:function(){return this.$store.state.document.currentDocument.name}},data:function(){return{newDocumentName:""}},methods:{deleteDocument:function(){var t=this;A()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this document? All plans, outlines, and chapters will be lost. This cannot be undone.",title:"Delete Forever?"}).then((function(e){e&&t.$store.dispatch(zt["c"],{guid:t.documentGuid})}))},saveDocumentName:function(){this.$store.commit(zt["h"],{guid:this.documentGuid,name:this.newDocumentName})}},mounted:function(){this.newDocumentName=this.documentName}},Xt=Bt,Jt=(n("3f6d"),Object(f["a"])(Xt,Ht,Vt,!1,null,"439a041e",null)),Qt=Jt.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"outliner-wrap"},[n("div",{staticClass:"outliner"},[n("div",{staticClass:"header"},[n("h1",{staticClass:"header-title"},[t._v(" Outline ")]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.archived,expression:"filters.archived"}],attrs:{id:"showArchivedCheckbox",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.archived)?t._i(t.filters.archived,null)>-1:t.filters.archived},on:{change:function(e){var n=t.filters.archived,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);i.checked?s<0&&t.$set(t.filters,"archived",n.concat([a])):s>-1&&t.$set(t.filters,"archived",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"archived",r)}}}),n("label",{attrs:{for:"showArchivedCheckbox"}},[t._v("Show Archived")])])]),n("div",{staticClass:"chips-wrap chapter-chips"},[n("h3",[t._v("Add/rearrange chapters")]),n("chips-list",{attrs:{name:"Chapter","name-prop":"title","data-array":t.allChapters,"filter-chips":t.showChapter,"is-deletable":t.isDeletable},on:{add:t.addChapter,delete:t.archiveChapter,rearrange:t.rearrangeChapter,restore:t.restoreChapter,update:t.renameChapter}})],1),n("div",{staticClass:"chips-wrap topic-chips"},[n("h3",[t._v("Add a topic to all chapters")]),n("chips-list",{attrs:{name:"Topic","name-prop":"title","data-array":t.allTopics,"filter-chips":t.showTopic,"is-deletable":t.isDeletable},on:{add:t.addTopic,delete:t.archiveTopic,rearrange:t.rearrangeTopic,restore:t.restoreTopic,update:t.renameTopic}})],1),n("hr",{staticClass:"divider"}),t.viewingChapters.length>0?n("div",{staticClass:"chapters"},[n("tabs-list",{attrs:{"active-index":t.activeChapterIndex,"data-array":t.allChapters,"filter-tabs":t.showChapter,"item-name":"Chapter"},on:{add:t.addChapter,"update:activeIndex":t.selectChapter}}),t.activeChapter?n("div",{staticClass:"chapter"},[n("div",{staticClass:"chapter-head"},[n("h2",{staticClass:"chapter-title"},[t._v(" "+t._s(t.activeChapter.title)+" ")]),n("div",{staticClass:"chapter-actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.activeChapter.archived,expression:"!activeChapter.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"chapter-action button-icon",attrs:{title:"Archive"},on:{click:function(e){return t.archiveChapter({index:t.activeChapterIndex})}}},[n("span",{staticClass:"fas fa-archive"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.activeChapter.archived,expression:"activeChapter.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"chapter-action button-icon",attrs:{title:"Un-archive"},on:{click:function(e){return t.restoreChapter({index:t.activeChapterIndex})}}},[n("span",{staticClass:"fas fa-box-open"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.activeChapter.archived,expression:"activeChapter.archived"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"chapter-action chapter-action-danger button-icon",attrs:{title:"Delete Forever"},on:{click:function(e){return t.deleteChapter({index:t.activeChapterIndex})}}},[n("span",{staticClass:"fas fa-trash"})])])]),n("topic-list",{attrs:{chapter:t.activeChapter,"filter-topics":t.showTopic,topics:t.allTopics}})],1):t._e()],1):t._e()])])},Zt=[],te={components:{ChipsList:R,TabsList:U,TopicList:gt},computed:{activeChapter:function(){return-1===this.activeChapterIndex?null:this.allChapters[this.activeChapterIndex]},allChapters:function(){return this.$store.state.chapters.chapters||[]},allTopics:function(){return this.$store.state.chapters.topics||[]},viewingChapters:function(){var t=this;return this.allChapters.filter((function(e){return!e.archived||t.filters.archived})).filter((function(e){return!t.filters.chapter||e.title.toLowerCase().includes(t.filters.chapter.toLowerCase())}))},viewingTopicsFilteredArchived:function(){var t=this;return this.allTopics.filter((function(e){return!e.archived||t.filters.archived}))},viewingTopicsFilteredTitle:function(){var t=this;return this.allTopics.filter((function(e){if(!t.filters.topic)return!0;var n=t.filters.topic.toLowerCase(),i=e.title.toLowerCase();return i.includes(n)}))}},data:function(){return{activeChapterIndex:-1,filters:{archived:!1,chapter:"",topic:""},filtersVisible:!1,helpChapterBlocksNode:null,helpChapterChipsNode:null,helpTopicChipsNode:null}},directives:{tooltip:I["a"]},methods:{addChapter:function(t){if(q("chapter",t)){var e={archived:!1,content:null,guid:Object(b["a"])(),title:t,topics:{}};this.$store.commit(C["a"],{chapter:e})}},addTopic:function(t){if(q("topic",t)){var e={archived:!1,guid:Object(b["a"])(),title:t};this.$store.commit(C["d"],{topic:e})}},archiveChapter:function(t){var e=t.index;this.$store.commit(C["f"],{chapter:this.allChapters[e]}),e!==this.activeChapterIndex||this.filters.archived||this.selectChapter(-1)},archiveTopic:function(t){var e=t.index;this.$store.commit(C["i"],{topic:this.allTopics[e]})},deleteChapter:function(t){var e=this,n=t.index;A()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this chapter? Its outline and all of its written content (from the Write page)\n               will be lost. This cannot be undone.",title:"Delete Forever?"}).then((function(t){t&&(e.$store.commit(C["j"],{chapter:e.allChapters[n]}),n===e.activeChapterIndex&&e.selectChapter(-1))}))},getMasterTopic:function(t){return this.allTopics.find((function(e){return e.guid===t.guid}))},helpClick:function(t,e){A()({content:t,title:e})},isDeletable:function(t){return!t.archived},rearrangeChapter:function(t){this.$store.commit(C["p"],{chapters:t})},rearrangeTopic:function(t){this.$store.commit(C["s"],{topics:t})},renameChapter:function(t){var e=t.index,n=t.value;q("chapter",n)&&this.$store.commit(C["x"],{chapter:this.allChapters[e],newTitle:n})},renameTopic:function(t){var e=t.index,n=t.value;if(q("topic",n)){var i=this.allTopics[e];this.$store.commit(C["D"],{topic:i,newTitle:n})}},restoreChapter:function(t){var e=t.index;this.$store.commit(C["t"],{chapter:this.allChapters[e]})},restoreTopic:function(t){var e=t.index;this.$store.commit(C["w"],{topic:this.allTopics[e]})},selectChapter:function(t){-1===t&&(t=0),this.allChapters[t].archived&&!this.filters.archived&&(t=this.allChapters.indexOf(this.viewingChapters[0])),this.activeChapterIndex=t},showChapter:function(t){return this.viewingChapters.includes(t)},showTopic:function(t){var e=this.getMasterTopic(t),n=Object(y["a"])(t.content);return this.viewingTopicsFilteredArchived.includes(e)&&(this.viewingTopicsFilteredTitle.includes(e)||n&&n.includes(this.filters.topic))},toggleFilters:function(){this.filtersVisible=!this.filtersVisible}},mounted:function(){this.helpChapterBlocksNode=this.$refs.helpChapterBlocksModal,this.helpChapterChipsNode=this.$refs.helpChapterChipsModal,this.helpTopicChipsNode=this.$refs.helpTopicChipsModal;var t=this.$route.query.chapter;if(t){var e=this.allChapters.find((function(e){return e.guid===t}));e.archived&&(this.filters.archived=!0),this.selectChapter(this.allChapters.indexOf(e))}else this.selectChapter(-1);this.$router.replace("/outline")}},ee=te,ne=(n("c16e"),n("a812"),Object(f["a"])(ee,Yt,Zt,!1,null,"23fffb5a",null)),ie=ne.exports,re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"planner"},[n("div",{staticClass:"header"},[n("h1",{staticClass:"header-title"},[t._v(" Plan ")]),n("div",{staticClass:"filters"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.archived,expression:"filters.archived"}],staticClass:"show-archived",attrs:{id:"showArchivedCheckbox",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.archived)?t._i(t.filters.archived,null)>-1:t.filters.archived},on:{change:function(e){var n=t.filters.archived,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);i.checked?s<0&&t.$set(t.filters,"archived",n.concat([a])):s>-1&&t.$set(t.filters,"archived",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"archived",r)}}}),n("label",{attrs:{for:"showArchivedCheckbox"}},[t._v("Show Archived")])])]),n("div",{staticClass:"chips-wrap plan-chips"},[t._m(0),n("chips-list",{attrs:{name:"Plan","name-prop":"title","data-array":t.allPlans,"filter-chips":t.showPlan,"is-deletable":t.isDeletable},on:{add:t.addPlan,delete:t.archivePlan,rearrange:t.rearrangePlan,restore:t.restorePlan,update:t.renamePlan}})],1),n("hr",{staticClass:"divider"}),n("plans-list",{ref:"plansList",attrs:{"filter-plans":t.showPlan,"filter-sections":t.showSection,"show-subheader":!0}})],1),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"helpPlanChipsModal",staticClass:"help"},[n("p",[t._v("This is the plan list. It's the easiest place to add, archive, restore, rename, and rearrange plans.")]),n("p",[t._v('To add a plan, type its name into the "New Plan" box and click "Add".')]),n("p",[t._v(' To archive a plan, click the "X" next to its name in the list. Archiving a plan removes it from your document without deleting it permanently. ')]),n("p",[t._v('To restore an archived plan, check the "Show Archived" box, then click the "+" next to its name in the list.')]),n("p",[t._v("To rename a plan, click the pencil icon next to its name in the list.")]),n("p",[t._v("To rearrange a plan, click and drag it to where you want it to go.")])])])])},ae=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section-title"},[n("h3",[t._v("Add/rearrange plans")])])}],se={components:{ChipsList:R,PlansList:z},computed:{allPlans:function(){return this.$store.state.chapters.plans||[]},viewingPlans:function(){var t=this;return this.allPlans.filter((function(e){return!e.archived||t.filters.archived}))}},data:function(){return{filters:{archived:!1}}},methods:{addPlan:function(t){if(q("plan",t)){var e={archived:!1,guid:Object(b["a"])(),title:t,sections:[]};this.$store.commit(C["b"],{plan:e})}},archivePlan:function(t){var e=t.index;this.$store.commit(C["g"],{plan:this.allPlans[e]}),e===this.activePlanIndex&&(this.activePlanIndex=-1)},helpClick:function(t,e){A()({content:t,title:e})},isDeletable:function(t){return!t.archived},rearrangePlan:function(t){this.$store.commit(C["q"],{plans:t})},renamePlan:function(t){var e=t.index,n=t.value;q("plan",n)&&this.$store.commit(C["z"],{plan:this.allPlans[e],newTitle:n})},restorePlan:function(t){var e=t.index;this.$store.commit(C["u"],{plan:this.allPlans[e]})},showPlan:function(t){return this.viewingPlans.includes(t)},showSection:function(t){return!t.archived||this.filters.archived}},mounted:function(){this.helpPlanChipsModal=this.$refs.helpPlanChipsModal;var t=this.$route.query.plan;if(t){var e=this.allPlans.find((function(e){return e.guid===t}));e.archived&&(this.filters.archived=!0),this.$refs.plansList.selectPlan(this.allPlans.indexOf(e))}this.$router.replace("/plan")}},oe=se,ce=(n("3ebf"),Object(f["a"])(oe,re,ae,!1,null,"4e61483b",null)),ue=ce.exports,le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"search"},[n("h1",[t._v("Search document")]),n("p",[t._v(" Enter a partial word, full word or phrase and Edward will find all your chapters, outlines, plans and workshops that match it. ")]),n("div",{staticClass:"search-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",staticClass:"search-input",attrs:{type:"text",placeholder:"Type your search term here"},domProps:{value:t.searchText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),n("button",{staticClass:"button-green",on:{click:function(e){return t.search()}}},[t._v(" Search now ")])]),n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.loading?n("div",{key:"loading",staticClass:"loading"},[n("pulse-loader")],1):n("div",{key:"results",staticClass:"results"},[t.hasResults?[n("h2",[t._v("Filter Results")]),n("div",{staticClass:"filters"},[n("div",{staticClass:"filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.showChapters,expression:"filters.showChapters"}],attrs:{id:"show-chapters",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.showChapters)?t._i(t.filters.showChapters,null)>-1:t.filters.showChapters},on:{change:function(e){var n=t.filters.showChapters,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);i.checked?s<0&&t.$set(t.filters,"showChapters",n.concat([a])):s>-1&&t.$set(t.filters,"showChapters",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"showChapters",r)}}}),n("label",{attrs:{for:"show-chapters"}},[t._v("Show Chapters")])]),n("div",{staticClass:"filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.showOutlines,expression:"filters.showOutlines"}],attrs:{id:"show-outlines",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.showOutlines)?t._i(t.filters.showOutlines,null)>-1:t.filters.showOutlines},on:{change:function(e){var n=t.filters.showOutlines,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);i.checked?s<0&&t.$set(t.filters,"showOutlines",n.concat([a])):s>-1&&t.$set(t.filters,"showOutlines",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"showOutlines",r)}}}),n("label",{attrs:{for:"show-outlines"}},[t._v("Show Outlines")])]),n("div",{staticClass:"filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.showPlans,expression:"filters.showPlans"}],attrs:{id:"show-plans",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.showPlans)?t._i(t.filters.showPlans,null)>-1:t.filters.showPlans},on:{change:function(e){var n=t.filters.showPlans,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);i.checked?s<0&&t.$set(t.filters,"showPlans",n.concat([a])):s>-1&&t.$set(t.filters,"showPlans",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"showPlans",r)}}}),n("label",{attrs:{for:"show-plans"}},[t._v("Show Plans")])]),n("div",{staticClass:"filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.showWorkshops,expression:"filters.showWorkshops"}],attrs:{id:"show-workshops",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.showWorkshops)?t._i(t.filters.showWorkshops,null)>-1:t.filters.showWorkshops},on:{change:function(e){var n=t.filters.showWorkshops,i=e.target,r=!!i.checked;if(Array.isArray(n)){var a=null,s=t._i(n,a);i.checked?s<0&&t.$set(t.filters,"showWorkshops",n.concat([a])):s>-1&&t.$set(t.filters,"showWorkshops",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"showWorkshops",r)}}}),n("label",{attrs:{for:"show-workshops"}},[t._v("Show Workshops")])])])]:t._e(),t.searched&&!t.hasResults?n("div",[n("strong",[t._v("No results found.")])]):t._e(),t.matches.chapters.length&&t.filters.showChapters?n("div",{staticClass:"result-set chapter-results"},[n("h3",[t._v("Chapters")]),t._l(t.matches.chapters,(function(e){return n("div",{key:e.guid,staticClass:"result"},[n("p",{staticClass:"result-title"},[n("router-link",{attrs:{to:"/write?chapter="+e.guid}},[n("strong",{domProps:{textContent:t._s(e.title)}}),n("button",{staticClass:"link-out"},[n("span",{staticClass:"fas fa-link"})])])],1),t._l(e._matches,(function(t){return n("div",{key:t.index},[n("match",{attrs:{match:t}})],1)}))],2)}))],2):t._e(),t.matches.outlines.length&&t.filters.showOutlines?n("div",{staticClass:"result-set outline-results"},[n("hr",{staticClass:"divider"}),n("h3",[t._v("Outlines")]),t._l(t.matches.outlines,(function(e){return n("div",{key:e.chapterGuid+e.topicGuid,staticClass:"result"},[n("p",{staticClass:"result-title"},[n("router-link",{attrs:{to:"/outline?chapter="+e.chapterGuid}},[n("strong",[t._v(t._s(e.chapterTitle)+" | "+t._s(e.topicTitle))]),n("button",{staticClass:"link-out"},[n("span",{staticClass:"fas fa-link"})])])],1),t._l(e._matches,(function(t){return n("div",{key:t.index},[n("match",{attrs:{match:t}})],1)}))],2)}))],2):t._e(),t.matches.plans.length&&t.filters.showPlans?n("div",{staticClass:"result-set plan-results"},[n("hr",{staticClass:"divider"}),n("h3",[t._v("Plans")]),t._l(t.matches.plans,(function(e){return n("div",{key:e.planGuid+e.sectionGuid,staticClass:"result"},[n("p",{staticClass:"result-title"},[n("router-link",{attrs:{to:"/plan?plan="+e.planGuid}},[n("strong",[t._v(t._s(e.planTitle)+" | "+t._s(e.sectionTitle))]),n("button",{staticClass:"link-out"},[n("span",{staticClass:"fas fa-link"})])])],1),t._l(e._matches,(function(t){return n("div",{key:t.index},[n("match",{attrs:{match:t}})],1)}))],2)}))],2):t._e(),t.matches.workshops.length&&t.filters.showWorkshops?n("div",{staticClass:"result-set workshop-results"},[n("hr",{staticClass:"divider"}),n("h3",[t._v("Workshops")]),t._l(t.matches.workshops,(function(e){return n("div",{key:e.guid,staticClass:"result"},[n("p",{staticClass:"result-title"},[n("router-link",{attrs:{to:"/write?workshopName="+e.workshopName+"&workshop="+e.guid}},[n("strong",[t._v(t._s(e.title))]),n("button",{staticClass:"link-out"},[n("span",{staticClass:"fas fa-link"})])])],1),t._l(e._matches,(function(t){return n("div",{key:t.index},[n("match",{attrs:{match:t}})],1)}))],2)}))],2):t._e()],2)])],1)])},he=[],de=(n("13d5"),n("b64b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"match"},[t.match.atHead?t._e():n("span",[t._v("...")]),n("span",{domProps:{textContent:t._s(t.formattedPre)}}),n("em",{domProps:{textContent:t._s(t.formattedQuery)}}),n("span",{domProps:{textContent:t._s(t.formattedPost)}}),t.match.atTail?t._e():n("span",[t._v("...")])])}),pe=[],fe=n("f942"),ve=n.n(fe),me=n("1686"),ge=n.n(me),we={computed:{formattedPre:function(){return ge()(this.match.pre).replace(/\n/g," ¶ ")},formattedQuery:function(){return this.match.query.replace(/\n/g," ¶ ")},formattedPost:function(){return ve()(this.match.post).replace(/\n/g," ¶ ")}},props:{match:{required:!0,type:Object}}},Ce=we,ke=(n("59e8"),Object(f["a"])(Ce,de,pe,!1,null,"63f98196",null)),ye=ke.exports,be=n("8a5d"),_e=40,Pe={components:{Match:ye,PulseLoader:be["a"]},computed:{allChapters:function(){return this.$store.state.chapters.chapters||[]},allPlans:function(){return this.$store.state.chapters.plans||[]},allTopics:function(){return this.$store.state.chapters.topics||[]},allWorkshops:function(){return this.$store.state.workshop.workshops||[]},hasResults:function(){return this.matches.chapters.length||this.matches.outlines.length||this.matches.plans.length||this.matches.workshops.length}},data:function(){return{filters:{showChapters:!0,showOutlines:!0,showPlans:!0,showWorkshops:!0},loading:!1,matches:{chapters:[],outlines:[],plans:[],workshops:[]},searched:!1,searchText:""}},methods:{getMasterTopic:function(t){return this.allTopics.find((function(e){return e.guid===t.guid}))},getMatchArray:function(t,e,n){return e.map((function(e){var i=t.slice(Math.max(e-_e,0),e),r=t.slice(e,e+n.length),a=t.slice(e+n.length,e+n.length+_e);return{atHead:e-_e<=0,atTail:e+n.length+_e>=t.length-1,pre:i,post:a,index:e,query:r}}))},getMatchingChapters:function(t){var e=this;return this.allChapters.map((function(n){var i=Object(y["a"])(n.content),r=Object(y["c"])(t,i);return n._matches=e.getMatchArray(i,r,t),n})).filter((function(e){return e._matches.length>0||e.title.toLowerCase().includes(t)}))},getMatchingOutlines:function(t){var e=this;return this.allChapters.reduce((function(n,i){for(var r in i.topics)if(Object.prototype.hasOwnProperty.call(i,r)){var a=i.topics[r],s=Object(y["a"])(a.content),o=Object(y["c"])(t,s),c=e.getMasterTopic(a);n.push({_matches:e.getMatchArray(s,o,t),chapterGuid:i.guid,chapterTitle:i.title,topicGuid:a.guid,topicTitle:c.title})}return n}),[]).filter((function(e){return e._matches.length>0||e.topicTitle.toLowerCase().includes(t)}))},getMatchingPlans:function(t){var e=this;return this.allPlans.reduce((function(n,i){return n.concat(i.sections.map((function(n){var r=Object(y["a"])(n.content),a=Object(y["c"])(t,r);return{_matches:e.getMatchArray(r,a,t),planGuid:i.guid,planTitle:i.title,sectionGuid:n.guid,sectionTitle:n.title}})))}),[]).filter((function(e){return e._matches.length>0||e.sectionTitle.toLowerCase().includes(t)}))},getMatchingWorkshops:function(t){var e=this,n=this.allWorkshops.reduce((function(n,i){n[i.guid]=n[i.guid]||{guid:i.guid,title:i.title,workshopName:i.workshopName,_matches:[]};var r=n[i.guid],a=Object(y["a"])(i.content),s=Object(y["c"])(t,a);return r._matches=r._matches.concat(e.getMatchArray(a,s,t)),n}),{});return Object.keys(n).map((function(t){return n[t]})).filter((function(e){return e._matches.length>0||e.title.toLowerCase().includes(t)}))},search:function(){this.loading=!0,this.searched=!1,this.matches.chapters=this.getMatchingChapters(this.searchText.toLowerCase()),this.matches.outlines=this.getMatchingOutlines(this.searchText.toLowerCase()),this.matches.plans=this.getMatchingPlans(this.searchText.toLowerCase()),this.matches.workshops=this.getMatchingWorkshops(this.searchText.toLowerCase()),this.searched=!0,this.loading=!1}},mounted:function(){this.$refs.searchInput.focus()}},Te=Pe,Oe=(n("9718"),Object(f["a"])(Te,le,he,!1,null,"d0041b20",null)),Se=Oe.exports,Ee=n("bc3a"),xe=n.n(Ee),Ae=function(t){return"/api/user/".concat(t)},Ie={simpleGet:function(t){return xe.a.get(t).then((function(t){return t.data}))},simplePost:function(t,e){return xe.a.post(t,e).then((function(t){return t.data}))},getUser:function(){return this.simpleGet(Ae("current"))},logOut:function(){return this.simpleGet(Ae("logout"))}},Ne=Ie,De=n("cb46");i["a"].use(u["a"]);var We=function(){return Ne.getUser().then((function(t){if(t.isPremium)return!0;throw new Error("Can't access this route with a Dreamer account.")}))},Re=function(){return De["a"].isOnline().then((function(){return!0}),(function(){throw new Error("Can't access this route while offline.")}))},je=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,n,i){var r=e.map((function(t){return t()}));Promise.all(r).then((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.filter((function(t){return!0!==t}));if(0===r.length)return i();var a=e.filter((function(t){return"object"===Object(c["a"])(t)}))[0];return i(a||new Error("Navigation was not allowed."))}),(function(t){return i(t)}))}},$e=new u["a"]({routes:[{path:"/",redirect:"/write"},{path:"/plan",name:"Plan",component:ue},{path:"/outline",name:"Outline",component:ie},{path:"/write",name:"Write",component:Ft},{path:"/analyze",name:"Analyze",component:function(){return n.e("analyser").then(n.bind(null,"d522"))},beforeEnter:je(Re)},{path:"/export",name:"Export",component:function(){return n.e("exporter").then(n.bind(null,"3bd7"))},beforeEnter:je(Re)},{path:"/documentEdit",name:"Document Edit",component:Qt},{path:"/search",name:"Search",component:Se},{path:"/workshop/free-write",name:"Free Write",component:function(){return n.e("w-free-write").then(n.bind(null,"30e1"))},beforeEnter:je(Re,We)},{path:"/workshop/novel-quickstart",name:"Novel Quickstart",component:function(){return n.e("w-novel-quickstart").then(n.bind(null,"5803"))},beforeEnter:je(Re,We)},{path:"/workshop/unblock",name:"Writer's Unblock",component:function(){return n.e("w-writers-unblock").then(n.bind(null,"b77a"))},beforeEnter:je(Re,We)},{path:"/workshop/plot",name:"Plot Workshop",component:function(){return n.e("w-plot-workshop").then(n.bind(null,"0e6c"))},beforeEnter:je(Re,We)},{path:"/workshop/setting",name:"Setting Workshop",component:function(){return n.e("w-setting-workshop").then(n.bind(null,"1471"))},beforeEnter:je(Re,We)},{path:"*",name:"Page does not exist",component:m}]}),Le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("idle-watcher",[i("transition",{attrs:{name:"wrapper",mode:"out-in"}},[t.loaded&&t.currentDocument&&t.currentDocument.guid?i("div",{key:"app",staticClass:"app",attrs:{id:"app"}},[i("document-menu"),i("div",{staticClass:"app-header"},[i("div",{staticClass:"logo-wrap"},[i("img",{staticClass:"logo",attrs:{src:n("c57b")}})]),i("div",{staticClass:"app-header--menu"},[i("main-menu")],1)]),i("div",{staticClass:"page"},[i("transition",{attrs:{name:"wrapper",mode:"out-in"}},[i("router-view")],1)],1)],1):t.loaded?i("div",{key:"wizard",staticClass:"page"},[i("wizard")],1):i("div",{key:"loading",staticClass:"loading"},[i("img",{staticClass:"logo",attrs:{src:n("0555")}}),i("pulse-loader")],1)])],1)},Me=[],Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu"},[n("div",{staticClass:"menu-items"},[n("document-picker")],1),n("div",{staticClass:"menu-items"},[n("router-link",{attrs:{to:"/documentEdit"}},[n("button",{staticClass:"menu-button"},[t._v(" Edit "),n("div",{staticClass:"fas fa-edit"})])]),n("router-link",{attrs:{to:"/export"}},[n("button",{staticClass:"menu-button mobile-hide",attrs:{disabled:!t.isOnline}},[t._v(" Download / Upload "),n("div",{staticClass:"fas fa-download"})])]),n("button",{staticClass:"menu-button",attrs:{disabled:!t.isOnline},on:{click:function(e){return t.showWizard()}}},[t._v(" New "),n("div",{staticClass:"fas fa-plus"})])],1),n("div",{staticClass:"spacer"}),t.isLimited?n("div",{staticClass:"menu-items mobile-hide"},[n("div",[t._v("Keep your work safe.")]),n("a",{attrs:{href:"/auth#/account"}},[n("button",{staticClass:"menu-button upgrade-button",attrs:{disabled:!t.isOnline}},[t._v("Upgrade to Author")])])]):t._e(),t.isLimited||t.isGold?t._e():n("div",{staticClass:"menu-items mobile-hide"},[n("div",[t._v("Need more space?")]),n("a",{attrs:{href:"/auth#/account"}},[n("button",{staticClass:"menu-button upgrade-button",attrs:{disabled:!t.isOnline}},[t._v("Upgrade to Bestseller")])])])])},Ke=[],Ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{directives:[{name:"model",rawName:"v-model",value:t.documentValue,expression:"documentValue"}],staticClass:"document-dropdown",attrs:{disabled:!t.isOnline},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.documentValue=e.target.multiple?n:n[0]},t.changeDocument]}},[t.currentDocument?t._e():n("option",{attrs:{value:""}},[t._v(" No document selected ")]),t._l(t.allDocuments,(function(e){return n("option",{key:e.guid,domProps:{value:e.guid}},[t._v(" "+t._s(e.name)+" ")])}))],2)},qe=[],Fe=n("86e1"),He={computed:{allDocuments:function(){return this.$store.state.document.ownedDocuments},currentDocument:function(){return this.$store.state.document.currentDocument},isOnline:function(){return this.$store.state.status.status!==Fe["e"].OFFLINE}},data:function(){return{documentValue:""}},mounted:function(){this.documentValue=this.currentDocument?this.currentDocument.guid:""},methods:{changeDocument:function(){var t=this;De["a"].isOnline().then((function(){var e=t.allDocuments.find((function(e){return e.guid===t.documentValue}));!e||t.currentDocument&&e.guid===t.currentDocument.guid||t.$store.dispatch(zt["b"],e)}),(function(){t.$store.commit(Fe["c"]),t.documentValue=t.currentDocument.guid}))}}},Ve=He,ze=(n("25ec"),Object(f["a"])(Ve,Ue,qe,!1,null,"7c6cc11b",null)),Be=ze.exports,Xe={components:{DocumentPicker:Be},computed:{isOnline:function(){return this.$store.state.status.status!==Fe["e"].OFFLINE},isLimited:function(){return"LIMITED"===this.$store.state.user.user.accountType.name},isGold:function(){return"GOLD"===this.$store.state.user.user.accountType.name}},data:function(){return{}},methods:{showWizard:function(){this.$store.dispatch(zt["g"])}}},Je=Xe,Qe=(n("7c2b"),Object(f["a"])(Je,Ge,Ke,!1,null,"d0d7d372",null)),Ye=Qe.exports,Ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrap",on:{"&click":function(e){return t.resetIdleTime()},"&mousemove":function(e){return t.resetIdleTime()},"&scroll":function(e){return t.resetIdleTime()},"&keypress":function(e){return t.resetIdleTime()}}},[t._t("default"),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"idleModal",staticClass:"idle-page"},[t._m(0)])])],2)},tn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"idle-message"},[n("h3",[t._v(" This page has been idle for over 30 minutes. ")]),n("div",[t._v(" If you've edited your work on another computer, you should reload the page in order to get your latest content. Otherwise, you may lose your changes. ")])])}],en={computed:{isPremium:function(){return this.user.isPremium},user:function(){return this.$store.state.user.user}},data:function(){return{idleTimeout:null}},methods:{backToApp:function(){this.resetIdleTime()},goIdle:function(){this.isPremium&&this.showIdlePage()},reload:function(){window.location.reload()},resetIdleTime:function(){if(this.isPremium){this.idleTimeout&&window.clearTimeout(this.idleTimeout);var t=18e5;this.idleTimeout=window.setTimeout(this.goIdle,t)}},showIdlePage:function(){var t=this;A()({content:this.$refs.idleModal,className:"idle-modal",closeOnClickOutside:!1,buttons:{cancel:"Back to the app",confirm:{text:"Reload",className:"button-green"}}}).then((function(e){e?t.reload():t.resetIdleTime()}))}},mounted:function(){this.resetIdleTime()}},nn=en,rn=(n("55a0"),Object(f["a"])(nn,Ze,tn,!1,null,"98693c92",null)),an=rn.exports,sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-menu"},[n("div",{staticStyle:{display:"none"}},[n("offline-storage")],1),n("div",{staticClass:"routes"},[t._l(t.routes,(function(e){return[n("router-link",{key:e.name,attrs:{to:e.location}},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"main-menu--button",attrs:{title:e.tooltip}},[n("img",{staticClass:"main-menu--icon",attrs:{src:"img/"+e.icon}}),n("div",[t._v(t._s(e.name))])])])]}))],2),n("div",{staticClass:"extra"},[n("status-signal"),n("button",{ref:"moreButton",staticClass:"main-menu--button"},[n("img",{staticClass:"main-menu--icon",attrs:{src:"img/icons_more-white.png"}}),n("div",[t._v("More")]),n("div",{ref:"moreMenu",staticStyle:{display:"none"}},[n("div",{staticClass:"more-menu"},[n("router-link",{staticClass:"disguised",attrs:{to:"/search"}},[n("button",{staticClass:"more-item"},[n("span",{staticClass:"more-icon fas fa-search"}),t._v(" Search ")])]),n("button",{staticClass:"more-item",attrs:{disabled:!t.isOnline},on:{click:t.showWorkshops}},[n("span",{staticClass:"more-icon fas fa-hammer"}),t._v(" Workshops ")])],1)])]),n("button",{ref:"accountButton",staticClass:"main-menu--button"},[n("img",{staticClass:"main-menu--icon",attrs:{src:"img/icons_account-white.png"}}),n("div",[t._v("Account")]),n("div",{ref:"accountMenu",staticStyle:{display:"none"}},[n("div",{staticClass:"account-menu"},[n("div",{staticClass:"account-email"},[t._v(" "+t._s(t.email)+" ")]),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"account-type",attrs:{title:t.accountType.description}},[t._v(" "+t._s(t.accountType.displayName)+" ")]),n("div",{staticClass:"account-actions"},[t.isOnline?n("a",{attrs:{href:"/auth#/account"}},[n("button",{staticClass:"button-green account-action"},[t._v(" Account Settings ")])]):t._e(),n("div",[n("button",{staticClass:"account-action",on:{click:function(e){return t.logOut()}}},[t._v(" Log Out ")])])])])])])],1),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"workshopsModal",staticClass:"workshops"},[n("h1",{staticClass:"workshop-modal-title"},[t._v(" Select a workshop ")]),t.isPremium?t._e():n("p",{staticClass:"warn"},[t._v(" Workshops are only available for Author accounts. ")]),t._l(t.workshops,(function(e){return n("div",{key:e.name,on:{click:function(n){return t.setSelectedWorkshop(e)}}},[n("div",{staticClass:"workshop",class:{restricted:!t.isPremium||!e.available,selected:t.selectedWorkshop===e}},[e.available?t._e():n("div",{staticClass:"workshop-restricted"},[t._v(" COMING SOON ")]),e.available&&!t.isPremium?n("div",{staticClass:"workshop-restricted"},[t._v(" AUTHORS ONLY ")]):t._e(),n("div",{staticClass:"workshop-details"},[n("div",{staticClass:"workshop-name"},[t._v(" "+t._s(e.displayName)+" ")]),n("div",{staticClass:"workshop-description"},[t._v(" "+t._s(e.description)+" ")])])])])}))],2)])])},on=[],cn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{display:"none"}},[n("div",{ref:"chromePermissionModal",staticClass:"offline-storage"},[n("p",[t._v(" Edward will work even when you don't have an Internet connection. To avoid data loss when offline, you need to grant app-level permissions on this device, including push notifications. ")]),n("p",[t._v(" Do you want to allow this? ")])])]),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"standardPermissionModal",staticClass:"offline-storage"},[n("p",[t._v(" Edward will work even when you don't have an Internet connection. To avoid data loss when offline, you need to give permission to store files on your system. ")]),n("p",[t._v(" Do you want to allow this? ")])])]),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"permissionFailedModal",staticClass:"offline-storage"},[n("p",[t._v(" Failed to get the required permissions. Edward may still work offline, but this could result in data loss. ")])])])])},un=[],ln=n("4a35"),hn=Object(ln["detect"])(),dn=new k["b"]("OFFLINE_MODAL_SEEN");function pn(){return new Promise((function(t,e){var n=Notification.requestPermission((function(e){t(e)}));n&&n.then(t,e)})).then((function(t){if("granted"!==t)throw new Error("Push notification permission was not granted.")}))}var fn,vn,mn,gn={computed:{isPremium:function(){return this.$store.state.user.user.isPremium}},data:function(){return{allowsOffline:!0}},methods:{checkOfflineStorage:function(){var t=this;navigator.storage&&navigator.storage.persisted&&navigator.storage.persisted().then((function(e){t.allowsOffline=e;var n=dn.cacheGet();n||!t.isPremium||e||t.promptForPermission()}))},chromePrompt:function(){var t=this;A()({content:this.$refs.chromePermissionModal,title:"Offline Permissions",buttons:{cancel:"No",confirm:"Yes"}}).then((function(e){dn.cacheSet(!0),e?pn().then((function(){return navigator.storage.persist().then((function(e){if(t.allowsOffline=e,!e)throw new Error("Could not obtain persistent storage permissions.")}))}),(function(){t.permissionFailed()})):t.allowsOffline=!1}))},permissionFailed:function(){A()({content:this.$refs.permissionFailedModal,title:"Permission not obtained",icon:"error"})},promptForPermission:function(){return hn&&"chrome"===hn.name?this.chromePrompt():this.standardPrompt()},standardPrompt:function(){var t=this;A()({content:this.$refs.standardPermissionModal,title:"Offline Permissions",buttons:{cancel:"No",confirm:"Yes"}}).then((function(e){dn.cacheSet(!0),e?navigator.storage.persist().then((function(e){t.allowsOffline=e,e||t.permissionFailed()})):t.allowsOffline=!1}))}},mounted:function(){this.checkOfflineStorage()}},wn=gn,Cn=Object(f["a"])(wn,cn,un,!1,null,"0a1b6efd",null),kn=Cn.exports,yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isDemo?t._e():n("div",{staticClass:"status-wrap"},[n("div",{staticClass:"status"},[n("div",{staticClass:"status-saving",class:{show:t.isSaving}},[n("span",{staticClass:"mobile-xs-hide"},[t._v(" Saving ")]),t._v(" ... ")]),n("div",{staticClass:"status-saved",class:{show:!t.isSaving&&t.saved}},[n("span",{staticClass:"mobile-xs-hide"},[t._v(" Saved ")]),n("span",{domProps:{innerHTML:t._s(t.savedIcon)}})]),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{enabled:!t.isSaving&&t.saveError},expression:"{ enabled: !isSaving && saveError }"}],staticClass:"status-error",class:{show:!t.isSaving&&t.saveError},attrs:{title:t.saveErrorText}},[n("span",{staticClass:"mobile-xs-hide"},[t._v(" Error ")]),n("span",{domProps:{innerHTML:t._s(t.errorIcon)}})]),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{enabled:!t.isSaving&&t.offline},expression:"{ enabled: !isSaving && offline }"}],ref:"offlineStatus",staticClass:"status-offline",class:{show:!t.isSaving&&t.offline},attrs:{title:t.offlineText}},[n("span",{staticClass:"mobile-xs-hide"},[t._v(" Offline ")]),n("span",{domProps:{innerHTML:t._s(t.offlineIcon)}})])])])},bn=[],_n={created:function(){this.checkOffline(),fn=setInterval(this.checkOffline,15e3)},beforeDestroy:function(){clearInterval(fn)},computed:{accountType:function(){return this.$store.state.user.user.accountType||{}},isDemo:function(){return"DEMO"===this.accountType.name},offline:function(){return this.$store.state.status.status===Fe["e"].OFFLINE},saved:function(){return this.$store.state.status.status===Fe["e"].SAVED},saving:function(){return this.$store.state.status.status===Fe["e"].SAVING},saveError:function(){return this.$store.state.status.status===Fe["e"].ERROR}},data:function(){return{errorIcon:Tt.a.alert.toSVG({height:18,width:18}),isSaving:!1,offlineIcon:Tt.a.plug.toSVG({height:18,width:18}),offlineText:"No internet connection is available. Your work is saved locally. To avoid losing work, don't edit this document on any other device until the connection is restored.",saveErrorText:"An error has occurred. Your work may not be saved.",savedIcon:Tt.a.check.toSVG({height:18,width:18}),savingDebouncer:window.setTimeout((function(){}))}},directives:{tooltip:I["a"]},methods:{checkOffline:function(){var t=this;De["a"].isOnline().then((function(){t.$store.commit(Fe["a"])}),(function(){t.$store.commit(Fe["c"])}))}},watch:{offline:function(t,e){if(t!==e&&t){var n=this.$refs.offlineStatus;n._tippy?setTimeout((function(){n._tippy.show()}),1e3):console.warn("Expected a Tippy.js instance on statusSignal")}},saving:function(t){var e=this;t&&(this.isSaving=!0),clearTimeout(this.savingDebouncer),this.savingDebouncer=window.setTimeout((function(){e.isSaving=e.saving}),500)}}},Pn=_n,Tn=(n("3330"),Object(f["a"])(Pn,yn,bn,!1,null,"37cef718",null)),On=Tn.exports,Sn=n("d952"),En={components:{OfflineStorage:kn,StatusSignal:On},computed:{accountType:function(){return this.$store.state.user.user.accountType||{}},email:function(){return this.$store.state.user.user.email||""},isOnline:function(){return this.$store.state.status.status!==Fe["e"].OFFLINE},isPremium:function(){return this.$store.state.user.user.isPremium}},data:function(){return{routes:[{icon:"icons_outline-white.png",location:"/plan",name:"Plan",tooltip:"Create book-level notes."},{icon:"icons_write-white.png",location:"/write",name:"Write",tooltip:"Write your content."},{icon:"icons_plan-white.png",location:"/outline",name:"Outline",tooltip:"Create chapters and chapter-level notes."}],selectedWorkshop:null,toolsTooltip:"Workshop your novel with free or prompted writing exercises.",workshops:Object.keys(Rt["a"]).map((function(t){return Rt["a"][t]}))}},directives:{tooltip:I["a"]},mounted:function(){Object(Sn["a"])(this.$refs.moreButton,{arrow:!0,content:this.$refs.moreMenu.firstChild,distance:10,interactive:!0,placement:"bottom",theme:"light nopadding",trigger:"click"}),Object(Sn["a"])(this.$refs.accountButton,{arrow:!0,content:this.$refs.accountMenu.firstChild,distance:10,interactive:!0,placement:"bottom",theme:"light nopadding",trigger:"click"})},methods:{showWorkshops:function(){var t=this;this.isPremium&&!this.selectedWorkshop&&(this.selectedWorkshop=this.workshops[0]),A()({content:this.$refs.workshopsModal,className:"workshop-modal",buttons:{cancel:!0,confirm:!!this.isPremium&&{text:"Begin",className:"button-green"}}}).then((function(e){e&&t.startWorkshop(t.selectedWorkshop)}))},setSelectedWorkshop:function(t){this.selectedWorkshop=t},startWorkshop:function(t){this.isPremium&&t.available&&(A.a.close(),this.$router.push(t.route))},logOut:function(){Ne.logOut().then((function(){window.location.href="/auth"}),(function(){A()({icon:"error",text:"Sorry, logout failed. If security is a concern, please clear your cookies and other browsing data and close your browser."})}))}}},xn=En,An=(n("3e44"),n("84e6"),Object(f["a"])(xn,sn,on,!1,null,"456d0a6d",null)),In=An.exports,Nn="COMMIT_NEW_EMAIL",Dn="SET_DEFAULT_USER",Wn="SET_USER",Rn="SET_USER_PROMISE",jn="SET_USER_EMAIL",$n="SET_USER_PASSWORD",Ln={accountType:{description:"Either your internet or our servers are down right now. Any work you do may be lost.",displayName:"Connectivity issues",name:"ERROR"},email:"ERROR",isPremium:!1,verified:!0};function Mn(t){window.Raven&&"function"===typeof window.Raven.setUserContext&&window.Raven.setUserContext(t)}var Gn={state:{user:{},userPromise:new Promise((function(t){mn=t}))},actions:Object(wt["a"])({},jn,(function(t,e){var n=t.commit,i=e.email;return n(Nn,{email:i}),Ne.updateEmail(i)})),mutations:(vn={},Object(wt["a"])(vn,Nn,(function(t,e){var n=e.email;t.user.email=n})),Object(wt["a"])(vn,Dn,(function(t){t.user=Ln,Mn()})),Object(wt["a"])(vn,Wn,(function(t,e){t.user=e,Mn(e)})),Object(wt["a"])(vn,Rn,(function(t,e){e.then((function(t){mn(t)}),(function(t){console.error(t),mn(null,t)}))})),Object(wt["a"])(vn,$n,(function(t,e){var n=e.password;Ne.updatePassword(n)})),vn)},Kn=Gn,Un=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"container"},[t._m(0),n("div",{staticClass:"content"},[t.hasDocuments?t._e():n("div",[n("p",[t._v("You haven't created any documents yet.")])]),t.hasDocuments?n("div",[n("h3",[t._v("Choose a saved document:")]),n("div",{staticClass:"document-picker"},[n("document-picker")],1)]):t._e()]),n("div",{staticClass:"content"},[t._m(1),n("div",{staticClass:"types"},t._l(t.documentTypes,(function(e){return n("button",{key:e.name,staticClass:"type",class:{selected:e===t.selectedType},on:{click:function(n){return t.selectDocument(e)}}},[n("div",{staticClass:"type-img",domProps:{innerHTML:t._s(e.svg)}}),n("div",[t._v(t._s(e.name))])])})),0),t.selectedType?[n("div",{staticClass:"title"},[n("label",{attrs:{for:"new-document-title"}},[t._v("Title")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{id:"new-document-title",placeholder:"My "+t.selectedType.name},domProps:{value:t.title},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createDocument()},input:function(e){e.target.composing||(t.title=e.target.value)}}})]),n("div",{staticClass:"actions"},[t.saving?n("pulse-loader"):t._e(),t.saving?t._e():n("button",{staticClass:"button-green",attrs:{disabled:!t.title},on:{click:function(e){return t.createDocument()}}},[t._v(" Create ")]),t.error?n("p",{staticClass:"error"},[t._v(" That didn't work. Please try again. ")]):t._e()],1)]:t._e()],2)])])},qn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("h2",[t._v("Welcome to Edward.")]),n("p",[t._v(" New here? "),n("a",{attrs:{target:"_blank",href:"https://www.youtube.com/watch?v=OvERL5CPPXM"}},[t._v("Watch the introductory video.")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("Create a new document:")])])}],Fn=function(t,e,n,i,r){return{name:t,svg:e,plans:n,chapters:i,topics:r}},Hn=Fn("Novel",'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path d="M23 5v13.883l-1 .117v-16c-3.895.119-7.505.762-10.002 2.316-2.496-1.554-6.102-2.197-9.998-2.316v16l-1-.117v-13.883h-1v15h9.057c1.479 0 1.641 1 2.941 1 1.304 0 1.461-1 2.942-1h9.06v-15h-1zm-12 13.645c-1.946-.772-4.137-1.269-7-1.484v-12.051c2.352.197 4.996.675 7 1.922v11.613zm9-1.484c-2.863.215-5.054.712-7 1.484v-11.613c2.004-1.247 4.648-1.725 7-1.922v12.051z"/></svg>',["Synopsis","Plot","Characters","Settings","Ideas"],["Introduction","Chapter 1"],["Events","Scenes","Conversations"]),Vn=Fn("Essay",'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path d="M21.155 8.64c-.909 1.519-2.327 3.067-4.097 3.004-.413.706-.852 1.677-1.339 2.803l-1.312.553c.936-2.343 2.231-4.961 3.698-6.994-.67.529-1.746 1.637-2.662 2.783-1.098-1.828-.3-3.691.973-5.179.021.641.359 1.196.601 1.475-.087-.53-.114-1.489.195-2.351.718-.732 1.364-1.271 2.113-1.76-.083.478.08 1.026.262 1.361.024-.49.224-1.43.521-1.84.924-.727 2.332-1.373 3.892-1.495-.081.973-.436 2.575-1.024 3.604-.515.404-1.221.68-1.791.833.493.089 1.031.077 1.494-.001-.269.743-.552 1.428-.998 2.276-.679.468-1.578.732-2.203.825.46.187 1.272.245 1.677.103zm-13.841 3.805l.645.781 4.773-2.791-.668-.768-4.75 2.778zm6.96-.238l-.668-.767-4.805 2.808.645.781 4.828-2.822zm4.679.007c-.421.203-.851.341-1.286.398-.12.231-.246.494-.377.773l.298.342c.623.692.459 1.704-.376 2.239-.773.497-5.341 3.376-6.386 4.035-.074-.721-.358-1.391-.826-1.948-.469-.557-6.115-7.376-7.523-9.178-.469-.6-.575-1.245-.295-1.816.268-.549.842-.918 1.43-.918.919 0 1.408.655 1.549 1.215.16.641-.035 1.231-.623 1.685l1.329 1.624 7.796-4.446c1.422-1.051 1.822-2.991.93-4.513-.618-1.053-1.759-1.706-2.978-1.706-1.188 0-.793-.016-9.565 4.475-1.234.591-2.05 1.787-2.05 3.202 0 .87.308 1.756.889 2.487 1.427 1.794 7.561 9.185 7.616 9.257.371.493.427 1.119.15 1.673-.277.555-.812.886-1.429.886-.919 0-1.408-.655-1.549-1.216-.156-.629.012-1.208.604-1.654l-1.277-1.545c-.822.665-1.277 1.496-1.377 2.442-.232 2.205 1.525 3.993 3.613 3.993.596 0 1.311-.177 1.841-.51l9.427-5.946c.957-.664 1.492-1.781 1.492-2.897 0-.745-.24-1.454-.688-2.003l-.359-.43zm-7.933-10.062c.188-.087.398-.134.609-.134.532 0 .997.281 1.243.752.312.596.226 1.469-.548 1.912l-5.097 2.888c-.051-1.089-.579-2.081-1.455-2.732l5.248-2.686zm2.097 13.383l.361-.905.249-.609-3.449 2.017.645.781 2.194-1.284z"/></svg>',["Thesis Statement","Abstract","Research Notes","Ideas"],["Introduction","Part 1","Part 2","Part 3","Conclusion"],["Arguments","Counter-arguments","Citations"]),zn=Fn("Script",'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path d="M22 1v2h-2v-2h-2v4h-12v-4h-2v2h-2v-2h-2v22h2v-2h2v2h2v-4h12v4h2v-2h2v2h2v-22h-2zm-18 18h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2zm14 9h-12v-8h12v8zm4 3h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2z"/></svg>',["Synopsis","Plot","Dramatis Personae","Settings","Ideas"],["Opening","First Act","Second Act","Third Act","Denouement"],["Events","Scenes"]),Bn=Fn("Blank",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15 2v5h5v15h-16v-20h11zm1-2h-14v24h20v-18l-6-6z"/></svg>',[],["Chapter 1"],[]),Xn=[Hn,Vn,zn,Bn],Jn=Xn,Qn={components:{DocumentPicker:Be,PulseLoader:be["a"]},computed:{hasDocuments:function(){return this.$store.state.document.ownedDocuments.length>0},isPremium:function(){return this.$store.state.user.user.isPremium}},data:function(){return{documentTypes:Jn,error:!1,saving:!1,selectedType:null,title:""}},methods:{createDocument:function(){var t=this,e=this.selectedType,n=this.title;if(e&&n){var i={guid:Object(b["a"])(),name:n};this.saving=!0,this.error=!1,this.$store.dispatch(zt["f"],{document:i,type:e}).then((function(){t.saving=!1}),(function(){t.error=!0,t.saving=!1}))}},selectDocument:function(t){this.selectedType=t}}},Yn=Qn,Zn=(n("163e"),Object(f["a"])(Yn,Un,qn,!1,null,"14c71065",null)),ti=Zn.exports,ei=new k["b"]("CURRENT_USER"),ni={beforeCreate:function(){var t=this,e=Ne.getUser(),n=e.then((function(e){if(e.verified)return ei.cacheSet(e),t.$store.commit(Wn,e),e;window.location.href="/auth#/verification"}),(function(){var e=ei.cacheGet();return e?(t.$store.commit(Wn,e),e):(t.$store.commit(Dn),t.$store.state.user.user)}));this.$store.commit(Rn,n)},created:function(){var t=this;this.$store.dispatch(zt["d"]).then((function(){t.loaded=!0}),(function(e){console.error(e),t.loaded=!0}));var e=null;this.$router.beforeEach((function(n,i,r){clearTimeout(e),e=setTimeout((function(){t.loaded=!1}),800),r()})),this.$router.afterEach((function(){clearTimeout(e),t.loaded=!0})),this.$router.onError((function(){clearTimeout(e),t.loaded=!0}))},components:{DocumentMenu:Ye,IdleWatcher:an,MainMenu:In,PulseLoader:be["a"],Wizard:ti},computed:{currentDocument:function(){return this.$store.state.document.currentDocument}},data:function(){return{loaded:!1}}},ii=ni,ri=(n("8ef8"),Object(f["a"])(ii,Le,Me,!1,null,"c70852e8",null)),ai=ri.exports,si=(n("f8fb"),n("52df"),n("1d15"),n("a589"),n("2f62")),oi=n("5145"),ci={addDocument:[zt["a"]],deleteChapter:[C["j"]],deleteDocument:[zt["e"]],deletePlan:[C["k"]],deleteSection:[C["l"]],deleteTopic:[C["m"]],deleteWorkshop:[Nt["c"]],rearrangeChapter:[C["p"]],rearrangePlan:[C["q"]],rearrangeSection:[C["r"]],rearrangeTopic:[C["s"]],updateChapter:[C["a"],C["e"],C["f"],C["t"],C["x"],C["y"],C["E"]],updateDocument:[zt["h"]],updatePlan:[C["b"],C["g"],C["u"],C["z"]],updateSection:[C["c"],C["h"],C["v"],C["A"],C["B"],C["C"]],updateTopic:[C["d"],C["i"],C["w"],C["D"]],updateWorkshop:[Nt["a"],Nt["b"],Nt["f"]],updateWorkshops:[Nt["g"]]},ui=null,li=null,hi=function(){return ui||(ui=Y()((function(){var t;(t=li).updateChapter.apply(t,arguments)}),50)),ui},di=function(t){t.subscribe((function(t,e){e.user.userPromise.then((function(n){Object(oi["a"])(n).then((function(n){li=n,pi(t,e,n,hi())}))}))}))};function pi(t,e,n,i){var r=t.type,a=t.payload,s=e.document.currentDocument&&e.document.currentDocument.guid;ci.addDocument.includes(r)?n.addDocument(a):ci.deleteDocument.includes(r)?n.deleteDocument(a.guid):ci.updateDocument.includes(r)?n.updateDocument(a):s&&(ci.deleteChapter.includes(r)?n.deleteChapter(s,a.chapter.guid):ci.deletePlan.includes(r)?n.deletePlan(s,a.plan.guid):ci.deleteSection.includes(r)?n.deleteSection(s,a.plan.guid,a.section.guid):ci.deleteTopic.includes(r)?n.deleteTopic(s,a.topic.guid):ci.deleteWorkshop.includes(r)?n.deleteWorkshop(s,a.workshop.guid):ci.rearrangeChapter.includes(r)?n.arrangeChapters(s,a.chapters.map((function(t){return t.guid}))):ci.rearrangePlan.includes(r)?n.arrangePlans(s,a.plans.map((function(t){return t.guid}))):ci.rearrangeSection.includes(r)?n.arrangeSections(s,a.plan.guid,a.sections.map((function(t){return t.guid}))):ci.rearrangeTopic.includes(r)?n.arrangeTopics(s,a.topics.map((function(t){return t.guid}))):ci.updateChapter.includes(r)?i(s,a.chapter.guid,a.chapter):ci.updatePlan.includes(r)?n.updatePlan(s,a.plan.guid,a.plan):ci.updateSection.includes(r)?n.updateSection(s,a.plan.guid,a.section.guid,a.section):ci.updateTopic.includes(r)?n.updateTopic(s,a.topic.guid,a.topic):(ci.updateWorkshop.includes(r)&&n.updateWorkshops(s,[a.workshop]),ci.updateWorkshops.includes(r)&&n.updateWorkshops(s,a.workshopUpdates.map((function(t){return t.workshop})))))}i["a"].use(si["a"]);var fi=new si["a"].Store({modules:{composer:yt,chapters:C["F"],document:zt["i"],status:Fe["f"],user:Kn,workshop:Nt["h"]},plugins:[di]}),vi=fi;window&&!0===window.isProd&&(a.a.config("https://1deaeecd96244297ad475854be0d5502@sentry.io/540818").addPlugin(o.a,i["a"]).install(),window.Raven=a.a),i["a"].config.productionTip=!1,"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js").then((function(t){console.log("SW registered: ",t)})).catch((function(t){console.log("SW registration failed: ",t)}))}));e["default"]=new i["a"]({el:"#app",components:{App:ai},router:$e,store:vi,render:function(t){return t("App")}})},"163e":function(t,e,n){"use strict";var i=n("c394"),r=n.n(i);r.a},"1a78":function(t,e,n){},"1c03":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{ref:"container",staticClass:"editor"},[n("div",{ref:"editor",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.emitDone(e):null}}})]),t.showFullScreen?n("div",[n("quill-full-screen",{attrs:{content:t.content,"content-id":t.contentId},on:{close:function(e){return t.hideFullScreen()},"update:content":t.emitFullscreenContent,"update:selection":t.emitSelection}})],1):t._e()])},r=[],a=(n("4160"),n("4d63"),n("ac1f"),n("25f0"),n("159b"),n("3835")),s=(n("99af"),n("9339")),o=n.n(s),c=(n("8096"),[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote",{list:"ordered"},{list:"bullet"},"clean"]]),u=["header","size","bold","italic","underline","strike","list","blockquote"],l=function(t,e,n,i){var r=[].concat(c),a={};i&&(r.push(["fullscreen"]),a.fullscreen=i);var s=new o.a(t,{bounds:n,formats:u,modules:{toolbar:{container:r,handlers:a}},placeholder:e,theme:"snow"});if(i){var l=n.querySelector(".ql-fullscreen");l.innerHTML='<div class="fas fa-expand-arrows-alt"></div>'}return s},h=l,d=n("b047"),p=n.n(d),f=n("a318"),v=n.n(f),m=n("63ea"),g=n.n(m),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"full-screen-wrap full-screen"},[n("div",{staticClass:"actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.isWideView,expression:"!isWideView"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"action wide-view",attrs:{title:"Wide view"},domProps:{innerHTML:t._s(t.wideSvg)},on:{click:function(e){return t.showWideView()}}}),n("button",{directives:[{name:"show",rawName:"v-show",value:t.isWideView,expression:"isWideView"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"action narrow-view",attrs:{title:"Book-width view"},domProps:{innerHTML:t._s(t.narrowSvg)},on:{click:function(e){return t.showNarrowView()}}}),n("button",{staticClass:"action close",domProps:{innerHTML:t._s(t.exitSvg)},on:{click:function(e){return t.close()}}})]),n("div",{ref:"container",staticClass:"container",class:{wide:t.isWideView}},[n("div",{ref:"editor",staticClass:"editor"})])])},C=[],k=n("7f24"),y=n("d884"),b=n.n(y),_=n("efa2"),P=new k["b"]("FULL_SCREEN_EDITOR_WIDTH"),T={beforeDestroy:function(){var t=this;this.handlers.forEach((function(e){var n=Object(a["a"])(e,2),i=n[0],r=n[1];return t.quill.off(i,r)}))},data:function(){return{exitSvg:b.a.x.toSVG({height:30,width:30}),handlers:[],isWideView:!1,narrowSvg:b.a["screen-normal"].toSVG({height:30,width:30}),quill:null,wideSvg:b.a["screen-full"].toSVG({height:30,width:30})}},directives:{tooltip:_["a"]},methods:{close:function(){this.$emit("close")},emitContent:function(t,e){this.$emit("update:content",{content:t,contentId:e})},emitSelection:function(t){this.$emit("update:selection",t)},listenQuill:function(t){var e=this,n=p()((function(t,n){e.emitContent(t,n)}),750,{maxWait:2e3}),i=function(){var i=t.getContents(),r=e.contentId;n(i,r)},r=p()((function(n){var i;n&&(i=n.length?{range:n,text:t.getText(n.index,n.length)}:{range:null,text:""},e.emitSelection(i))}),500);t.on("text-change",i),t.on("selection-change",r),this.handlers.push(["text-change",i],["selection-change",r])},showNarrowView:function(){this.isWideView=!1,P.cacheSet(!1)},showWideView:function(){this.isWideView=!0,P.cacheSet(!0)},updateQuill:function(t,e){e&&t.setContents(e,"api")}},mounted:function(){this.isWideView=P.cacheGet()||!1,this.quill=h(this.$refs.editor,"Write here.",this.$refs.container),this.updateQuill(this.quill,this.content),this.listenQuill(this.quill)},props:{content:{required:!0,type:Object},contentId:{default:null,required:!1,type:String}}},O=T,S=(n("3146"),n("2877")),E=Object(S["a"])(O,w,C,!1,null,"6a040686",null),x=E.exports,A={beforeDestroy:function(){var t=this;this.handlers.forEach((function(e){var n=Object(a["a"])(e,2),i=n[0],r=n[1];return t.quill.off(i,r)}))},components:{QuillFullScreen:x},data:function(){return{cachedContentId:null,handlers:[],quill:null,showFullScreen:!1}},methods:{disable:function(){this.quill.enable(!1)},enable:function(){this.quill.enable()},emitContent:function(t,e){this.$emit("update:content",{content:t,contentId:e})},emitFullscreenContent:function(t){var e=t.content,n=t.contentId;this.emitContent(e,n)},emitDone:function(){this.$emit("shortcut:done")},emitSelection:function(t){this.$emit("update:selection",t)},focus:function(){var t=this;this.$nextTick((function(){return t.quill.setSelection(t.quill.getLength(),0,"silent")}))},hideFullScreen:function(){this.showFullScreen=!1},listenQuill:function(t){var e=this,n=p()((function(t){e.emitSelection(t)}),500),i=function(e){var i;i=e&&e.length?{range:e,text:t.getText(e.index,e.length)}:{range:null,text:""},n(i)},r=p()((function(t,n){e.emitContent(t,n)}),750,{maxWait:2e3}),a=function(){var n=t.getSelection();i(n);var a=t.getContents(),s=e.contentId;r(a,s)};t.on("text-change",a),t.on("selection-change",i),this.handlers.push(["text-change",a],["selection-change",i])},updateQuill:function(t,e,n){e&&t.setContents(e,n?"silent":"api")}},mounted:function(){var t=this;this.quill=h(this.$refs.editor,"Write here.",this.container||this.$refs.container,(function(){t.showFullScreen=!0})),this.updateQuill(this.quill,this.content,!0),this.listenQuill(this.quill)},props:{container:{default:null,required:!1,type:null},content:{required:!0,type:null},contentId:{required:!1,default:null,type:String},scrollTo:{default:null,type:Object}},watch:{content:function(t){void 0===t||g()(t,this.quill.getContents())||(this.contentId!==this.cachedContentId?(this.cachedContentId=this.contentId,this.quill.setContents(null,"silent"),this.quill.setContents(t,"silent")):this.updateQuill(this.quill,t,!0))},scrollTo:function(t){if(t&&~t.paragraphIndex){var e=this.$refs.editor.querySelector(".ql-editor"),n=e.childNodes[t.paragraphIndex];if(n.parentNode.scrollTop=n.offsetTop,~t.searchTermIndex){var i=this.$store.state.composer.selection.text,r=this.quill.getText(),a=new RegExp(v()(i),"gi"),s=I(a,r),o=s[t.searchTermIndex];this.quill.setSelection(o,"api")}}}}};function I(t,e){var n,i=[];while(n=t.exec(e))i.push({index:n.index,length:n[0].length});return i}var N=A,D=(n("c9d8"),n("fd93"),Object(S["a"])(N,i,r,!1,null,"4094e8ab",null));e["a"]=D.exports},"1c5c":function(t,e,n){"use strict";var i=n("e4fc"),r=n.n(i);r.a},"24bb":function(t,e,n){"use strict";var i=n("f8cb"),r=n.n(i);r.a},"25ec":function(t,e,n){"use strict";var i=n("d5d1"),r=n.n(i);r.a},3146:function(t,e,n){"use strict";var i=n("cb2e"),r=n.n(i);r.a},3330:function(t,e,n){"use strict";var i=n("ee8b"),r=n.n(i);r.a},"384e":function(t,e,n){"use strict";var i=n("09e2"),r=n.n(i);r.a},"3a73":function(t,e,n){},"3e44":function(t,e,n){"use strict";var i=n("5808"),r=n.n(i);r.a},"3ebf":function(t,e,n){"use strict";var i=n("454d"),r=n.n(i);r.a},"3f6d":function(t,e,n){"use strict";var i=n("061b"),r=n.n(i);r.a},"42f4":function(t,e,n){"use strict";n("99af"),n("4de4"),n("caad"),n("c975"),n("d81d"),n("a434"),n("b0c0"),n("b64b"),n("d3b7"),n("2532"),n("3ca3"),n("2ca0"),n("ddb0");var i=n("3835"),r=n("d4ec"),a=n("bee2"),s=n("b8ce"),o=n.n(s),c=n("a002"),u=n.n(c),l=n("eed6"),h=n.n(l),d=n("7662"),p=d.orderPromises,f=function(){function t(e){var n=this;if(Object(r["a"])(this,t),!e)throw new Error("Username was not supplied for LocalStorageApi.");u.a.setDriver([u.a.INDEXEDDB,u.a.WEBSQL,u.a.LOCALSTORAGE]),this.storage=u.a,window._storage=this.storage,this.getStorageKeys=function(){return n.storage.keys()},this.planKeyPrefix=function(t){return"".concat(t,"_PLAN_DATA_")},this.planOrderKey=function(t){return"".concat(t,"_PLAN_ORDER")},this.getPlanKey=function(t,e){return"".concat(n.planKeyPrefix(t)).concat(e)},this.sectionKeyPrefix=function(t,e){return"".concat(t,"_SECTION_DATA_").concat(e,"_")},this.sectionOrderKey=function(t,e){return"".concat(t,"_SECTION_ORDER_").concat(e)},this.getSectionKey=function(t,e,i){return"".concat(n.sectionKeyPrefix(t,e)).concat(i)},this.chapterKeyPrefix=function(t){return"".concat(t,"_CHAPTER_DATA_")},this.chapterOrderKey=function(t){return"".concat(t,"_CHAPTER_ORDER")},this.getChapterKey=function(t,e){return"".concat(n.chapterKeyPrefix(t)).concat(e)},this.topicKeyPrefix=function(t){return"".concat(t,"_TOPIC_DATA_")},this.topicOrderKey=function(t){return"".concat(t,"_TOPIC_ORDER")},this.getTopicKey=function(t,e){return"".concat(n.topicKeyPrefix(t)).concat(e)},this.legacyDocumentGuids="DOCUMENT_IDS",this.documentGuidsKey="".concat(e,"_DOCUMENT_IDS"),this.documentsKey=function(t){return"DOCUMENT_".concat(t)}}return Object(a["a"])(t,[{key:"isPremium",value:function(){return!1}},{key:"addDocument",value:function(t){var e=this,n=t.guid,i=t.name;return this._getAllDocumentGuids().then((function(t){if(!t.includes(n))return t.push(n),e.storage.setItem(e.documentGuidsKey,t)})).then((function(){return e.storage.setItem(e.documentsKey(n),{guid:n,name:i})}))}},{key:"arrangeChapters",value:function(t,e){return this.storage.setItem(this.chapterOrderKey(t),e)}},{key:"arrangePlans",value:function(t,e){return this.storage.setItem(this.planOrderKey(t),e)}},{key:"arrangeSections",value:function(t,e,n){return this.storage.setItem(this.sectionOrderKey(t,e),n)}},{key:"arrangeTopics",value:function(t,e){return this.storage.setItem(this.topicOrderKey(t),e)}},{key:"deleteChapter",value:function(t,e){var n=this.getChapterKey(t,e);return this.storage.removeItem(n)}},{key:"deleteDocument",value:function(t){var e=this;return this._getAllDocumentGuids().then((function(n){return n.includes(t)&&n.splice(n.indexOf(t),1),e.storage.setItem(e.documentGuidsKey,n)})).then((function(){return Promise.all([e._getAllChapters(t).then((function(n){return Promise.all(n.map((function(n){return e.deleteChapter(t,n.guid)})))})),e._getAllPlans(t).then((function(n){return Promise.all(n.map((function(n){return e._getAllSections(t,n.guid).then((function(i){return Promise.all(i.map((function(i){return e.deleteSection(t,n.guid,i.guid)})))})).then((function(){return e.deletePlan(t,n.guid)}))})))})),e._getAllTopics(t).then((function(n){return Promise.all(n.map((function(n){return e.deleteTopic(t,n.guid)})))}))]).then((function(){return e.storage.removeItem(e.documentsKey(t))}))}))}},{key:"deletePlan",value:function(t,e){var n=this.getPlanKey(t,e);return this.storage.removeItem(n)}},{key:"deleteSection",value:function(t,e,n){var i=this.getSectionKey(t,e,n);return this.storage.removeItem(i)}},{key:"deleteTopic",value:function(t,e){var n=this.getTopicKey(t,e);return this.storage.removeItem(n)}},{key:"deleteWorkshop",value:function(){throw new Error("Workshops are a Author-only feature.")}},{key:"_getAllChapters",value:function(t){var e=this,n=this.chapterKeyPrefix(t);return Promise.all([this._getChaptersSortOrder(t),this.getStorageKeys().then((function(t){return t.filter((function(t){return t.startsWith(n)}))}))]).then((function(t){var n=Object(i["a"])(t,2),r=n[0],a=n[1];return Promise.all(a.map((function(t){return e.storage.getItem(t)}))).then((function(t){return t.sort((function(t,e){return r.indexOf(t.guid)-r.indexOf(e.guid)})),t}))}))}},{key:"getAllChapters",value:function(t){return this._getAllChapters(t)}},{key:"_getAllDocumentGuids",value:function(){var t=this;return Promise.all([this.storage.getItem(this.legacyDocumentGuids),this.storage.getItem(this.documentGuidsKey)]).then((function(e){var n=Object(i["a"])(e,2),r=n[0],a=n[1];if(Array.isArray(r)){var s=h()(r.concat(a||[]));return t.storage.setItem(t.documentGuidsKey,s).then((function(){return t.storage.removeItem(t.legacyDocumentGuids)})).then((function(){return s}))}return h()(a||[])}))}},{key:"_getAllDocuments",value:function(){var t=this;return this._getAllDocumentGuids().then((function(e){return Promise.all(e.map((function(e){var n=t.documentsKey(e);return t.storage.getItem(n)})))}))}},{key:"getAllDocuments",value:function(){return this._getAllDocuments()}},{key:"_getAllPlans",value:function(t){var e=this,n=this.planKeyPrefix(t);return Promise.all([this._getPlansSortOrder(t),this.getStorageKeys().then((function(t){return t.filter((function(t){return t.startsWith(n)}))}))]).then((function(n){var r=Object(i["a"])(n,2),a=r[0],s=r[1];return Promise.all(s.map((function(t){return e.storage.getItem(t)}))).then((function(n){return Promise.all(n.map((function(n){return e._getAllSections(t,n.guid).then((function(t){n.sections=t}))}))).then((function(){return n.sort((function(t,e){return a.indexOf(t.guid)-a.indexOf(e.guid)})),n}))}))}))}},{key:"getAllPlans",value:function(t){return this._getAllPlans(t)}},{key:"_getAllSections",value:function(t,e){var n=this,r=this.sectionKeyPrefix(t,e);return Promise.all([this._getSectionSortOrder(t,e),this.getStorageKeys().then((function(t){return t.filter((function(t){return t.startsWith(r)}))}))]).then((function(t){var e=Object(i["a"])(t,2),r=e[0],a=e[1];return Promise.all(a.map((function(t){return n.storage.getItem(t)}))).then((function(t){return t.sort((function(t,e){return r.indexOf(t.guid)-r.indexOf(e.guid)})),t}))}))}},{key:"_getAllTopics",value:function(t){var e=this,n=this.topicKeyPrefix(t);return Promise.all([this._getTopicsSortOrder(t),this.getStorageKeys().then((function(t){return t.filter((function(t){return t.startsWith(n)}))}))]).then((function(t){var n=Object(i["a"])(t,2),r=n[0],a=n[1];return Promise.all(a.map((function(t){return e.storage.getItem(t)}))).then((function(t){return t.sort((function(t,e){return r.indexOf(t.guid)-r.indexOf(e.guid)})),t}))}))}},{key:"getAllTopics",value:function(t){return this._getAllTopics(t)}},{key:"_getChaptersSortOrder",value:function(t){return this.storage.getItem(this.chapterOrderKey(t)).then((function(t){return t||[]}))}},{key:"_getPlansSortOrder",value:function(t){return this.storage.getItem(this.planOrderKey(t)).then((function(t){return t||[]}))}},{key:"_getSectionSortOrder",value:function(t,e){return this.storage.getItem(this.sectionOrderKey(t,e)).then((function(t){return t||[]}))}},{key:"_getTopicsSortOrder",value:function(t){return this.storage.getItem(this.topicOrderKey(t)).then((function(t){return t||[]}))}},{key:"getAllWorkshops",value:function(){throw new Error("Workshops are a Author-only feature.")}},{key:"saveAllContent",value:function(t,e){var n=this,i=e.chapters,r=e.plans,a=e.topics,s=a.map((function(e){return function(){return n.updateTopic(t,e.guid,e)}})),o=p(s),c=o.then((function(){var e=i.map((function(e){return function(){return n.updateChapter(t,e.guid,e)}}));return p(e)})),u=r.map((function(e){return function(){return n.updatePlan(t,e.guid,e).then((function(){var i=e.sections.map((function(i){return function(){return n.updateSection(t,e.guid,i.guid,i)}}));return p(i)}))}})),l=p(u);return Promise.all([c,l])}},{key:"updateChapter",value:function(t,e,n){var i=this;if(t){var r=this.getChapterKey(t,e);return Promise.all([this.storage.setItem(r,n),this._getChaptersSortOrder(t).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangeChapters(t,n)}))])}}},{key:"updateDocument",value:function(t){var e=t.guid,n=t.name;return this.storage.setItem(this.documentsKey(e),{guid:e,name:n})}},{key:"updatePlan",value:function(t,e,n){var i=this;if(t){var r=this.getPlanKey(t,e);return n=o()(n),n.sections=null,Promise.all([this.storage.setItem(r,n),this._getPlansSortOrder(t).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangePlans(t,n)}))])}}},{key:"updateSection",value:function(t,e,n,i){var r=this;if(t){var a=this.getSectionKey(t,e,n);return Promise.all([this.storage.setItem(a,i),this._getSectionSortOrder(t,e).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.includes(n))return e.push(n),r.arrangeSections(t,e)}))])}}},{key:"updateTopic",value:function(t,e,n){var i=this;if(t){var r=this.getTopicKey(t,e);return Promise.all([this.storage.setItem(r,n),this._getTopicsSortOrder(t).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangeTopics(t,n)}))])}}},{key:"updateWorkshops",value:function(){throw new Error("Workshops are a Author-only feature.")}},{key:"docExport",value:function(t,e){var n=this;return Promise.all([this._getAllChapters(t),this._getAllTopics(t),this._getAllPlans(t).then((function(e){return Promise.all(e.map((function(e){return n._getAllSections(t,e.guid).then((function(t){return e.sections=t,e}))})))}))]).then((function(n){var r=Object(i["a"])(n,3),a=r[0],s=r[1],o=r[2],c={guid:t,name:e,chapters:a,topics:s,plans:o};return c}))}},{key:"docImport",value:function(t){var e,n=this;return this.docExport(t.guid).then((function(t){e=t})).then((function(){return n.deleteDocument(t.guid)})).then((function(){if(!t)throw new Error("Attempted to import an empty backup");return n.addDocument(t).then((function(){return n.saveAllContent(t.guid,t)}))})).then(void 0,(function(t){return console.error(t),n.addDocument(e).then((function(){return n.saveAllContent(e.guid,e)}))}))}},{key:"getFullExport",value:function(){var t=this;return this._getAllDocuments().then((function(e){return Promise.all(e.map((function(e){return Promise.all([t._getAllChapters(e.guid),t._getAllTopics(e.guid),t._getAllPlans(e.guid).then((function(n){return Promise.all(n.map((function(n){return t._getAllSections(e.guid,n.guid).then((function(t){return n.sections=t,n}))})))}))]).then((function(t){var n=Object(i["a"])(t,3),r=n[0],a=n[1],s=n[2];return e.chapters=r,e.topics=a,e.plans=s,e}))})))}))}},{key:"revertImport",value:function(t){var e=this;return Promise.all(Object.keys(t).map((function(n){return e.storage.setItem(n,t[n])}))).then(void 0,(function(t){throw console.error(t),t}))}},{key:"doFullImport",value:function(t){var e=this,n={};return this.storage.iterate((function(t,e){n[e]=t})).then((function(){return e.storage.clear().then((function(){if(!t||!Array.isArray(t)||!t.length)throw new Error("Attempted to import an empty backup");var n=t.map((function(t){return function(){return e.addDocument(t).then((function(){return e.saveAllContent(t.guid,t)}))}}));return p(n)}))})).then(void 0,(function(t){return console.error(t),e.revertImport(n)}))}}]),t}();e["a"]=f},"454d":function(t,e,n){},"4ebc":function(t,e,n){},5145:function(t,e,n){"use strict";n.d(e,"b",(function(){return j})),n.d(e,"a",(function(){return G}));n("b0c0"),n("d3b7");var i,r,a=n("cb46"),s=(n("99af"),n("4de4"),n("caad"),n("c975"),n("d81d"),n("a434"),n("b64b"),n("2532"),n("3ca3"),n("2ca0"),n("ddb0"),n("3835")),o=n("d4ec"),c=n("bee2"),u=n("b8ce"),l=n.n(u),h=n("a002"),d=n.n(h),p=n("eed6"),f=n.n(p),v=n("7662"),m=v.orderPromises,g=function(){function t(){var e=this;Object(o["a"])(this,t),d.a.setDriver(d.a.LOCALSTORAGE),this.storage=d.a,window._storage=this.storage,this.getStorageKeys=function(){return e.storage.keys()},this.planKeyPrefix=function(t){return"".concat(t,"_PLAN_DATA_")},this.planOrderKey=function(t){return"".concat(t,"_PLAN_ORDER")},this.getPlanKey=function(t,n){return"".concat(e.planKeyPrefix(t)).concat(n)},this.sectionKeyPrefix=function(t,e){return"".concat(t,"_SECTION_DATA_").concat(e,"_")},this.sectionOrderKey=function(t,e){return"".concat(t,"_SECTION_ORDER_").concat(e)},this.getSectionKey=function(t,n,i){return"".concat(e.sectionKeyPrefix(t,n)).concat(i)},this.chapterKeyPrefix=function(t){return"".concat(t,"_CHAPTER_DATA_")},this.chapterOrderKey=function(t){return"".concat(t,"_CHAPTER_ORDER")},this.getChapterKey=function(t,n){return"".concat(e.chapterKeyPrefix(t)).concat(n)},this.topicKeyPrefix=function(t){return"".concat(t,"_TOPIC_DATA_")},this.topicOrderKey=function(t){return"".concat(t,"_TOPIC_ORDER")},this.getTopicKey=function(t,n){return"".concat(e.topicKeyPrefix(t)).concat(n)},this.documentGuidsKey="DOCUMENT_IDS",this.documentsKey=function(t){return"DOCUMENT_".concat(t)}}return Object(c["a"])(t,[{key:"isPremium",value:function(){return!1}},{key:"addDocument",value:function(t){var e=this,n=t.guid,i=t.name;return window.onbeforeunload=function(){localStorage.clear()},this._getAllDocumentGuids().then((function(t){if(!t.includes(n))return t.push(n),e.storage.setItem(e.documentGuidsKey,t)})).then((function(){return e.storage.setItem(e.documentsKey(n),{guid:n,name:i})}))}},{key:"arrangeChapters",value:function(t,e){return this.storage.setItem(this.chapterOrderKey(t),e)}},{key:"arrangePlans",value:function(t,e){return this.storage.setItem(this.planOrderKey(t),e)}},{key:"arrangeSections",value:function(t,e,n){return this.storage.setItem(this.sectionOrderKey(t,e),n)}},{key:"arrangeTopics",value:function(t,e){return this.storage.setItem(this.topicOrderKey(t),e)}},{key:"deleteChapter",value:function(t,e){var n=this.getChapterKey(t,e);return this.storage.removeItem(n)}},{key:"deleteDocument",value:function(t){var e=this;return this._getAllDocumentGuids().then((function(n){return n.includes(t)&&n.splice(n.indexOf(t),1),e.storage.setItem(e.documentGuidsKey,n)})).then((function(){return Promise.all([e._getAllChapters(t).then((function(n){return Promise.all(n.map((function(n){return e.deleteChapter(t,n.guid)})))})),e._getAllPlans(t).then((function(n){return Promise.all(n.map((function(n){return e._getAllSections(t,n.guid).then((function(i){return Promise.all(i.map((function(i){return e.deleteSection(t,n.guid,i.guid)})))})).then((function(){return e.deletePlan(t,n.guid)}))})))})),e._getAllTopics(t).then((function(n){return Promise.all(n.map((function(n){return e.deleteTopic(t,n.guid)})))}))]).then((function(){return e.storage.removeItem(e.documentsKey(t))}))}))}},{key:"deletePlan",value:function(t,e){var n=this.getPlanKey(t,e);return this.storage.removeItem(n)}},{key:"deleteSection",value:function(t,e,n){var i=this.getSectionKey(t,e,n);return this.storage.removeItem(i)}},{key:"deleteTopic",value:function(t,e){var n=this.getTopicKey(t,e);return this.storage.removeItem(n)}},{key:"deleteWorkshop",value:function(){}},{key:"_getAllChapters",value:function(t){var e=this,n=this.chapterKeyPrefix(t);return Promise.all([this._getChaptersSortOrder(t),this.getStorageKeys().then((function(t){return t.filter((function(t){return t.startsWith(n)}))}))]).then((function(t){var n=Object(s["a"])(t,2),i=n[0],r=n[1];return Promise.all(r.map((function(t){return e.storage.getItem(t)}))).then((function(t){return t.sort((function(t,e){return i.indexOf(t.guid)-i.indexOf(e.guid)})),t}))}))}},{key:"getAllChapters",value:function(t){return this._getAllChapters(t)}},{key:"_getAllDocumentGuids",value:function(){return this.storage.getItem(this.documentGuidsKey).then((function(t){return f()(t)||[]}))}},{key:"_getAllDocuments",value:function(){var t=this;return this._getAllDocumentGuids().then((function(e){return Promise.all(e.map((function(e){var n=t.documentsKey(e);return t.storage.getItem(n)})))}))}},{key:"getAllDocuments",value:function(){return this._getAllDocuments()}},{key:"_getAllPlans",value:function(t){var e=this,n=this.planKeyPrefix(t);return Promise.all([this._getPlansSortOrder(t),this.getStorageKeys().then((function(t){return t.filter((function(t){return t.startsWith(n)}))}))]).then((function(n){var i=Object(s["a"])(n,2),r=i[0],a=i[1];return Promise.all(a.map((function(t){return e.storage.getItem(t)}))).then((function(n){return Promise.all(n.map((function(n){return e._getAllSections(t,n.guid).then((function(t){n.sections=t}))}))).then((function(){return n.sort((function(t,e){return r.indexOf(t.guid)-r.indexOf(e.guid)})),n}))}))}))}},{key:"getAllPlans",value:function(t){return this._getAllPlans(t)}},{key:"_getAllSections",value:function(t,e){var n=this,i=this.sectionKeyPrefix(t,e);return Promise.all([this._getSectionSortOrder(t,e),this.getStorageKeys().then((function(t){return t.filter((function(t){return t.startsWith(i)}))}))]).then((function(t){var e=Object(s["a"])(t,2),i=e[0],r=e[1];return Promise.all(r.map((function(t){return n.storage.getItem(t)}))).then((function(t){return t.sort((function(t,e){return i.indexOf(t.guid)-i.indexOf(e.guid)})),t}))}))}},{key:"_getAllTopics",value:function(t){var e=this,n=this.topicKeyPrefix(t);return Promise.all([this._getTopicsSortOrder(t),this.getStorageKeys().then((function(t){return t.filter((function(t){return t.startsWith(n)}))}))]).then((function(t){var n=Object(s["a"])(t,2),i=n[0],r=n[1];return Promise.all(r.map((function(t){return e.storage.getItem(t)}))).then((function(t){return t.sort((function(t,e){return i.indexOf(t.guid)-i.indexOf(e.guid)})),t}))}))}},{key:"getAllTopics",value:function(t){return this._getAllTopics(t)}},{key:"_getChaptersSortOrder",value:function(t){return this.storage.getItem(this.chapterOrderKey(t)).then((function(t){return t||[]}))}},{key:"_getPlansSortOrder",value:function(t){return this.storage.getItem(this.planOrderKey(t)).then((function(t){return t||[]}))}},{key:"_getSectionSortOrder",value:function(t,e){return this.storage.getItem(this.sectionOrderKey(t,e)).then((function(t){return t||[]}))}},{key:"_getTopicsSortOrder",value:function(t){return this.storage.getItem(this.topicOrderKey(t)).then((function(t){return t||[]}))}},{key:"getAllWorkshops",value:function(){return[]}},{key:"saveAllContent",value:function(t,e){var n=this,i=e.chapters,r=e.plans,a=e.topics;return Promise.all([Promise.all(i.map((function(e){return n.updateChapter(t,e.guid,e)}))),Promise.all(r.map((function(e){return n.updatePlan(t,e.guid,e).then((function(){return Promise.all(e.sections.map((function(i){return n.updateSection(t,e.guid,i.guid,i)})))}))}))),Promise.all(a.map((function(e){return n.updateTopic(t,e.guid,e)})))])}},{key:"updateChapter",value:function(t,e,n){var i=this;if(t){var r=this.getChapterKey(t,e);return Promise.all([this.storage.setItem(r,n),this._getChaptersSortOrder(t).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangeChapters(t,n)}))])}}},{key:"updateDocument",value:function(t){var e=t.guid,n=t.name;return this.storage.setItem(this.documentsKey(e),{guid:e,name:n})}},{key:"updatePlan",value:function(t,e,n){var i=this;if(t){var r=this.getPlanKey(t,e);return n=l()(n),n.sections=null,Promise.all([this.storage.setItem(r,n),this._getPlansSortOrder(t).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangePlans(t,n)}))])}}},{key:"updateSection",value:function(t,e,n,i){var r=this;if(t){var a=this.getSectionKey(t,e,n);return Promise.all([this.storage.setItem(a,i),this._getSectionSortOrder(t,e).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.includes(n))return e.push(n),r.arrangeSections(t,e)}))])}}},{key:"updateTopic",value:function(t,e,n){var i=this;if(t){var r=this.getTopicKey(t,e);return Promise.all([this.storage.setItem(r,n),this._getTopicsSortOrder(t).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangeTopics(t,n)}))])}}},{key:"updateWorkshops",value:function(){}},{key:"docExport",value:function(t,e){var n=this;return Promise.all([this._getAllChapters(t),this._getAllTopics(t),this._getAllPlans(t).then((function(e){return Promise.all(e.map((function(e){n._getAllSections(t,e.guid).then((function(t){return e.sections=t,e}))})))}))]).then((function(n){var i=Object(s["a"])(n,3),r=i[0],a=i[1],o=i[2],c={guid:t,name:e,chapters:r,topics:a,plans:o};return c}))}},{key:"docImport",value:function(t){var e,n=this;return this.docExport(t.guid).then((function(t){e=t})).then((function(){return n.deleteDocument(t.guid)})).then((function(){if(!t)throw new Error("Attempted to import an empty backup");return n.addDocument(t).then((function(){return n.saveAllContent(t.guid,t)}))})).then(void 0,(function(t){return console.error(t),n.addDocument(e).then((function(){return n.saveAllContent(e.guid,e)}))}))}},{key:"getFullExport",value:function(){var t=this;return this._getAllDocuments().then((function(e){return Promise.all(e.map((function(e){return Promise.all([t._getAllChapters(e.guid),t._getAllTopics(e.guid),t._getAllPlans(e.guid).then((function(n){return Promise.all(n.map((function(n){return t._getAllSections(e.guid,n.guid).then((function(t){return n.sections=t,n}))})))}))]).then((function(t){var n=Object(s["a"])(t,3),i=n[0],r=n[1],a=n[2];return e.chapters=i,e.topics=r,e.plans=a,e}))})))}))}},{key:"revertImport",value:function(t){var e=this;return Promise.all(Object.keys(t).map((function(n){return e.storage.setItem(n,t[n])}))).then(void 0,(function(t){throw console.error(t),t}))}},{key:"doFullImport",value:function(t){var e=this,n={};return this.storage.iterate((function(t,e){n[e]=t})).then((function(){return e.storage.clear().then((function(){if(!t||!Array.isArray(t)||!t.length)throw new Error("Attempted to import an empty backup");var n=t.map((function(t){return function(){return e.addDocument(t).then((function(){return e.saveAllContent(t.guid,t)}))}}));return m(n)}))})).then(void 0,(function(t){return console.error(t),e.revertImport(n)}))}}]),t}(),w=g,C=n("42f4"),k=n("7f24"),y=n("1112"),b=function(){function t(e){var n=this;if(Object(o["a"])(this,t),!e)throw new Error("Username was not supplied for OfflineStorageApi.");this.store=y["default"].$store,this.requiresSyncCache=new k["b"]("".concat(k["a"],"_HAS_GONE_OFFLINE")),d.a.setDriver([d.a.INDEXEDDB,d.a.WEBSQL,d.a.LOCALSTORAGE]),this.storage=d.a,window._storage=this.storage,this.offlinePrefix="@OFFLINE",this.docGuid=function(){return n.store.state.document.currentDocument.guid},this.docKey=function(){return"".concat(n.offlinePrefix,"_USER_").concat(e,"_DOCUMENT_").concat(n.docGuid())}}return Object(c["a"])(t,[{key:"init",value:function(){return this.requiresSyncCache.cacheSet(!0),Promise.resolve()}},{key:"isPremium",value:function(){return!0}},{key:"getLatestStoredDocument",value:function(){var t=this;return this.storage.keys().then((function(e){var n=e.filter((function(e){return e.startsWith(t.offlinePrefix)}))[0];return n?t.storage.getItem(n):null}))}},{key:"getStoredDocument",value:function(){return this.storage.getItem(this.docKey())}},{key:"clearOldStorage",value:function(){var t=this;return this.storage.keys().then((function(e){var n=e.filter((function(e){return e.startsWith(t.offlinePrefix)})).map((function(e){return t.storage.removeItem(e)}));return Promise.all(n)}))}},{key:"updateStorage",value:function(){var t=this,e=l()(this.store.state.document.currentDocument);if(e)return e.chapters=this.store.state.chapters.chapters,e.topics=this.store.state.chapters.topics,e.plans=this.store.state.chapters.plans,e.workshops=this.store.state.workshop.workshops,this.clearOldStorage().then((function(){return t.storage.setItem(t.docKey(),e)}));console.warn("Document not yet loaded.")}},{key:"notAllowedError",value:function(){throw new Error("This action is not available while offline.")}},{key:"addDocument",value:function(){return this.notAllowedError()}},{key:"deleteDocument",value:function(){return this.notAllowedError()}},{key:"arrangeChapters",value:function(){return this.updateStorage()}},{key:"arrangePlans",value:function(){return this.updateStorage()}},{key:"arrangeSections",value:function(){return this.updateStorage()}},{key:"arrangeTopics",value:function(){return this.updateStorage()}},{key:"deleteChapter",value:function(){return this.updateStorage()}},{key:"deletePlan",value:function(){return this.updateStorage()}},{key:"deleteSection",value:function(){return this.updateStorage()}},{key:"deleteTopic",value:function(){return this.updateStorage()}},{key:"deleteWorkshop",value:function(){return this.updateStorage()}},{key:"saveAllContent",value:function(){return this.updateStorage()}},{key:"updateChapter",value:function(){return this.updateStorage()}},{key:"updateDocument",value:function(){return this.updateStorage()}},{key:"updatePlan",value:function(){return this.updateStorage()}},{key:"updateSection",value:function(){return this.updateStorage()}},{key:"updateTopic",value:function(){return this.updateStorage()}},{key:"updateWorkshops",value:function(){return this.updateStorage()}},{key:"getAllChapters",value:function(t){return this.getLatestStoredDocument().then((function(e){if(t!==e.guid)throw new Error("Cannot get chapters from a different document while offline.");return e.chapters}))}},{key:"getAllDocuments",value:function(){return this.getLatestStoredDocument().then((function(t){return t?[t]:[]}))}},{key:"getAllPlans",value:function(t){return this.getLatestStoredDocument().then((function(e){if(t!==e.guid)throw new Error("Cannot get plans from a different document while offline.");return e.plans}))}},{key:"getAllTopics",value:function(t){return this.getLatestStoredDocument().then((function(e){if(t!==e.guid)throw new Error("Cannot get topics from a different document while offline.");return e.topics}))}},{key:"getAllWorkshops",value:function(t){return this.getLatestStoredDocument().then((function(e){if(t!==e.guid)throw new Error("Cannot get workshops from a different document while offline.");return e.workshops}))}},{key:"docExport",value:function(t){if(t!==this.docGuid())throw new Error("Cannot export a different document while offline.");return this.getStoredDocument()}},{key:"docImport",value:function(){throw new Error("Cannot import a document while offline.")}},{key:"getFullExport",value:function(){throw new Error("Cannot export all documents while offline.")}},{key:"doFullImport",value:function(){throw new Error("Cannot do a full import while offline.")}}]),t}(),_=b,P=n("c2b3"),T=n.n(P),O=n("df70"),S=n("86e1"),E=n("8410"),x=n("e935"),A=n("b047"),I=n.n(A),N=function(){function t(e){var n=this;if(Object(o["a"])(this,t),!e)throw new Error("Username was not supplied for ServerStorageApi.");var i=0,r=y["default"].$store;this.offlineStorage=new _(e),this.goOffline=function(){return r.commit(S["c"]),a["a"].isOnlineCached=!1,n.offlineStorage.updateStorage()};var s=function(){return i++,r.commit(S["d"]),n.offlineStorage.updateStorage()},c=function(t,e){i--,i>0||(i=0,t?e?n.goOffline():r.commit(S["b"]):r.commit(S["a"]))};this.wrapStatus=function(t){return s(),t.then((function(){return c(!1)}),(function(){a["a"].isOnline().then((function(){return c(!0,!1)}),(function(){return c(!0,!0)}))})),t};var u=I()((function(t){t.then((function(){return n.offlineStorage.updateStorage()}))}),1e3);this.updateStorageAfter=function(t){return u(t),t},this.waitUntilDone=function(){return new Promise((function(t,e){var n=0,i=window.setInterval((function(){n/10>10?e():r.state.status.saving?n++:(window.clearInterval(i),t())}),100)}))},this.loadDocument=function(t){r.commit(E["n"],{chapters:t.chapters||[],plans:t.plans||[],topics:t.topics||[]}),r.commit(x["d"],{workshops:t.workshops||[]})}}return Object(c["a"])(t,[{key:"init",value:function(){if(this.offlineStorage.requiresSyncCache.cacheGet())return this.syncCache()}},{key:"syncCache",value:function(){var t=this,e="[RESTORED]";return this.offlineStorage.getLatestStoredDocument().then((function(n){var i;if(n&&n.guid)return a["a"].docExport(n.guid).then((function(r){var a=function(t){return t&&t.guid},s=function(t){t&&("string"!==typeof t.title&&(t.title=""),t.title.includes(e)||(t.title="".concat(t.title," ").concat(e)))},o=O["a"].getMostRecentEach(r.chapters,n.chapters,a,s),c=O["a"].getMostRecentEach(r.topics,n.topics,a,s),u=O["a"].getMostRecentEach(r.plans,n.plans,a,s),l=O["a"].getMostRecentEach(r.workshops,n.workshops,(function(t){return t&&t.guid?"".concat(t.guid,"|").concat(t.order):null}),s),h={name:n.name,chapters:o,topics:c,plans:u,workshops:l};if(!(n.name===r.name&&T()(o,r.chapters)&&T()(c,r.topics)&&T()(u,r.plans)&&T()(l,r.workshops)))return i=Object.assign(r,h),t.docImport(i)}),(function(){return i=n,t.docImport(n)})).then((function(){return t.offlineStorage.clearOldStorage()})).then((function(){t.loadDocument(i)}),(function(){t.goOffline().then((function(){throw new Error("Attempted to resolve a cached document and import it, but the doc import API threw an error.")}))}))})).then((function(){return t.offlineStorage.clearOldStorage().then((function(){return t.offlineStorage.updateStorage()})).then((function(){return t.offlineStorage.requiresSyncCache.cacheSet(!1)}))}))}},{key:"isPremium",value:function(){return!0}},{key:"addDocument",value:function(t){var e=t.guid,n=t.name;return this.wrapStatus(a["a"].addDocument({guid:e,name:n}).catch((function(t){throw t})))}},{key:"getAllDocuments",value:function(){return a["a"].getDocuments()}},{key:"deleteDocument",value:function(t){return this.wrapStatus(a["a"].deleteDocument({guid:t}))}},{key:"updateDocument",value:function(t){var e=t.guid,n=t.name;return this.wrapStatus(a["a"].updateDocument({guid:e,name:n}))}},{key:"arrangeChapters",value:function(t,e){return this.wrapStatus(a["a"].arrangeChapters({documentGuid:t,chapterGuids:e}))}},{key:"arrangePlans",value:function(t,e){return this.wrapStatus(a["a"].arrangePlans({documentGuid:t,planGuids:e}))}},{key:"arrangeSections",value:function(t,e,n){return this.wrapStatus(a["a"].arrangeSections({documentGuid:t,planGuid:e,sectionGuids:n}))}},{key:"arrangeTopics",value:function(t,e){return this.wrapStatus(a["a"].arrangeTopics({documentGuid:t,topicGuids:e}))}},{key:"deleteChapter",value:function(t,e){return this.wrapStatus(a["a"].deleteChapter({documentGuid:t,chapterGuid:e}))}},{key:"deletePlan",value:function(t,e){return this.wrapStatus(a["a"].deletePlan({documentGuid:t,planGuid:e}))}},{key:"deleteSection",value:function(t,e,n){return this.wrapStatus(a["a"].deleteSection({documentGuid:t,planGuid:e,sectionGuid:n}))}},{key:"deleteTopic",value:function(t,e){return this.wrapStatus(a["a"].deleteTopic({documentGuid:t,topicGuid:e}))}},{key:"deleteWorkshop",value:function(t,e){return this.wrapStatus(a["a"].deleteWorkshopContent({documentGuid:t,guid:e}))}},{key:"getAllChapters",value:function(t){return this.updateStorageAfter(a["a"].getChapters(t))}},{key:"getAllPlans",value:function(t){return this.updateStorageAfter(a["a"].getPlans(t))}},{key:"getAllTopics",value:function(t){return this.updateStorageAfter(a["a"].getTopics(t))}},{key:"getAllWorkshops",value:function(t){return this.updateStorageAfter(a["a"].getWorkshops(t))}},{key:"updateChapter",value:function(t,e,n){return this.wrapStatus(a["a"].updateChapter({documentGuid:t,chapterGuid:e,chapter:n}))}},{key:"updatePlan",value:function(t,e,n){return this.wrapStatus(a["a"].updatePlan({documentGuid:t,planGuid:e,plan:n}))}},{key:"updateSection",value:function(t,e,n,i){return this.wrapStatus(a["a"].updateSection({documentGuid:t,planGuid:e,sectionGuid:n,section:i}))}},{key:"updateTopic",value:function(t,e,n){return this.wrapStatus(a["a"].updateTopic({documentGuid:t,topicGuid:e,topic:n}))}},{key:"updateWorkshops",value:function(t,e){return this.wrapStatus(a["a"].updateWorkshopContents({documentGuid:t,workshops:e}))}},{key:"saveAllContent",value:function(t,e){var n=this,i=e.chapters,r=e.plans,s=e.topics;return this.waitUntilDone().then((function(){return n.wrapStatus(a["a"].saveAllContent({documentGuid:t,chapters:i,plans:r,topics:s}))}))}},{key:"docExport",value:function(t){return a["a"].docExport(t)}},{key:"docImport",value:function(t){return a["a"].docImport(t)}},{key:"fullExport",value:function(){return a["a"].fullExport().then((function(t){return JSON.stringify(t)}))}},{key:"fullImport",value:function(t){var e=JSON.parse(t);return a["a"].fullImport(e)}},{key:"exportToWord",value:function(t){var e=t.guid,n=t.title,i=t.includeArchived;return a["a"].exportToWord({guid:e,title:n,includeArchived:i})}}]),t}(),D=N,W=new Promise((function(t){r=t})),R=function(t){return i||r(t),i=t,t},j=function(){return i?Promise.resolve(i):W},$={Local:{cached:null,get:function(t){return new C["a"](t)}},Demo:{cached:null,get:function(){return new w}},Server:{cached:null,get:function(t){return new D(t)}},Offline:{cached:null,get:function(t){return new _(t)}}},L=Promise.resolve(),M=function(t,e){return t.cached||(t.cached=t.get(e)),"function"===typeof t.cached.init&&i!==t.cached&&(L=t.cached.init()||Promise.resolve()),R(t.cached),L.then((function(){return t.cached}))};function G(t){var e;return e=null===a["a"].isOnlineCached?a["a"].isOnline().then((function(){return null}),(function(){return null})):Promise.resolve(),e.then((function(){var e=a["a"].isOnlineCached;if(!t||!t.accountType)return M($.Demo);if("DEMO"===t.accountType.name)return M($.Demo);if(!t.email)throw new Error("User does not have a valid username/email for initializing storage.");return t.isPremium?e?t.isPremium?M($.Server,t.email):M($.Local,t.email):M($.Offline,t.email):M($.Local,t.email)}))}},"55a0":function(t,e,n){"use strict";var i=n("6c80"),r=n.n(i);r.a},"577c":function(t,e,n){"use strict";var i=n("eab2"),r=n.n(i);r.a},5808:function(t,e,n){},"59e8":function(t,e,n){"use strict";var i=n("1a78"),r=n.n(i);r.a},"5a5d":function(t,e,n){"use strict";var i=n("646a"),r=n.n(i);r.a},"5e74":function(t,e,n){"use strict";var i=n("5f71"),r=n.n(i);r.a},"5f02":function(t,e,n){},"5f71":function(t,e,n){},"646a":function(t,e,n){},"6a64":function(t,e,n){},"6c59":function(t,e,n){"use strict";var i=function(t,e,n,i,r){return{name:t,displayName:e,description:n,route:i,available:r}},r={FREE_WRITE:i("FREE_WRITE","Free Writing","Warm up with a brief writing session. No prompts, no rules. Limit by time or word count.","/workshop/free-write",!0),NOVEL_QUICKSTART:i("NOVEL_QUICKSTART","Novel Quickstart","Answer a few basic prompts to get ideas flowing for your novel.","/workshop/novel-quickstart",!0),WRITERS_UNBLOCK:i("WRITERS_UNBLOCK","Writer's Unblock","Got writer's block? Get moving again by doing a word incorporation exercise.","/workshop/unblock",!0),PLOT_WORKSHOP:i("PLOT_WORKSHOP","Plot & Character Workshop","Figure out what happens next and develop your characters by responding to curated prompts.","/workshop/plot",!0),SETTING_WORKSHOP:i("SETTING_WORKSHOP","Setting Workshop","Build a stronger sense of place by exploring the setting of your novel.","/workshop/setting",!0)};e["a"]=r},"6c80":function(t,e,n){},7662:function(t,e,n){"use strict";n.r(e),n.d(e,"orderPromises",(function(){return a})),n.d(e,"getStyledArrayFromChapters",(function(){return l}));n("a4d3"),n("e01a"),n("d28b"),n("caad"),n("fb6a"),n("d3b7"),n("ac1f"),n("2532"),n("3ca3"),n("1276"),n("ddb0");var i=n("4f96"),r=n("2909");function a(t){if(!Array.isArray(t)||t.length&&"function"!==typeof t[0])throw new TypeError("orderPromises expects an array of functions. Received: ".concat(JSON.stringify(t)));if(!t.length)return Promise.resolve();var e=t[0]();if(!e.then)throw new TypeError("A function in the array passed to orderPromises did not return a promise. Returned: ".concat(JSON.stringify(e)));return e.then((function(){return a(t.slice(1))}))}function s(){return{text:[],style:[]}}function o(t,e){return{text:t||"",style:e||[]}}var c={bullet:"ul",ordered:"ol"};function u(t){var e=[],n=[];if(!t)return{styles:e,lineStyles:n};for(var i in t)["bold","italic","underline","strike"].includes(i)?e.push(i):"header"!==i?"blockquote"!==i?"list"!==i||n.push(c[t[i]]):n.push("blockquote"):n.push("h".concat(t[i]));return{styles:e,lineStyles:n}}function l(t){var e=[],n=!0,a=!1,c=void 0;try{for(var l,h=t[Symbol.iterator]();!(n=(l=h.next()).done);n=!0){var d=l.value;e.push({text:d.title,style:"chapterHeading",pageBreak:"before"});var p=s(),f=d.content&&d.content.ops||[],v=!0,m=!1,g=void 0;try{for(var w,C=f[Symbol.iterator]();!(v=(w=C.next()).done);v=!0){var k,y=w.value,b=y.insert,_=u(y.attributes),P=_.styles,T=_.lineStyles;if(T.length)(k=p.style).push.apply(k,Object(r["a"])(T));if("\n"!==b)if(b.includes("\n")){var O=b.split("\n"),S=Object(i["a"])(O),E=S[0],x=S.slice(1);if(E){var A=o(E,P);p.text.push(A)}e.push(p),p=s();for(var I=0;I<x.length-1;I++){var N=x[I],D=o(N,P);p.text.push(D),e.push(p),p=s()}var W=x[x.length-1],R=o(W,P);p.text.push(R)}else{var j=o(b,P);p.text.push(j)}else e.push(p),p=s()}}catch($){m=!0,g=$}finally{try{v||null==C.return||C.return()}finally{if(m)throw g}}}}catch($){a=!0,c=$}finally{try{n||null==h.return||h.return()}finally{if(a)throw c}}return e}},"7c2b":function(t,e,n){"use strict";var i=n("b4c6"),r=n.n(i);r.a},"7d4e":function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return f}));n("4de4"),n("c975"),n("a15b"),n("d81d"),n("ac1f"),n("1276"),n("498a");var i=n("f942"),r=n.n(i),a=n("1686"),s=n.n(a),o=n("ff81"),c=n.n(o),u=function(t){if(!t||!t.ops)return"";var e=t.ops.map((function(t){return t.insert||""})),n=e.join("");return n.trim().length?n:""},l=/^[a-zA-Z0-9'\-_@&]/,h=/[a-zA-Z0-9]+/,d=function(t){var e=u(t),n=e.split(/\s/g);return n.map((function(t){return t=r()(t,".,;:?!\"'`"),t=s()(t,"\"'`"),t})).filter((function(t){return l.test(t)&&h.test(t)}))},p=function(t){if(!t||!t.ops)return"";var e=new c.a(t.ops,{});return e.convert()},f=function(t,e){var n=e.toLowerCase(),i=t.toLowerCase(),r=i.length;if(0===r||!n.trim())return[];var a=[],s=0,o=n.indexOf(i,s);while(o>-1)a.push(o),s=o+r,o=n.indexOf(i,s);return a}},"7f24":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return c}));n("a4d3"),n("e01a"),n("d28b"),n("caad"),n("a434"),n("d3b7"),n("2532"),n("3ca3"),n("ddb0");var i=n("d4ec"),r=n("bee2"),a="_all-cache-keys",s=JSON.parse(window.localStorage.getItem(a))||[],o="UNRESETTABLE";function c(){var t=!0,e=!1,n=void 0;try{for(var i,r=s[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;window.localStorage.removeItem(o)}}catch(c){e=!0,n=c}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}s.splice(0,s.length),window.localStorage.setItem(a,JSON.stringify([]))}var u=function(){function t(e){Object(i["a"])(this,t),this.key=e,e.includes(o)||s.push(e),window.localStorage.setItem(a,JSON.stringify(s))}return Object(r["a"])(t,[{key:"cacheDelete",value:function(){window.localStorage.removeItem(this.key)}},{key:"cacheGet",value:function(){return JSON.parse(window.localStorage.getItem(this.key))}},{key:"cacheSet",value:function(t){window.localStorage.setItem(this.key,JSON.stringify(t))}}]),t}();e["b"]=u},8410:function(t,e,n){"use strict";n.d(e,"o",(function(){return u})),n.d(e,"n",(function(){return l})),n.d(e,"b",(function(){return h})),n.d(e,"g",(function(){return d})),n.d(e,"k",(function(){return p})),n.d(e,"q",(function(){return f})),n.d(e,"u",(function(){return v})),n.d(e,"z",(function(){return m})),n.d(e,"c",(function(){return g})),n.d(e,"h",(function(){return w})),n.d(e,"l",(function(){return C})),n.d(e,"r",(function(){return k})),n.d(e,"v",(function(){return y})),n.d(e,"A",(function(){return b})),n.d(e,"B",(function(){return _})),n.d(e,"C",(function(){return P})),n.d(e,"a",(function(){return T})),n.d(e,"e",(function(){return O})),n.d(e,"f",(function(){return S})),n.d(e,"j",(function(){return E})),n.d(e,"p",(function(){return x})),n.d(e,"t",(function(){return A})),n.d(e,"x",(function(){return I})),n.d(e,"y",(function(){return N})),n.d(e,"d",(function(){return D})),n.d(e,"i",(function(){return W})),n.d(e,"m",(function(){return R})),n.d(e,"s",(function(){return j})),n.d(e,"w",(function(){return $})),n.d(e,"D",(function(){return L})),n.d(e,"E",(function(){return M}));n("99af"),n("7db0"),n("caad"),n("c975"),n("d81d"),n("a434"),n("2532");var i,r=n("2909"),a=n("ade3"),s=n("ceac"),o=n.n(s),c=n("df70"),u="NUKE_CONTENT",l="LOAD_CONTENT",h="ADD_PLAN",d="ARCHIVE_PLAN",p="DELETE_PLAN",f="REARRANGE_PLANS",v="RESTORE_PLAN",m="UPDATE_PLAN",g="ADD_SECTION",w="ARCHIVE_SECTION",C="DELETE_SECTION",k="REARRANGE_SECTIONS",y="RESTORE_SECTION",b="UPDATE_SECTION",_="UPDATE_SECTION_CONTENT",P="UPDATE_SECTION_TAGS",T="ADD_CHAPTER",O="ADD_TOPIC_TO_CHAPTER",S="ARCHIVE_CHAPTER",E="DELETE_CHAPTER",x="REARRANGE_CHAPTERS",A="RESTORE_CHAPTER",I="UPDATE_CHAPTER",N="UPDATE_CHAPTER_CONTENT",D="ADD_TOPIC",W="ARCHIVE_TOPIC",R="DELETE_TOPIC",j="REARRANGE_TOPICS",$="RESTORE_TOPIC",L="UPDATE_TOPIC",M="UPDATE_TOPIC_CONTENT",G={state:{plans:[],chapters:[],topics:[]},mutations:(i={},Object(a["a"])(i,u,(function(t){t.plans=[],t.chapters=[],t.topics=[]})),Object(a["a"])(i,l,(function(t,e){var n=e.plans,i=e.chapters,r=e.topics;t.plans=n,t.chapters=i,t.topics=r})),Object(a["a"])(i,h,(function(t,e){var n=e.plan;c["a"].timestamp(n),t.plans.push(n)})),Object(a["a"])(i,d,(function(t,e){var n=e.plan;if(!t.plans.includes(n))throw new Error('ARCHIVE_PLAN: Cannot archive plan "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!0})),Object(a["a"])(i,p,(function(t,e){var n=e.plan;if(!t.plans.includes(n))throw new Error('DELETE_PLAN: Cannot delete plan "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),t.plans.splice(t.plans.indexOf(n),1)})),Object(a["a"])(i,f,(function(t,e){var n=e.plans;if(!K(t.plans,n))throw new Error("REARRANGE_PLANS: Cannot rearrange plans: an invalid plan array was received.");c["a"].timestampEach(n),t.plans=n})),Object(a["a"])(i,v,(function(t,e){var n=e.plan;if(!t.plans.includes(n))throw new Error('RESTORE_PLAN: Cannot restore plan "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!1})),Object(a["a"])(i,m,(function(t,e){var n=e.plan,i=e.newTitle;if(!t.plans.includes(n))throw new Error('UPDATE_PLAN: Cannot update plan "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.title=i})),Object(a["a"])(i,g,(function(t,e){var n=e.plan,i=e.section;if(!t.plans.includes(n))throw new Error('ADD_SECTION: Cannot mutate plan "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),n.sections.push(i)})),Object(a["a"])(i,w,(function(t,e){var n=e.plan,i=e.section;if(!t.plans.includes(n))throw new Error('ARCHIVE_SECTION: Cannot archive section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('ARCHIVE_SECTION: Cannot archive section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),i.archived=!0})),Object(a["a"])(i,C,(function(t,e){var n=e.plan,i=e.section;if(!t.plans.includes(n))throw new Error('DELETE_SECTION: Cannot delete section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('DELETE_SECTION: Cannot delete section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),n.sections.splice(n.sections.indexOf(i),1)})),Object(a["a"])(i,k,(function(t,e){var n=e.plan,i=e.sections;if(!t.plans.includes(n))throw new Error('REARRANGE_SECTIONS: Cannot rearrange sections of plan "'.concat(n.title,'": does not exist.'));if(!K(n.sections,i))throw new Error("REARRANGE_SECTIONS: Cannot rearrange sections: an invalid section array was received.");c["a"].timestamp(n),c["a"].timestampEach(i),n.sections=i})),Object(a["a"])(i,y,(function(t,e){var n=e.plan,i=e.section;if(!t.plans.includes(n))throw new Error('RESTORE_SECTION: Cannot restore section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('RESTORE_SECTION: Cannot restore section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),i.archived=!1})),Object(a["a"])(i,b,(function(t,e){var n=e.plan,i=e.section,r=e.newTitle;if(!t.plans.includes(n))throw new Error('UPDATE_SECTION: Cannot update section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('UPDATE_SECTION: Cannot update section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),i.title=r})),Object(a["a"])(i,_,(function(t,e){var n=e.plan,i=e.section,r=e.newContent;if(!t.plans.includes(n))throw new Error('UPDATE_SECTION_CONTENT: Cannot update section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('UPDATE_SECTION_CONTENT: Cannot update section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),i.content=r})),Object(a["a"])(i,P,(function(t,e){var n=e.plan,i=e.section,r=e.newTags;if(!t.plans.includes(n))throw new Error('UPDATE_SECTION_TAGS: Cannot update section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('UPDATE_SECTION_TAGS: Cannot update section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),i.tags=r})),Object(a["a"])(i,T,(function(t,e){var n=e.chapter;c["a"].timestamp(n),t.chapters.push(n)})),Object(a["a"])(i,O,(function(t,e){var n=e.chapter,i=e.topic;if(!t.chapters.includes(n))throw new Error('ADD_TOPIC_TO_CHAPTER: Cannot mutate chapter "'.concat(n.title,'": does not exist.'));if(!t.topics.includes(i))throw new Error('ADD_TOPIC_TO_CHAPTER: Cannot include topic "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),n.topics[i.guid]={content:null,guid:i.guid}})),Object(a["a"])(i,S,(function(t,e){var n=e.chapter;if(!t.chapters.includes(n))throw new Error('ARCHIVE_CHAPTER: Cannot archive chapter "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!0})),Object(a["a"])(i,E,(function(t,e){var n=e.chapter;if(!t.chapters.includes(n))throw new Error('DELETE_CHAPTER: Cannot delete chapter "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),t.chapters.splice(t.chapters.indexOf(n),1)})),Object(a["a"])(i,x,(function(t,e){var n=e.chapters;if(!K(t.chapters,n))throw new Error("REARRANGE_CHAPTERS: Cannot rearrange chapters: an invalid chapter array was received.");c["a"].timestampEach(n),t.chapters=n})),Object(a["a"])(i,A,(function(t,e){var n=e.chapter;if(!t.chapters.includes(n))throw new Error('RESTORE_CHAPTER: Cannot restore chapter "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!1})),Object(a["a"])(i,I,(function(t,e){var n=e.chapter,i=e.newTitle;if(!t.chapters.includes(n))throw new Error('UPDATE_CHAPTER: Cannot update chapter "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.title=i})),Object(a["a"])(i,N,(function(t,e){var n=e.chapter,i=e.newContent;if(!t.chapters.includes(n))throw new Error('UPDATE_CHAPTER_CONTENT: Cannot update content of chapter "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.content=i})),Object(a["a"])(i,D,(function(t,e){var n=e.topic;c["a"].timestamp(n),t.topics.push(n)})),Object(a["a"])(i,W,(function(t,e){var n=e.topic;if(!t.topics.includes(n))throw new Error('ARCHIVE_TOPIC: Cannot archive topic "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!0})),Object(a["a"])(i,R,(function(t,e){var n=e.topic;if(!t.topics.includes(n))throw new Error('DELETE_TOPIC: Cannot archive topic "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),t.topics.splice(t.topics.indexOf(n),1),t.chapters=t.chapters.map((function(t){return t.topics[n.guid]&&delete t.topics[n.guid],t}))})),Object(a["a"])(i,j,(function(t,e){var n=e.topics;if(!K(t.topics,n))throw new Error("REARRANGE_TOPICS: Cannot rearrange topics: an invalid topic array was received.");c["a"].timestampEach(n),t.topics=n})),Object(a["a"])(i,$,(function(t,e){var n=e.topic;if(!t.topics.includes(n))throw new Error('RESTORE_TOPIC: Cannot restore topic "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!1})),Object(a["a"])(i,L,(function(t,e){var n=e.topic,i=e.newTitle;if(!t.topics.includes(n))throw new Error('UPDATE_TOPIC: Cannot update topic "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.title=i})),Object(a["a"])(i,M,(function(t,e){var n=e.chapter,i=e.topic,r=e.newContent;if(!t.chapters.includes(n))throw new Error('UPDATE_TOPIC_CONTENT: Cannot update topic content for chapter "'.concat(n.title,'": does not exist.'));if(!t.topics.find((function(t){return t.guid===i.guid})))throw new Error('UPDATE_TOPIC_CONTENT: Cannot update content of topic "'.concat(i.title,'": does not exist.'));c["a"].timestamp(i),i.content=r})),i)};function K(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;var n=[].concat(Object(r["a"])(o()(t,e)),Object(r["a"])(o()(e,t)));return 0===n.length}e["F"]=G},"84e6":function(t,e,n){"use strict";var i=n("f6e0"),r=n.n(i);r.a},"86e1":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return u}));var i,r=n("ade3"),a="SET_STATUS_DONE",s="SET_STATUS_ERROR",o="SET_STATUS_OFFLINE",c="SET_STATUS_SAVING",u={SAVED:"SAVED",SAVING:"SAVING",ERROR:"ERROR",OFFLINE:"OFFLINE"},l={state:{status:u.SAVED},mutations:(i={},Object(r["a"])(i,a,(function(t){t.status=u.SAVED})),Object(r["a"])(i,s,(function(t){t.status=u.ERROR})),Object(r["a"])(i,o,(function(t){t.status=u.OFFLINE})),Object(r["a"])(i,c,(function(t){t.status!==u.OFFLINE&&(t.status=u.SAVING)})),i)};e["f"]=l},"8ef8":function(t,e,n){"use strict";var i=n("d3e1"),r=n.n(i);r.a},"8fdb":function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return g})),n.d(e,"f",(function(){return w})),n.d(e,"g",(function(){return C})),n.d(e,"h",(function(){return k}));n("d81d"),n("45fc"),n("a434"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0");var i,r,a=n("ade3"),s=n("be94"),o=n("3835"),c=n("7f24"),u=n("5145"),l=n("bec3"),h=n("8410"),d=n("e935"),p="ADD_DOCUMENT",f="CHANGE_DOCUMENT",v="DELETE_DOCUMENT",m="INIT_DOCUMENTS",g="REMOVE_OWNED_DOCUMENT",w="SET_UP_DOCUMENT",C="UNLOAD_CURRENT_DOCUMENT",k="UPDATE_DOCUMENT_NAME",y="LOAD_DOCUMENTS",b="UPDATE_DOCUMENT_METADATA",_=new c["b"]("CURRENT_DOCUMENT"),P={state:{currentDocument:null,ownedDocuments:[]},actions:(i={},Object(a["a"])(i,f,(function(t,e){var n=t.commit,i=t.dispatch,r=e.guid,a=e.name,s=e.shouldReset;return i(C,{shouldReset:s}).then((function(){return Object(u["b"])().then((function(t){var e=[t.getAllChapters(r),t.getAllPlans(r),t.getAllTopics(r),t.isPremium()?t.getAllWorkshops(r):Promise.resolve(!1)];return Promise.all(e).then((function(t){var e=Object(o["a"])(t,4),i=e[0],s=e[1],c=e[2],u=e[3];n(h["n"],{plans:s,chapters:i,topics:c}),u&&n(d["d"],{workshops:u}),n(b,{guid:r,name:a}),_.cacheSet({guid:r,name:a})}),(function(t){throw t}))}))}))})),Object(a["a"])(i,v,(function(t,e){var n=t.commit,i=t.dispatch,r=e.guid;i(C).then((function(){n(g,{guid:r})}))})),Object(a["a"])(i,m,(function(t){var e=t.commit,n=t.dispatch,i=t.state;return Object(u["b"])().then((function(t){return t.getAllDocuments().then((function(t){e(y,t);var r=_.cacheGet();if(r&&i.ownedDocuments.some((function(t){return t.guid===r.guid})))return n(f,Object(s["a"])({},r,{shouldReset:!1}))}))}),console.error)})),Object(a["a"])(i,w,(function(t,e){var n=t.dispatch,i=t.state,r=e.document,a=e.type,s=a.plans.map((function(t){return{archived:!1,guid:Object(l["a"])(),title:t,sections:[{archived:!1,content:null,guid:Object(l["a"])(),tags:[],title:t}]}})),o=a.chapters.map((function(t){return{archived:!1,content:null,guid:Object(l["a"])(),title:t,topics:{}}})),c=a.topics.map((function(t){return{archived:!1,guid:Object(l["a"])(),title:t}}));return Object(u["b"])().then((function(t){return Promise.resolve(t.addDocument(r)).then((function(){return t}))})).then((function(t){return t.saveAllContent(r.guid,{chapters:o,plans:s,topics:c})})).then((function(){return i.ownedDocuments.push(r)})).then((function(){return n(f,r)}))})),Object(a["a"])(i,C,(function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shouldReset:!1},i=n.shouldReset;return new Promise((function(t){i&&Object(c["c"])(),e(b,{guid:null,name:null}),e(h["o"]),e(d["e"]),t()}))})),i),mutations:(r={},Object(a["a"])(r,p,(function(t,e){var n=e.guid,i=e.name;t.ownedDocuments.push({guid:n,name:i})})),Object(a["a"])(r,y,(function(t,e){t.ownedDocuments=e})),Object(a["a"])(r,g,(function(t,e){var n,i=e.guid;t.ownedDocuments.some((function(t,e){if(t.guid===i)return n=e,!0})),t.ownedDocuments.splice(n,1)})),Object(a["a"])(r,b,(function(t,e){var n=e.guid,i=e.name;t.currentDocument={guid:n,name:i}})),Object(a["a"])(r,k,(function(t,e){var n=e.guid,i=e.name;t.currentDocument.name=i,_.cacheSet({guid:n,name:i}),t.ownedDocuments.some((function(t){if(t.guid===n)return t.name=i,!0}))})),r)};e["i"]=P},9316:function(t,e,n){},9463:function(t,e,n){},9718:function(t,e,n){"use strict";var i=n("9463"),r=n.n(i);r.a},a589:function(t,e,n){},a676:function(t,e,n){"use strict";var i=n("6a64"),r=n.n(i);r.a},a812:function(t,e,n){"use strict";var i=n("f27a"),r=n.n(i);r.a},b4c6:function(t,e,n){},bc39:function(t,e,n){},bec3:function(t,e,n){"use strict";var i=n("c437"),r=n.n(i),a=function(){return r()()};e["a"]=a},c16e:function(t,e,n){"use strict";var i=n("f9fe"),r=n.n(i);r.a},c394:function(t,e,n){},c57b:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAArCAYAAAA9iMeyAAAABHNCSVQICAgIfAhkiAAACsRJREFUeJztnU2IXUkVx//VBBlR4Q0E1IXY2Ywbxc4qgjBpRUGYRXpwMStJZ+UXmB6/QGeRFgbcyEyCMoqb7ixEBhU74oDgIi+u3Ji8wCDoYrpn4QeI9ouMODrqz0XVzbvvvqo6de/76FbuH5qkc2+dOlV1zqlzTp26cZoTwEVJm+FnPfxUGEoaSbrlnBvO21ePHv8zAC4Dh5TjNjA4ab579FgqgE3gXgvFqOO4V5Ie/7cAtguU4AjYDT/XI8/3T3ocPXrEAAyAa52MOLBToBw7kXb7zV1kIaPp0WOBAJ4FvhyM+hjYkqQzhY23JD1vvHbFORfbHd7d+L2zixU0+7KkDUnj8HPTOXfUlWaP5aC2Vuvya34kn6wZnShjkoD3SXpR0nsk3ZX0K0mfDI9/GP6+D+yVEBuE2CGHg0Tbq7GXOw5qnXRSwFLeHitEkJlUnGoL3XJ5Owe8Zsjzy8AHATvzio8lLKxH2u2lXu44sB8bPOx2odtj8SAee9Zx/YT4OgPcDTwcAx8jrcjHwEdLiLbePYCtNu8XDu7I4OOwC90eiwdwYKwVnEA2E/hGrf8ngI8YPH7VIrheMNDtSLvcrrPZcXCddrIeqwdlCZ1OcjAHT3Vl+C5wFvhThr87gFsz6JYIXCzoSgViN+c4US9p15+xnA6ceCBeB3BW0vfDr4eSPhd+P5tocizpKedcPhzAHwpmkWlbt/hj5owR5uGlx2pRslascAcBfh76fAM4D3zR4O2JUsIbp0UoKTikXBUvPfLgFBkzpjOpX8IryBsZ1l5o24EVHG8saWxNPqzMSF8MeUqAHS+u5NwKeC/wj9DnHeCtwCsZvn4DPFKnYcUgkmRlnbYCMwPgYvhZRixgKWKvIKcHVuy69LUKgv4jSW9SiCkkfUvSuUSTf0r6uHPu9bYdDfAxRA6xA7yFHt4Z/UMoDehx8sAuZp0pSVoCD1dq/V0CnjJ4+uw8nZUUKS5tIjhFsVCPPPAG1cLS0/HAY8AQeAZ/XPHXDD8/mbezAe3uflRYyOk2toL27tUpAXaAvtK6Ofzp+S8z/PwBeDTVPhuDEMp/5X24Llq/qHy41Xen0/keS4EVK656rb4m6ULiGfLnHe0rzIMlyO0aVnZrYVYdv1Xm0J+gnxIwe72hiZXFisDjwH8yvHy9K+FrxiC3w3tbYULqyjLCp/kWlskyeOlL3U8RyBvV8Qr5eBTvPqVwFyi67tEknKzCDVjpjUDsAP1EKkN7zAK7dm9l7hXw0wwfrwGpdO8UpjQIH1TPFB/W8EDSwlJ0eNeougA1kP8yiuTz5Efy/up5g0zqLsqlQK+ivVF7/+nUJatGu/pXWg7kL4WNG+9fq70/knTDOWcKQhj7JYVzpFpfI/mLYAfyF4yOwvsbki6G9zfk69piNzg3At1qLqs/R2Hcw0b/m5pcPEu6xeH9qv9qPgearNVQkjOGvRIFAT4jKVcu8mnnXLvqb/Il6hUWlZVax3/lZF7MbNn4HcfKuM2MI7SzSvs3G21Sd1SSfjbtP3pxL8HXsEF3gD2nlXJsJ2jO8I1fK8urKMXSi0nxp+d/z/DwvS5ES9K440UMEDtlO8ZOAFSI3UUpKYuPKYiVCICagpB3/WasE36OrUtfY+xD2Qq7DfolBYJD8vPfVLqUItUxKuR36RW+wCP4cpEUXgHe0oZmlebdUUEqteletAX+umXuyuXTzrmBc25d0pMFJGNbdslCxFyJku2/7pbl0pnr1IxJ+PttTdypJh5I+lAY+0DSjQJemmMoGfdA+fl/CHwiZk/pKwQ3nMeGbDdYWo179ZykxxLP/iVfSvK31lQpOwTMxSYlfVg7R8yqW4hd9S2xpDOLXtCuGXtY79d3G8v12ZiHlxbzZeGgsP+ZxAj2DrzU8nb8DcEcvtKVcEnsMdcA8X5sbqtOBcw5pNpYixu1tNgKHHPnckKxGd6xbtfFDIM1hlRiohQpN24b+yMdUVcbQ0Fi/C4KwDuAv2S6vwNYCYQo1mSffEqS5vy27q7yt/26BP8pl8JS5NQ4ulSgbsu7RzNwzg2DIF0z6HZJU8/wQvlh6ZVYe0n3w2ebdpRfq/2Eq30x0+ZOIW+tEQT/RUmpcpGy24EJrMkWqIqRTvc+mKRyc4hZZ6u/VSvITH8hBRuz5q+GP6uUaAq3EsLWZQwl63MzKMGuJjxKXoA3g0JfNWjMnIPFdpQGlhmgPyPp8czzTzjn/tiV+JpmP+yWQtdyDsuC3k8ISev7H2GhcpYs2i7g/blGmR005upV71pxWypwzc514uNr1nw9PMNyzo1CIuS8pHPOuc2wBpvKK/SrHftOVjvg3e/n8XGaZUibbS/I11ql8IJz7qU2NJs4o3LB31LLTAQ+a2UJSUrwuky6ZXmjyhgUK9dfzkWI9VmNyVLWlGXNKev9FnzUMeMaRYTdopHit9NuzyRT9rB/4JxzznS5gbdJ+oHSBbcvS/qCRcdCyY3CCpfbuFmFyiGlJz0rXImTcKsQLpWmttrlXISmMD+QdEBBUiNmjQuUNTWG7A6oslhnWW7tDCLKUcFy8SrsSXpX4tnr6nI7MII1pS1SDLctJQlb5m2VKYcU2QlC3NIl5rGEJLVbWVt7Kq0aizFSQWwTqXlvreRhTXKu0f3C7xdb7naKhmXMZg4glT6PMQ+jgTcr/ckeSfq8c+63Fp0SrKldADWQdA9fevBwUpjcR9+T/+7QvDnvriXRrZUqCJfFb0rgm9bugSaW2lrorrtZl3it1DW23O2YMduWMVamD02tw+JbBg+Sjzuek082/Lvx7CXn3LcLaJSB7tdpS2B9iQQirghlB5frjTYl9ULN8ozcR5aT7ULbWEnLbu25dZZxL0Kz5EuWh402JWMozVRaiK1VSU3dFmW1YuDn7SoTGTik5rUADvhdePYd4MPA78Pv2duBnRAYL619aoMRZR982G7wU6JU4IXiEn7nsmqcKhwSrBleGEuLBg8JCsnkP1lpYtQYh3mPnpqSU66s4I3BJn78ZpsWsmCdhu803i/5xCj4+YsdPja/4btP3NAd1Pr8QOPZr4ELwM+AXLq3O1j8LvLwtDUyCU1Ugr6BT/etAs0dqrRAMCWMY+JlLxbdauxFgt4RxQe82MbpOPC6iX2pzuSL6R3liLShG9Z4fDby/M/A2xejDenJsa5KlmLM9Ja4TBeujhHlgl7HGK+cpTtXtH1iTksqi1M0F4Xik3rK6tgWwe8o0lfOrd6u8disHv4FUHqWNx+YX0lGdKjTiWCfMhelwgHeRWkrkEOm3ZzS0u0KIzJZvcBTG5pjvOCU1sdVPOTQqoyH9jJwgF+rUiUZ4uclp4x1Y3UMXA28OeCb4d/HwKfoWGPVGXi/sq1FGJP5BhblgjJkugq25O5I0y8uWeAjEtXJlO0kYwrv3eNjnZKx7zOd7bHGUVlhyyi0qsLGr1XpHG7V2m2Sl5upD5iTNoD7xJMVO3h52AOeBN7ZZlwLBRNrbAXvo8B40UWqMMCDGt0xXimuk3ZTNpj+MMQw/CQXPizWARPBrPdjppDDAl1neucbBprF402MvRKiI4tebRzjGg/7TAvmVu35qDY/1Xg7XXILfe8zrdwVzWhWLMxbfa1GuTEya4zqCtRU0q1AZ+lfZazD3J7wLkh1cFf9Z4xHkkbzXqDq0YPJIeeMPAUjuC5pOGc1eWf8F8Tfzk29UlcdAAAAAElFTkSuQmCC"},c9d8:function(t,e,n){"use strict";var i=n("bc39"),r=n.n(i);r.a},cb2e:function(t,e,n){},cb46:function(t,e,n){"use strict";n("99af"),n("d81d"),n("b0c0"),n("d3b7");var i=n("d4ec"),r=n("bee2"),a=n("bc3a"),s=n.n(a),o=s.a.create({headers:{Pragma:"no-cache","Cache-Control":"no-store"}}),c=function(t){return"/api/".concat(t)},u=function(){function t(){Object(i["a"])(this,t),this.isOnlineCached=null}return Object(r["a"])(t,[{key:"isOnline",value:function(){var t=this,e=this.simpleGet(c("online"));return e.then((function(){t.isOnlineCached=!0}),(function(e){e.response&&401===e.response.status&&setTimeout((function(){return window.location.reload()}),2e3),t.isOnlineCached=!1})),e}},{key:"simpleGet",value:function(t){return o.get(t).then((function(t){return t.data}))}},{key:"simplePost",value:function(t,e){return o.post(t,e).then((function(t){return t.data}))}},{key:"saveAllContent",value:function(t){return this.simplePost(c("document/saveAll"),t)}},{key:"addDocument",value:function(t){return this.simplePost(c("document/add"),t)}},{key:"deleteDocument",value:function(t){return this.simplePost(c("document/delete"),t)}},{key:"getDocuments",value:function(){return this.simpleGet(c("documents")).then((function(t){return t.map((function(t){return t}))}))}},{key:"updateDocument",value:function(t){return this.simplePost(c("document/update"),t)}},{key:"arrangeChapters",value:function(t){return this.simplePost(c("chapter/arrange"),t)}},{key:"deleteChapter",value:function(t){return this.simplePost(c("chapter/delete"),t)}},{key:"getChapters",value:function(t){return this.simpleGet(c("chapters/".concat(t)))}},{key:"updateChapter",value:function(t){return this.simplePost(c("chapter/update"),t)}},{key:"arrangeTopics",value:function(t){return this.simplePost(c("topic/arrange"),t)}},{key:"deleteTopic",value:function(t){return this.simplePost(c("topic/delete"),t)}},{key:"getTopics",value:function(t){return this.simpleGet(c("topics/".concat(t)))}},{key:"updateTopic",value:function(t){return this.simplePost(c("topic/update"),t)}},{key:"arrangePlans",value:function(t){return this.simplePost(c("plan/arrange"),t)}},{key:"deletePlan",value:function(t){return this.simplePost(c("plan/delete"),t)}},{key:"getPlans",value:function(t){return this.simpleGet(c("plans/".concat(t)))}},{key:"updatePlan",value:function(t){return this.simplePost(c("plan/update"),t)}},{key:"arrangeSections",value:function(t){return this.simplePost(c("section/arrange"),t)}},{key:"deleteSection",value:function(t){return this.simplePost(c("section/delete"),t)}},{key:"updateSection",value:function(t){return this.simplePost(c("section/update"),t)}},{key:"deleteWorkshopContent",value:function(t){var e=t.documentGuid,n=t.guid;return this.simplePost(c("workshop-content/delete"),{documentGuid:e,guid:n})}},{key:"getWorkshops",value:function(t){return this.simpleGet(c("workshop-content/".concat(t)))}},{key:"updateWorkshopContents",value:function(t){var e=t.documentGuid,n=t.workshops;return this.simplePost(c("workshop-content/update"),{documentGuid:e,workshops:n})}},{key:"docExport",value:function(t){return this.simpleGet(c("backup/export/document/".concat(t)))}},{key:"docImport",value:function(t){var e=t.guid,n=t.name,i=t.chapters,r=t.topics,a=t.plans,s=t.workshops;return this.simplePost(c("backup/import/document"),{guid:e,name:n,chapters:i,topics:r,plans:a,workshops:s})}},{key:"fullExport",value:function(){return this.simpleGet(c("backup/export"))}},{key:"fullImport",value:function(t){return this.simplePost(c("backup/import"),t)}},{key:"exportToWord",value:function(t){var e=t.guid,n=t.title,i=t.includeArchived;return new Promise((function(t){window.open(c("word/export-chapters?guid=".concat(e,"&title=").concat(n,"&includeArchived=").concat(!!i)),"_blank"),t()}))}}]),t}();e["a"]=new u},d3e1:function(t,e,n){},d5d1:function(t,e,n){},df70:function(t,e,n){"use strict";n("7db0"),n("4160"),n("c975"),n("a434"),n("159b");var i=n("d4ec"),r=n("bee2"),a=n("b8ce"),s=n.n(a),o=function(){function t(){Object(i["a"])(this,t),this.timestampField="updated_at"}return Object(r["a"])(t,[{key:"timestamp",value:function(t){t[this.timestampField]=Date.now()}},{key:"timestampEach",value:function(t){var e=this;t.forEach((function(t){return e.timestamp(t)}))}},{key:"getTimestamp",value:function(t){return t[this.timestampField]?new Date(t[this.timestampField]).getTime():null}},{key:"getMostRecent",value:function(t,e){var n=this.getTimestamp(t),i=this.getTimestamp(e);return i&&i>n?e:t}},{key:"getMostRecentEach",value:function(t,e,n,i){var r=this,a=[],o=function(r){var o=s()(t[r]);if(!n(o))return"continue";a.push(o);var c=e.find((function(t){return n(t)===n(o)}));c||i(o)};for(var c in t)o(c);var u=function(t){var o=s()(e[t]);if(!n(o))return"continue";var c=a.find((function(t){return n(t)===n(o)}));if(!c)return i(o),a.splice(t,0,o),"continue";var u=r.getMostRecent(c,o);if(u===c)return"continue";a.splice(a.indexOf(c),1,u)};for(var l in e)u(l);return a}}]),t}();e["a"]=new o},e35a:function(t,e,n){},e4fc:function(t,e,n){},e5e9:function(t,e,n){"use strict";var i=n("e35a"),r=n.n(i);r.a},e935:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return p}));n("a4d3"),n("e01a"),n("d28b"),n("caad"),n("c975"),n("fb6a"),n("a434"),n("d3b7"),n("2532"),n("3ca3"),n("ddb0");var i,r=n("ade3"),a=n("4f96"),s=n("df70"),o="ADD_WORKSHOP",c="ARCHIVE_WORKSHOP",u="DELETE_WORKSHOP",l="RESTORE_WORKSHOP",h="UPDATE_WORKSHOPS_CONTENT",d="LOAD_WORKSHOPS",p="NUKE_WORKSHOPS",f={state:{workshops:[]},mutations:(i={},Object(r["a"])(i,o,(function(t,e){var n=e.workshop;s["a"].timestamp(n),t.workshops.push(n)})),Object(r["a"])(i,c,(function(t,e){var n=e.workshop;if(!t.workshops.includes(n))throw new Error("".concat(c,': Cannot archive workshop "').concat(n.title,'": does not exist.'));s["a"].timestamp(n),n.archived=!0})),Object(r["a"])(i,u,(function(t,e){var n=e.workshop;if(!t.workshops.includes(n))throw new Error("".concat(u,': Cannot delete workshop "').concat(n.title,'": does not exist.'));s["a"].timestamp(n),t.workshops.splice(t.workshops.indexOf(n),1)})),Object(r["a"])(i,l,(function(t,e){var n=e.workshop;if(!t.workshops.includes(n))throw new Error("".concat(l,': Cannot restore workshop "').concat(n.title,'": does not exist.'));s["a"].timestamp(n),n.archived=!1})),Object(r["a"])(i,h,(function(t,e){var n=Object(a["a"])(e.workshopUpdates),i=n.slice(0),r=!0,o=!1,c=void 0;try{for(var u,l=i[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var d=u.value,p=d.workshop,f=d.newContent,v=d.newTitle;if(!t.workshops.includes(p))throw new Error("".concat(h,': Cannot update workshop "').concat(p.title,'": does not exist.'));s["a"].timestamp(p),p.content=f,v&&(p.title=v)}}catch(m){o=!0,c=m}finally{try{r||null==l.return||l.return()}finally{if(o)throw c}}})),Object(r["a"])(i,d,(function(t,e){var n=e.workshops;if(!Array.isArray(n))throw new Error("".concat(d,": Cannot load workshops: argument is not an array."));t.workshops=n})),Object(r["a"])(i,p,(function(t){t.workshops=[]})),i)};e["h"]=f},eab2:function(t,e,n){},ee8b:function(t,e,n){},efa2:function(t,e,n){"use strict";var i=n("d952"),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.arrow,n=void 0===e||e,r=t.content,a=t.distance,s=void 0===a?10:a,o=t.el,c=t.interactive,u=t.placement,l=void 0===u?"bottom":u,h=t.hideOnClick,d=void 0===h||h;return Object(i["a"])(o,{arrow:n,distance:s,hideOnClick:d,content:r,interactive:c,placement:l})},a=r,s={bind:function(t,e){var n=e.value,i=void 0===n?{}:n,r=i.arrow,s=void 0===r||r,o=i.content,c=i.distance,u=void 0===c?10:c,l=i.interactive,h=void 0!==l&&l,d=i.enabled,p=void 0===d||d,f=o,v=t.getAttribute("title");!f&&v&&(f=v,t.removeAttribute("title"));var m=a({arrow:s,content:f,distance:u,el:t,interactive:h});m?p||m.disable():console.warn("Expected a Tippy.js instance to be returned")},update:function(t,e){var n=e.value,i=void 0===n?{}:n,r=i.enabled,a=void 0===r||r,s=t._tippy;s?a?s.enable():s.disable():console.warn("Expected a Tippy.js instance on el with v-tooltip")}};e["a"]=s},f27a:function(t,e,n){},f6e0:function(t,e,n){},f840:function(t,e,n){"use strict";var i=n("9316"),r=n.n(i);r.a},f8cb:function(t,e,n){},f8fb:function(t,e,n){},f9fe:function(t,e,n){},fb99:function(t,e,n){"use strict";var i=n("3a73"),r=n.n(i);r.a},fd93:function(t,e,n){"use strict";var i=n("4ebc"),r=n.n(i);r.a}});
//# sourceMappingURL=app.5929d4c3.js.map