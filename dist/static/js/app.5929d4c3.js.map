{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/img/modal-logo.png","webpack:///./src/app/NotFound.vue?7b38","webpack:///src/app/NotFound.vue","webpack:///./src/app/NotFound.vue?c41c","webpack:///./src/app/NotFound.vue","webpack:///./src/app/composer/composer.page.vue?b46b","webpack:///./src/app/shared/plansList.vue?87a4","webpack:///./src/app/shared/chipsList.vue?e90b","webpack:///src/app/shared/chipsList.vue","webpack:///./src/app/shared/chipsList.vue?7796","webpack:///./src/app/shared/chipsList.vue","webpack:///./src/app/shared/tabsList.vue?55af","webpack:///src/app/shared/tabsList.vue","webpack:///./src/app/shared/tabsList.vue?28a9","webpack:///./src/app/shared/tabsList.vue","webpack:///./src/app/shared/validate.js","webpack:///src/app/shared/plansList.vue","webpack:///./src/app/shared/plansList.vue?c7c3","webpack:///./src/app/shared/plansList.vue","webpack:///./src/app/composer/textMap.vue?e208","webpack:///./src/app/composer/textMagnifier.vue?765f","webpack:///src/app/composer/textMagnifier.vue","webpack:///./src/app/composer/textMagnifier.vue?9788","webpack:///./src/app/composer/textMagnifier.vue","webpack:///src/app/composer/textMap.vue","webpack:///./src/app/composer/textMap.vue?d10b","webpack:///./src/app/composer/textMap.vue","webpack:///./src/app/shared/topicList.vue?f147","webpack:///src/app/shared/topicList.vue","webpack:///./src/app/shared/topicList.vue?0037","webpack:///./src/app/shared/topicList.vue","webpack:///./src/app/composer/composer.store.js","webpack:///./src/app/composer/wordDefine.vue?fbb2","webpack:///src/app/composer/wordDefine.vue","webpack:///./src/app/composer/wordDefine.vue?be3e","webpack:///./src/app/composer/wordDefine.vue","webpack:///./src/app/shared/workshopList.vue?5fb8","webpack:///src/app/shared/workshopList.vue","webpack:///./src/app/shared/workshopList.vue?e352","webpack:///./src/app/shared/workshopList.vue","webpack:///src/app/composer/composer.page.vue","webpack:///./src/app/composer/composer.page.vue?410c","webpack:///./src/app/composer/composer.page.vue","webpack:///./src/app/documentEdit/documentEdit.page.vue?f38d","webpack:///src/app/documentEdit/documentEdit.page.vue","webpack:///./src/app/documentEdit/documentEdit.page.vue?d150","webpack:///./src/app/documentEdit/documentEdit.page.vue","webpack:///./src/app/outliner/outliner.page.vue?39d1","webpack:///src/app/outliner/outliner.page.vue","webpack:///./src/app/outliner/outliner.page.vue?3e8a","webpack:///./src/app/outliner/outliner.page.vue","webpack:///./src/app/planner/planner.page.vue?ae5c","webpack:///src/app/planner/planner.page.vue","webpack:///./src/app/planner/planner.page.vue?9d86","webpack:///./src/app/planner/planner.page.vue","webpack:///./src/app/search/search.page.vue?a33e","webpack:///./src/app/search/match.vue?7f54","webpack:///src/app/search/match.vue","webpack:///./src/app/search/match.vue?8b92","webpack:///./src/app/search/match.vue","webpack:///src/app/search/search.page.vue","webpack:///./src/app/search/search.page.vue?9371","webpack:///./src/app/search/search.page.vue","webpack:///./src/app/api/userApi.js","webpack:///./src/app/router.js","webpack:///./src/app/App.vue?2959","webpack:///./src/app/shared/documentMenu.vue?10ac","webpack:///./src/app/shared/documentPicker.vue?89c5","webpack:///src/app/shared/documentPicker.vue","webpack:///./src/app/shared/documentPicker.vue?e644","webpack:///./src/app/shared/documentPicker.vue","webpack:///src/app/shared/documentMenu.vue","webpack:///./src/app/shared/documentMenu.vue?888c","webpack:///./src/app/shared/documentMenu.vue","webpack:///./src/app/IdleWatcher.vue?4ebb","webpack:///src/app/IdleWatcher.vue","webpack:///./src/app/IdleWatcher.vue?c8e1","webpack:///./src/app/IdleWatcher.vue","webpack:///./src/app/shared/mainMenu.vue?aa21","webpack:///./src/app/offlineStorage/offlineStorage.vue?f46e","webpack:///src/app/offlineStorage/offlineStorage.vue","webpack:///src/app/shared/statusSignal.vue","webpack:///./src/app/shared/user.store.js","webpack:///./src/app/offlineStorage/offlineStorage.vue?d694","webpack:///./src/app/offlineStorage/offlineStorage.vue","webpack:///./src/app/shared/statusSignal.vue?a1d7","webpack:///./src/app/shared/statusSignal.vue?2be5","webpack:///./src/app/shared/statusSignal.vue","webpack:///src/app/shared/mainMenu.vue","webpack:///./src/app/shared/mainMenu.vue?72df","webpack:///./src/app/shared/mainMenu.vue","webpack:///./src/app/wizard/wizard.vue?2f50","webpack:///./src/app/wizard/documentTypes.js","webpack:///src/app/wizard/wizard.vue","webpack:///./src/app/wizard/wizard.vue?6c88","webpack:///./src/app/wizard/wizard.vue","webpack:///src/app/App.vue","webpack:///./src/app/App.vue?dad1","webpack:///./src/app/App.vue","webpack:///./src/app/api/chapters.persist.js","webpack:///./src/store.js","webpack:///./src/app.js","webpack:///./src/app/wizard/wizard.vue?504d","webpack:///./src/app/shared/quillEditor.vue?01cf","webpack:///./src/app/shared/quillBuilder.js","webpack:///./src/app/shared/quillFullScreen.vue?9ac9","webpack:///src/app/shared/quillFullScreen.vue","webpack:///./src/app/shared/quillFullScreen.vue?da8b","webpack:///./src/app/shared/quillFullScreen.vue","webpack:///src/app/shared/quillEditor.vue","webpack:///./src/app/shared/quillEditor.vue?a477","webpack:///./src/app/shared/quillEditor.vue","webpack:///./src/app/composer/wordDefine.vue?4d40","webpack:///./src/app/NotFound.vue?5cb6","webpack:///./src/app/shared/documentPicker.vue?ff40","webpack:///./src/app/shared/quillFullScreen.vue?e368","webpack:///./src/app/shared/statusSignal.vue?8d74","webpack:///./src/app/shared/workshopList.vue?73e5","webpack:///./src/app/shared/mainMenu.vue?2df7","webpack:///./src/app/planner/planner.page.vue?e23a","webpack:///./src/app/documentEdit/documentEdit.page.vue?6e7c","webpack:///./src/app/api/localStorage.js","webpack:///./src/app/api/storageSwitch.js","webpack:///./src/app/api/demoStorage.js","webpack:///./src/app/api/offlineStorage.js","webpack:///./src/app/api/serverStorage.js","webpack:///./src/app/IdleWatcher.vue?6803","webpack:///./src/app/composer/composer.page.vue?d32a","webpack:///./src/app/search/match.vue?3c5f","webpack:///./src/app/composer/textMagnifier.vue?8c0a","webpack:///./src/app/composer/textMap.vue?5a62","webpack:///./models/writingWorkshop.js","webpack:///./utilities.js","webpack:///./src/app/shared/documentMenu.vue?a45c","webpack:///./src/app/shared/deltaParser.js","webpack:///./src/app/shared/cache.js","webpack:///./src/app/shared/chapters.store.js","webpack:///./src/app/shared/mainMenu.vue?6a17","webpack:///./src/app/shared/status.store.js","webpack:///./src/app/App.vue?521d","webpack:///./src/app/shared/document.store.js","webpack:///./src/app/search/search.page.vue?cd4c","webpack:///./src/app/shared/topicList.vue?8b80","webpack:///./src/app/outliner/outliner.page.vue?52d9","webpack:///./src/app/shared/guid.js","webpack:///./src/app/outliner/outliner.page.vue?7103","webpack:///./public/img/main-logo.png","webpack:///./src/app/shared/quillEditor.vue?68db","webpack:///./src/app/api/api.js","webpack:///./src/app/shared/versionResolver.js","webpack:///./src/app/shared/plansList.vue?82fb","webpack:///./src/app/shared/workshops.store.js","webpack:///./src/app/shared/tippyBuilder.js","webpack:///./src/app/shared/tooltip.directive.js","webpack:///./src/app/shared/tabsList.vue?fae0","webpack:///./src/app/shared/chipsList.vue?ba70","webpack:///./src/app/shared/quillEditor.vue?68f9"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","_v","attrs","component","editorElement","activeChapter","content","mark","on","selectMap","activeChapterIndex","allChapters","isViewing","addChapter","hoverChapter","unhoverChapter","selectChapter","ref","class","showStats","_s","title","chapterWordCount","chapterParagraphCount","chapterPageCount","chapterReadTimeMinutes","documentTitle","documentWordCount","documentPageCount","documentReadTimeMinutes","guid","scrollTo","editorContainerNode","updateContent","updateSelection","sidebar","$event","switchOutline","switchPlans","switchWorkshops","_e","directives","rawName","expression","filters","domProps","Array","isArray","archived","_i","$$a","$$el","$$c","checked","$$v","$$i","$set","concat","showPlan","showSection","showTopic","allTopics","showWorkshop","viewingPlans","activePlanIndex","allPlans","filterPlans","addPlan","selectPlan","activePlan","archivePlan","index","restorePlan","deletePlan","activePlanSections","filterSections","isDeletable","addSection","archiveSection","rearrangeSection","restoreSection","renameSection","_l","section","isEditing","editSection","endEditSection","deleteSection","getHtml","getTextContent","refInFor","staticStyle","draggableOptions","model","callback","reactiveArray","chip","filterChips","showChipInput","nameProp","renameChip","deleteChip","restoreChip","chipValues","indexOf","_k","keyCode","saveChipValue","composing","cancelRename","slot","placeholder","addNewChip","newChip","components","draggable","computed","dataArray","set","$emit","animation","group","handle","tooltip","methods","isUnique","assertUnique","existing","icon","text","otherChips","props","required","Function","String","item","filterTabs","isActive","selectItem","hoverItem","unhoverItem","showAddItem","showNewItem","itemName","addItem","newItem","arrow","cancelAddItem","tabCache","activeIndex","mounted","cachedIndex","Number","canAdd","default","Boolean","watch","cacheSet","ValidateTitle","minlength","maxlength","swal","ChipsList","QuillEditor","TabsList","sections","$store","state","chapters","plans","filter","editingSectionIndex","commit","log","tags","plan","buttons","dangerMode","willDelete","$refs","quillEditor","focus","helpClick","newTitle","newContent","updateTags","newTags","helpSectionChipsModal","showSubheader","mapClick","mapHtml","mapNode","mapWrapNode","show","cachedHtml","magnifyRadius","scale","wrapElBoundingClientRect","destroyed","magnifyEl","removeEventListener","mouseMove","mouseLeave","getRelativeCoords","html","magLeft","transformCoord","magTop","magnifierStyle","left","top","wrapStyle","refresh","innerHTML","clone","adjust","$nextTick","wrapEl","TextMagnifier","markInstance","mouse","x","y","tagName","toLowerCase","parentClasses","includes","paragraphIndex","searchTermIndex","markClick","updateMap","textElement","map","mapWrap","dataStream","unmark","getNumberOfWords","separateWordSearch","str","trim","split","topic","getMasterTopic","editTopic","endEditTopic","archiveTopic","restoreTopic","deleteTopic","showActions","chapter","chapterTopics","topics","editingTopicIndex","find","getTopic","chapterTopic","filterTopics","UPDATE_SELECTION","store","selection","range","mutations","defineIcon","gDefineUrl","gSynonymUrl","word","height","width","linkIcon","xIcon","workshops","activeWorkshopNameIndex","workshopNameTabs","selectWorkshopNameIndex","currentWorkshopDisplayName","$$selectedVal","options","selected","val","_value","selectedWorkshopGuid","multiple","workshop","activeWorkshopsTitle","activeWorkshopsDate","firstActiveWorkshop","archiveActiveWorkshops","restoreActiveWorkshops","deleteActiveWorkshops","writingWorkshop","currentWorkshopName","workshopNames","activeWorkshops","viewingWorkshops","Date","date","toLocaleDateString","filteredSelectableWorkshops","selectableWorkshops","selectWorkshopGuid","selectWorkshopName","selectDefaultWorkshop","filterWorkshops","PlansList","TextMap","TopicList","WordDefine","WorkshopList","viewingChapters","allWorkshops","getPageCount","textContent","getParagraphCount","getReadTimeMinutes","getWordCount","documentFullText","currentDocument","hasChapters","hasPlans","hasTopics","hasWorkshops","isPremium","user","composer","newChapter","Math","ceil","match","descriptor","masterTopic","planSwitch","editorContainer","textEditor","cacheGet","chapterGuid","workshopName","workshopGuid","activeWorkshop","workshopList","$router","replace","documentName","newDocumentName","saveDocumentName","deleteDocument","documentGuid","showChapter","archiveChapter","rearrangeChapter","restoreChapter","renameChapter","addTopic","rearrangeTopic","renameTopic","deleteChapter","viewingTopicsFilteredArchived","viewingTopicsFilteredTitle","filtersVisible","helpChapterBlocksNode","helpChapterChipsNode","helpTopicChipsNode","toggleFilters","helpChapterBlocksModal","helpChapterChipsModal","helpTopicChipsModal","rearrangePlan","renamePlan","helpPlanChipsModal","planGuid","plansList","search","searchText","loading","showChapters","showOutlines","showPlans","showWorkshops","searched","hasResults","matches","outlines","topicMatch","topicGuid","chapterTitle","topicTitle","sectionMatch","sectionGuid","planTitle","sectionTitle","workshopMatch","atHead","formattedPre","formattedQuery","formattedPost","atTail","query","Match","PulseLoader","getMatchArray","indices","pre","post","matched","getMatchingChapters","_matches","getMatchingOutlines","reduce","arr","getMatchingPlans","getMatchingWorkshops","obj","keys","workshopsByGuid","searchInput","route","api","simpleGet","axios","response","simplePost","body","getUser","logOut","Vue","use","Router","assertPremium","userApi","assertOnline","isOnline","compose","guards","to","from","next","guardPromises","guard","results","blocks","res","nav","routes","path","redirect","Planner","Outliner","Composer","beforeEnter","DocumentEdit","Search","NotFound","loaded","showWizard","isLimited","isGold","documentValue","changeDocument","allDocuments","ownedDocuments","status","DocumentPicker","accountType","dispatch","resetIdleTime","_t","idleTimeout","backToApp","goIdle","showIdlePage","reload","location","wait","idleModal","className","closeOnClickOutside","cancel","confirm","email","description","displayName","setSelectedWorkshop","available","selectedWorkshop","askPermission","permissionResult","userPromiseResolve","allowsOffline","checkOfflineStorage","navigator","storage","persisted","seen","chromePrompt","chromePermissionModal","offlineModalSeen","allow","permissionFailed","permissionFailedModal","promptForPermission","browser","standardPrompt","standardPermissionModal","persist","isDemo","isSaving","saved","savedIcon","enabled","saveError","saveErrorText","errorIcon","offline","offlineText","offlineIcon","created","checkOffline","offlineInterval","setInterval","beforeDestroy","clearInterval","saving","savingDebouncer","isOffline","wasOffline","el","_tippy","warn","OfflineStorage","StatusSignal","toolsTooltip","moreMenu","firstChild","distance","interactive","placement","theme","trigger","accountMenu","workshopsModal","startWorkshop","COMMIT_NEW_EMAIL","SET_DEFAULT_USER","SET_USER","SET_USER_PROMISE","UPDATE_EMAIL","UPDATE_PASSWORD","defaultUser","verified","setSentryUser","Raven","setUserContext","userPromise","actions","updateEmail","password","updatePassword","hasDocuments","selectedType","selectDocument","svg","createDocument","createType","NOVEL","ESSAY","SCRIPT","BLANK","types","documentTypes","beforeCreate","userCache","cachedUser","safeUserPromise","beforeEach","routeTransitionTimeout","afterEach","onError","DocumentMenu","IdleWatcher","MainMenu","Wizard","addDocument","ADD_DOCUMENT","DELETE_CHAPTER","REMOVE_OWNED_DOCUMENT","DELETE_PLAN","DELETE_SECTION","DELETE_TOPIC","deleteWorkshop","DELETE_WORKSHOP","REARRANGE_CHAPTERS","REARRANGE_PLANS","REARRANGE_SECTIONS","REARRANGE_TOPICS","updateChapter","ADD_CHAPTER","ADD_TOPIC_TO_CHAPTER","ARCHIVE_CHAPTER","RESTORE_CHAPTER","UPDATE_CHAPTER","UPDATE_CHAPTER_CONTENT","UPDATE_TOPIC_CONTENT","updateDocument","UPDATE_DOCUMENT_NAME","updatePlan","ADD_PLAN","ARCHIVE_PLAN","RESTORE_PLAN","UPDATE_PLAN","updateSection","ADD_SECTION","ARCHIVE_SECTION","RESTORE_SECTION","UPDATE_SECTION","UPDATE_SECTION_CONTENT","UPDATE_SECTION_TAGS","updateTopic","ADD_TOPIC","ARCHIVE_TOPIC","RESTORE_TOPIC","UPDATE_TOPIC","updateWorkshop","ADD_WORKSHOP","ARCHIVE_WORKSHOP","RESTORE_WORKSHOP","updateWorkshops","UPDATE_WORKSHOPS_CONTENT","debouncedUpdateChapter","chapterStorage","getDebouncedUpdateChapter","debounce","chapterAutosaverPlugin","subscribe","mutation","getStorageApi","handleMutation","payload","arrangeChapters","arrangePlans","arrangeSections","arrangeTopics","workshopUpdates","update","Vuex","Store","plugins","isProd","config","addPlugin","RavenVue","install","productionTip","addEventListener","serviceWorker","register","registration","catch","registrationError","App","router","h","ctrlKey","emitDone","contentId","hideFullScreen","emitFullscreenContent","emitSelection","toolbarOptions","header","list","allowedFormats","createQuill","container","onFullScreen","tempToolbar","handlers","fullscreen","quill","Quill","bounds","formats","toolbar","fullScreenButton","querySelector","isWideView","wideSvg","showWideView","narrowSvg","showNarrowView","exitSvg","close","forEach","emitContent","listenQuill","textChanged","getText","onTextChange","onSelectionChange","updateQuill","setContents","QuillFullScreen","cachedContentId","showFullScreen","disable","enable","selectionChanged","silent","delta","element","scrollTop","offsetTop","setSelection","selectedRange","getAllOccurrences","regex","ranges","require","orderPromises","LocalStorageApi","username","localForage","setDriver","INDEXEDDB","WEBSQL","LOCALSTORAGE","_storage","getStorageKeys","planKeyPrefix","planOrderKey","getPlanKey","sectionKeyPrefix","sectionOrderKey","getSectionKey","chapterKeyPrefix","chapterOrderKey","getChapterKey","topicKeyPrefix","topicOrderKey","getTopicKey","legacyDocumentGuids","documentGuidsKey","documentsKey","_getAllDocumentGuids","documentGuids","setItem","chapterGuids","planGuids","sectionGuids","topicGuids","removeItem","_getAllChapters","_getAllPlans","_getAllSections","_getAllTopics","prefix","_getChaptersSortOrder","startsWith","sortOrder","getItem","sort","chap1","chap2","legacyGuids","guids","allGuids","uniq","_getAllDocuments","_getPlansSortOrder","plan1","plan2","_getSectionSortOrder","section1","section2","_getTopicsSortOrder","topic1","topic2","updateTopicFns","updateTopicPromise","updateChapterPromise","updateChapterFns","updatePlanFns","updateSectionFns","updatePlanPromise","doc","backup","docExport","_backup","saveAllContent","documents","importErr","iterate","clear","addDocumentPromises","revertImport","storageApi","temporaryStoragePromiseResolve","DemoStorageApi","onbeforeunload","localStorage","OfflineStorageApi","VueInstance","requiresSyncCache","Cache","UNRESETTABLE","offlinePrefix","docGuid","docKey","deletePromises","clearOldStorage","notAllowedError","updateStorage","getLatestStoredDocument","getStoredDocument","ServerStorageApi","savingCounter","offlineStorage","goOffline","SET_STATUS_OFFLINE","isOnlineCached","SET_STATUS_SAVING","done","isError","SET_STATUS_ERROR","SET_STATUS_DONE","wrapStatus","updateStorageAfterDebounced","updateStorageAfter","waitUntilDone","counter","intervalId","loadDocument","LOAD_CONTENT","LOAD_WORKSHOPS","syncCache","restoredToken","offlineDoc","resolvedDoc","onlineDoc","matchBy","markDeleted","resolvedChapters","VersionResolver","getMostRecentEach","resolvedTopics","resolvedPlans","resolvedWorkshops","order","newDoc","shallowEqualArrays","assign","docImport","getDocuments","deleteWorkshopContent","getChapters","getPlans","getTopics","getWorkshops","updateWorkshopContents","fullExport","JSON","stringify","json","parse","fullImport","includeArchived","exportToWord","temporaryStoragePromise","setStorageApi","storageApiPromise","cachedStorage","Local","cached","Demo","Server","Offline","waitForInit","getCached","init","isOnlinePromise","createWorkshop","FREE_WRITE","NOVEL_QUICKSTART","WRITERS_UNBLOCK","PLOT_WORKSHOP","SETTING_WORKSHOP","promiseFns","TypeError","getNewLine","style","getNewSegment","listMap","bullet","ordered","getStyles","attributes","styles","lineStyles","attr","getStyledArrayFromChapters","splitContent","pageBreak","currentLine","ops","op","insert","first","lines","segment","ix","line","last","GetContentString","inserts","joined","join","wordStartRe","wordContentRe","GetWordArray","tokens","token","TrimEnd","TrimStart","test","GetHtml","converter","DeltaToHtmlConverter","convert","GetIndicesOf","fullString","searchString","searchStringLength","startIndex","cacheKeysStorage","allCacheKeys","resetCache","NUKE_CONTENT","timestamp","containSameElements","timestampEach","arr1","arr2","diff","difference","Statuses","SAVED","SAVING","ERROR","OFFLINE","CHANGE_DOCUMENT","DELETE_DOCUMENT","INIT_DOCUMENTS","SET_UP_DOCUMENT","UNLOAD_CURRENT_DOCUMENT","LOAD_DOCUMENTS","UPDATE_DOCUMENT_METADATA","cache","shouldReset","getAllChapters","getAllPlans","getAllTopics","getAllWorkshops","getAllDocuments","some","NUKE_WORKSHOPS","documentIndex","uuid","axiosBase","headers","Pragma","Api","open","timestampField","now","getTime","defaultObj","obj2","defaultTimestamp","getTimestamp","timestamp2","defaultArr","markAsDeleted","returnList","arr2match","arrObj","defaultMatch","returnObj","replacement","getMostRecent","hideOnClick","tippy","directive","_content","removeAttribute"],"mappings":"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","file":"static/js/app.5929d4c3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"static/js/\" + ({\"analyser\":\"analyser\",\"exporter\":\"exporter\",\"w-free-write\":\"w-free-write\",\"w-novel-quickstart\":\"w-novel-quickstart\",\"w-plot-workshop\":\"w-plot-workshop\",\"w-setting-workshop\":\"w-setting-workshop\",\"w-writers-unblock\":\"w-writers-unblock\"}[chunkId]||chunkId) + \".\" + {\"analyser\":\"15f87b18\",\"exporter\":\"7d341a41\",\"w-free-write\":\"3c893b89\",\"w-novel-quickstart\":\"5bc1242c\",\"w-plot-workshop\":\"dc813fe9\",\"w-setting-workshop\":\"3549b8da\",\"w-writers-unblock\":\"27f1e8ad\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"analyser\":1,\"exporter\":1,\"w-free-write\":1,\"w-novel-quickstart\":1,\"w-plot-workshop\":1,\"w-setting-workshop\":1,\"w-writers-unblock\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"static/css/\" + ({\"analyser\":\"analyser\",\"exporter\":\"exporter\",\"w-free-write\":\"w-free-write\",\"w-novel-quickstart\":\"w-novel-quickstart\",\"w-plot-workshop\":\"w-plot-workshop\",\"w-setting-workshop\":\"w-setting-workshop\",\"w-writers-unblock\":\"w-writers-unblock\"}[chunkId]||chunkId) + \".\" + {\"analyser\":\"e777c0a2\",\"exporter\":\"da28a4fd\",\"w-free-write\":\"cf797f0f\",\"w-novel-quickstart\":\"474aebfb\",\"w-plot-workshop\":\"1f6b3f4b\",\"w-setting-workshop\":\"bb1f4443\",\"w-writers-unblock\":\"cd0b4b56\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"static/img/modal-logo.99cae3a0.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"not-found\"},[_c('h3',[_vm._v(\"Something went wrong.\")]),_c('p',[_vm._v(\" This page doesn't exist. If you're having trouble with the app, please contact us at \"),_c('a',{attrs:{\"href\":\"mailto:support@edwardtheapp.com\"}},[_vm._v(\"support@edwardtheapp.com\")]),_vm._v(\". \")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"wrap\">\r\n    <div class=\"not-found\">\r\n      <h3>Something went wrong.</h3>\r\n      <p>\r\n        This page doesn't exist. If you're having trouble with the app, please contact us at\r\n        <a href=\"mailto:support@edwardtheapp.com\">support@edwardtheapp.com</a>.\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrap {\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n\r\n.not-found {\r\n  display: block;\r\n  flex: 1;\r\n  max-width: 1050px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotFound.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotFound.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NotFound.vue?vue&type=template&id=00a62670&scoped=true&\"\nimport script from \"./NotFound.vue?vue&type=script&lang=js&\"\nexport * from \"./NotFound.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NotFound.vue?vue&type=style&index=0&id=00a62670&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00a62670\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"composer-wrap\"},[(_vm.hasChapters)?_c('div',{staticClass:\"composer\"},[_c('div',{staticClass:\"map-wrap\"},[_c('text-map',{attrs:{\"editor-element\":_vm.editorElement,\"data-stream\":_vm.activeChapter.content,\"mark\":_vm.mark},on:{\"select\":_vm.selectMap}})],1),_c('div',{staticClass:\"editor-wrap\"},[_c('tabs-list',{attrs:{\"active-index\":_vm.activeChapterIndex,\"data-array\":_vm.allChapters,\"filter-tabs\":_vm.isViewing,\"item-name\":\"Chapter\"},on:{\"add\":_vm.addChapter,\"hover\":_vm.hoverChapter,\"unhover\":_vm.unhoverChapter,\"update:activeIndex\":_vm.selectChapter}}),_c('div',{ref:\"editorContainer\",staticClass:\"below-tabs\"},[_c('div',{staticClass:\"stats\",class:{ 'active': _vm.showStats }},[_c('div',{staticClass:\"stats-content\"},[_c('p',[_c('b',[_vm._v(_vm._s(_vm.activeChapter.title))])]),_c('p',[_vm._v(_vm._s(_vm.chapterWordCount)+\" words\")]),_c('p',[_vm._v(_vm._s(_vm.chapterParagraphCount)+\" paragraphs\")]),_c('p',[_vm._v(_vm._s(_vm.chapterPageCount)+\" pages\")]),_c('p',[_vm._v(_vm._s(_vm.chapterReadTimeMinutes)+\" minute read\")]),_c('br'),_c('p',[_c('b',[_vm._v(_vm._s(_vm.documentTitle)+\" (Full document)\")])]),_c('p',[_vm._v(_vm._s(_vm.documentWordCount)+\" words\")]),_c('p',[_vm._v(_vm._s(_vm.documentPageCount)+\" pages\")]),_c('p',[_vm._v(_vm._s(_vm.documentReadTimeMinutes)+\" minute read\")])])]),_c('div',{staticClass:\"define\"},[_c('word-define',{attrs:{\"word\":_vm.mark}})],1),_c('quill-editor',{ref:\"textEditor\",attrs:{\"content\":_vm.activeChapter.content,\"content-id\":_vm.activeChapter.guid,\"scroll-to\":_vm.scrollTo,\"container\":_vm.editorContainerNode},on:{\"update:content\":_vm.updateContent,\"update:selection\":_vm.updateSelection}})],1)],1),_c('div',{staticClass:\"sidebar-wrap\"},[_c('div',{staticClass:\"sidebar-options\"},[_c('div',{staticClass:\"plan-switch\"},[_c('button',{staticClass:\"switch-label\",class:{ 'active': _vm.sidebar === 'outline' },on:{\"click\":function($event){return _vm.switchOutline()}}},[_c('img',{attrs:{\"src\":\"img/icons_outline-green.png\"}}),_c('div',{staticClass:\"switch-label-text\"},[_vm._v(\" Outline \")])]),_c('hr',{staticClass:\"vert\"}),_c('button',{staticClass:\"switch-label\",class:{ 'active': _vm.sidebar === 'plan' },on:{\"click\":function($event){return _vm.switchPlans()}}},[_c('img',{attrs:{\"src\":\"img/icons_plan-green.png\"}}),_c('div',{staticClass:\"switch-label-text\"},[_vm._v(\" Plan \")])]),(_vm.isPremium)?[_c('hr',{staticClass:\"vert\"}),_c('button',{staticClass:\"switch-label\",class:{ 'active': _vm.sidebar === 'workshop' },on:{\"click\":function($event){return _vm.switchWorkshops()}}},[_c('img',{attrs:{\"src\":\"img/icons_workshops-green.png\"}}),_c('div',{staticClass:\"switch-label-text\"},[_vm._v(\" Workshops \")])])]:_vm._e()],2)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sidebar === 'plan'),expression:\"sidebar === 'plan'\"}],staticClass:\"sidebar-content\"},[_c('div',{staticClass:\"archived-filter\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filters.archived),expression:\"filters.archived\"}],attrs:{\"id\":\"showArchivedTopics-p\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.filters.archived)?_vm._i(_vm.filters.archived,null)>-1:(_vm.filters.archived)},on:{\"change\":function($event){var $$a=_vm.filters.archived,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.filters, \"archived\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.filters, \"archived\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.filters, \"archived\", $$c)}}}}),_c('label',{attrs:{\"for\":\"showArchivedTopics-p\"}},[_vm._v(\"Show Archived\")])]),(_vm.hasPlans)?[_c('plans-list',{attrs:{\"filter-plans\":_vm.showPlan,\"filter-sections\":_vm.showSection,\"show-subheader\":false}})]:[_c('div',[_vm._v(\"No plans yet.\")]),_c('div',[_c('router-link',{attrs:{\"to\":\"/plan\"}},[_vm._v(\" Start planning \")])],1)]],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sidebar === 'outline'),expression:\"sidebar === 'outline'\"}],staticClass:\"sidebar-content\"},[_c('div',{staticClass:\"archived-filter\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filters.archived),expression:\"filters.archived\"}],attrs:{\"id\":\"showArchivedTopics-o\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.filters.archived)?_vm._i(_vm.filters.archived,null)>-1:(_vm.filters.archived)},on:{\"change\":function($event){var $$a=_vm.filters.archived,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.filters, \"archived\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.filters, \"archived\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.filters, \"archived\", $$c)}}}}),_c('label',{attrs:{\"for\":\"showArchivedTopics-o\"}},[_vm._v(\"Show Archived\")])]),(_vm.hasTopics)?[_c('div',{staticClass:\"topic-list-wrap\"},[_c('topic-list',{attrs:{\"chapter\":_vm.activeChapter,\"filter-topics\":_vm.showTopic,\"topics\":_vm.allTopics}})],1)]:[_c('div',[_vm._v(\"No outline yet.\")]),_c('div',[_c('router-link',{attrs:{\"to\":\"/outline\"}},[_vm._v(\" Start outlining \")])],1)]],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sidebar === 'workshop'),expression:\"sidebar === 'workshop'\"}],staticClass:\"sidebar-content\"},[_c('div',{staticClass:\"archived-filter\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filters.archived),expression:\"filters.archived\"}],attrs:{\"id\":\"showArchivedTopics-w\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.filters.archived)?_vm._i(_vm.filters.archived,null)>-1:(_vm.filters.archived)},on:{\"change\":function($event){var $$a=_vm.filters.archived,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.filters, \"archived\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.filters, \"archived\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.filters, \"archived\", $$c)}}}}),_c('label',{attrs:{\"for\":\"showArchivedTopics-w\"}},[_vm._v(\"Show Archived\")])]),(_vm.hasWorkshops)?[_c('workshop-list',{ref:\"workshopList\",attrs:{\"filter-workshops\":_vm.showWorkshop}})]:[_c('h3',[_vm._v(\"No workshops completed yet.\")]),_c('div',[_vm._v(\" See More > Workshops in the main menu to get started. \")])]],2)])]):_c('div',[_c('div',[_vm._v(\"No chapters yet.\")]),_c('div',[_c('router-link',{attrs:{\"to\":\"/outline\"}},[_vm._v(\" Create one \")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.viewingPlans.length > 0),expression:\"viewingPlans.length > 0\"}],staticClass:\"plans-wrap\"},[_c('tabs-list',{attrs:{\"active-index\":_vm.activePlanIndex,\"data-array\":_vm.allPlans,\"filter-tabs\":_vm.filterPlans,\"item-name\":\"Plan\"},on:{\"add\":_vm.addPlan,\"update:activeIndex\":_vm.selectPlan}}),(_vm.activePlan)?_c('div',{staticClass:\"plan\"},[(_vm.showSubheader)?_c('div',{staticClass:\"plan-head\"},[_c('h2',{staticClass:\"plan-title\"},[_vm._v(\" \"+_vm._s(_vm.activePlan.title)+\" \")]),_c('div',{staticClass:\"plan-actions\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.activePlan.archived),expression:\"!activePlan.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"plan-action button-icon\",attrs:{\"title\":\"Archive\"},on:{\"click\":function($event){return _vm.archivePlan({ index: _vm.activePlanIndex })}}},[_c('span',{staticClass:\"fas fa-archive\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activePlan.archived),expression:\"activePlan.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"plan-action button-icon\",attrs:{\"title\":\"Un-archive\"},on:{\"click\":function($event){return _vm.restorePlan({ index: _vm.activePlanIndex })}}},[_c('span',{staticClass:\"fas fa-box-open\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activePlan.archived),expression:\"activePlan.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"plan-action plan-action-danger button-icon\",attrs:{\"title\":\"Delete Forever\"},on:{\"click\":function($event){return _vm.deletePlan({ index: _vm.activePlanIndex })}}},[_c('span',{staticClass:\"fas fa-trash\"})])])]):_vm._e(),_c('h3',[_vm._v(\"Add/rearrange sections\")]),_c('div',{staticClass:\"plan-body\"},[_c('div',{staticClass:\"chips-wrap section-chips\"},[_c('chips-list',{attrs:{\"name\":\"Section\",\"name-prop\":\"title\",\"data-array\":_vm.activePlanSections,\"filter-chips\":_vm.filterSections,\"is-deletable\":_vm.isDeletable},on:{\"add\":_vm.addSection,\"delete\":_vm.archiveSection,\"rearrange\":_vm.rearrangeSection,\"restore\":_vm.restoreSection,\"update\":_vm.renameSection}})],1),_c('div',{staticClass:\"sections\"},_vm._l((_vm.activePlan.sections),function(section,index){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.filterSections(section)),expression:\"filterSections(section)\"}],key:section.guid,staticClass:\"section\"},[_c('div',{staticClass:\"section-head\"},[_c('h5',{staticClass:\"section-title\"},[_vm._v(\" \"+_vm._s(section.title)+\" \")]),_c('div',{staticClass:\"section-actions\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEditing(index)),expression:\"!isEditing(index)\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"section-action\",attrs:{\"title\":\"Edit\"},on:{\"click\":function($event){return _vm.editSection(index)}}},[_c('span',{staticClass:\"fas fa-edit\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEditing(index)),expression:\"isEditing(index)\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"section-action\",attrs:{\"title\":\"Save\"},on:{\"click\":function($event){return _vm.endEditSection()}}},[_c('span',{staticClass:\"fas fa-check\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!section.archived),expression:\"!section.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"section-action\",attrs:{\"title\":\"Archive\"},on:{\"click\":function($event){return _vm.archiveSection({ index: index })}}},[_c('span',{staticClass:\"fas fa-archive\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(section.archived),expression:\"section.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"section-action\",attrs:{\"title\":\"Un-archive\"},on:{\"click\":function($event){return _vm.restoreSection({ index: index })}}},[_c('span',{staticClass:\"fas fa-box-open\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(section.archived),expression:\"section.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"section-action button-red\",attrs:{\"title\":\"Delete forever\"},on:{\"click\":function($event){return _vm.deleteSection({ index: index })}}},[_c('span',{staticClass:\"fas fa-trash\"})])])]),_c('div',{staticClass:\"section-content\"},[(!_vm.isEditing(index))?_c('div',{staticClass:\"content-static\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.getHtml(section))}}),(!section.archived && !_vm.getTextContent(section.content))?_c('span',{staticClass:\"content-placeholder\"},[_vm._v(\" No content yet. Click \"),_c('span',{staticClass:\"fas fa-edit\"}),_vm._v(\" to add some. \")]):_vm._e()]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEditing(index)),expression:\"isEditing(index)\"}],staticClass:\"content-editable\"},[_c('quill-editor',{ref:\"quillEditor\",refInFor:true,attrs:{\"content\":section.content,\"content-id\":_vm.activePlan.guid},on:{\"update:content\":function($event){return _vm.updateContent(section, $event)},\"shortcut:done\":function($event){return _vm.endEditSection()}}})],1)])])}),0)])]):_vm._e(),_c('div',{staticStyle:{\"display\":\"none\"}},[_c('div',{ref:\"helpSectionChipsModal\",staticClass:\"help\"},[_c('p',[_vm._v(\"This is the section list. It's the easiest place to add, archive, restore, rename, and rearrange sections.\")]),_c('p',[_vm._v(\"To add a section, type its name into the \\\"New Section\\\" box and click \\\"Add\\\".\")]),_c('p',[_vm._v(\" To archive a section, click the \\\"X\\\" next to its name in the list. Archiving a section removes it from your document without deleting it permanently. \")]),_c('p',[_vm._v(\"To restore an archived section, check the \\\"Show Archived\\\" box, then click the \\\"+\\\" next to its name in the list.\")]),_c('p',[_vm._v(\"To rename a section, click the pencil icon next to its name in the list.\")]),_c('p',[_vm._v(\"To rearrange a section, click and drag it to where you want it to go.\")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chip-list-wrap\"},[_c('draggable',{staticClass:\"chip-list\",attrs:{\"options\":_vm.draggableOptions},model:{value:(_vm.reactiveArray),callback:function ($$v) {_vm.reactiveArray=$$v},expression:\"reactiveArray\"}},[_vm._l((_vm.reactiveArray),function(chip,index){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.filterChips(chip)),expression:\"filterChips(chip)\"}],key:index,staticClass:\"chip\",class:{ 'light': !_vm.isDeletable(chip) }},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showChipInput(index)),expression:\"!showChipInput(index)\"}],staticClass:\"chip-content\"},[_c('span',{staticClass:\"chip-draggable\"},[_vm._v(\" \"+_vm._s(chip[_vm.nameProp])+\" \")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isDeletable(chip)),expression:\"isDeletable(chip)\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"button-icon chip-action-button action-rename\",attrs:{\"title\":\"Rename\"},on:{\"click\":function($event){return _vm.renameChip(index, chip[_vm.nameProp])}}},[_c('span',{staticClass:\"fas fa-edit\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isDeletable(chip)),expression:\"isDeletable(chip)\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"button-icon chip-action-button action-delete\",attrs:{\"title\":\"Archive\"},on:{\"click\":function($event){return _vm.deleteChip(index)}}},[_c('span',{staticClass:\"fas fa-archive\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isDeletable(chip)),expression:\"!isDeletable(chip)\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"button-icon chip-action-button action-restore\",attrs:{\"title\":\"Un-archive\"},on:{\"click\":function($event){return _vm.restoreChip(index)}}},[_c('span',{staticClass:\"fas fa-box-open\"})])]),(_vm.showChipInput(index))?_c('div',{staticClass:\"chip-content\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.chipValues[index]),expression:\"chipValues[index]\"}],staticClass:\"chip-internal-input\",attrs:{\"placeholder\":chip[_vm.nameProp]},domProps:{\"value\":(_vm.chipValues[index])},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.saveChipValue(index)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.chipValues, index, $event.target.value)}}}),_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"button-green chip-internal-button\",attrs:{\"disabled\":!_vm.chipValues[index],\"title\":\"Save\"},on:{\"click\":function($event){return _vm.saveChipValue(index)}}},[_c('span',{staticClass:\"u-center-all fas fa-save\"})]),_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"button-red chip-internal-button\",attrs:{\"title\":\"Cancel\"},on:{\"click\":function($event){return _vm.cancelRename(index)}}},[_c('span',{staticClass:\"u-center-all fas fa-times-circle\"})])]):_vm._e()])}),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('div',{staticClass:\"chip-content\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newChip),expression:\"newChip\"}],staticClass:\"chip-input\",attrs:{\"placeholder\":_vm.placeholder},domProps:{\"value\":(_vm.newChip)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.addNewChip($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.newChip=$event.target.value}}}),_c('button',{staticClass:\"button-green chip-add-button\",attrs:{\"disabled\":!_vm.newChip},on:{\"click\":_vm.addNewChip}},[_vm._v(\" Add \")])])])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"chip-list-wrap\">\r\n    <draggable \r\n      class=\"chip-list\"\r\n      v-model=\"reactiveArray\" \r\n      :options=\"draggableOptions\"\r\n    >\r\n      <div \r\n        v-for=\"(chip, index) in reactiveArray\" \r\n        class=\"chip\" \r\n        :class=\"{ 'light': !isDeletable(chip) }\" \r\n        v-show=\"filterChips(chip)\"\r\n        :key=\"index\"\r\n      >\r\n        <div \r\n          class=\"chip-content\" \r\n          v-show=\"!showChipInput(index)\"\r\n        >\r\n          <span class=\"chip-draggable\">\r\n            {{ chip[nameProp] }}\r\n          </span>\r\n          <button \r\n            v-show=\"isDeletable(chip)\" \r\n            class=\"button-icon chip-action-button action-rename\"\r\n            @click=\"renameChip(index, chip[nameProp])\"\r\n            title=\"Rename\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"fas fa-edit\" />\r\n          </button>\r\n          <button \r\n            v-show=\"isDeletable(chip)\" \r\n            class=\"button-icon chip-action-button action-delete\" \r\n            @click=\"deleteChip(index)\"\r\n            title=\"Archive\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"fas fa-archive\" />\r\n          </button>\r\n          <button \r\n            v-show=\"!isDeletable(chip)\" \r\n            class=\"button-icon chip-action-button action-restore\"\r\n            @click=\"restoreChip(index)\"\r\n            title=\"Un-archive\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"fas fa-box-open\" />\r\n          </button>\r\n        </div>\r\n        <div \r\n          class=\"chip-content\" \r\n          v-if=\"showChipInput(index)\"\r\n        >\r\n          <input \r\n            class=\"chip-internal-input\" \r\n            v-model=\"chipValues[index]\" \r\n            @keyup.enter=\"saveChipValue(index)\" \r\n            :placeholder=\"chip[nameProp]\"\r\n          >\r\n          <button \r\n            class=\"button-green chip-internal-button\" \r\n            @click=\"saveChipValue(index)\" \r\n            :disabled=\"!chipValues[index]\"\r\n            title=\"Save\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"u-center-all fas fa-save\" />\r\n          </button>\r\n          <button \r\n            class=\"button-red chip-internal-button\" \r\n            @click=\"cancelRename(index)\"\r\n            title=\"Cancel\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"u-center-all fas fa-times-circle\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div slot=\"footer\">\r\n        <div class=\"chip-content\">\r\n          <input \r\n            class=\"chip-input\" \r\n            v-model=\"newChip\" \r\n            @keyup.enter=\"addNewChip\" \r\n            :placeholder=\"placeholder\"\r\n          >\r\n          <button \r\n            class=\"button-green chip-add-button\" \r\n            @click=\"addNewChip\" \r\n            :disabled=\"!newChip\"\r\n          >\r\n            Add\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </draggable>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport draggable from 'vuedraggable'\r\nimport swal from 'sweetalert'\r\nimport tooltip from '../shared/tooltip.directive'\r\n\r\nexport default {\r\n  components: {\r\n    draggable,\r\n  },\r\n  computed: {\r\n    placeholder() {\r\n      return `New ${this.name}...`\r\n    },\r\n    reactiveArray: {\r\n      get() {\r\n        return this.dataArray\r\n      },\r\n      set(value) {\r\n        this.$emit('rearrange', value)\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      chipValues: [],\r\n      draggableOptions: {\r\n        animation: 100,\r\n        draggable: '.chip',\r\n        group: this.name,\r\n        handle: '.chip-draggable',\r\n      },\r\n      newChip: ''\r\n    }\r\n  },\r\n  directives: {\r\n    tooltip\r\n  },\r\n  methods: {\r\n    addNewChip() {\r\n      const isUnique = this.assertUnique(this.dataArray, this.nameProp, this.newChip)\r\n\r\n      if (!isUnique) {\r\n        return\r\n      }\r\n\r\n      this.$emit('add', this.newChip)\r\n      this.newChip = ''\r\n    },\r\n    assertUnique(arr, propName, value) {\r\n      const existing = arr.find(el => el[propName] === value)\r\n\r\n      if (existing) {\r\n        swal({\r\n          icon: 'error',\r\n          text: `Sorry, ${this.name.toLowerCase()} ${propName}s must be unique. \"${value}\" is already in use.\r\n                 Please choose a different ${propName}.`,\r\n        })\r\n        return false\r\n      }\r\n\r\n      return true\r\n    },\r\n    cancelRename(index) {\r\n      this.$set(this.chipValues, index, null)\r\n    },\r\n    deleteChip(index) {\r\n      this.$emit('delete', { index })\r\n    },\r\n    renameChip(index, name) {\r\n      this.$set(this.chipValues, index, name)\r\n    },\r\n    restoreChip(index) {\r\n      this.$emit('restore', { index })\r\n    },\r\n    saveChipValue(index) {\r\n      const otherChips = this.dataArray.slice()\r\n      otherChips.splice(index, 1)\r\n      const isUnique = this.assertUnique(otherChips, this.nameProp, this.chipValues[index])\r\n\r\n      if (!isUnique) {\r\n        return\r\n      }\r\n\r\n      this.$emit('update', { index, value: this.chipValues[index] })\r\n      this.$set(this.chipValues, index, null)\r\n    },\r\n    showChipInput(index) {\r\n      return typeof this.chipValues[index] === 'string'\r\n    },\r\n  },\r\n  props: {\r\n    dataArray: {\r\n      required: true,\r\n      type: Array,\r\n    },\r\n    filterChips: {\r\n      required: true,\r\n      type: Function,\r\n    },\r\n    isDeletable: {\r\n      required: true,\r\n      type: Function,\r\n    },\r\n    name: {\r\n      required: true,\r\n      type: String,\r\n    },\r\n    nameProp: {\r\n      required: true,\r\n      type: String,\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chip-list-wrap {\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.chip-list {\r\n  align-items: center;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.chip {\r\n  align-items: center;\r\n  background-color: #323232;\r\n  border: 2px solid #323232;\r\n  border-radius: 12px;\r\n  color: #fff;\r\n  display: flex;\r\n  fill: #fff;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin: 4px 8px 8px 0;\r\n  opacity: 1;\r\n  padding: 6px 10px;\r\n  transition: background-color 100ms, color 100ms;\r\n}\r\n\r\n.chip.light {\r\n  background-color: #DEDEDE;\r\n  color: #323232;\r\n}\r\n\r\n.chip-content {\r\n  display: flex;\r\n}\r\n\r\n.chip-draggable {\r\n  cursor: grab;\r\n}\r\n\r\n.chip.sortable-ghost {\r\n  background-color: #333;\r\n  color: #FFF;\r\n  fill: #FFF;\r\n}\r\n\r\n.chip-input {\r\n  background-color: #fff;\r\n  border: 2px solid #323232;\r\n  color: #323232;\r\n  font-weight: bold;\r\n  height: 36px;\r\n  margin-bottom: 4px;\r\n  margin-right: 6px;\r\n  padding: 8px 12px;\r\n}\r\n\r\n.chip-add-button {\r\n  align-items: center;\r\n  display: flex;\r\n  fill: #FFF;\r\n  font-size: 16px;\r\n  margin-bottom: 4px;\r\n  padding: 2px 8px;\r\n}\r\n\r\n.chip-add-button:not(:first-of-type) {\r\n  margin-left: 6px;\r\n}\r\n\r\n.chip-internal-button {\r\n  align-items: center;\r\n  display: flex;\r\n  font-size: 16px;\r\n  justify-content: center;\r\n  padding: 0;\r\n  width: 32px;\r\n}\r\n\r\n.chip-internal-input {\r\n  background-color: #fff;\r\n  border: 2px solid #323232;\r\n  color: #323232;\r\n  font-weight: bold;\r\n  height: 28px;\r\n  margin-right: 6px;\r\n  padding: 4px 8px;\r\n}\r\n\r\n.chip-internal-button:not(:first-of-type) {\r\n  margin-left: 6px;\r\n}\r\n\r\n.chip-action-button {\r\n  color: inherit;\r\n  font-size: inherit;\r\n  margin-left: 8px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chipsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chipsList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./chipsList.vue?vue&type=template&id=71787b38&scoped=true&\"\nimport script from \"./chipsList.vue?vue&type=script&lang=js&\"\nexport * from \"./chipsList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chipsList.vue?vue&type=style&index=0&id=71787b38&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"71787b38\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tabs\"},[_vm._l((_vm.dataArray),function(item,index){return _c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.filterTabs(item)),expression:\"filterTabs(item)\"}],key:item.guid,staticClass:\"button-tab\",class:{ 'active': _vm.isActive(index) },on:{\"click\":function($event){return _vm.selectItem(index)},\"mouseover\":function($event){return _vm.hoverItem(index)},\"mouseout\":function($event){return _vm.unhoverItem()}}},[_vm._v(\" \"+_vm._s(item.title)+\" \")])}),(_vm.canAdd)?_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showAddItem),expression:\"!showAddItem\"}],staticClass:\"button-tab add-button\",on:{\"click\":_vm.showNewItem}},[_c('span',{staticClass:\"fas fa-plus\"})]):_vm._e(),(_vm.canAdd)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showAddItem),expression:\"showAddItem\"}],staticClass:\"button-tab add-tab\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newItem),expression:\"newItem\"}],staticClass:\"tab-input\",attrs:{\"placeholder\":(\"New \" + _vm.itemName + \"...\")},domProps:{\"value\":(_vm.newItem)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.addItem($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.newItem=$event.target.value}}}),_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({ arrow: false }),expression:\"{ arrow: false }\"}],staticClass:\"button-green tab-internal-button\",attrs:{\"title\":\"Save\"},on:{\"click\":_vm.addItem}},[_c('span',{staticClass:\"fas fa-save\"})]),_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({ arrow: false }),expression:\"{ arrow: false }\"}],staticClass:\"button-red tab-internal-button\",attrs:{\"title\":\"Cancel\"},on:{\"click\":_vm.cancelAddItem}},[_c('span',{staticClass:\"fas fa-times-circle\"})])]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"tabs\">\r\n    <button \r\n      v-for=\"(item, index) in dataArray\" \r\n      :key=\"item.guid\" \r\n      v-show=\"filterTabs(item)\"\r\n      class=\"button-tab\" \r\n      :class=\"{ 'active': isActive(index) }\"\r\n      @click=\"selectItem(index)\"\r\n      @mouseover=\"hoverItem(index)\"\r\n      @mouseout=\"unhoverItem()\"\r\n    >\r\n      {{ item.title }}\r\n    </button>\r\n    <button \r\n      v-if=\"canAdd\" \r\n      @click=\"showNewItem\" \r\n      class=\"button-tab add-button\" \r\n      v-show=\"!showAddItem\"\r\n    >\r\n      <span class=\"fas fa-plus\" />\r\n    </button>\r\n    <div \r\n      class=\"button-tab add-tab\" \r\n      v-show=\"showAddItem\" \r\n      v-if=\"canAdd\"\r\n    >\r\n      <input \r\n        class=\"tab-input\" \r\n        v-model=\"newItem\" \r\n        :placeholder=\"`New ${itemName}...`\" \r\n        @keyup.enter=\"addItem\"\r\n      >\r\n      <button \r\n        class=\"button-green tab-internal-button\" \r\n        @click=\"addItem\"\r\n        title=\"Save\"\r\n        v-tooltip=\"{ arrow: false }\"\r\n      >\r\n        <span class=\"fas fa-save\" />\r\n      </button>\r\n      <button \r\n        class=\"button-red tab-internal-button\" \r\n        @click=\"cancelAddItem\"\r\n        title=\"Cancel\"\r\n        v-tooltip=\"{ arrow: false }\"\r\n      >\r\n        <span class=\"fas fa-times-circle\" />\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cache from './cache'\r\nimport tooltip from '../shared/tooltip.directive'\r\n\r\nexport default {\r\n  components: {},\r\n  computed: {},\r\n  directives: {\r\n    tooltip\r\n  },\r\n  data() {\r\n    return {\r\n      newItem: '',\r\n      showAddItem: false,\r\n      tabCache: new Cache(`CURRENT_${this.itemName}_TAB`),\r\n    }\r\n  },\r\n  methods: {\r\n    addItem() {\r\n      this.$emit('add', this.newItem)\r\n      this.newItem = ''\r\n      this.showAddItem = false\r\n    },\r\n    hoverItem(index) {\r\n      this.$emit('hover', index)\r\n    },\r\n    isActive(index) {\r\n      return index === this.activeIndex\r\n    },\r\n    selectItem(index) {\r\n      this.$emit('update:activeIndex', index)\r\n    },\r\n    showNewItem() {\r\n      this.showAddItem = true\r\n    },\r\n    cancelAddItem() {\r\n      this.showAddItem = false\r\n      this.newItem = ''\r\n    },\r\n    unhoverItem() {\r\n      this.$emit('unhover')\r\n    },\r\n  },\r\n  mounted() {\r\n    const cachedIndex = this.tabCache.cacheGet()\r\n    if (cachedIndex && cachedIndex < this.dataArray.length) {\r\n      this.selectItem(cachedIndex)\r\n    } else {\r\n      this.selectItem(0)\r\n    }\r\n  },\r\n  props: {\r\n    activeIndex: {\r\n      required: true,\r\n      type: Number,\r\n    },\r\n    dataArray: {\r\n      required: true,\r\n      type: Array,\r\n    },\r\n    filterTabs: {\r\n      required: true,\r\n      type: Function,\r\n    },\r\n    itemName: {\r\n      required: true,\r\n      type: String,\r\n    },\r\n    canAdd: {\r\n      required: false,\r\n      default: true,\r\n      type: Boolean,\r\n    },\r\n  },\r\n  watch: {\r\n    activeIndex(index) {\r\n      this.tabCache.cacheSet(index)\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.tabs {\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  margin-bottom: 16px;\r\n  min-height: 40px;\r\n  max-height: 84px;\r\n  overflow: auto;\r\n}\r\n\r\n.button-tab {\r\n  align-items: center;\r\n  background-color: #F0F0F0;\r\n  border: 2px solid #323232;\r\n  border-radius: 12px;\r\n  color: #323232;\r\n  display: flex;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-bottom: 8px;\r\n  margin-right: 8px;\r\n  opacity: 1;\r\n  padding: 6px 10px;\r\n  transition: background-color 100ms, color 100ms;\r\n}\r\n\r\n.button-tab.active {\r\n  background-color: #323232;\r\n  color: #fff;\r\n}\r\n\r\n.button-tab:not(.active):hover {\r\n  opacity: 0.7;\r\n}\r\n\r\n.add-button {\r\n  background-color: #00866F;\r\n  border-color: #00866F;\r\n  color: #fff;\r\n  fill: #fff;\r\n}\r\n\r\n.tab-input {\r\n  background-color: #fff;\r\n  border: 2px solid #323232;\r\n  height: 32px;\r\n  margin-right: 6px;\r\n}\r\n\r\n.add-tab {\r\n  background-color: transparent;\r\n  border: none;\r\n  padding: 0;\r\n}\r\n\r\n.add-tab:hover {\r\n  opacity: 1 !important;\r\n}\r\n\r\n.tab-internal-button {\r\n  align-items: center;\r\n  display: flex;\r\n  color: #fff;\r\n  height: 32px;\r\n  justify-content: center;\r\n  padding: 0;\r\n  width: 32px;\r\n}\r\n\r\n.tab-internal-button:not(:first-of-type) {\r\n  margin-left: 6px;\r\n}\r\n\r\n.icon {\r\n  display: inline-block;\r\n  margin-right: 4px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabsList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tabsList.vue?vue&type=template&id=476162f6&scoped=true&\"\nimport script from \"./tabsList.vue?vue&type=script&lang=js&\"\nexport * from \"./tabsList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tabsList.vue?vue&type=style&index=0&id=476162f6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"476162f6\",\n  null\n  \n)\n\nexport default component.exports","import swal from 'sweetalert'\r\n\r\nexport const ValidateTitle = (itemName, title) => {\r\n  const minlength = 1\r\n  const maxlength = 60\r\n\r\n  if (title.length < minlength || title.length > maxlength) {\r\n    swal({\r\n      icon: 'error',\r\n      text: `Sorry, ${itemName} titles must be between ${minlength} and ${maxlength} letters.`,\r\n    })\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n","<template>\r\n  <div \r\n    class=\"plans-wrap\" \r\n    v-show=\"viewingPlans.length > 0\"\r\n  >\r\n    <!-- Plan Tabs -->\r\n    <tabs-list \r\n      :active-index=\"activePlanIndex\" \r\n      :data-array=\"allPlans\" \r\n      :filter-tabs=\"filterPlans\"\r\n      item-name=\"Plan\"\r\n      @add=\"addPlan\"\r\n      @update:activeIndex=\"selectPlan\"\r\n    />\r\n    <div \r\n      class=\"plan\" \r\n      v-if=\"activePlan\"\r\n    >\r\n      <div\r\n        class=\"plan-head\"\r\n        v-if=\"showSubheader\"\r\n      >\r\n        <h2 class=\"plan-title\">\r\n          {{ activePlan.title }}\r\n        </h2>\r\n        <div class=\"plan-actions\">\r\n          <button \r\n            class=\"plan-action button-icon\" \r\n            v-show=\"!activePlan.archived\" \r\n            @click=\"archivePlan({ index: activePlanIndex })\"\r\n            title=\"Archive\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"fas fa-archive\" />\r\n          </button>\r\n          <button \r\n            class=\"plan-action button-icon\" \r\n            v-show=\"activePlan.archived\" \r\n            @click=\"restorePlan({ index: activePlanIndex })\"\r\n            title=\"Un-archive\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"fas fa-box-open\" />  \r\n          </button>\r\n          <button \r\n            class=\"plan-action plan-action-danger button-icon\" \r\n            v-show=\"activePlan.archived\" \r\n            @click=\"deletePlan({ index: activePlanIndex })\"\r\n            title=\"Delete Forever\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"fas fa-trash\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <h3>Add/rearrange sections</h3>\r\n      <div class=\"plan-body\">\r\n        <!-- Section Chips -->\r\n        <div class=\"chips-wrap section-chips\">\r\n          <chips-list \r\n            name=\"Section\" \r\n            name-prop=\"title\"\r\n            :data-array=\"activePlanSections\"\r\n            :filter-chips=\"filterSections\"\r\n            :is-deletable=\"isDeletable\"\r\n            @add=\"addSection\"\r\n            @delete=\"archiveSection\"\r\n            @rearrange=\"rearrangeSection\"\r\n            @restore=\"restoreSection\"\r\n            @update=\"renameSection\"\r\n          />\r\n        </div>\r\n        <div class=\"sections\">\r\n          <div \r\n            class=\"section\" \r\n            v-for=\"(section, index) in activePlan.sections\" \r\n            :key=\"section.guid\" \r\n            v-show=\"filterSections(section)\"\r\n          >\r\n            <div class=\"section-head\">\r\n              <h5 class=\"section-title\">\r\n                {{ section.title }}\r\n              </h5>\r\n              <div class=\"section-actions\">\r\n                <button \r\n                  class=\"section-action\" \r\n                  v-show=\"!isEditing(index)\" \r\n                  @click=\"editSection(index)\"\r\n                  title=\"Edit\"\r\n                  v-tooltip\r\n                >\r\n                  <span class=\"fas fa-edit\" />\r\n                </button>\r\n                <button \r\n                  class=\"section-action\" \r\n                  v-show=\"isEditing(index)\" \r\n                  @click=\"endEditSection()\"\r\n                  title=\"Save\"\r\n                  v-tooltip\r\n                >\r\n                  <span class=\"fas fa-check\" />\r\n                </button>\r\n                <button \r\n                  class=\"section-action\" \r\n                  v-show=\"!section.archived\" \r\n                  @click=\"archiveSection({ index })\"\r\n                  title=\"Archive\"\r\n                  v-tooltip\r\n                >\r\n                  <span class=\"fas fa-archive\" />\r\n                </button>\r\n                <button \r\n                  class=\"section-action\" \r\n                  v-show=\"section.archived\" \r\n                  @click=\"restoreSection({ index })\"\r\n                  title=\"Un-archive\"\r\n                  v-tooltip\r\n                >\r\n                  <span class=\"fas fa-box-open\" />\r\n                </button>\r\n                <button \r\n                  class=\"section-action button-red\" \r\n                  v-show=\"section.archived\" \r\n                  @click=\"deleteSection({ index })\"\r\n                  title=\"Delete forever\"\r\n                  v-tooltip\r\n                >\r\n                  <span class=\"fas fa-trash\" />  \r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div class=\"section-content\">\r\n              <div \r\n                class=\"content-static\" \r\n                v-if=\"!isEditing(index)\"\r\n              >\r\n                <div v-html=\"getHtml(section)\" />\r\n                <span \r\n                  class=\"content-placeholder\" \r\n                  v-if=\"!section.archived && !getTextContent(section.content)\"\r\n                >\r\n                  No content yet. Click <span class=\"fas fa-edit\" /> to add some.\r\n                </span>\r\n              </div>\r\n              <div \r\n                class=\"content-editable\" \r\n                v-show=\"isEditing(index)\"\r\n              >\r\n                <quill-editor \r\n                  :content=\"section.content\" \r\n                  :content-id=\"activePlan.guid\" \r\n                  ref=\"quillEditor\" \r\n                  @update:content=\"updateContent(section, $event)\"\r\n                  @shortcut:done=\"endEditSection()\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Sections: [?] Modal -->\r\n    <div style=\"display: none\">\r\n      <div \r\n        class=\"help\" \r\n        ref=\"helpSectionChipsModal\"\r\n      >\r\n        <p>This is the section list. It's the easiest place to add, archive, restore, rename, and rearrange sections.</p>\r\n        <p>To add a section, type its name into the \"New Section\" box and click \"Add\".</p>\r\n        <p>\r\n          To archive a section, click the \"X\" next to its name in the list.\r\n          Archiving a section removes it from your document without deleting it permanently.\r\n        </p>\r\n        <p>To restore an archived section, check the \"Show Archived\" box, then click the \"+\" next to its name in the list.</p>\r\n        <p>To rename a section, click the pencil icon next to its name in the list.</p>\r\n        <p>To rearrange a section, click and drag it to where you want it to go.</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  ADD_PLAN, ADD_SECTION, ARCHIVE_PLAN, ARCHIVE_SECTION,\r\n  DELETE_PLAN, DELETE_SECTION, REARRANGE_SECTIONS,\r\n  RESTORE_PLAN, RESTORE_SECTION, UPDATE_SECTION,\r\n  UPDATE_SECTION_CONTENT, UPDATE_SECTION_TAGS,\r\n} from '../shared/chapters.store'\r\nimport ChipsList from '../shared/chipsList.vue'\r\nimport { GetContentString, GetHtml } from '../shared/deltaParser'\r\nimport guid from '../shared/guid'\r\nimport QuillEditor from '../shared/quillEditor.vue'\r\nimport swal from 'sweetalert'\r\nimport TabsList from '../shared/tabsList.vue'\r\nimport tooltip from '../shared/tooltip.directive'\r\nimport { ValidateTitle } from '../shared/validate'\r\n\r\nexport default {\r\n  components: {\r\n    ChipsList,\r\n    QuillEditor,\r\n    TabsList,\r\n  },\r\n  computed: {\r\n    activePlan() {\r\n      return this.allPlans[this.activePlanIndex]\r\n    },\r\n    activePlanSections() {\r\n      if (!this.activePlan) {\r\n        return []\r\n      }\r\n\r\n      return this.activePlan.sections || []\r\n    },\r\n    allPlans() {\r\n      return this.$store.state.chapters.plans || []\r\n    },\r\n    viewingPlans() {\r\n      return this.allPlans.filter(plan => this.filterPlans(plan))\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      activePlanIndex: -1,\r\n      editingSectionIndex: -1\r\n    }\r\n  },\r\n  directives: {\r\n    tooltip\r\n  },\r\n  methods: {\r\n    addPlan(title) {\r\n      if (!ValidateTitle('plan', title)) {\r\n        return\r\n      }\r\n\r\n      const plan = {\r\n        archived: false,\r\n        guid: guid(),\r\n        title,\r\n        sections: [],\r\n      }\r\n\r\n      this.$store.commit(ADD_PLAN, { plan })\r\n      console.log(this.activePlanIndex)\r\n    },\r\n    addSection(title) {\r\n      if (!ValidateTitle('section', title)) {\r\n        return\r\n      }\r\n\r\n      const section = {\r\n        archived: false,\r\n        content: null,\r\n        guid: guid(),\r\n        tags: [],\r\n        title,\r\n      }\r\n\r\n      this.$store.commit(ADD_SECTION, { plan: this.activePlan, section })\r\n    },\r\n    archivePlan({ index }) {\r\n      this.$store.commit(ARCHIVE_PLAN, { plan: this.allPlans[index] })\r\n\r\n      if (index === this.activePlanIndex && !this.filterPlans(this.allPlans[index])) {\r\n        this.selectPlan(-1)\r\n      }\r\n    },\r\n    archiveSection({ index }) {\r\n      this.$store.commit(ARCHIVE_SECTION, {\r\n        plan: this.activePlan,\r\n        section: this.activePlan.sections[index],\r\n      })\r\n    },\r\n    deletePlan({ index }) {\r\n      swal({\r\n        buttons: true,\r\n        dangerMode: true,\r\n        icon: 'warning',\r\n        text: 'Are you sure you want to delete this plan? Its sections and all of their content will be lost. This cannot be undone.',\r\n        title: 'Delete Forever?',\r\n      }).then((willDelete) => {\r\n        if (!willDelete) {\r\n          return\r\n        }\r\n\r\n        this.$store.commit(DELETE_PLAN, { plan: this.allPlans[index] })\r\n\r\n        if (index === this.activePlanIndex) {\r\n          this.selectPlan(-1)\r\n        }\r\n      })\r\n    },\r\n    deleteSection({ index }) {\r\n      swal({\r\n        buttons: true,\r\n        dangerMode: true,\r\n        icon: 'warning',\r\n        text: 'Are you sure you want to delete this section? Its content will be lost. This cannot be undone.',\r\n        title: 'Delete Forever?',\r\n      }).then((willDelete) => {\r\n        if (!willDelete) {\r\n          return\r\n        }\r\n\r\n        this.$store.commit(DELETE_SECTION, {\r\n          plan: this.activePlan,\r\n          section: this.activePlan.sections[index],\r\n        })\r\n      })\r\n    },\r\n    editSection(index) {\r\n      this.editingSectionIndex = index\r\n      this.$refs.quillEditor[index].focus()\r\n    },\r\n    endEditSection() {\r\n      this.editingSectionIndex = -1\r\n    },\r\n    getHtml(section) {\r\n      return GetHtml(section.content)\r\n    },\r\n    getTextContent(content) {\r\n      return GetContentString(content)\r\n    },\r\n    helpClick(content, title) {\r\n      swal({\r\n        content,\r\n        title,\r\n      })\r\n    },\r\n    isDeletable(chip) {\r\n      return !chip.archived\r\n    },\r\n    isEditing(index) {\r\n      return this.editingSectionIndex === index\r\n    },\r\n    rearrangeSection(sections) {\r\n      this.$store.commit(REARRANGE_SECTIONS, { plan: this.activePlan, sections })\r\n    },\r\n    renameSection({ index, value: newTitle }) {\r\n      if (!ValidateTitle('section', newTitle)) {\r\n        return\r\n      }\r\n\r\n      this.$store.commit(UPDATE_SECTION, {\r\n        plan: this.activePlan,\r\n        section: this.activePlan.sections[index],\r\n        newTitle,\r\n      })\r\n    },\r\n    restorePlan({ index }) {\r\n      this.$store.commit(RESTORE_PLAN, { plan: this.allPlans[index] })\r\n    },\r\n    restoreSection({ index }) {\r\n      this.$store.commit(RESTORE_SECTION, { plan: this.activePlan, section: this.activePlan.sections[index] })\r\n    },\r\n    selectPlan(index) {\r\n      if (index === -1) {\r\n        index = 0\r\n      }\r\n\r\n      if (this.allPlans[index] && this.allPlans[index].archived && !this.filterPlans(this.allPlans[index])) {\r\n        index = this.allPlans.indexOf(this.viewingPlans[0])\r\n      }\r\n      \r\n      this.activePlanIndex = index\r\n    },\r\n    updateContent(section, { content: newContent, contentId: planGuid }) {\r\n      const plan = this.allPlans.find(plan => plan.guid === planGuid)\r\n      this.$store.commit(UPDATE_SECTION_CONTENT, {\r\n        plan,\r\n        newContent,\r\n        section,\r\n      })\r\n    },\r\n    updateTags(section, newTags) {\r\n      this.$store.commit(UPDATE_SECTION_TAGS, {\r\n        plan: this.activePlan,\r\n        newTags,\r\n        section,\r\n      })\r\n    },\r\n  },\r\n  mounted() {\r\n    this.helpSectionChipsModal = this.$refs.helpSectionChipsModal\r\n  },\r\n  props: {\r\n    filterPlans: {\r\n      required: true,\r\n      type: Function,\r\n    },\r\n    filterSections: {\r\n      required: true,\r\n      type: Function,\r\n    },\r\n    showSubheader: {\r\n      required: true,\r\n      type: Boolean\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chips-wrap {\r\n  margin-bottom: 16px;\r\n  padding-bottom: 4px;\r\n  padding-top: 4px;\r\n}\r\n\r\n.plan-head {\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.plan-title {\r\n  margin-right: 8px;\r\n}\r\n\r\n.plan-action {\r\n  background-color: transparent;\r\n  color: #323232;\r\n  margin-left: 16px;\r\n  transition: background-color 100ms;\r\n}\r\n\r\n.plan-action:hover {\r\n  background-color: #FFF;\r\n  color: #000;\r\n}\r\n\r\n.plan-action-danger {\r\n  color: #e53935;\r\n}\r\n\r\n.section {\r\n  border: none;\r\n  border-top: none;\r\n  color: #000;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.section-head {\r\n  align-items: center;\r\n  background-color: #00866F;\r\n  color: #FFF;\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 48px;\r\n  padding-left: 16px;\r\n  padding-right: 8px;\r\n}\r\n\r\n.section-title {\r\n  color: #fff;\r\n  flex: 1;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  padding: 2px 0;\r\n}\r\n\r\n.section-actions {\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 100%;\r\n}\r\n\r\n.section-action {\r\n  align-items: center;\r\n  background-color: #fff;\r\n  border: none;\r\n  border-radius: 8px;\r\n  color: #323232;\r\n  display: flex;\r\n  font-size: 16px;\r\n  justify-content: center;\r\n  height: 32px;\r\n  margin: 8px;\r\n  padding: 0;\r\n  transition: background-color 100ms;\r\n  width: 32px;\r\n}\r\n\r\n.section-action:hover {\r\n  background-color: #FFF;\r\n  color: #000;\r\n}\r\n\r\n.section-action span {\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.section-content {\r\n  background-color: #FFF;\r\n  font-size: 16px;\r\n  padding: 16px;\r\n}\r\n\r\n.content-actions {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.content-static, .content-editable {\r\n  max-height: 275px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.content-static {\r\n  white-space: pre-wrap;\r\n}\r\n\r\n.content-placeholder {\r\n  color: #444;\r\n  white-space: normal;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plansList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plansList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./plansList.vue?vue&type=template&id=08268966&scoped=true&\"\nimport script from \"./plansList.vue?vue&type=script&lang=js&\"\nexport * from \"./plansList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./plansList.vue?vue&type=style&index=0&id=08268966&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08268966\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{ref:\"mapWrap\",staticClass:\"map\",on:{\"click\":_vm.mapClick}},[_c('div',{ref:\"map\",staticClass:\"map-inner\",domProps:{\"innerHTML\":_vm._s(_vm.mapHtml)}})]),_c('text-magnifier',{attrs:{\"html\":_vm.mapHtml,\"magnify-el\":_vm.mapNode,\"mark\":_vm.mark,\"wrap-el\":_vm.mapWrapNode}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrap\",staticClass:\"magnifier-wrap\",class:{ 'show': _vm.show }},[_c('div',{ref:\"magnifier\",staticClass:\"magnifier\"},[_c('div',{ref:\"magnifierContent\",staticClass:\"magnifier-content map\"})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div \r\n    class=\"magnifier-wrap\" \r\n    :class=\"{ 'show': show }\" \r\n    ref=\"wrap\"\r\n  >\r\n    <div \r\n      class=\"magnifier\" \r\n      ref=\"magnifier\"\r\n    >\r\n      <div \r\n        class=\"magnifier-content map\" \r\n        ref=\"magnifierContent\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      cachedHtml: '',\r\n      magnifyRadius: 50,\r\n      scale: 5,\r\n      show: false,\r\n      wrapElBoundingClientRect: null,\r\n    }\r\n  },\r\n  destroyed() {\r\n    this.magnifyEl.removeEventListener('mousemove', this.mouseMove)\r\n    this.magnifyEl.removeEventListener('mouseleave', this.mouseLeave)\r\n  },\r\n  methods: {\r\n    getRelativeCoords(event, bounds) {\r\n      // https://stackoverflow.com/a/33347664/4347245\r\n      const x = event.clientX - bounds.left\r\n      const y = event.clientY - bounds.top\r\n      return { x, y }\r\n    },\r\n    mouseLeave() {\r\n      this.show = false\r\n    },\r\n    mouseMove(event) {\r\n      if (this.cachedHtml !== this.html) {\r\n        this.cachedHtml = this.html\r\n      }\r\n\r\n      let { x: magLeft, y: magTop } = this.getRelativeCoords(event, this.magnifyEl.getBoundingClientRect())\r\n      magLeft = this.transformCoord(magLeft, 65)\r\n      magTop = this.transformCoord(magTop, 30)\r\n\r\n      const magnifierStyle = this.$refs.magnifier.style\r\n      magnifierStyle.left = `${magLeft}px`\r\n      magnifierStyle.top = `${magTop}px`\r\n\r\n      let { y: wrapTop } = this.getRelativeCoords(event, this.wrapElBoundingClientRect)\r\n      const wrapStyle = this.$refs.wrap.style\r\n      wrapStyle.top = `${wrapTop - 60}px`\r\n\r\n      this.show = true\r\n    },\r\n    refresh() {\r\n      const clone = this.magnifyEl.cloneNode(true)\r\n      const content = this.$refs.magnifierContent\r\n      content.innerHTML = ''\r\n      content.appendChild(clone)\r\n    },\r\n    transformCoord(value, adjust) {\r\n      return -(value * this.scale) + adjust\r\n    },\r\n  },\r\n  mounted() {\r\n    const instance = this\r\n\r\n    this.$nextTick(() => {\r\n      this.wrapElBoundingClientRect = this.wrapEl.getBoundingClientRect()\r\n\r\n      this.magnifyEl.addEventListener('mousemove', instance.mouseMove)\r\n      this.magnifyEl.addEventListener('mouseleave', instance.mouseLeave)\r\n    })\r\n  },\r\n  props: {\r\n    html: {\r\n      required: true,\r\n      type: String,\r\n    },\r\n    magnifyEl: {\r\n      required: true,\r\n      type: null\r\n    },\r\n    mark: {\r\n      required: true,\r\n      type: String\r\n    },\r\n    wrapEl: {\r\n      required: true,\r\n      type: null\r\n    },\r\n  },\r\n  watch: {\r\n    cachedHtml() {\r\n      this.refresh()\r\n    },\r\n    mark() {\r\n      this.refresh()\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.magnifier-wrap {\r\n  background-color: #FFF;\r\n  border: 1px solid #CCC;\r\n  height: 120px;\r\n  left: 0;\r\n  opacity: 0;\r\n  overflow: hidden;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 0;\r\n  transition: opacity 100ms;\r\n  width: 300px;\r\n}\r\n\r\n.magnifier-wrap.show {\r\n  opacity: 1;\r\n}\r\n\r\n.magnifier {\r\n  font-size: 2px;\r\n  position: absolute;\r\n  width: 145px;\r\n}\r\n\r\n.magnifier-content {\r\n  transform: scale(5);\r\n  transform-origin: top left;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textMagnifier.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textMagnifier.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./textMagnifier.vue?vue&type=template&id=2b7f0647&scoped=true&\"\nimport script from \"./textMagnifier.vue?vue&type=script&lang=js&\"\nexport * from \"./textMagnifier.vue?vue&type=script&lang=js&\"\nimport style0 from \"./textMagnifier.vue?vue&type=style&index=0&id=2b7f0647&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b7f0647\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"wrap\">\r\n    <div \r\n      class=\"map\" \r\n      @click=\"mapClick\" \r\n      ref=\"mapWrap\"\r\n    >\r\n      <div \r\n        class=\"map-inner\" \r\n        v-html=\"mapHtml\" \r\n        ref=\"map\"\r\n      />\r\n    </div>\r\n    <text-magnifier \r\n      :html=\"mapHtml\" \r\n      :magnify-el=\"mapNode\" \r\n      :mark=\"mark\" \r\n      :wrap-el=\"mapWrapNode\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport './map-shared.css'\r\n\r\nimport debounce from 'lodash/debounce'\r\nimport Mark from 'mark.js'\r\nimport TextMagnifier from './textMagnifier.vue'\r\n\r\nexport default {\r\n  components: {\r\n    TextMagnifier,\r\n  },\r\n  data() {\r\n    return {\r\n      mapHtml: '',\r\n      mapNode: null,\r\n      mapWrapNode: null,\r\n      markInstance: null,\r\n      mouse: {\r\n        x: null,\r\n        y: null,\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    mapClick({ target }) {\r\n      if (target.tagName.toLowerCase() === 'mark') {\r\n        this.markClick({ target })\r\n        return\r\n      }\r\n\r\n      const parentClasses = [...target.parentNode.classList]\r\n\r\n      if (parentClasses.includes('wrap')) {\r\n        return\r\n      }\r\n\r\n      if (!parentClasses.includes('map-inner')) {\r\n        this.mapClick({ target: target.parentNode })\r\n        return\r\n      }\r\n\r\n      const index = [...target.parentNode.childNodes].indexOf(target)\r\n      this.$emit('select', {\r\n        paragraphIndex: index,\r\n        searchTermIndex: -1,\r\n      })\r\n    },\r\n    markClick({ target }) {\r\n      const map = this.$refs.map\r\n      const marks = [...map.querySelectorAll('mark')]\r\n      const searchTermIndex = marks.indexOf(target)\r\n\r\n      const paragraph = target.parentNode\r\n      const paragraphIndex = [...paragraph.parentNode.childNodes].indexOf(paragraph)\r\n\r\n      this.$emit('select', {\r\n        paragraphIndex,\r\n        searchTermIndex,\r\n      })\r\n    },\r\n    updateMap() {\r\n      if (!this.editorElement) {\r\n        return\r\n      }\r\n\r\n      const textElement = this.editorElement.$el.querySelector('.ql-editor')\r\n      this.mapHtml = textElement.innerHTML\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$nextTick(this.updateMap)\r\n    this.markInstance = new Mark(this.$refs.map)\r\n    this.mapNode = this.$refs.map\r\n    this.mapWrapNode = this.$refs.mapWrap\r\n  },\r\n  props: {\r\n    dataStream: {\r\n      required: true,\r\n      type: null\r\n    },\r\n    editorElement: {\r\n      required: true,\r\n      type: null\r\n    },\r\n    mark: {\r\n      default: null,\r\n      type: String\r\n    },\r\n  },\r\n  watch: {\r\n    dataStream: debounce(function () {\r\n      this.updateMap()\r\n    }, 250),\r\n    mark(text) {\r\n      this.markInstance.unmark()\r\n\r\n      if (text.length < 3 || getNumberOfWords(text) > 3) {\r\n        return\r\n      }\r\n\r\n      this.markInstance.mark(text, {\r\n        separateWordSearch: false,\r\n      })\r\n    },\r\n  },\r\n}\r\n\r\nfunction getNumberOfWords(str) {\r\n  return str.trim().split(/\\s/).length\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrap {\r\n  height: 100%;\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\n.map-inner {\r\n  height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./textMap.vue?vue&type=template&id=0a50dd92&scoped=true&\"\nimport script from \"./textMap.vue?vue&type=script&lang=js&\"\nexport * from \"./textMap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./textMap.vue?vue&type=style&index=0&id=0a50dd92&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a50dd92\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},_vm._l((_vm.chapterTopics),function(topic,index){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showTopic(topic)),expression:\"showTopic(topic)\"}],key:topic.guid,staticClass:\"topic\"},[_c('div',{staticClass:\"topic-head\"},[_c('h5',{staticClass:\"topic-title\"},[_vm._v(\" \"+_vm._s(_vm.getMasterTopic(topic).title)+\" \")]),_c('div',{staticClass:\"topic-actions\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEditing(index)),expression:\"!isEditing(index)\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"topic-action\",attrs:{\"title\":\"Edit\"},on:{\"click\":function($event){return _vm.editTopic(index)}}},[_c('span',{staticClass:\"fas fa-edit\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEditing(index)),expression:\"isEditing(index)\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"topic-action\",attrs:{\"title\":\"Save\"},on:{\"click\":function($event){return _vm.endEditTopic()}}},[_c('span',{staticClass:\"fas fa-check\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.getMasterTopic(topic).archived),expression:\"!getMasterTopic(topic).archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"topic-action\",attrs:{\"title\":\"Archive\"},on:{\"click\":function($event){return _vm.archiveTopic({ index: index })}}},[_c('span',{staticClass:\"fas fa-archive\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.getMasterTopic(topic).archived),expression:\"getMasterTopic(topic).archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"topic-action\",attrs:{\"title\":\"Un-archive\"},on:{\"click\":function($event){return _vm.restoreTopic({ index: index })}}},[_c('span',{staticClass:\"fas fa-box-open\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.getMasterTopic(topic).archived),expression:\"getMasterTopic(topic).archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"topic-action button-red\",attrs:{\"title\":\"Delete forever\"},on:{\"click\":function($event){return _vm.deleteTopic({ index: index })}}},[_c('span',{staticClass:\"fas fa-trash\"})])])]),_c('div',{staticClass:\"topic-content\"},[(!_vm.isEditing(index))?_c('div',{staticClass:\"content-static\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.getHtml(topic))}}),(_vm.showActions(topic) && !_vm.getTextContent(topic.content))?_c('span',{staticClass:\"content-placeholder\"},[_vm._v(\" No content yet. Click \"),_c('span',{staticClass:\"fas fa-edit\"}),_vm._v(\" to add some. \")]):_vm._e()]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEditing(index)),expression:\"isEditing(index)\"}],staticClass:\"content-editable\"},[_c('quill-editor',{ref:\"quillEditor\",refInFor:true,attrs:{\"content\":topic.content,\"content-id\":_vm.chapter.guid},on:{\"update:content\":function($event){return _vm.updateContent(topic, $event)},\"shortcut:done\":function($event){return _vm.endEditTopic()}}})],1)])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"wrap\">\r\n    <div \r\n      class=\"topic\" \r\n      v-for=\"(topic, index) in chapterTopics\" \r\n      v-show=\"showTopic(topic)\" \r\n      :key=\"topic.guid\"\r\n    >\r\n      <div class=\"topic-head\">\r\n        <h5 class=\"topic-title\">\r\n          {{ getMasterTopic(topic).title }}\r\n        </h5>\r\n        <div class=\"topic-actions\">\r\n          <button\r\n            class=\"topic-action\"\r\n            v-show=\"!isEditing(index)\"\r\n            @click=\"editTopic(index)\"\r\n            title=\"Edit\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"fas fa-edit\" />\r\n          </button>\r\n          <button \r\n            class=\"topic-action\"\r\n            v-show=\"isEditing(index)\" \r\n            @click=\"endEditTopic()\"\r\n            title=\"Save\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"fas fa-check\" />\r\n          </button>\r\n          <button \r\n            class=\"topic-action\" \r\n            v-show=\"!getMasterTopic(topic).archived\" \r\n            @click=\"archiveTopic({ index })\"\r\n            title=\"Archive\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"fas fa-archive\" />\r\n          </button>\r\n          <button \r\n            class=\"topic-action\" \r\n            v-show=\"getMasterTopic(topic).archived\" \r\n            @click=\"restoreTopic({ index })\"\r\n            title=\"Un-archive\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"fas fa-box-open\" />\r\n          </button>\r\n          <button \r\n            class=\"topic-action button-red\" \r\n            v-show=\"getMasterTopic(topic).archived\" \r\n            @click=\"deleteTopic({ index })\"\r\n            title=\"Delete forever\"\r\n            v-tooltip\r\n          >\r\n            <span class=\"fas fa-trash\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"topic-content\">\r\n        <div \r\n          class=\"content-static\" \r\n          v-if=\"!isEditing(index)\"\r\n        >\r\n          <div v-html=\"getHtml(topic)\" />\r\n          <span \r\n            class=\"content-placeholder\" \r\n            v-if=\"showActions(topic) && !getTextContent(topic.content)\"\r\n          >\r\n            No content yet. Click <span class=\"fas fa-edit\" /> to add some.\r\n          </span>\r\n        </div>\r\n        <div \r\n          class=\"content-editable\" \r\n          v-show=\"isEditing(index)\"\r\n        >\r\n          <quill-editor \r\n            :content=\"topic.content\" \r\n            :content-id=\"chapter.guid\" \r\n            ref=\"quillEditor\" \r\n            @update:content=\"updateContent(topic, $event)\"\r\n            @shortcut:done=\"endEditTopic()\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  ARCHIVE_TOPIC, ADD_TOPIC_TO_CHAPTER, DELETE_TOPIC, RESTORE_TOPIC,\r\n  UPDATE_TOPIC_CONTENT,\r\n} from '../shared/chapters.store'\r\nimport { GetContentString, GetHtml } from './deltaParser'\r\nimport QuillEditor from '../shared/quillEditor.vue'\r\nimport swal from 'sweetalert'\r\nimport tooltip from '../shared/tooltip.directive'\r\n\r\nexport default {\r\n  components: {\r\n    QuillEditor,\r\n  },\r\n  directives: {\r\n    tooltip\r\n  },\r\n  computed: {\r\n    allChapters() {\r\n      return this.$store.state.chapters.chapters\r\n    },\r\n    chapterTopics() {\r\n      if (!this.chapter) {\r\n        return []\r\n      }\r\n\r\n      return this.topics.map(topic => this.getTopic(this.chapter, topic)).filter(topic => !!topic)\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      editingTopicIndex: -1,\r\n    }\r\n  },\r\n  methods: {\r\n    archiveTopic({ index }) {\r\n      this.$store.commit(ARCHIVE_TOPIC, { topic: this.topics[index] })\r\n    },\r\n    deleteTopic({ index }) {\r\n      swal({\r\n        buttons: true,\r\n        dangerMode: true,\r\n        icon: 'warning',\r\n        text: `Are you sure you want to delete this topic? It will be deleted from every chapter.\r\n               This cannot be undone.`,\r\n        title: 'Delete from every chapter?',\r\n      }).then((willDelete) => {\r\n        if (!willDelete) {\r\n          return\r\n        }\r\n\r\n        this.$store.commit(DELETE_TOPIC, { topic: this.topics[index] })\r\n      })\r\n    },\r\n    editTopic(index) {\r\n      this.editingTopicIndex = index\r\n      this.$refs.quillEditor[index].focus()\r\n    },\r\n    endEditTopic() {\r\n      this.editingTopicIndex = -1\r\n    },\r\n    getHtml(topic) {\r\n      return GetHtml(topic.content)\r\n    },\r\n    getMasterTopic(chapterTopic) {\r\n      return this.topics.find(topic => topic.guid === chapterTopic.guid) || {}\r\n    },\r\n    getTopic(chapter, topic) {\r\n      if (!chapter.topics) {\r\n        chapter.topics = {}\r\n      }\r\n\r\n      if (!chapter.topics[topic.guid]) {\r\n        this.$store.commit(ADD_TOPIC_TO_CHAPTER, { chapter, topic })\r\n      }\r\n\r\n      return chapter.topics[topic.guid]\r\n    },\r\n    getTextContent(content) {\r\n      return GetContentString(content)\r\n    },\r\n    isEditing(index) {\r\n      return this.editingTopicIndex === index\r\n    },\r\n    restoreTopic({ index }) {\r\n      this.$store.commit(RESTORE_TOPIC, { topic: this.topics[index] })\r\n    },\r\n    showActions(chapterTopic) {\r\n      return !this.getMasterTopic(chapterTopic).archived && !this.chapter.archived\r\n    },\r\n    showTopic(chapterTopic) {\r\n      if (!chapterTopic) {\r\n        return false\r\n      }\r\n\r\n      return this.filterTopics(chapterTopic)\r\n    },\r\n    updateContent(topic, { content: newContent, contentId: guid }) {\r\n      const chapter = this.allChapters.find(chapter => chapter.guid === guid)\r\n      const chapterTopic = chapter.topics[topic.guid]\r\n      this.$store.commit(UPDATE_TOPIC_CONTENT, {\r\n        chapter,\r\n        newContent,\r\n        topic: chapterTopic,\r\n      })\r\n    },\r\n  },\r\n  props: {\r\n    chapter: {\r\n      required: true,\r\n      type: Object,\r\n    },\r\n    filterTopics: {\r\n      required: true,\r\n      type: Function,\r\n    },\r\n    topics: {\r\n      required: true,\r\n      type: Array,\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrap {\r\n  width: 100%;\r\n}\r\n\r\n.topic {\r\n  border: none;\r\n  border-top: none;\r\n  color: #000;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.topic-head {\r\n  align-items: center;\r\n  background-color: #00866F;\r\n  color: #FFF;\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 48px;\r\n  padding-left: 16px;\r\n  padding-right: 8px;\r\n}\r\n\r\n.topic-title {\r\n  color: #fff;\r\n  flex: 1;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  padding: 2px 0;\r\n}\r\n\r\n.topic-actions {\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 100%;\r\n}\r\n\r\n.topic-action {\r\n  align-items: center;\r\n  background-color: #fff;\r\n  border: none;\r\n  border-radius: 8px;\r\n  color: #323232;\r\n  display: flex;\r\n  font-size: 16px;\r\n  justify-content: center;\r\n  height: 32px;\r\n  margin: 8px;\r\n  padding: 0;\r\n  transition: background-color 100ms;\r\n  width: 32px;\r\n}\r\n\r\n.topic-action:hover {\r\n  background-color: #FFF;\r\n  color: #000;\r\n}\r\n\r\n.topic-action span {\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.topic-content {\r\n  background-color: #FFF;\r\n  font-size: 16px;\r\n  padding: 16px;\r\n}\r\n\r\n.content-actions {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.content-static, .content-editable {\r\n  max-height: 275px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.content-static {\r\n  white-space: pre-wrap;\r\n}\r\n\r\n.content-placeholder {\r\n  color: #444;\r\n  white-space: normal;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topicList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topicList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./topicList.vue?vue&type=template&id=95e4884a&scoped=true&\"\nimport script from \"./topicList.vue?vue&type=script&lang=js&\"\nexport * from \"./topicList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./topicList.vue?vue&type=style&index=0&id=95e4884a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95e4884a\",\n  null\n  \n)\n\nexport default component.exports","export const UPDATE_SELECTION = 'UPDATE_SELECTION'\r\n\r\nconst store = {\r\n  state: {\r\n    selection: {\r\n      range: null,\r\n      text: '',\r\n    },\r\n  },\r\n  mutations: {\r\n    [UPDATE_SELECTION](state, selection) {\r\n      state.selection = selection\r\n    },\r\n  },\r\n}\r\n\r\nexport default store\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showActions),expression:\"showActions\"}],staticClass:\"actions\"},[_c('div',{staticClass:\"define-icon\",domProps:{\"innerHTML\":_vm._s(_vm.defineIcon)}}),_c('div',{staticClass:\"define-buttons\"},[_c('a',{staticClass:\"define-link\",attrs:{\"href\":_vm.gDefineUrl,\"target\":\"_blank\"}},[_c('button',{staticClass:\"define-button\"},[_vm._v(\"Define\")])]),_c('a',{staticClass:\"define-link\",attrs:{\"href\":_vm.gSynonymUrl,\"target\":\"_blank\"}},[_c('button',{staticClass:\"define-button\"},[_vm._v(\"Synonyms\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div \r\n      class=\"actions\" \r\n      v-show=\"showActions\"\r\n    >\r\n      <div \r\n        class=\"define-icon\" \r\n        v-html=\"defineIcon\"\r\n      />\r\n      <div class=\"define-buttons\">\r\n        <a \r\n          class=\"define-link\" \r\n          :href=\"gDefineUrl\" \r\n          target=\"_blank\"\r\n        >\r\n          <button class=\"define-button\">Define</button>\r\n        </a>\r\n        <a \r\n          class=\"define-link\" \r\n          :href=\"gSynonymUrl\" \r\n          target=\"_blank\"\r\n        >\r\n          <button class=\"define-button\">Synonyms</button>\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Octicons from 'octicons'\r\n\r\nexport default {\r\n  components: {},\r\n  computed: {\r\n    gDefineUrl() {\r\n      const urlWord = this.word.trim().replace(/\\s+/g, '+')\r\n      return `https://www.google.com/#q=define+${urlWord}`\r\n    },\r\n    gSynonymUrl() {\r\n      const urlWord = encodeURI(this.word.trim())\r\n      return `http://www.thesaurus.com/browse/${urlWord}`\r\n    },\r\n    showActions() {\r\n      return !!this.word.trim()\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      defineIcon: Octicons.book.toSVG({\r\n        height: 30,\r\n        width: 30,\r\n      }),\r\n      linkIcon: Octicons['link-external'].toSVG({\r\n        height: 20,\r\n        width: 20,\r\n      }),\r\n      xIcon: Octicons.x.toSVG({\r\n        height: 20,\r\n        width: 20,\r\n      }),\r\n    }\r\n  },\r\n  methods: {},\r\n  props: {\r\n    word: {\r\n      required: true,\r\n      type: String\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.actions {\r\n  background-color: rgba(255, 255, 255, 0.9);\r\n  bottom: 0;\r\n  height: 50px;\r\n  pointer-events: auto;\r\n  position: absolute;\r\n  right: 16px;\r\n  width: 50px;\r\n}\r\n\r\n.define-icon {\r\n  align-items: center;\r\n  display: flex;\r\n  fill: #444;\r\n  height: 100%;\r\n  justify-content: center;\r\n  opacity: 1;\r\n  transition: opacity 100ms;\r\n  z-index: 1;\r\n}\r\n\r\n.actions:hover .define-icon {\r\n  opacity: 0;\r\n}\r\n\r\n.define-buttons {\r\n  align-items: flex-end;\r\n  background-color: #FFF;\r\n  bottom: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  opacity: 0;\r\n  right: 0;\r\n  transition: opacity 100ms;\r\n  z-index: 10;\r\n}\r\n\r\n.actions:hover .define-buttons {\r\n  pointer-events: auto;\r\n  opacity: 1;\r\n}\r\n\r\n.define-link {\r\n  width: 100%;\r\n}\r\n\r\n.define-button {\r\n  background-color: #CCC;\r\n  border: none;\r\n  border-radius: 0;\r\n  transition: background-color 100ms;\r\n  width: 100%;\r\n}\r\n\r\n.define-button:hover {\r\n  background-color: #AAA;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordDefine.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordDefine.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./wordDefine.vue?vue&type=template&id=1ef4dcac&scoped=true&\"\nimport script from \"./wordDefine.vue?vue&type=script&lang=js&\"\nexport * from \"./wordDefine.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wordDefine.vue?vue&type=style&index=0&id=1ef4dcac&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ef4dcac\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.workshops.length > 0),expression:\"workshops.length > 0\"}],staticClass:\"workshops-wrap\"},[_c('tabs-list',{attrs:{\"active-index\":_vm.activeWorkshopNameIndex,\"data-array\":_vm.workshopNameTabs,\"filter-tabs\":function () { return true; },\"item-name\":\"Workshop\",\"can-add\":false},on:{\"update:activeIndex\":_vm.selectWorkshopNameIndex}}),_c('div',[_c('div',[_c('h3',[_vm._v(\" \"+_vm._s(_vm.currentWorkshopDisplayName)+\" \")])]),_c('div',[_c('div',{staticClass:\"workshop-select\"},[_c('div',{staticClass:\"workshop-select-label\"},[_vm._v(\" Select a workshop: \")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedWorkshopGuid),expression:\"selectedWorkshopGuid\"}],staticClass:\"workshop-select-dropdown\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedWorkshopGuid=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.filteredSelectableWorkshops),function(workshop){return _c('option',{key:workshop.guid,domProps:{\"value\":workshop.guid}},[_vm._v(\" \"+_vm._s(workshop.title)+\" \")])}),0)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeWorkshopsTitle),expression:\"activeWorkshopsTitle\"}],staticClass:\"workshops\"},[_c('div',{staticClass:\"workshop-item\"},[_c('div',{staticClass:\"workshop-header\"},[_c('div',{staticClass:\"workshop-title\"},[_vm._v(\" \"+_vm._s(_vm.activeWorkshopsTitle)+\" (\"+_vm._s(_vm.activeWorkshopsDate)+\") \")]),_c('div',{staticClass:\"workshop-actions\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.firstActiveWorkshop.archived),expression:\"!firstActiveWorkshop.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"workshop-action\",attrs:{\"title\":\"Archive\"},on:{\"click\":function($event){return _vm.archiveActiveWorkshops()}}},[_c('span',{staticClass:\"fas fa-archive\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.firstActiveWorkshop.archived),expression:\"firstActiveWorkshop.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"workshop-action\",attrs:{\"title\":\"Un-archive\"},on:{\"click\":function($event){return _vm.restoreActiveWorkshops()}}},[_c('span',{staticClass:\"fas fa-box-open\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.firstActiveWorkshop.archived),expression:\"firstActiveWorkshop.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"workshop-action button-red\",attrs:{\"title\":\"Delete forever\"},on:{\"click\":function($event){return _vm.deleteActiveWorkshops()}}},[_c('span',{staticClass:\"fas fa-trash\"})])])]),_vm._l((_vm.activeWorkshops),function(workshop){return _c('div',{key:((workshop.guid) + \"|\" + (workshop.order)),staticClass:\"workshop-content\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.getHtml(workshop))}})])})],2)])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div \r\n    class=\"workshops-wrap\" \r\n    v-show=\"workshops.length > 0\"\r\n  >\r\n    <tabs-list \r\n      :active-index=\"activeWorkshopNameIndex\" \r\n      :data-array=\"workshopNameTabs\" \r\n      :filter-tabs=\"() => true\"\r\n      item-name=\"Workshop\"\r\n      :can-add=\"false\"\r\n      @update:activeIndex=\"selectWorkshopNameIndex\"\r\n    />\r\n    <div>\r\n      <div>\r\n        <h3>\r\n          {{ currentWorkshopDisplayName }}\r\n        </h3>\r\n      </div>\r\n      <div>\r\n        <div class=\"workshop-select\">\r\n          <div class=\"workshop-select-label\">\r\n            Select a workshop:\r\n          </div>\r\n          <select \r\n            class=\"workshop-select-dropdown\" \r\n            v-model=\"selectedWorkshopGuid\"\r\n          >\r\n            <option \r\n              v-for=\"workshop in filteredSelectableWorkshops\" \r\n              :key=\"workshop.guid\" \r\n              :value=\"workshop.guid\"\r\n            >\r\n              {{ workshop.title }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <div \r\n          class=\"workshops\" \r\n          v-show=\"activeWorkshopsTitle\"\r\n        >\r\n          <div class=\"workshop-item\">\r\n            <div class=\"workshop-header\">\r\n              <div class=\"workshop-title\">\r\n                {{ activeWorkshopsTitle }} ({{ activeWorkshopsDate }})\r\n              </div>\r\n              <div class=\"workshop-actions\">\r\n                <button \r\n                  class=\"workshop-action\" \r\n                  v-show=\"!firstActiveWorkshop.archived\" \r\n                  @click=\"archiveActiveWorkshops()\"\r\n                  title=\"Archive\"\r\n                  v-tooltip\r\n                >\r\n                  <span class=\"fas fa-archive\" />\r\n                </button>\r\n                <button \r\n                  class=\"workshop-action\" \r\n                  v-show=\"firstActiveWorkshop.archived\" \r\n                  @click=\"restoreActiveWorkshops()\"\r\n                  title=\"Un-archive\"\r\n                  v-tooltip\r\n                >\r\n                  <span class=\"fas fa-box-open\" />\r\n                </button>\r\n                <button \r\n                  class=\"workshop-action button-red\" \r\n                  v-show=\"firstActiveWorkshop.archived\" \r\n                  @click=\"deleteActiveWorkshops()\"\r\n                  title=\"Delete forever\"\r\n                  v-tooltip\r\n                >\r\n                  <span class=\"fas fa-trash\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div \r\n              class=\"workshop-content\" \r\n              v-for=\"workshop in activeWorkshops\" \r\n              :key=\"`${workshop.guid}|${workshop.order}`\"\r\n            >\r\n              <div v-html=\"getHtml(workshop)\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ARCHIVE_WORKSHOP, DELETE_WORKSHOP, RESTORE_WORKSHOP } from '../shared/workshops.store'\r\nimport { GetHtml } from '../shared/deltaParser'\r\nimport swal from 'sweetalert'\r\nimport TabsList from '../shared/tabsList.vue'\r\nimport uniq from 'lodash/uniq'\r\nimport writingWorkshops from '../../../models/writingWorkshop'\r\nimport tooltip from '../shared/tooltip.directive'\r\n\r\nexport default {\r\n  components: {\r\n    TabsList,\r\n  },\r\n  directives: {\r\n    tooltip\r\n  },\r\n  computed: {\r\n    currentWorkshopDisplayName() {\r\n      return writingWorkshops[this.currentWorkshopName].displayName\r\n    },\r\n    currentWorkshopName() {\r\n      if (this.activeWorkshopNameIndex === -1) {\r\n        return this.workshopNames[0]\r\n      }\r\n\r\n      return this.workshopNames[this.activeWorkshopNameIndex] || {}\r\n    },\r\n    activeWorkshops() {\r\n      return this.viewingWorkshops.filter(workshop => workshop.guid === this.selectedWorkshopGuid)\r\n    },\r\n    activeWorkshopsDate() {\r\n      return this.activeWorkshops && this.activeWorkshops.length && new Date(this.activeWorkshops[0].date).toLocaleDateString()\r\n    },\r\n    activeWorkshopsTitle() {\r\n      return this.firstActiveWorkshop.title\r\n    },\r\n    filteredSelectableWorkshops() {\r\n      return this.selectableWorkshops.filter(w => this.filterWorkshops(w))\r\n    },\r\n    firstActiveWorkshop() {\r\n      return (this.activeWorkshops && this.activeWorkshops.length && this.activeWorkshops[0]) || {}\r\n    },\r\n    selectableWorkshops() {\r\n      return this.viewingWorkshops.filter(workshop => workshop.order === 0).slice(0).sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime())\r\n    },\r\n    viewingWorkshops() {\r\n      return this.workshops.filter(workshop => workshop.workshopName === this.currentWorkshopName)\r\n    },\r\n    workshopNames() {\r\n      return uniq(this.workshops.map(workshop => workshop.workshopName))\r\n    },\r\n    workshopNameTabs() {\r\n      return this.workshopNames.map(name => ({ title: writingWorkshops[name].displayName }))\r\n    },\r\n    workshops() {\r\n      return this.$store.state.workshop.workshops\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      activeWorkshopNameIndex: -1,\r\n      selectedWorkshopGuid: null,\r\n    }\r\n  },\r\n  methods: {\r\n    archiveActiveWorkshops() {\r\n      for (const workshop of this.activeWorkshops) {\r\n        this.$store.commit(ARCHIVE_WORKSHOP, { workshop })\r\n      }\r\n    },\r\n    deleteActiveWorkshops() {\r\n      swal({\r\n        buttons: true,\r\n        dangerMode: true,\r\n        icon: 'warning',\r\n        text: 'Are you sure you want to delete this workshop? All of its content will be lost. This cannot be undone.',\r\n        title: 'Delete Forever?',\r\n      }).then((willDelete) => {\r\n        if (!willDelete) {\r\n          return\r\n        }\r\n        for (const workshop of this.activeWorkshops) {\r\n          this.$store.commit(DELETE_WORKSHOP, { workshop })\r\n        }\r\n\r\n        if (!(this.selectableWorkshops && this.selectableWorkshops.length)) {\r\n          this.selectWorkshopNameIndex(-1)\r\n          return\r\n        }\r\n\r\n        this.selectedWorkshopGuid = this.selectableWorkshops[0].guid\r\n      })\r\n    },\r\n    getHtml(workshop) {\r\n      return GetHtml(workshop.content)\r\n    },\r\n    restoreActiveWorkshops() {\r\n      for (const workshop of this.activeWorkshops) {\r\n        this.$store.commit(RESTORE_WORKSHOP, { workshop })\r\n      }\r\n    },\r\n    // The following two methods are available for use by parent components\r\n    selectWorkshopGuid(guid) {\r\n      this.selectedWorkshopGuid = guid\r\n    },\r\n    selectWorkshopName(name) {\r\n      this.activeWorkshopNameIndex = this.workshopNames.indexOf(name)\r\n    },\r\n    selectWorkshopNameIndex(index) {\r\n      if (index === -1) {\r\n        index = 0\r\n        this.selectDefaultWorkshop()\r\n      }\r\n\r\n      this.activeWorkshopNameIndex = index\r\n    },\r\n    selectDefaultWorkshop() {\r\n      if (!this.viewingWorkshops || !this.viewingWorkshops.length) {\r\n        return\r\n      }\r\n\r\n      this.selectedWorkshopGuid = this.viewingWorkshops[0].guid\r\n    },\r\n  },\r\n  mounted() {\r\n    this.selectDefaultWorkshop()\r\n  },\r\n  props: {\r\n    filterWorkshops: {\r\n      required: true,\r\n      type: Function,\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.workshop-select {\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.workshop-select-label {\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.workshop-select-dropdown {\r\n  border: 2px solid #323232;\r\n}\r\n\r\n.workshops {\r\n  margin-top: 16px;\r\n}\r\n\r\n.workshop-item {\r\n  border: none;\r\n  border-top: none;\r\n  color: #000;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.workshop-header {\r\n  align-items: center;\r\n  background-color: #00866F;\r\n  color: #FFF;\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 48px;\r\n  padding-left: 16px;\r\n  padding-right: 8px;\r\n}\r\n\r\n.workshop-title {\r\n  color: #fff;\r\n  flex: 1;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  padding: 2px 0;\r\n}\r\n\r\n.workshop-actions {\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 100%;\r\n}\r\n\r\n.workshop-action {\r\n  align-items: center;\r\n  background-color: #fff;\r\n  border: none;\r\n  border-radius: 8px;\r\n  color: #323232;\r\n  display: flex;\r\n  font-size: 16px;\r\n  justify-content: center;\r\n  height: 32px;\r\n  margin: 8px;\r\n  padding: 0;\r\n  transition: background-color 100ms;\r\n  width: 32px;\r\n}\r\n\r\n.workshop-action:hover {\r\n  background-color: #FFF;\r\n  color: #000;\r\n}\r\n\r\n.workshop-content {\r\n  background-color: #FFF;\r\n  font-size: 16px;\r\n  padding: 16px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workshopList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workshopList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./workshopList.vue?vue&type=template&id=2b85936c&scoped=true&\"\nimport script from \"./workshopList.vue?vue&type=script&lang=js&\"\nexport * from \"./workshopList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./workshopList.vue?vue&type=style&index=0&id=2b85936c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b85936c\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"composer-wrap\">\r\n    <div \r\n      class=\"composer\" \r\n      v-if=\"hasChapters\"\r\n    >\r\n      <div class=\"map-wrap\">\r\n        <text-map \r\n          :editor-element=\"editorElement\" \r\n          :data-stream=\"activeChapter.content\"\r\n          @select=\"selectMap\" \r\n          :mark=\"mark\"\r\n        />\r\n      </div>\r\n      <div class=\"editor-wrap\">\r\n        <tabs-list \r\n          :active-index=\"activeChapterIndex\" \r\n          :data-array=\"allChapters\" \r\n          :filter-tabs=\"isViewing\"\r\n          item-name=\"Chapter\"\r\n          @add=\"addChapter\"\r\n          @hover=\"hoverChapter\"\r\n          @unhover=\"unhoverChapter\"\r\n          @update:activeIndex=\"selectChapter\"\r\n        />\r\n        <div \r\n          class=\"below-tabs\" \r\n          ref=\"editorContainer\"\r\n        >\r\n          <div \r\n            class=\"stats\" \r\n            :class=\"{ 'active': showStats }\"\r\n          >\r\n            <div class=\"stats-content\">\r\n              <p>\r\n                <b>{{ activeChapter.title }}</b>\r\n              </p>\r\n              <p>{{ chapterWordCount }} words</p>\r\n              <p>{{ chapterParagraphCount }} paragraphs</p>\r\n              <p>{{ chapterPageCount }} pages</p>\r\n              <p>{{ chapterReadTimeMinutes }} minute read</p>\r\n              <br>\r\n              <p>\r\n                <b>{{ documentTitle }} (Full document)</b>\r\n              </p>\r\n              <p>{{ documentWordCount }} words</p>\r\n              <p>{{ documentPageCount }} pages</p>\r\n              <p>{{ documentReadTimeMinutes }} minute read</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"define\">\r\n            <word-define :word=\"mark\" />\r\n          </div>\r\n          <quill-editor \r\n            ref=\"textEditor\" \r\n            :content=\"activeChapter.content\" \r\n            :content-id=\"activeChapter.guid\"\r\n            :scroll-to=\"scrollTo\"\r\n            :container=\"editorContainerNode\"\r\n            @update:content=\"updateContent\"\r\n            @update:selection=\"updateSelection\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"sidebar-wrap\">\r\n        <!-- Plans/Outlines/Workshops switch -->\r\n        <div class=\"sidebar-options\">\r\n          <div class=\"plan-switch\">\r\n            <button \r\n              class=\"switch-label\" \r\n              :class=\"{ 'active': sidebar === 'outline' }\" \r\n              @click=\"switchOutline()\"\r\n            >\r\n              <img src=\"img/icons_outline-green.png\">\r\n              <div class=\"switch-label-text\">\r\n                Outline\r\n              </div>\r\n            </button>\r\n            <hr class=\"vert\">\r\n            <button \r\n              class=\"switch-label\" \r\n              :class=\"{ 'active': sidebar === 'plan' }\" \r\n              @click=\"switchPlans()\"\r\n            >\r\n              <img src=\"img/icons_plan-green.png\">\r\n              <div class=\"switch-label-text\">\r\n                Plan\r\n              </div>\r\n            </button>\r\n            <template v-if=\"isPremium\">\r\n              <hr class=\"vert\">\r\n              <button \r\n                class=\"switch-label\" \r\n                :class=\"{ 'active': sidebar === 'workshop' }\" \r\n                @click=\"switchWorkshops()\"\r\n              >\r\n                <img src=\"img/icons_workshops-green.png\">\r\n                <div class=\"switch-label-text\">\r\n                  Workshops\r\n                </div>\r\n              </button>\r\n            </template>\r\n          </div>\r\n        </div>\r\n        <!-- Document Plans -->\r\n        <div \r\n          class=\"sidebar-content\" \r\n          v-show=\"sidebar === 'plan'\"\r\n        >\r\n          <div class=\"archived-filter\">\r\n            <input \r\n              id=\"showArchivedTopics-p\" \r\n              type=\"checkbox\" \r\n              v-model=\"filters.archived\"\r\n            >\r\n            <label for=\"showArchivedTopics-p\">Show Archived</label>\r\n          </div>\r\n          <template v-if=\"hasPlans\">\r\n            <plans-list \r\n              :filter-plans=\"showPlan\" \r\n              :filter-sections=\"showSection\"\r\n              :show-subheader=\"false\"\r\n            />\r\n          </template>\r\n          <template v-else>\r\n            <div>No plans yet.</div>\r\n            <div>\r\n              <router-link to=\"/plan\">\r\n                Start planning\r\n              </router-link>\r\n            </div>\r\n          </template>\r\n        </div>\r\n        <!-- Chapter Outlines -->\r\n        <div \r\n          class=\"sidebar-content\" \r\n          v-show=\"sidebar === 'outline'\"\r\n        >\r\n          <div class=\"archived-filter\">\r\n            <input \r\n              id=\"showArchivedTopics-o\" \r\n              type=\"checkbox\" \r\n              v-model=\"filters.archived\"\r\n            >\r\n            <label for=\"showArchivedTopics-o\">Show Archived</label>\r\n          </div>\r\n          <template v-if=\"hasTopics\">\r\n            <div class=\"topic-list-wrap\">\r\n              <topic-list \r\n                :chapter=\"activeChapter\" \r\n                :filter-topics=\"showTopic\" \r\n                :topics=\"allTopics\"\r\n              />\r\n            </div>\r\n          </template>\r\n          <template v-else>\r\n            <div>No outline yet.</div>\r\n            <div>\r\n              <router-link to=\"/outline\">\r\n                Start outlining\r\n              </router-link>\r\n            </div>\r\n          </template>\r\n        </div>\r\n        <!-- Workshops -->\r\n        <div \r\n          class=\"sidebar-content\" \r\n          v-show=\"sidebar === 'workshop'\"\r\n        >\r\n          <div class=\"archived-filter\">\r\n            <input \r\n              id=\"showArchivedTopics-w\" \r\n              type=\"checkbox\" \r\n              v-model=\"filters.archived\"\r\n            >\r\n            <label for=\"showArchivedTopics-w\">Show Archived</label>\r\n          </div>\r\n          <template v-if=\"hasWorkshops\">\r\n            <workshop-list \r\n              ref=\"workshopList\" \r\n              :filter-workshops=\"showWorkshop\"\r\n            />\r\n          </template>\r\n          <template v-else>\r\n            <h3>No workshops completed yet.</h3>\r\n            <div>\r\n              See More > Workshops in the main menu to get started.\r\n            </div>\r\n          </template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-else>\r\n      <div>No chapters yet.</div>\r\n      <div>\r\n        <router-link to=\"/outline\">\r\n          Create one\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ADD_CHAPTER, UPDATE_CHAPTER_CONTENT } from '../shared/chapters.store'\r\nimport Cache from '../shared/cache'\r\nimport { GetContentString } from '../shared/deltaParser'\r\nimport guid from '../shared/guid'\r\nimport PlansList from '../shared/plansList.vue'\r\nimport QuillEditor from '../shared/quillEditor.vue'\r\nimport TabsList from '../shared/tabsList.vue'\r\nimport TextMap from './textMap.vue'\r\nimport TopicList from '../shared/topicList.vue'\r\nimport { UPDATE_SELECTION } from './composer.store'\r\nimport { ValidateTitle } from '../shared/validate'\r\nimport WordDefine from './wordDefine.vue'\r\nimport WorkshopList from '../shared/workshopList.vue'\r\n\r\nconst planSwitch = new Cache('COMPOSER_PLAN_SWITCH')\r\n\r\nexport default {\r\n  components: {\r\n    PlansList,\r\n    QuillEditor,\r\n    TabsList,\r\n    TextMap,\r\n    TopicList,\r\n    WordDefine,\r\n    WorkshopList,\r\n  },\r\n  computed: {\r\n    activeChapter() {\r\n      if (this.activeChapterIndex === -1) {\r\n        return this.viewingChapters[0]\r\n      }\r\n\r\n      return this.allChapters[this.activeChapterIndex] || {}\r\n    },\r\n    allChapters() {\r\n      return this.$store.state.chapters.chapters\r\n    },\r\n    allPlans() {\r\n      return this.$store.state.chapters.plans || []\r\n    },\r\n    allTopics() {\r\n      return this.$store.state.chapters.topics\r\n    },\r\n    allWorkshops() {\r\n      return this.$store.state.workshop.workshops\r\n    },\r\n    chapterPageCount() {\r\n      return this.getPageCount(this.textContent)\r\n    },\r\n    chapterParagraphCount() {\r\n      return this.getParagraphCount(this.textContent)\r\n    },\r\n    chapterReadTimeMinutes() {\r\n      return this.getReadTimeMinutes(this.textContent)\r\n    },\r\n    chapterWordCount() {\r\n      return this.getWordCount(this.textContent)\r\n    },\r\n    documentFullText() {\r\n      return (\r\n        this.$store.state.chapters.chapters\r\n          .map(chapter => chapter.content)\r\n          .map(content => GetContentString(content))\r\n          .join(' ')\r\n      )\r\n    },\r\n    documentPageCount() {\r\n      return this.getPageCount(this.documentFullText)\r\n    },\r\n    documentReadTimeMinutes() {\r\n      return this.getReadTimeMinutes(this.documentFullText)\r\n    },\r\n    documentTitle() {\r\n      return this.$store.state.document.currentDocument.name\r\n    },\r\n    documentWordCount() {\r\n      return this.getWordCount(this.documentFullText)\r\n    },\r\n    hasChapters() {\r\n      return this.viewingChapters && this.viewingChapters.length\r\n    },\r\n    hasPlans() {\r\n      return this.allPlans && this.allPlans.length\r\n    },\r\n    hasTopics() {\r\n      return this.allTopics && this.allTopics.length\r\n    },\r\n    hasWorkshops() {\r\n      return this.allWorkshops && this.allWorkshops.length\r\n    },\r\n    isPremium() {\r\n      return this.$store.state.user.user.isPremium\r\n    },\r\n    mark() {\r\n      return this.selection.text\r\n    },\r\n    selection() {\r\n      return this.$store.state.composer.selection\r\n    },\r\n    textContent() {\r\n      return GetContentString(this.activeChapter.content)\r\n    },\r\n    viewingChapters() {\r\n      return this.allChapters.filter(chapter => !chapter.archived)\r\n    },\r\n    viewingPlans() {\r\n      return (this.allPlans\r\n        .filter(plan => !plan.archived || this.filters.archived))\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      activeChapterIndex: -1,\r\n      editorContainerNode: null,\r\n      editorElement: null,\r\n      filters: {\r\n        archived: false,\r\n      },\r\n      newChapter: '',\r\n      scrollTo: {\r\n        paragraphIndex: -1,\r\n        searchTermIndex: -1,\r\n      },\r\n      sidebar: 'outline',\r\n      showStats: false,\r\n    }\r\n  },\r\n  methods: {\r\n    addChapter(title) {\r\n      if (!ValidateTitle('chapter', title)) {\r\n        return\r\n      }\r\n\r\n      const chapter = {\r\n        archived: false,\r\n        content: null,\r\n        guid: guid(),\r\n        title,\r\n        topics: {},\r\n      }\r\n\r\n      this.$store.commit(ADD_CHAPTER, { chapter })\r\n    },\r\n    getMasterTopic(chapterTopic) {\r\n      return this.allTopics.find(topic => topic.guid === chapterTopic.guid)\r\n    },\r\n    getReadTimeMinutes(str) {\r\n      return Math.ceil(this.getWordCount(str) / 275)\r\n    },\r\n    getPageCount(str) {\r\n      return Math.ceil(this.getWordCount(str) / 300)\r\n    },\r\n    getParagraphCount(str) {\r\n      return (str.match(/[\\n]+/g) || []).length\r\n    },\r\n    getWordCount(str) {\r\n      return (str.match(/[^\\s]+/g) || []).length\r\n    },\r\n    hoverChapter() {\r\n      this.showStats = true\r\n    },\r\n    isActive(index) {\r\n      return index === this.activeChapterIndex\r\n    },\r\n    isViewing(chapter) {\r\n      return !chapter.archived || this.filters.archived\r\n    },\r\n    selectChapter(index) {\r\n      // If no active chapter has been set, default to the first one\r\n      if (index === -1) {\r\n        index = 0\r\n      }\r\n\r\n      // If viewing an archived chapter but \"show archived\" is false\r\n      if (this.allChapters[index].archived && !this.filters.archived) {\r\n        index = this.allChapters.indexOf(this.viewingChapters[0])\r\n      }\r\n\r\n      this.activeChapterIndex = index\r\n    },\r\n    selectMap(descriptor) {\r\n      this.scrollTo = descriptor\r\n    },\r\n    showPlan(plan) {\r\n      return this.viewingPlans.includes(plan)\r\n    },\r\n    showSection(section) {\r\n      return !section.archived || this.filters.archived\r\n    },\r\n    showTopic(chapterTopic) {\r\n      const masterTopic = this.getMasterTopic(chapterTopic)\r\n      return !masterTopic || !masterTopic.archived || this.filters.archived\r\n    },\r\n    showWorkshop(workshop) {\r\n      return !workshop.archived || this.filters.archived\r\n    },\r\n    switchOutline() {\r\n      this.sidebar = 'outline'\r\n      planSwitch.cacheSet('outline')\r\n    },\r\n    switchPlans() {\r\n      this.sidebar = 'plan'\r\n      planSwitch.cacheSet('plan')\r\n    },\r\n    switchWorkshops() {\r\n      this.sidebar = 'workshop'\r\n      planSwitch.cacheSet('workshop')\r\n    },\r\n    unhoverChapter() {\r\n      this.showStats = false\r\n    },\r\n    updateContent({ content: newContent, contentId: guid }) {\r\n      const chapter = this.allChapters.find(chapter => chapter.guid === guid)\r\n      if (!chapter) {\r\n        return\r\n      }\r\n\r\n      this.$store.commit(UPDATE_CHAPTER_CONTENT, {\r\n        chapter,\r\n        newContent,\r\n      })\r\n    },\r\n    updateSelection(selection) {\r\n      this.$store.commit(UPDATE_SELECTION, selection)\r\n    },\r\n  },\r\n  mounted() {\r\n    this.editorContainerNode = this.$refs.editorContainer\r\n    this.editorElement = this.$refs.textEditor\r\n    this.sidebar = planSwitch.cacheGet() || 'outline'\r\n\r\n    const chapterGuid = this.$route.query.chapter\r\n    if (chapterGuid) {\r\n      const activeChapter = this.allChapters.find(chapter => chapter.guid === chapterGuid)\r\n      if (activeChapter.archived) {\r\n        this.filters.archived = true\r\n      }\r\n\r\n      this.selectChapter(this.allChapters.indexOf(activeChapter) || -1)\r\n    }\r\n\r\n    const workshopGuid = this.$route.query.workshop\r\n    const workshopName = this.$route.query.workshopName\r\n    if (workshopName && workshopGuid) {\r\n      this.switchWorkshops()\r\n      const activeWorkshop = this.allWorkshops.find(workshop => workshop.guid === workshopGuid)\r\n      if (activeWorkshop.archived) {\r\n        this.filters.archived = true\r\n      }\r\n\r\n      this.$refs.workshopList.selectWorkshopName(workshopName)\r\n      this.$refs.workshopList.selectWorkshopGuid(workshopGuid)\r\n    }\r\n\r\n    this.$router.replace('/write')\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.composer-wrap {\r\n  display: flex;\r\n  justify-content: center;\r\n  min-height: 300px;\r\n  width: 100%;\r\n}\r\n\r\n.composer {\r\n  display: flex;\r\n  flex: 1;\r\n  max-width: 100%;\r\n  width: 1500px;\r\n}\r\n\r\n.map-wrap {\r\n  display: flex;\r\n  height: 100%;\r\n  margin-right: 20px;\r\n  width: 160px;\r\n  z-index: 25;\r\n}\r\n\r\n.editor-wrap {\r\n  background-color: #F0F0F0;\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n  margin-right: 20px;\r\n  padding: 16px;\r\n  position: relative;\r\n}\r\n\r\n.below-tabs {\r\n  flex: 1;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.stats {\r\n  background-color: rgba(0, 134, 111, 0.95);\r\n  bottom: 0;\r\n  color: #fff;\r\n  font-size: 16px;\r\n  left: 0;\r\n  opacity: 0;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  transition: opacity 100ms;\r\n  width: 100%;\r\n  z-index: 15;\r\n}\r\n\r\n.stats.active {\r\n  opacity: 1;\r\n}\r\n\r\n.stats-content {\r\n  height: 100%;\r\n  padding: 12px;\r\n  width: 100%;\r\n}\r\n\r\n.define {\r\n  bottom: 0;\r\n  left: 0;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  z-index: 15;\r\n\r\n}\r\n\r\n.sidebar-wrap {\r\n  background-color: #F2F9F8;\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  width: 300px;\r\n}\r\n\r\n.sidebar-content {\r\n  overflow: auto;\r\n  padding: 16px 32px;\r\n}\r\n\r\n.sidebar-options {\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.plan-switch {\r\n  align-items: center;\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: row;\r\n  height: 94px;\r\n}\r\n\r\n.switch-label {\r\n  align-items: center;\r\n  background-color: #E4EBEA;\r\n  border: none;\r\n  border-radius: 0;\r\n  color: #323232;\r\n  cursor: pointer;\r\n  display: flex;\r\n  fill: #323232;\r\n  flex: 1;\r\n  flex-direction: column;\r\n  font-size: 16px;\r\n  height: 100%;\r\n  opacity: 1;\r\n  padding: 16px;\r\n  transition: background-color 200ms, opacity 100ms;\r\n}\r\n\r\n.switch-label:not(.active):hover {\r\n  color: #323232;\r\n  fill: #323232;\r\n  opacity: 0.7;\r\n}\r\n\r\n.switch-label.active {\r\n  background-color: #F2F9F8;\r\n}\r\n\r\n.switch-label-text {\r\n  margin: 0 12px;\r\n}\r\n\r\n.switch-label + hr.vert {\r\n  background-color: #FFF;\r\n  border: none;\r\n  height: 100%;\r\n  margin: 0;\r\n  width: 3px;\r\n}\r\n\r\n.switch-label img {\r\n  filter: grayscale(100%);\r\n  height: 36px;\r\n  margin-bottom: 8px;\r\n  transition: filter 200ms;\r\n}\r\n\r\n.switch-label.active img {\r\n  filter: grayscale(0%);\r\n}\r\n\r\n.archived-filter {\r\n  align-items: center;\r\n  align-self: flex-start;\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.topic-list-wrap {\r\n  overflow: auto;\r\n}\r\n\r\n/* MOBILE */\r\n@media (max-width: 800px) {\r\n  .map-wrap {\r\n    display: none;\r\n  }\r\n}\r\n\r\n@media (max-width: 700px) {\r\n  .sidebar-wrap {\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./composer.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./composer.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./composer.page.vue?vue&type=template&id=0adf0965&scoped=true&\"\nimport script from \"./composer.page.vue?vue&type=script&lang=js&\"\nexport * from \"./composer.page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./composer.page.vue?vue&type=style&index=0&id=0adf0965&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0adf0965\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"document\"},[_c('div',{staticClass:\"title\"},[_c('h1',[_vm._v(\" \"+_vm._s(_vm.documentName)+\" \")])]),_c('div',{staticClass:\"actions\"},[_c('label',{staticClass:\"name-label\",attrs:{\"for\":\"documentNameInput\"}},[_vm._v(\"Change document name:\")]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newDocumentName),expression:\"newDocumentName\"}],staticClass:\"name-input\",attrs:{\"id\":\"documentNameInput\",\"type\":\"text\"},domProps:{\"value\":(_vm.newDocumentName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newDocumentName=$event.target.value}}}),_c('button',{staticClass:\"button-green\",on:{\"click\":function($event){return _vm.saveDocumentName()}}},[_vm._v(\" Save \")])])]),_c('hr'),_c('div',{staticClass:\"actions\"},[_c('button',{staticClass:\"button-red\",on:{\"click\":function($event){return _vm.deleteDocument()}}},[_vm._v(\" Delete Document \")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"wrap\">\r\n    <div class=\"document\">\r\n      <div class=\"title\">\r\n        <h1>\r\n          {{ documentName }}\r\n        </h1>\r\n      </div>\r\n      <div class=\"actions\">\r\n        <label \r\n          class=\"name-label\" \r\n          for=\"documentNameInput\"\r\n        >Change document name:</label>\r\n        <div>\r\n          <input \r\n            class=\"name-input\" \r\n            id=\"documentNameInput\" \r\n            type=\"text\" \r\n            v-model=\"newDocumentName\"\r\n          >\r\n          <button \r\n            class=\"button-green\" \r\n            @click=\"saveDocumentName()\"\r\n          >\r\n            Save\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <hr>\r\n      <div class=\"actions\">\r\n        <button \r\n          class=\"button-red\" \r\n          @click=\"deleteDocument()\"\r\n        >\r\n          Delete Document\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport swal from 'sweetalert'\r\nimport { DELETE_DOCUMENT, UPDATE_DOCUMENT_NAME } from '../shared/document.store'\r\n\r\nexport default {\r\n  components: {},\r\n  computed: {\r\n    documentGuid() {\r\n      return this.$store.state.document.currentDocument.guid\r\n    },\r\n    documentName() {\r\n      return this.$store.state.document.currentDocument.name\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      newDocumentName: '',\r\n    }\r\n  },\r\n  methods: {\r\n    deleteDocument() {\r\n      swal({\r\n        buttons: true,\r\n        dangerMode: true,\r\n        icon: 'warning',\r\n        text: 'Are you sure you want to delete this document? All plans, outlines, and chapters will be lost. This cannot be undone.',\r\n        title: 'Delete Forever?',\r\n      }).then((willDelete) => {\r\n        if (!willDelete) {\r\n          return\r\n        }\r\n\r\n        this.$store.dispatch(DELETE_DOCUMENT, { guid: this.documentGuid })\r\n      })\r\n    },\r\n    saveDocumentName() {\r\n      this.$store.commit(UPDATE_DOCUMENT_NAME, { guid: this.documentGuid, name: this.newDocumentName })\r\n    },\r\n  },\r\n  mounted() {\r\n    this.newDocumentName = this.documentName\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrap {\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n\r\n.document {\r\n  background-color: #F2F9F8;\r\n  display: block;\r\n  height: min-content;\r\n  margin-bottom: 32px;\r\n  max-width: 1050px;\r\n  padding: 32px;\r\n  width: 100%;\r\n}\r\n\r\n.actions {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.name-label {\r\n  display: inline-block;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.name-input {\r\n  margin-right: 6px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentEdit.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentEdit.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./documentEdit.page.vue?vue&type=template&id=439a041e&scoped=true&\"\nimport script from \"./documentEdit.page.vue?vue&type=script&lang=js&\"\nexport * from \"./documentEdit.page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./documentEdit.page.vue?vue&type=style&index=0&id=439a041e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"439a041e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outliner-wrap\"},[_c('div',{staticClass:\"outliner\"},[_c('div',{staticClass:\"header\"},[_c('h1',{staticClass:\"header-title\"},[_vm._v(\" Outline \")]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filters.archived),expression:\"filters.archived\"}],attrs:{\"id\":\"showArchivedCheckbox\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.filters.archived)?_vm._i(_vm.filters.archived,null)>-1:(_vm.filters.archived)},on:{\"change\":function($event){var $$a=_vm.filters.archived,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.filters, \"archived\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.filters, \"archived\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.filters, \"archived\", $$c)}}}}),_c('label',{attrs:{\"for\":\"showArchivedCheckbox\"}},[_vm._v(\"Show Archived\")])])]),_c('div',{staticClass:\"chips-wrap chapter-chips\"},[_c('h3',[_vm._v(\"Add/rearrange chapters\")]),_c('chips-list',{attrs:{\"name\":\"Chapter\",\"name-prop\":\"title\",\"data-array\":_vm.allChapters,\"filter-chips\":_vm.showChapter,\"is-deletable\":_vm.isDeletable},on:{\"add\":_vm.addChapter,\"delete\":_vm.archiveChapter,\"rearrange\":_vm.rearrangeChapter,\"restore\":_vm.restoreChapter,\"update\":_vm.renameChapter}})],1),_c('div',{staticClass:\"chips-wrap topic-chips\"},[_c('h3',[_vm._v(\"Add a topic to all chapters\")]),_c('chips-list',{attrs:{\"name\":\"Topic\",\"name-prop\":\"title\",\"data-array\":_vm.allTopics,\"filter-chips\":_vm.showTopic,\"is-deletable\":_vm.isDeletable},on:{\"add\":_vm.addTopic,\"delete\":_vm.archiveTopic,\"rearrange\":_vm.rearrangeTopic,\"restore\":_vm.restoreTopic,\"update\":_vm.renameTopic}})],1),_c('hr',{staticClass:\"divider\"}),(_vm.viewingChapters.length > 0)?_c('div',{staticClass:\"chapters\"},[_c('tabs-list',{attrs:{\"active-index\":_vm.activeChapterIndex,\"data-array\":_vm.allChapters,\"filter-tabs\":_vm.showChapter,\"item-name\":\"Chapter\"},on:{\"add\":_vm.addChapter,\"update:activeIndex\":_vm.selectChapter}}),(_vm.activeChapter)?_c('div',{staticClass:\"chapter\"},[_c('div',{staticClass:\"chapter-head\"},[_c('h2',{staticClass:\"chapter-title\"},[_vm._v(\" \"+_vm._s(_vm.activeChapter.title)+\" \")]),_c('div',{staticClass:\"chapter-actions\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.activeChapter.archived),expression:\"!activeChapter.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"chapter-action button-icon\",attrs:{\"title\":\"Archive\"},on:{\"click\":function($event){return _vm.archiveChapter({ index: _vm.activeChapterIndex })}}},[_c('span',{staticClass:\"fas fa-archive\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeChapter.archived),expression:\"activeChapter.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"chapter-action button-icon\",attrs:{\"title\":\"Un-archive\"},on:{\"click\":function($event){return _vm.restoreChapter({ index: _vm.activeChapterIndex })}}},[_c('span',{staticClass:\"fas fa-box-open\"})]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeChapter.archived),expression:\"activeChapter.archived\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"chapter-action chapter-action-danger button-icon\",attrs:{\"title\":\"Delete Forever\"},on:{\"click\":function($event){return _vm.deleteChapter({ index: _vm.activeChapterIndex })}}},[_c('span',{staticClass:\"fas fa-trash\"})])])]),_c('topic-list',{attrs:{\"chapter\":_vm.activeChapter,\"filter-topics\":_vm.showTopic,\"topics\":_vm.allTopics}})],1):_vm._e()],1):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"outliner-wrap\">\r\n    <div class=\"outliner\">\r\n      <div class=\"header\">\r\n        <h1 class=\"header-title\">\r\n          Outline\r\n        </h1>\r\n        <div>\r\n          <input \r\n            id=\"showArchivedCheckbox\" \r\n            type=\"checkbox\" \r\n            v-model=\"filters.archived\"\r\n          >\r\n          <label for=\"showArchivedCheckbox\">Show Archived</label>\r\n        </div>\r\n      </div>\r\n      <!-- Chapter Chips -->\r\n      <div class=\"chips-wrap chapter-chips\">\r\n        <h3>Add/rearrange chapters</h3>\r\n        <chips-list \r\n          name=\"Chapter\" \r\n          name-prop=\"title\"\r\n          :data-array=\"allChapters\"\r\n          :filter-chips=\"showChapter\"\r\n          :is-deletable=\"isDeletable\"\r\n          @add=\"addChapter\"\r\n          @delete=\"archiveChapter\"\r\n          @rearrange=\"rearrangeChapter\"\r\n          @restore=\"restoreChapter\"\r\n          @update=\"renameChapter\"\r\n        />\r\n      </div>\r\n      <!-- Topic Chips -->\r\n      <div class=\"chips-wrap topic-chips\">\r\n        <h3>Add a topic to all chapters</h3>\r\n        <chips-list \r\n          name=\"Topic\" \r\n          name-prop=\"title\"\r\n          :data-array=\"allTopics\"\r\n          :filter-chips=\"showTopic\"\r\n          :is-deletable=\"isDeletable\"\r\n          @add=\"addTopic\"\r\n          @delete=\"archiveTopic\"\r\n          @rearrange=\"rearrangeTopic\"\r\n          @restore=\"restoreTopic\"\r\n          @update=\"renameTopic\"\r\n        />\r\n      </div>\r\n      <hr class=\"divider\">\r\n      <div \r\n        class=\"chapters\" \r\n        v-if=\"viewingChapters.length > 0\"\r\n      >\r\n        <!-- Chapters > Topics -->\r\n        <tabs-list \r\n          :active-index=\"activeChapterIndex\" \r\n          :data-array=\"allChapters\" \r\n          :filter-tabs=\"showChapter\"\r\n          item-name=\"Chapter\"\r\n          @add=\"addChapter\"\r\n          @update:activeIndex=\"selectChapter\"\r\n        />\r\n        <div \r\n          class=\"chapter\" \r\n          v-if=\"activeChapter\"\r\n        >\r\n          <div class=\"chapter-head\">\r\n            <h2 class=\"chapter-title\">\r\n              {{ activeChapter.title }}\r\n            </h2>\r\n            <div class=\"chapter-actions\">\r\n              <button \r\n                class=\"chapter-action button-icon\" \r\n                v-show=\"!activeChapter.archived\" \r\n                @click=\"archiveChapter({ index: activeChapterIndex })\"\r\n                title=\"Archive\"\r\n                v-tooltip\r\n              >\r\n                <span class=\"fas fa-archive\" />\r\n              </button>\r\n              <button \r\n                class=\"chapter-action button-icon\" \r\n                v-show=\"activeChapter.archived\" \r\n                @click=\"restoreChapter({ index: activeChapterIndex })\"\r\n                title=\"Un-archive\"\r\n                v-tooltip\r\n              >\r\n                <span class=\"fas fa-box-open\" />  \r\n              </button>\r\n              <button \r\n                class=\"chapter-action chapter-action-danger button-icon\" \r\n                v-show=\"activeChapter.archived\" \r\n                @click=\"deleteChapter({ index: activeChapterIndex })\"\r\n                title=\"Delete Forever\"\r\n                v-tooltip\r\n              >\r\n                <span class=\"fas fa-trash\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <topic-list \r\n            :chapter=\"activeChapter\" \r\n            :filter-topics=\"showTopic\" \r\n            :topics=\"allTopics\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  ADD_CHAPTER, ADD_TOPIC, ARCHIVE_CHAPTER, ARCHIVE_TOPIC,\r\n  DELETE_CHAPTER, REARRANGE_CHAPTERS, REARRANGE_TOPICS,\r\n  RESTORE_CHAPTER, RESTORE_TOPIC, UPDATE_CHAPTER, UPDATE_TOPIC,\r\n} from '../shared/chapters.store'\r\nimport ChipsList from '../shared/chipsList.vue'\r\nimport { GetContentString } from '../shared/deltaParser'\r\nimport guid from '../shared/guid'\r\nimport swal from 'sweetalert'\r\nimport TabsList from '../shared/tabsList.vue'\r\nimport TopicList from '../shared/topicList.vue'\r\nimport { ValidateTitle } from '../shared/validate'\r\nimport tooltip from '../shared/tooltip.directive'\r\n\r\nexport default {\r\n  components: {\r\n    ChipsList,\r\n    TabsList,\r\n    TopicList,\r\n  },\r\n  computed: {\r\n    activeChapter() {\r\n      if (this.activeChapterIndex === -1) {\r\n        return null\r\n      }\r\n\r\n      return this.allChapters[this.activeChapterIndex]\r\n    },\r\n    allChapters() {\r\n      return this.$store.state.chapters.chapters || []\r\n    },\r\n    allTopics() {\r\n      return this.$store.state.chapters.topics || []\r\n    },\r\n    viewingChapters() {\r\n      return (this.allChapters\r\n        .filter(chapter => !chapter.archived || this.filters.archived))\r\n        .filter(chapter => !this.filters.chapter ||\r\n                chapter.title.toLowerCase().includes(this.filters.chapter.toLowerCase()))\r\n    },\r\n    viewingTopicsFilteredArchived() {\r\n      return (this.allTopics.filter(topic => !topic.archived || this.filters.archived))\r\n    },\r\n    viewingTopicsFilteredTitle() {\r\n      return this.allTopics.filter((topic) => {\r\n        if (!this.filters.topic) {\r\n          return true\r\n        }\r\n\r\n        const filter = this.filters.topic.toLowerCase()\r\n        const title = topic.title.toLowerCase()\r\n\r\n        return title.includes(filter)\r\n      })\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      activeChapterIndex: -1,\r\n      filters: {\r\n        archived: false,\r\n        chapter: '',\r\n        topic: '',\r\n      },\r\n      filtersVisible: false,\r\n      helpChapterBlocksNode: null,\r\n      helpChapterChipsNode: null,\r\n      helpTopicChipsNode: null,\r\n    }\r\n  },\r\n  directives: {\r\n    tooltip\r\n  },\r\n  methods: {\r\n    addChapter(title) {\r\n      if (!ValidateTitle('chapter', title)) {\r\n        return\r\n      }\r\n\r\n      const chapter = {\r\n        archived: false,\r\n        content: null,\r\n        guid: guid(),\r\n        title,\r\n        topics: {},\r\n      }\r\n\r\n      this.$store.commit(ADD_CHAPTER, { chapter })\r\n    },\r\n    addTopic(title) {\r\n      if (!ValidateTitle('topic', title)) {\r\n        return\r\n      }\r\n\r\n      const topic = {\r\n        archived: false,\r\n        guid: guid(),\r\n        title,\r\n      }\r\n\r\n      this.$store.commit(ADD_TOPIC, { topic })\r\n    },\r\n    archiveChapter({ index }) {\r\n      this.$store.commit(ARCHIVE_CHAPTER, { chapter: this.allChapters[index] })\r\n\r\n      if (index === this.activeChapterIndex && !this.filters.archived) {\r\n        this.selectChapter(-1)\r\n      }\r\n    },\r\n    archiveTopic({ index }) {\r\n      this.$store.commit(ARCHIVE_TOPIC, { topic: this.allTopics[index] })\r\n    },\r\n    deleteChapter({ index }) {\r\n      swal({\r\n        buttons: true,\r\n        dangerMode: true,\r\n        icon: 'warning',\r\n        text: `Are you sure you want to delete this chapter? Its outline and all of its written content (from the Write page)\r\n               will be lost. This cannot be undone.`,\r\n        title: 'Delete Forever?',\r\n      }).then((willDelete) => {\r\n        if (!willDelete) {\r\n          return\r\n        }\r\n\r\n        this.$store.commit(DELETE_CHAPTER, { chapter: this.allChapters[index] })\r\n\r\n        if (index === this.activeChapterIndex) {\r\n          this.selectChapter(-1)\r\n        }\r\n      })\r\n    },\r\n    getMasterTopic(chapterTopic) {\r\n      return this.allTopics.find(topic => topic.guid === chapterTopic.guid)\r\n    },\r\n    helpClick(content, title) {\r\n      swal({\r\n        content,\r\n        title,\r\n      })\r\n    },\r\n    isDeletable(chip) {\r\n      return !chip.archived\r\n    },\r\n    rearrangeChapter(chapters) {\r\n      this.$store.commit(REARRANGE_CHAPTERS, { chapters })\r\n    },\r\n    rearrangeTopic(topics) {\r\n      this.$store.commit(REARRANGE_TOPICS, { topics })\r\n    },\r\n    renameChapter({ index, value: newTitle }) {\r\n      if (!ValidateTitle('chapter', newTitle)) {\r\n        return\r\n      }\r\n\r\n      this.$store.commit(UPDATE_CHAPTER, {\r\n        chapter: this.allChapters[index],\r\n        newTitle,\r\n      })\r\n    },\r\n    renameTopic({ index, value: newTitle }) {\r\n      if (!ValidateTitle('topic', newTitle)) {\r\n        return\r\n      }\r\n\r\n      const topic = this.allTopics[index]\r\n\r\n      this.$store.commit(UPDATE_TOPIC, {\r\n        topic,\r\n        newTitle,\r\n      })\r\n    },\r\n    restoreChapter({ index }) {\r\n      this.$store.commit(RESTORE_CHAPTER, { chapter: this.allChapters[index] })\r\n    },\r\n    restoreTopic({ index }) {\r\n      this.$store.commit(RESTORE_TOPIC, { topic: this.allTopics[index] })\r\n    },\r\n    selectChapter(index) {\r\n      // If no active chapter has been set, default to the first one\r\n      if (index === -1) {\r\n        index = 0\r\n      }\r\n\r\n      // If viewing an archived chapter but \"show archived\" is false\r\n      if (this.allChapters[index].archived && !this.filters.archived) {\r\n        index = this.allChapters.indexOf(this.viewingChapters[0])\r\n      }\r\n\r\n      this.activeChapterIndex = index\r\n    },\r\n    showChapter(chapter) {\r\n      return this.viewingChapters.includes(chapter)\r\n    },\r\n    showTopic(topic) {\r\n      const masterTopic = this.getMasterTopic(topic)\r\n      const textContent = GetContentString(topic.content)\r\n\r\n      return (this.viewingTopicsFilteredArchived.includes(masterTopic) &&\r\n        (this.viewingTopicsFilteredTitle.includes(masterTopic) ||\r\n        textContent && textContent.includes(this.filters.topic)))\r\n    },\r\n    toggleFilters() {\r\n      this.filtersVisible = !this.filtersVisible\r\n    },\r\n  },\r\n  mounted() {\r\n    this.helpChapterBlocksNode = this.$refs.helpChapterBlocksModal\r\n    this.helpChapterChipsNode = this.$refs.helpChapterChipsModal\r\n    this.helpTopicChipsNode = this.$refs.helpTopicChipsModal\r\n\r\n    const chapterGuid = this.$route.query.chapter\r\n    if (chapterGuid) {\r\n      const activeChapter = this.allChapters.find(chapter => chapter.guid === chapterGuid)\r\n      if (activeChapter.archived) {\r\n        this.filters.archived = true\r\n      }\r\n\r\n      this.selectChapter(this.allChapters.indexOf(activeChapter))\r\n    } else {\r\n      this.selectChapter(-1)\r\n    }\r\n\r\n    this.$router.replace('/outline')\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nh1 {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.outliner-wrap {\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n\r\n.outliner {\r\n  background-color: #F2F9F8;\r\n  display: block;\r\n  height: min-content;\r\n  margin-bottom: 32px;\r\n  max-width: 1050px;\r\n  padding: 32px;\r\n  width: 100%;\r\n}\r\n\r\n.header {\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.header-title {\r\n  flex: 1;\r\n}\r\n\r\n.filters {\r\n  margin: 16px 0;\r\n}\r\n\r\n.chips-wrap {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.chapters {\r\n  display: block;\r\n}\r\n\r\n.chapter {\r\n  border-bottom-left-radius: 5px;\r\n  border-bottom-right-radius: 5px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.chapter-head {\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.chapter-title {\r\n  margin-right: 8px;\r\n}\r\n\r\n.chapter-action {\r\n  background-color: transparent;\r\n  color: #323232;\r\n  margin-left: 16px;\r\n  transition: background-color 100ms;\r\n}\r\n\r\n.chapter-action:hover {\r\n  background-color: #FFF;\r\n  color: #000;\r\n}\r\n\r\n.chapter-action-danger {\r\n  color: #e53935;\r\n}\r\n</style>\r\n\r\n<style>\r\n.add-icon--svg {\r\n  fill: #FFF;\r\n  margin-right: 6px;\r\n}\r\n\r\n.filter-toggle svg {\r\n  transform-origin: center;\r\n  transition: transform 100ms;\r\n}\r\n\r\n.filter-toggle.expanded svg {\r\n  transform: rotate(180deg);\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outliner.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outliner.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./outliner.page.vue?vue&type=template&id=23fffb5a&scoped=true&\"\nimport script from \"./outliner.page.vue?vue&type=script&lang=js&\"\nexport * from \"./outliner.page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./outliner.page.vue?vue&type=style&index=0&id=23fffb5a&scoped=true&lang=css&\"\nimport style1 from \"./outliner.page.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23fffb5a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"planner\"},[_c('div',{staticClass:\"header\"},[_c('h1',{staticClass:\"header-title\"},[_vm._v(\" Plan \")]),_c('div',{staticClass:\"filters\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filters.archived),expression:\"filters.archived\"}],staticClass:\"show-archived\",attrs:{\"id\":\"showArchivedCheckbox\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.filters.archived)?_vm._i(_vm.filters.archived,null)>-1:(_vm.filters.archived)},on:{\"change\":function($event){var $$a=_vm.filters.archived,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.filters, \"archived\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.filters, \"archived\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.filters, \"archived\", $$c)}}}}),_c('label',{attrs:{\"for\":\"showArchivedCheckbox\"}},[_vm._v(\"Show Archived\")])])]),_c('div',{staticClass:\"chips-wrap plan-chips\"},[_vm._m(0),_c('chips-list',{attrs:{\"name\":\"Plan\",\"name-prop\":\"title\",\"data-array\":_vm.allPlans,\"filter-chips\":_vm.showPlan,\"is-deletable\":_vm.isDeletable},on:{\"add\":_vm.addPlan,\"delete\":_vm.archivePlan,\"rearrange\":_vm.rearrangePlan,\"restore\":_vm.restorePlan,\"update\":_vm.renamePlan}})],1),_c('hr',{staticClass:\"divider\"}),_c('plans-list',{ref:\"plansList\",attrs:{\"filter-plans\":_vm.showPlan,\"filter-sections\":_vm.showSection,\"show-subheader\":true}})],1),_c('div',{staticStyle:{\"display\":\"none\"}},[_c('div',{ref:\"helpPlanChipsModal\",staticClass:\"help\"},[_c('p',[_vm._v(\"This is the plan list. It's the easiest place to add, archive, restore, rename, and rearrange plans.\")]),_c('p',[_vm._v(\"To add a plan, type its name into the \\\"New Plan\\\" box and click \\\"Add\\\".\")]),_c('p',[_vm._v(\" To archive a plan, click the \\\"X\\\" next to its name in the list. Archiving a plan removes it from your document without deleting it permanently. \")]),_c('p',[_vm._v(\"To restore an archived plan, check the \\\"Show Archived\\\" box, then click the \\\"+\\\" next to its name in the list.\")]),_c('p',[_vm._v(\"To rename a plan, click the pencil icon next to its name in the list.\")]),_c('p',[_vm._v(\"To rearrange a plan, click and drag it to where you want it to go.\")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"section-title\"},[_c('h3',[_vm._v(\"Add/rearrange plans\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"wrap\">\r\n    <div class=\"planner\">\r\n      <div class=\"header\">\r\n        <h1 class=\"header-title\">\r\n          Plan\r\n        </h1>\r\n        <!-- 'Show Archived' checkbox -->\r\n        <div class=\"filters\">\r\n          <input \r\n            class=\"show-archived\" \r\n            id=\"showArchivedCheckbox\" \r\n            type=\"checkbox\" \r\n            v-model=\"filters.archived\"\r\n          >\r\n          <label for=\"showArchivedCheckbox\">Show Archived</label>\r\n        </div>\r\n      </div>\r\n      <!-- Plan Chips -->\r\n      <div class=\"chips-wrap plan-chips\">\r\n        <div class=\"section-title\">\r\n          <h3>Add/rearrange plans</h3>\r\n        </div>\r\n        <chips-list \r\n          name=\"Plan\" \r\n          name-prop=\"title\"\r\n          :data-array=\"allPlans\"\r\n          :filter-chips=\"showPlan\"\r\n          :is-deletable=\"isDeletable\"\r\n          @add=\"addPlan\"\r\n          @delete=\"archivePlan\"\r\n          @rearrange=\"rearrangePlan\"\r\n          @restore=\"restorePlan\"\r\n          @update=\"renamePlan\"\r\n        />\r\n      </div>\r\n      <hr class=\"divider\">\r\n      <plans-list \r\n        ref=\"plansList\" \r\n        :filter-plans=\"showPlan\" \r\n        :filter-sections=\"showSection\"\r\n        :show-subheader=\"true\"\r\n      />\r\n    </div>\r\n\r\n    <!-- Plans: [?] Modal -->\r\n    <div style=\"display: none\">\r\n      <div \r\n        class=\"help\" \r\n        ref=\"helpPlanChipsModal\"\r\n      >\r\n        <p>This is the plan list. It's the easiest place to add, archive, restore, rename, and rearrange plans.</p>\r\n        <p>To add a plan, type its name into the \"New Plan\" box and click \"Add\".</p>\r\n        <p>\r\n          To archive a plan, click the \"X\" next to its name in the list.\r\n          Archiving a plan removes it from your document without deleting it permanently.\r\n        </p>\r\n        <p>To restore an archived plan, check the \"Show Archived\" box, then click the \"+\" next to its name in the list.</p>\r\n        <p>To rename a plan, click the pencil icon next to its name in the list.</p>\r\n        <p>To rearrange a plan, click and drag it to where you want it to go.</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  ADD_PLAN, ARCHIVE_PLAN, REARRANGE_PLANS,\r\n  RESTORE_PLAN, UPDATE_PLAN,\r\n} from '../shared/chapters.store'\r\nimport ChipsList from '../shared/chipsList.vue'\r\nimport guid from '../shared/guid'\r\nimport PlansList from '../shared/plansList.vue'\r\nimport swal from 'sweetalert'\r\nimport { ValidateTitle } from '../shared/validate'\r\n\r\nexport default {\r\n  components: {\r\n    ChipsList,\r\n    PlansList,\r\n  },\r\n  computed: {\r\n    allPlans() {\r\n      return this.$store.state.chapters.plans || []\r\n    },\r\n    viewingPlans() {\r\n      return (this.allPlans\r\n        .filter(plan => !plan.archived || this.filters.archived))\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      filters: {\r\n        archived: false,\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    addPlan(title) {\r\n      if (!ValidateTitle('plan', title)) {\r\n        return\r\n      }\r\n\r\n      const plan = {\r\n        archived: false,\r\n        guid: guid(),\r\n        title,\r\n        sections: [],\r\n      }\r\n\r\n      this.$store.commit(ADD_PLAN, { plan })\r\n    },\r\n    archivePlan({ index }) {\r\n      this.$store.commit(ARCHIVE_PLAN, { plan: this.allPlans[index] })\r\n\r\n      if (index === this.activePlanIndex) {\r\n        this.activePlanIndex = -1\r\n      }\r\n    },\r\n    helpClick(content, title) {\r\n      swal({\r\n        content,\r\n        title,\r\n      })\r\n    },\r\n    isDeletable(chip) {\r\n      return !chip.archived\r\n    },\r\n    rearrangePlan(plans) {\r\n      this.$store.commit(REARRANGE_PLANS, { plans })\r\n    },\r\n    renamePlan({ index, value: newTitle }) {\r\n      if (!ValidateTitle('plan', newTitle)) {\r\n        return\r\n      }\r\n\r\n      this.$store.commit(UPDATE_PLAN, {\r\n        plan: this.allPlans[index],\r\n        newTitle,\r\n      })\r\n    },\r\n    restorePlan({ index }) {\r\n      this.$store.commit(RESTORE_PLAN, { plan: this.allPlans[index] })\r\n    },\r\n    showPlan(plan) {\r\n      return this.viewingPlans.includes(plan)\r\n    },\r\n    showSection(section) {\r\n      return !section.archived || this.filters.archived\r\n    },\r\n  },\r\n  mounted() {\r\n    this.helpPlanChipsModal = this.$refs.helpPlanChipsModal\r\n\r\n    const planGuid = this.$route.query.plan\r\n    if (planGuid) {\r\n      const activePlan = this.allPlans.find(plan => plan.guid === planGuid)\r\n      if (activePlan.archived) {\r\n        this.filters.archived = true\r\n      }\r\n\r\n      this.$refs.plansList.selectPlan(this.allPlans.indexOf(activePlan))\r\n    }\r\n\r\n    this.$router.replace('/plan')\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrap {\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n\r\n.planner {\r\n  background-color: #F2F9F8;\r\n  display: block;\r\n  height: min-content;\r\n  margin-bottom: 32px;\r\n  max-width: 1050px;\r\n  padding: 32px;\r\n  width: 100%;\r\n}\r\n\r\n.header {\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.header-title {\r\n  flex: 1;\r\n}\r\n\r\n.filters {\r\n  margin: 10px 0;\r\n}\r\n\r\n.chips-wrap {\r\n  margin-bottom: 16px;\r\n  padding-bottom: 4px;\r\n  padding-top: 4px;\r\n}\r\n\r\n.section-title {\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planner.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planner.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./planner.page.vue?vue&type=template&id=4e61483b&scoped=true&\"\nimport script from \"./planner.page.vue?vue&type=script&lang=js&\"\nexport * from \"./planner.page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./planner.page.vue?vue&type=style&index=0&id=4e61483b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e61483b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"search\"},[_c('h1',[_vm._v(\"Search document\")]),_c('p',[_vm._v(\" Enter a partial word, full word or phrase and Edward will find all your chapters, outlines, plans and workshops that match it. \")]),_c('div',{staticClass:\"search-box\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchText),expression:\"searchText\"}],ref:\"searchInput\",staticClass:\"search-input\",attrs:{\"type\":\"text\",\"placeholder\":\"Type your search term here\"},domProps:{\"value\":(_vm.searchText)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search()},\"input\":function($event){if($event.target.composing){ return; }_vm.searchText=$event.target.value}}}),_c('button',{staticClass:\"button-green\",on:{\"click\":function($event){return _vm.search()}}},[_vm._v(\" Search now \")])]),_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[(!_vm.loading)?_c('div',{key:\"results\",staticClass:\"results\"},[(_vm.hasResults)?[_c('h2',[_vm._v(\"Filter Results\")]),_c('div',{staticClass:\"filters\"},[_c('div',{staticClass:\"filter\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filters.showChapters),expression:\"filters.showChapters\"}],attrs:{\"id\":\"show-chapters\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.filters.showChapters)?_vm._i(_vm.filters.showChapters,null)>-1:(_vm.filters.showChapters)},on:{\"change\":function($event){var $$a=_vm.filters.showChapters,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.filters, \"showChapters\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.filters, \"showChapters\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.filters, \"showChapters\", $$c)}}}}),_c('label',{attrs:{\"for\":\"show-chapters\"}},[_vm._v(\"Show Chapters\")])]),_c('div',{staticClass:\"filter\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filters.showOutlines),expression:\"filters.showOutlines\"}],attrs:{\"id\":\"show-outlines\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.filters.showOutlines)?_vm._i(_vm.filters.showOutlines,null)>-1:(_vm.filters.showOutlines)},on:{\"change\":function($event){var $$a=_vm.filters.showOutlines,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.filters, \"showOutlines\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.filters, \"showOutlines\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.filters, \"showOutlines\", $$c)}}}}),_c('label',{attrs:{\"for\":\"show-outlines\"}},[_vm._v(\"Show Outlines\")])]),_c('div',{staticClass:\"filter\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filters.showPlans),expression:\"filters.showPlans\"}],attrs:{\"id\":\"show-plans\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.filters.showPlans)?_vm._i(_vm.filters.showPlans,null)>-1:(_vm.filters.showPlans)},on:{\"change\":function($event){var $$a=_vm.filters.showPlans,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.filters, \"showPlans\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.filters, \"showPlans\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.filters, \"showPlans\", $$c)}}}}),_c('label',{attrs:{\"for\":\"show-plans\"}},[_vm._v(\"Show Plans\")])]),_c('div',{staticClass:\"filter\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filters.showWorkshops),expression:\"filters.showWorkshops\"}],attrs:{\"id\":\"show-workshops\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.filters.showWorkshops)?_vm._i(_vm.filters.showWorkshops,null)>-1:(_vm.filters.showWorkshops)},on:{\"change\":function($event){var $$a=_vm.filters.showWorkshops,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.filters, \"showWorkshops\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.filters, \"showWorkshops\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.filters, \"showWorkshops\", $$c)}}}}),_c('label',{attrs:{\"for\":\"show-workshops\"}},[_vm._v(\"Show Workshops\")])])])]:_vm._e(),(_vm.searched && !_vm.hasResults)?_c('div',[_c('strong',[_vm._v(\"No results found.\")])]):_vm._e(),(_vm.matches.chapters.length && _vm.filters.showChapters)?_c('div',{staticClass:\"result-set chapter-results\"},[_c('h3',[_vm._v(\"Chapters\")]),_vm._l((_vm.matches.chapters),function(chapter){return _c('div',{key:chapter.guid,staticClass:\"result\"},[_c('p',{staticClass:\"result-title\"},[_c('router-link',{attrs:{\"to\":'/write?chapter=' + chapter.guid}},[_c('strong',{domProps:{\"textContent\":_vm._s(chapter.title)}}),_c('button',{staticClass:\"link-out\"},[_c('span',{staticClass:\"fas fa-link\"})])])],1),_vm._l((chapter._matches),function(match){return _c('div',{key:match.index},[_c('match',{attrs:{\"match\":match}})],1)})],2)})],2):_vm._e(),(_vm.matches.outlines.length && _vm.filters.showOutlines)?_c('div',{staticClass:\"result-set outline-results\"},[_c('hr',{staticClass:\"divider\"}),_c('h3',[_vm._v(\"Outlines\")]),_vm._l((_vm.matches.outlines),function(topicMatch){return _c('div',{key:topicMatch.chapterGuid + topicMatch.topicGuid,staticClass:\"result\"},[_c('p',{staticClass:\"result-title\"},[_c('router-link',{attrs:{\"to\":'/outline?chapter=' + topicMatch.chapterGuid}},[_c('strong',[_vm._v(_vm._s(topicMatch.chapterTitle)+\" | \"+_vm._s(topicMatch.topicTitle))]),_c('button',{staticClass:\"link-out\"},[_c('span',{staticClass:\"fas fa-link\"})])])],1),_vm._l((topicMatch._matches),function(match){return _c('div',{key:match.index},[_c('match',{attrs:{\"match\":match}})],1)})],2)})],2):_vm._e(),(_vm.matches.plans.length && _vm.filters.showPlans)?_c('div',{staticClass:\"result-set plan-results\"},[_c('hr',{staticClass:\"divider\"}),_c('h3',[_vm._v(\"Plans\")]),_vm._l((_vm.matches.plans),function(sectionMatch){return _c('div',{key:sectionMatch.planGuid + sectionMatch.sectionGuid,staticClass:\"result\"},[_c('p',{staticClass:\"result-title\"},[_c('router-link',{attrs:{\"to\":'/plan?plan=' + sectionMatch.planGuid}},[_c('strong',[_vm._v(_vm._s(sectionMatch.planTitle)+\" | \"+_vm._s(sectionMatch.sectionTitle))]),_c('button',{staticClass:\"link-out\"},[_c('span',{staticClass:\"fas fa-link\"})])])],1),_vm._l((sectionMatch._matches),function(match){return _c('div',{key:match.index},[_c('match',{attrs:{\"match\":match}})],1)})],2)})],2):_vm._e(),(_vm.matches.workshops.length && _vm.filters.showWorkshops)?_c('div',{staticClass:\"result-set workshop-results\"},[_c('hr',{staticClass:\"divider\"}),_c('h3',[_vm._v(\"Workshops\")]),_vm._l((_vm.matches.workshops),function(workshopMatch){return _c('div',{key:workshopMatch.guid,staticClass:\"result\"},[_c('p',{staticClass:\"result-title\"},[_c('router-link',{attrs:{\"to\":'/write?workshopName=' + workshopMatch.workshopName + '&workshop=' + workshopMatch.guid}},[_c('strong',[_vm._v(_vm._s(workshopMatch.title))]),_c('button',{staticClass:\"link-out\"},[_c('span',{staticClass:\"fas fa-link\"})])])],1),_vm._l((workshopMatch._matches),function(match){return _c('div',{key:match.index},[_c('match',{attrs:{\"match\":match}})],1)})],2)})],2):_vm._e()],2):_c('div',{key:\"loading\",staticClass:\"loading\"},[_c('pulse-loader')],1)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"match\"},[(!_vm.match.atHead)?_c('span',[_vm._v(\"...\")]):_vm._e(),_c('span',{domProps:{\"textContent\":_vm._s(_vm.formattedPre)}}),_c('em',{domProps:{\"textContent\":_vm._s(_vm.formattedQuery)}}),_c('span',{domProps:{\"textContent\":_vm._s(_vm.formattedPost)}}),(!_vm.match.atTail)?_c('span',[_vm._v(\"...\")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <p class=\"match\">\r\n    <span v-if=\"!match.atHead\">...</span>\r\n    <span v-text=\"formattedPre\" />\r\n    <em v-text=\"formattedQuery\" />\r\n    <span v-text=\"formattedPost\" />\r\n    <span v-if=\"!match.atTail\">...</span>\r\n  </p>\r\n</template>\r\n\r\n<script>\r\nimport trimEnd from 'lodash/trimEnd'\r\nimport trimStart from 'lodash/trimStart'\r\n\r\nexport default {\r\n  computed: {\r\n    formattedPre() {\r\n      return trimStart(this.match.pre).replace(/\\n/g, ' ¶ ')\r\n    },\r\n    formattedQuery() {\r\n      return this.match.query.replace(/\\n/g, ' ¶ ')\r\n    },\r\n    formattedPost() {\r\n      return trimEnd(this.match.post).replace(/\\n/g, ' ¶ ')\r\n    },\r\n  },\r\n  props: {\r\n    match: {\r\n      required: true,\r\n      type: Object,\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.match {\r\n  line-height: 1.2em;\r\n  margin: 2px 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./match.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./match.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./match.vue?vue&type=template&id=63f98196&scoped=true&\"\nimport script from \"./match.vue?vue&type=script&lang=js&\"\nexport * from \"./match.vue?vue&type=script&lang=js&\"\nimport style0 from \"./match.vue?vue&type=style&index=0&id=63f98196&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63f98196\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"wrap\">\r\n    <div class=\"search\">\r\n      <h1>Search document</h1>\r\n      <p>\r\n        Enter a partial word, full word or phrase and Edward will find all your chapters, outlines, plans and workshops\r\n        that match it.\r\n      </p>\r\n      <div class=\"search-box\">\r\n        <input \r\n          class=\"search-input\" \r\n          v-model=\"searchText\" \r\n          type=\"text\" \r\n          placeholder=\"Type your search term here\"\r\n          @keyup.enter=\"search()\" \r\n          ref=\"searchInput\"\r\n        >\r\n        <button \r\n          class=\"button-green\" \r\n          @click=\"search()\"\r\n        >\r\n          Search now\r\n        </button>\r\n      </div>\r\n      <transition \r\n        name=\"fade\" \r\n        mode=\"out-in\"\r\n      >\r\n        <div \r\n          class=\"results\" \r\n          v-if=\"!loading\" \r\n          key=\"results\"\r\n        >\r\n          <template v-if=\"hasResults\">\r\n            <h2>Filter Results</h2>\r\n            <div class=\"filters\">\r\n              <div class=\"filter\">\r\n                <input \r\n                  id=\"show-chapters\" \r\n                  type=\"checkbox\" \r\n                  v-model=\"filters.showChapters\"\r\n                >\r\n                <label for=\"show-chapters\">Show Chapters</label>\r\n              </div>\r\n              <div class=\"filter\">\r\n                <input \r\n                  id=\"show-outlines\" \r\n                  type=\"checkbox\" \r\n                  v-model=\"filters.showOutlines\"\r\n                >\r\n                <label for=\"show-outlines\">Show Outlines</label>\r\n              </div>\r\n              <div class=\"filter\">\r\n                <input \r\n                  id=\"show-plans\" \r\n                  type=\"checkbox\" \r\n                  v-model=\"filters.showPlans\"\r\n                >\r\n                <label for=\"show-plans\">Show Plans</label>\r\n              </div>\r\n              <div class=\"filter\">\r\n                <input \r\n                  id=\"show-workshops\" \r\n                  type=\"checkbox\" \r\n                  v-model=\"filters.showWorkshops\"\r\n                >\r\n                <label for=\"show-workshops\">Show Workshops</label>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <div v-if=\"searched && !hasResults\">\r\n            <strong>No results found.</strong>\r\n          </div>\r\n          <div \r\n            class=\"result-set chapter-results\" \r\n            v-if=\"matches.chapters.length && filters.showChapters\"\r\n          >\r\n            <h3>Chapters</h3>\r\n            <div \r\n              class=\"result\" \r\n              v-for=\"chapter in matches.chapters\" \r\n              :key=\"chapter.guid\"\r\n            >\r\n              <p class=\"result-title\">\r\n                <router-link :to=\"'/write?chapter=' + chapter.guid\">\r\n                  <strong v-text=\"chapter.title\" />\r\n                  <button class=\"link-out\">\r\n                    <span class=\"fas fa-link\" />\r\n                  </button>\r\n                </router-link>\r\n              </p>\r\n              <div \r\n                v-for=\"match in chapter._matches\" \r\n                :key=\"match.index\"\r\n              >\r\n                <match :match=\"match\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div \r\n            class=\"result-set outline-results\" \r\n            v-if=\"matches.outlines.length && filters.showOutlines\"\r\n          >\r\n            <hr class=\"divider\">\r\n            <h3>Outlines</h3>\r\n            <div \r\n              class=\"result\" \r\n              v-for=\"topicMatch in matches.outlines\" \r\n              :key=\"topicMatch.chapterGuid + topicMatch.topicGuid\"\r\n            >\r\n              <p class=\"result-title\">\r\n                <router-link :to=\"'/outline?chapter=' + topicMatch.chapterGuid\">\r\n                  <strong>{{ topicMatch.chapterTitle }} | {{ topicMatch.topicTitle }}</strong>\r\n                  <button class=\"link-out\">\r\n                    <span class=\"fas fa-link\" />\r\n                  </button>\r\n                </router-link>\r\n              </p>\r\n              <div \r\n                v-for=\"match in topicMatch._matches\" \r\n                :key=\"match.index\"\r\n              >\r\n                <match :match=\"match\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div \r\n            class=\"result-set plan-results\" \r\n            v-if=\"matches.plans.length && filters.showPlans\"\r\n          >\r\n            <hr class=\"divider\">\r\n            <h3>Plans</h3>\r\n            <div \r\n              class=\"result\" \r\n              v-for=\"sectionMatch in matches.plans\" \r\n              :key=\"sectionMatch.planGuid + sectionMatch.sectionGuid\"\r\n            >\r\n              <p class=\"result-title\">\r\n                <router-link :to=\"'/plan?plan=' + sectionMatch.planGuid\">\r\n                  <strong>{{ sectionMatch.planTitle }} | {{ sectionMatch.sectionTitle }}</strong>\r\n                  <button class=\"link-out\">\r\n                    <span class=\"fas fa-link\" />\r\n                  </button>\r\n                </router-link>\r\n              </p>\r\n              <div \r\n                v-for=\"match in sectionMatch._matches\" \r\n                :key=\"match.index\"\r\n              >\r\n                <match :match=\"match\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div \r\n            class=\"result-set workshop-results\" \r\n            v-if=\"matches.workshops.length && filters.showWorkshops\"\r\n          >\r\n            <hr class=\"divider\">\r\n            <h3>Workshops</h3>\r\n            <div \r\n              class=\"result\" \r\n              v-for=\"workshopMatch in matches.workshops\" \r\n              :key=\"workshopMatch.guid\"\r\n            >\r\n              <p class=\"result-title\">\r\n                <router-link :to=\"'/write?workshopName=' + workshopMatch.workshopName + '&workshop=' + workshopMatch.guid\">\r\n                  <strong>{{ workshopMatch.title }}</strong>\r\n                  <button class=\"link-out\">\r\n                    <span class=\"fas fa-link\" />\r\n                  </button>\r\n                </router-link>\r\n              </p>\r\n              <div \r\n                v-for=\"match in workshopMatch._matches\" \r\n                :key=\"match.index\"\r\n              >\r\n                <match :match=\"match\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div \r\n          class=\"loading\" \r\n          v-else \r\n          key=\"loading\"\r\n        >\r\n          <pulse-loader />\r\n        </div>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { GetContentString, GetIndicesOf } from '../shared/deltaParser'\r\nimport Match from './match.vue'\r\nimport PulseLoader from 'vue-spinner/src/PulseLoader.vue'\r\n\r\nconst prePostChars = 40\r\n\r\nexport default {\r\n  components: {\r\n    Match,\r\n    PulseLoader,\r\n  },\r\n  computed: {\r\n    allChapters() {\r\n      return this.$store.state.chapters.chapters || []\r\n    },\r\n    allPlans() {\r\n      return this.$store.state.chapters.plans || []\r\n    },\r\n    allTopics() {\r\n      return this.$store.state.chapters.topics || []\r\n    },\r\n    allWorkshops() {\r\n      return this.$store.state.workshop.workshops || []\r\n    },\r\n    hasResults() {\r\n      return (\r\n        this.matches.chapters.length ||\r\n        this.matches.outlines.length ||\r\n        this.matches.plans.length ||\r\n        this.matches.workshops.length\r\n      )\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      filters: {\r\n        showChapters: true,\r\n        showOutlines: true,\r\n        showPlans: true,\r\n        showWorkshops: true,\r\n      },\r\n      loading: false,\r\n      matches: {\r\n        chapters: [],\r\n        outlines: [],\r\n        plans: [],\r\n        workshops: [],\r\n      },\r\n      searched: false,\r\n      searchText: '',\r\n    }\r\n  },\r\n  methods: {\r\n    getMasterTopic(chapterTopic) {\r\n      return this.allTopics.find(topic => topic.guid === chapterTopic.guid)\r\n    },\r\n    getMatchArray(fullText, indices, query) {\r\n      return indices.map((index) => {\r\n        const pre = fullText.slice(\r\n          Math.max(index - prePostChars, 0),\r\n          index,\r\n        )\r\n        const matched = fullText.slice(\r\n          index,\r\n          index + query.length,\r\n        )\r\n        const post = fullText.slice(\r\n          index + query.length,\r\n          index + query.length + prePostChars,\r\n        )\r\n\r\n        return {\r\n          atHead: (index - prePostChars) <= 0,\r\n          atTail: (index + query.length + prePostChars) >= (fullText.length - 1),\r\n          pre,\r\n          post,\r\n          index,\r\n          query: matched,\r\n        }\r\n      })\r\n    },\r\n    getMatchingChapters(query) {\r\n      return this.allChapters.map((chapter) => {\r\n        const fullText = GetContentString(chapter.content)\r\n        const indices = GetIndicesOf(query, fullText)\r\n        chapter._matches = this.getMatchArray(fullText, indices, query)\r\n        return chapter\r\n      }).filter(chapter => chapter._matches.length > 0 || chapter.title.toLowerCase().includes(query))\r\n    },\r\n    getMatchingOutlines(query) {\r\n      return this.allChapters.reduce((arr, chapter) => {\r\n        for (const key in chapter.topics) {\r\n          if (!Object.prototype.hasOwnProperty.call(chapter, key)) {\r\n            continue\r\n          }\r\n\r\n          const chapterTopic = chapter.topics[key]\r\n          const fullText = GetContentString(chapterTopic.content)\r\n          const indices = GetIndicesOf(query, fullText)\r\n          const masterTopic = this.getMasterTopic(chapterTopic)\r\n\r\n          arr.push({\r\n            _matches: this.getMatchArray(fullText, indices, query),\r\n            chapterGuid: chapter.guid,\r\n            chapterTitle: chapter.title,\r\n            topicGuid: chapterTopic.guid,\r\n            topicTitle: masterTopic.title,\r\n          })\r\n        }\r\n        return arr\r\n      }, []).filter(topicMatch => topicMatch._matches.length > 0 || topicMatch.topicTitle.toLowerCase().includes(query))\r\n    },\r\n    getMatchingPlans(query) {\r\n      return this.allPlans.reduce((arr, plan) => arr.concat(plan.sections.map((section) => {\r\n        const fullText = GetContentString(section.content)\r\n        const indices = GetIndicesOf(query, fullText)\r\n\r\n        return {\r\n          _matches: this.getMatchArray(fullText, indices, query),\r\n          planGuid: plan.guid,\r\n          planTitle: plan.title,\r\n          sectionGuid: section.guid,\r\n          sectionTitle: section.title,\r\n        }\r\n      })), []).filter(sectionMatch => sectionMatch._matches.length > 0 || sectionMatch.sectionTitle.toLowerCase().includes(query))\r\n    },\r\n    getMatchingWorkshops(query) {\r\n      const workshopsByGuid = this.allWorkshops.reduce((obj, workshop) => {\r\n        obj[workshop.guid] = obj[workshop.guid] || {\r\n          guid: workshop.guid,\r\n          title: workshop.title,\r\n          workshopName: workshop.workshopName,\r\n          _matches: [],\r\n        }\r\n        const workshopMatch = obj[workshop.guid]\r\n\r\n        const fullText = GetContentString(workshop.content)\r\n        const indices = GetIndicesOf(query, fullText)\r\n\r\n        workshopMatch._matches = workshopMatch._matches.concat(this.getMatchArray(fullText, indices, query))\r\n        return obj\r\n      }, {})\r\n\r\n      return Object.keys(workshopsByGuid).map(key => workshopsByGuid[key]).filter(workshopMatch => workshopMatch._matches.length > 0 || workshopMatch.title.toLowerCase().includes(query))\r\n    },\r\n    search() {\r\n      this.loading = true\r\n      this.searched = false\r\n      this.matches.chapters = this.getMatchingChapters(this.searchText.toLowerCase())\r\n      this.matches.outlines = this.getMatchingOutlines(this.searchText.toLowerCase())\r\n      this.matches.plans = this.getMatchingPlans(this.searchText.toLowerCase())\r\n      this.matches.workshops = this.getMatchingWorkshops(this.searchText.toLowerCase())\r\n      this.searched = true\r\n      this.loading = false\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$refs.searchInput.focus()\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.fade-enter-active, .fade-leave-active {\r\n  transition: opacity 100ms;\r\n}\r\n\r\n.fade-enter, .fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.fade-leave, .fade-enter-to {\r\n  opacity: 1;\r\n}\r\n\r\n.wrap {\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n\r\n.search {\r\n  background-color: #F2F9F8;\r\n  display: block;\r\n  height: min-content;\r\n  margin-bottom: 32px;\r\n  max-width: 1050px;\r\n  padding: 32px;\r\n  width: 100%;\r\n}\r\n\r\n.search-input {\r\n  font-size: 18px;\r\n  margin-bottom: 8px;\r\n  width: 100%;\r\n}\r\n\r\n.results {\r\n  margin-top: 32px;\r\n}\r\n\r\n.result-set {\r\n  margin: 20px 0;\r\n}\r\n\r\n.result {\r\n  margin-top: 8px;\r\n}\r\n\r\n.filters {\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin: 10px 0;\r\n}\r\n\r\n.filter:not(:last-of-type) {\r\n  margin-right: 20px;\r\n}\r\n\r\n.result-title {\r\n  cursor: pointer;\r\n  display: flex;\r\n  flex-direction: row;\r\n  font-size: 18px;\r\n  margin: 0;\r\n}\r\n\r\n.result-title a {\r\n  color: inherit;\r\n  display: flex;\r\n  flex-direction: row;\r\n  text-decoration: none;\r\n}\r\n\r\n.link-out {\r\n  align-items: center;\r\n  border: none;\r\n  color: #444;\r\n  display: flex;\r\n  flex-direction: row;\r\n  font-size: 14px;\r\n  height: 20px;\r\n  padding: 0;\r\n  margin: 0 4px;\r\n}\r\n\r\n.loading {\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.page.vue?vue&type=template&id=d0041b20&scoped=true&\"\nimport script from \"./search.page.vue?vue&type=script&lang=js&\"\nexport * from \"./search.page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.page.vue?vue&type=style&index=0&id=d0041b20&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d0041b20\",\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios'\r\n\r\nconst route = route => `/api/user/${route}`\r\n\r\nconst api = {\r\n  simpleGet(route) {\r\n    return axios.get(route).then(response => response.data)\r\n  },\r\n  simplePost(route, body) {\r\n    return axios.post(route, body).then(response => response.data)\r\n  },\r\n\r\n  getUser() {\r\n    return this.simpleGet(route('current'))\r\n  },\r\n  logOut() {\r\n    return this.simpleGet(route('logout'))\r\n  }\r\n}\r\n\r\nexport default api\r\n","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\n\r\nimport NotFound from './NotFound.vue'\r\n\r\nimport Composer from './composer/composer.page.vue'\r\nimport DocumentEdit from './documentEdit/documentEdit.page.vue'\r\nimport Outliner from './outliner/outliner.page.vue'\r\nimport Planner from './planner/planner.page.vue'\r\nimport Search from './search/search.page.vue'\r\n\r\nimport userApi from './api/userApi'\r\nimport api from './api/api'\r\n\r\nVue.use(Router)\r\n\r\nconst assertPremium = () =>\r\n  userApi.getUser().then(user => {\r\n    if (user.isPremium) {\r\n      return true\r\n    }\r\n    throw new Error('Can\\'t access this route with a Dreamer account.')\r\n  })\r\n\r\nconst assertOnline = () =>\r\n  api.isOnline().then(\r\n    () => true,\r\n    () => {\r\n      throw new Error('Can\\'t access this route while offline.')\r\n    }\r\n  )\r\n\r\n/*\r\nWe can't use next(false) in any guard because there's no global hook that's called\r\n when navigation is cancelled. This would leave the app in a 'loading' state forever\r\n (see App.vue). Instead, we need to use next(error) to cancel navigation.\r\n*/\r\nconst compose = (...guards) =>\r\n  function(to, from, next) {\r\n    const guardPromises = guards.map(guard => guard())\r\n    Promise.all(guardPromises).then(\r\n      (...results) => {\r\n        const blocks = results.filter(res => res !== true)\r\n        if (blocks.length === 0) {\r\n          return next()\r\n        }\r\n\r\n        const nav = results.filter(res => typeof res === 'object')[0]\r\n        if (nav) {\r\n          return next(nav)\r\n        }\r\n\r\n        return next(new Error('Navigation was not allowed.'))\r\n      },\r\n      err => next(err)\r\n    )\r\n  }\r\n\r\nexport default new Router({\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      redirect: '/write'\r\n    },\r\n    {\r\n      path: '/plan',\r\n      name: 'Plan',\r\n      component: Planner\r\n    },\r\n    {\r\n      path: '/outline',\r\n      name: 'Outline',\r\n      component: Outliner\r\n    },\r\n    {\r\n      path: '/write',\r\n      name: 'Write',\r\n      component: Composer\r\n    },\r\n    {\r\n      path: '/analyze',\r\n      name: 'Analyze',\r\n      component: () =>\r\n        import('./analyser/analyser.page.vue' /* webpackChunkName: \"analyser\" */),\r\n      beforeEnter: compose(assertOnline)\r\n    },\r\n    {\r\n      path: '/export',\r\n      name: 'Export',\r\n      component: () =>\r\n        import('./exporter/exporter.page.vue' /* webpackChunkName: \"exporter\" */),\r\n      beforeEnter: compose(assertOnline)\r\n    },\r\n    {\r\n      path: '/documentEdit',\r\n      name: 'Document Edit',\r\n      component: DocumentEdit\r\n    },\r\n    {\r\n      path: '/search',\r\n      name: 'Search',\r\n      component: Search\r\n    },\r\n    {\r\n      path: '/workshop/free-write',\r\n      name: 'Free Write',\r\n      component: () =>\r\n        import('./workshops/freeWrite.page.vue' /* webpackChunkName: \"w-free-write\" */),\r\n      beforeEnter: compose(\r\n        assertOnline,\r\n        assertPremium\r\n      )\r\n    },\r\n    {\r\n      path: '/workshop/novel-quickstart',\r\n      name: 'Novel Quickstart',\r\n      component: () =>\r\n        import('./workshops/novelQuickstart.page.vue' /* webpackChunkName: \"w-novel-quickstart\" */),\r\n      beforeEnter: compose(\r\n        assertOnline,\r\n        assertPremium\r\n      )\r\n    },\r\n    {\r\n      path: '/workshop/unblock',\r\n      name: 'Writer\\'s Unblock',\r\n      component: () =>\r\n        import('./workshops/writersUnblock.vue' /* webpackChunkName: \"w-writers-unblock\" */),\r\n      beforeEnter: compose(\r\n        assertOnline,\r\n        assertPremium\r\n      )\r\n    },\r\n    {\r\n      path: '/workshop/plot',\r\n      name: 'Plot Workshop',\r\n      component: () =>\r\n        import('./workshops/plotWorkshop.vue' /* webpackChunkName: \"w-plot-workshop\" */),\r\n      beforeEnter: compose(\r\n        assertOnline,\r\n        assertPremium\r\n      )\r\n    },\r\n    {\r\n      path: '/workshop/setting',\r\n      name: 'Setting Workshop',\r\n      component: () =>\r\n        import('./workshops/settingWorkshop.vue' /* webpackChunkName: \"w-setting-workshop\" */),\r\n      beforeEnter: compose(\r\n        assertOnline,\r\n        assertPremium\r\n      )\r\n    },\r\n    {\r\n      path: '*',\r\n      name: 'Page does not exist',\r\n      component: NotFound\r\n    }\r\n  ]\r\n})\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('idle-watcher',[_c('transition',{attrs:{\"name\":\"wrapper\",\"mode\":\"out-in\"}},[(_vm.loaded && _vm.currentDocument && _vm.currentDocument.guid)?_c('div',{key:\"app\",staticClass:\"app\",attrs:{\"id\":\"app\"}},[_c('document-menu'),_c('div',{staticClass:\"app-header\"},[_c('div',{staticClass:\"logo-wrap\"},[_c('img',{staticClass:\"logo\",attrs:{\"src\":require(\"../../public/img/main-logo.png\")}})]),_c('div',{staticClass:\"app-header--menu\"},[_c('main-menu')],1)]),_c('div',{staticClass:\"page\"},[_c('transition',{attrs:{\"name\":\"wrapper\",\"mode\":\"out-in\"}},[_c('router-view')],1)],1)],1):(!_vm.loaded)?_c('div',{key:\"loading\",staticClass:\"loading\"},[_c('img',{staticClass:\"logo\",attrs:{\"src\":require(\"../../public/img/modal-logo.png\")}}),_c('pulse-loader')],1):_c('div',{key:\"wizard\",staticClass:\"page\"},[_c('wizard')],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"menu\"},[_c('div',{staticClass:\"menu-items\"},[_c('document-picker')],1),_c('div',{staticClass:\"menu-items\"},[_c('router-link',{attrs:{\"to\":\"/documentEdit\"}},[_c('button',{staticClass:\"menu-button\"},[_vm._v(\" Edit \"),_c('div',{staticClass:\"fas fa-edit\"})])]),_c('router-link',{attrs:{\"to\":\"/export\"}},[_c('button',{staticClass:\"menu-button mobile-hide\",attrs:{\"disabled\":!_vm.isOnline}},[_vm._v(\" Download / Upload \"),_c('div',{staticClass:\"fas fa-download\"})])]),_c('button',{staticClass:\"menu-button\",attrs:{\"disabled\":!_vm.isOnline},on:{\"click\":function($event){return _vm.showWizard()}}},[_vm._v(\" New \"),_c('div',{staticClass:\"fas fa-plus\"})])],1),_c('div',{staticClass:\"spacer\"}),(_vm.isLimited)?_c('div',{staticClass:\"menu-items mobile-hide\"},[_c('div',[_vm._v(\"Keep your work safe.\")]),_c('a',{attrs:{\"href\":\"/auth#/account\"}},[_c('button',{staticClass:\"menu-button upgrade-button\",attrs:{\"disabled\":!_vm.isOnline}},[_vm._v(\"Upgrade to Author\")])])]):_vm._e(),(!_vm.isLimited && !_vm.isGold)?_c('div',{staticClass:\"menu-items mobile-hide\"},[_c('div',[_vm._v(\"Need more space?\")]),_c('a',{attrs:{\"href\":\"/auth#/account\"}},[_c('button',{staticClass:\"menu-button upgrade-button\",attrs:{\"disabled\":!_vm.isOnline}},[_vm._v(\"Upgrade to Bestseller\")])])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.documentValue),expression:\"documentValue\"}],staticClass:\"document-dropdown\",attrs:{\"disabled\":!_vm.isOnline},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.documentValue=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.changeDocument]}},[(!_vm.currentDocument)?_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\" No document selected \")]):_vm._e(),_vm._l((_vm.allDocuments),function(document){return _c('option',{key:document.guid,domProps:{\"value\":document.guid}},[_vm._v(\" \"+_vm._s(document.name)+\" \")])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <select \r\n    class=\"document-dropdown\" \r\n    v-model=\"documentValue\" \r\n    @change=\"changeDocument\" \r\n    :disabled=\"!isOnline\"\r\n  >\r\n    <option \r\n      v-if=\"!currentDocument\" \r\n      value=\"\"\r\n    >\r\n      No document selected\r\n    </option>\r\n    <option \r\n      v-for=\"document in allDocuments\" \r\n      :key=\"document.guid\" \r\n      :value=\"document.guid\"\r\n    >\r\n      {{ document.name }}\r\n    </option>\r\n  </select>\r\n</template>\r\n\r\n<script>\r\nimport api from '../api/api'\r\nimport { CHANGE_DOCUMENT } from './document.store'\r\nimport { Statuses, SET_STATUS_OFFLINE } from './status.store'\r\n\r\nexport default {\r\n  computed: {\r\n    allDocuments() {\r\n      return this.$store.state.document.ownedDocuments\r\n    },\r\n    currentDocument() {\r\n      return this.$store.state.document.currentDocument\r\n    },\r\n    isOnline() {\r\n      return this.$store.state.status.status !== Statuses.OFFLINE\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      documentValue: '',\r\n    }\r\n  },\r\n  mounted() {\r\n    this.documentValue = this.currentDocument ? this.currentDocument.guid : ''\r\n  },\r\n  methods: {\r\n    changeDocument() {\r\n      api.isOnline().then(() => {\r\n        const document = this.allDocuments.find(doc => doc.guid === this.documentValue)\r\n\r\n        if (!document || (this.currentDocument && (document.guid === this.currentDocument.guid))) {\r\n          return\r\n        }\r\n\r\n        this.$store.dispatch(CHANGE_DOCUMENT, document)\r\n      }, () => {\r\n        this.$store.commit(SET_STATUS_OFFLINE)\r\n        this.documentValue = this.currentDocument.guid\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.document-dropdown {\r\n  background-color: transparent;\r\n  border: none;\r\n  color: #323232;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  opacity: 1;\r\n  padding: 4px;\r\n}\r\n\r\n.document-dropdown[disabled] {\r\n  opacity: 0.5;\r\n}\r\n\r\n.document-dropdown /deep/ option {\r\n  background-color: #FFF;\r\n  color: #323232;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentPicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentPicker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./documentPicker.vue?vue&type=template&id=7c6cc11b&scoped=true&\"\nimport script from \"./documentPicker.vue?vue&type=script&lang=js&\"\nexport * from \"./documentPicker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./documentPicker.vue?vue&type=style&index=0&id=7c6cc11b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c6cc11b\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"menu\">\r\n    <div class=\"menu-items\">\r\n      <document-picker />\r\n    </div>\r\n    <div class=\"menu-items\">\r\n      <router-link to=\"/documentEdit\">\r\n        <button class=\"menu-button\">\r\n          Edit\r\n          <div class=\"fas fa-edit\" />\r\n        </button>\r\n      </router-link>\r\n      <router-link to=\"/export\">\r\n        <button \r\n          class=\"menu-button mobile-hide\" \r\n          :disabled=\"!isOnline\"\r\n        >\r\n          Download / Upload\r\n          <div class=\"fas fa-download\" />\r\n        </button>\r\n      </router-link>\r\n      <button \r\n        class=\"menu-button\" \r\n        @click=\"showWizard()\" \r\n        :disabled=\"!isOnline\"\r\n      >\r\n        New\r\n        <div class=\"fas fa-plus\" />\r\n      </button>\r\n    </div>\r\n    <div class=\"spacer\" />\r\n    <div \r\n      class=\"menu-items mobile-hide\"\r\n      v-if=\"isLimited\"\r\n    >\r\n      <div>Keep your work safe.</div>\r\n      <a href=\"/auth#/account\">\r\n        <button \r\n          class=\"menu-button upgrade-button\" \r\n          :disabled=\"!isOnline\"\r\n        >Upgrade to Author</button>\r\n      </a>\r\n    </div>\r\n    <div \r\n      class=\"menu-items mobile-hide\"\r\n      v-if=\"!isLimited && !isGold\"\r\n    >\r\n      <div>Need more space?</div>\r\n      <a href=\"/auth#/account\">\r\n        <button \r\n          class=\"menu-button upgrade-button\" \r\n          :disabled=\"!isOnline\"\r\n        >Upgrade to Bestseller</button>\r\n      </a>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DocumentPicker from './documentPicker.vue'\r\nimport { Statuses } from './status.store'\r\nimport { UNLOAD_CURRENT_DOCUMENT } from './document.store'\r\n\r\nexport default {\r\n  components: {\r\n    DocumentPicker\r\n  },\r\n  computed: {\r\n    isOnline() {\r\n      return this.$store.state.status.status !== Statuses.OFFLINE\r\n    },\r\n    isLimited() {\r\n      return this.$store.state.user.user.accountType.name === 'LIMITED'\r\n    },\r\n    isGold() {\r\n      return this.$store.state.user.user.accountType.name === 'GOLD'\r\n    }\r\n  },\r\n  data() {\r\n    return {}\r\n  },\r\n  methods: {\r\n    showWizard() {\r\n      this.$store.dispatch(UNLOAD_CURRENT_DOCUMENT)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.menu {\r\n  align-items: center;\r\n  background-color: #F0F0F0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 36px;\r\n  padding: 0px 30px;\r\n  z-index: 100;\r\n}\r\n\r\n.menu-items {\r\n  color: #fff;\r\n  display: flex;\r\n  height: 100%;\r\n  margin-right: 20px;\r\n}\r\n\r\n.menu-items div {\r\n  align-items: center;\r\n  color: #323232;\r\n  display: flex;\r\n  flex-direction: row;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-right: 16px;\r\n  padding: 0px 8px;\r\n}\r\n\r\n.menu-items a {\r\n  align-items: center;\r\n  display: flex;\r\n  text-decoration: none;\r\n}\r\n\r\n.menu-button {\r\n  align-items: center;\r\n  border: none;\r\n  border-radius: 0;\r\n  box-shadow: none;\r\n  color: #323232;\r\n  display: flex;\r\n  flex-direction: row;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  height: 100%;\r\n  padding: 0px 22px;\r\n  transition: box-shadow 200ms;\r\n}\r\n\r\n.menu-button:hover {\r\n  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.menu-button svg {\r\n  margin-left: 8px;\r\n}\r\n\r\n.spacer {\r\n  flex: 1;\r\n}\r\n\r\n.menu-button.upgrade-button {\r\n  background-color: #F47866;\r\n  border-radius: 4px;\r\n  color: #323232;\r\n  display: flex;\r\n  height: 30px;\r\n  justify-content: center;\r\n  min-width: 200px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./documentMenu.vue?vue&type=template&id=d0d7d372&scoped=true&\"\nimport script from \"./documentMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./documentMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./documentMenu.vue?vue&type=style&index=0&id=d0d7d372&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d0d7d372\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-wrap\",on:{\"&click\":function($event){return _vm.resetIdleTime()},\"&mousemove\":function($event){return _vm.resetIdleTime()},\"&scroll\":function($event){return _vm.resetIdleTime()},\"&keypress\":function($event){return _vm.resetIdleTime()}}},[_vm._t(\"default\"),_c('div',{staticStyle:{\"display\":\"none\"}},[_c('div',{ref:\"idleModal\",staticClass:\"idle-page\"},[_vm._m(0)])])],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"idle-message\"},[_c('h3',[_vm._v(\" This page has been idle for over 30 minutes. \")]),_c('div',[_vm._v(\" If you've edited your work on another computer, you should reload the page in order to get your latest content. Otherwise, you may lose your changes. \")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div \r\n    class=\"page-wrap\" \r\n    @click.passive=\"resetIdleTime()\"\r\n    @mousemove.passive=\"resetIdleTime()\"\r\n    @scroll.passive=\"resetIdleTime()\"\r\n    @keypress.passive=\"resetIdleTime()\"\r\n  >\r\n    <slot />\r\n    <div \r\n      style=\"display: none\"\r\n    >\r\n      <div\r\n        class=\"idle-page\"\r\n        ref=\"idleModal\"\r\n      >\r\n        <div class=\"idle-message\">\r\n          <h3>\r\n            This page has been idle for over 30 minutes.\r\n          </h3>\r\n          <div>\r\n            If you've edited your work on another computer, you should reload the page in order to get your latest content.\r\n            Otherwise, you may lose your changes.\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport swal from 'sweetalert'\r\n\r\nexport default {\r\n  computed: {\r\n    isPremium() {\r\n      return this.user.isPremium\r\n    },\r\n    user() {\r\n      return this.$store.state.user.user\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      idleTimeout: null\r\n    }\r\n  },\r\n  methods: {\r\n    backToApp() {\r\n      this.resetIdleTime()\r\n    },\r\n    goIdle() {\r\n      if (!this.isPremium) {\r\n        return\r\n      }\r\n\r\n      this.showIdlePage()\r\n    },\r\n    reload() {\r\n      window.location.reload()\r\n    },\r\n    resetIdleTime() {\r\n      if (!this.isPremium) {\r\n        return\r\n      }\r\n\r\n      if (this.idleTimeout) {\r\n        window.clearTimeout(this.idleTimeout)\r\n      }\r\n\r\n      // Go idle after 30 minutes\r\n      const wait = 30 * 60 * 1000\r\n      this.idleTimeout = window.setTimeout(this.goIdle, wait)\r\n    },\r\n    showIdlePage() {\r\n      swal({\r\n        content: this.$refs.idleModal,\r\n        className: 'idle-modal',\r\n        closeOnClickOutside: false,\r\n        buttons: {\r\n          cancel: 'Back to the app',\r\n          confirm: {\r\n            text: 'Reload',\r\n            className: 'button-green'\r\n          }\r\n        },\r\n      }).then(result => {\r\n        if (!result) {\r\n          this.resetIdleTime()\r\n          return\r\n        }\r\n\r\n        this.reload()\r\n      })\r\n    },\r\n  },\r\n  mounted() {\r\n    this.resetIdleTime()\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.page-wrap {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  opacity: 1;\r\n  transition: opacity 2s;\r\n}\r\n\r\n.idle-modal {\r\n  background-color: #F2F9F8;\r\n  padding: 32px;\r\n}\r\n\r\n.idle-page {\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n\r\n.idle-message {\r\n  max-width: 800px;\r\n  min-width: 300px;\r\n}\r\n\r\n.idle-message div {\r\n  margin-top: 16px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IdleWatcher.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IdleWatcher.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./IdleWatcher.vue?vue&type=template&id=98693c92&scoped=true&\"\nimport script from \"./IdleWatcher.vue?vue&type=script&lang=js&\"\nexport * from \"./IdleWatcher.vue?vue&type=script&lang=js&\"\nimport style0 from \"./IdleWatcher.vue?vue&type=style&index=0&id=98693c92&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"98693c92\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-menu\"},[_c('div',{staticStyle:{\"display\":\"none\"}},[_c('offline-storage')],1),_c('div',{staticClass:\"routes\"},[_vm._l((_vm.routes),function(route){return [_c('router-link',{key:route.name,attrs:{\"to\":route.location}},[_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"main-menu--button\",attrs:{\"title\":route.tooltip}},[_c('img',{staticClass:\"main-menu--icon\",attrs:{\"src\":'img/' + route.icon}}),_c('div',[_vm._v(_vm._s(route.name))])])])]})],2),_c('div',{staticClass:\"extra\"},[_c('status-signal'),_c('button',{ref:\"moreButton\",staticClass:\"main-menu--button\"},[_c('img',{staticClass:\"main-menu--icon\",attrs:{\"src\":\"img/icons_more-white.png\"}}),_c('div',[_vm._v(\"More\")]),_c('div',{ref:\"moreMenu\",staticStyle:{\"display\":\"none\"}},[_c('div',{staticClass:\"more-menu\"},[_c('router-link',{staticClass:\"disguised\",attrs:{\"to\":\"/search\"}},[_c('button',{staticClass:\"more-item\"},[_c('span',{staticClass:\"more-icon fas fa-search\"}),_vm._v(\" Search \")])]),_c('button',{staticClass:\"more-item\",attrs:{\"disabled\":!_vm.isOnline},on:{\"click\":_vm.showWorkshops}},[_c('span',{staticClass:\"more-icon fas fa-hammer\"}),_vm._v(\" Workshops \")])],1)])]),_c('button',{ref:\"accountButton\",staticClass:\"main-menu--button\"},[_c('img',{staticClass:\"main-menu--icon\",attrs:{\"src\":\"img/icons_account-white.png\"}}),_c('div',[_vm._v(\"Account\")]),_c('div',{ref:\"accountMenu\",staticStyle:{\"display\":\"none\"}},[_c('div',{staticClass:\"account-menu\"},[_c('div',{staticClass:\"account-email\"},[_vm._v(\" \"+_vm._s(_vm.email)+\" \")]),_c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"account-type\",attrs:{\"title\":_vm.accountType.description}},[_vm._v(\" \"+_vm._s(_vm.accountType.displayName)+\" \")]),_c('div',{staticClass:\"account-actions\"},[(_vm.isOnline)?_c('a',{attrs:{\"href\":\"/auth#/account\"}},[_c('button',{staticClass:\"button-green account-action\"},[_vm._v(\" Account Settings \")])]):_vm._e(),_c('div',[_c('button',{staticClass:\"account-action\",on:{\"click\":function($event){return _vm.logOut()}}},[_vm._v(\" Log Out \")])])])])])])],1),_c('div',{staticStyle:{\"display\":\"none\"}},[_c('div',{ref:\"workshopsModal\",staticClass:\"workshops\"},[_c('h1',{staticClass:\"workshop-modal-title\"},[_vm._v(\" Select a workshop \")]),(!_vm.isPremium)?_c('p',{staticClass:\"warn\"},[_vm._v(\" Workshops are only available for Author accounts. \")]):_vm._e(),_vm._l((_vm.workshops),function(workshop){return _c('div',{key:workshop.name,on:{\"click\":function($event){return _vm.setSelectedWorkshop(workshop)}}},[_c('div',{staticClass:\"workshop\",class:{ 'restricted': !_vm.isPremium || !workshop.available, 'selected': _vm.selectedWorkshop === workshop }},[(!workshop.available)?_c('div',{staticClass:\"workshop-restricted\"},[_vm._v(\" COMING SOON \")]):_vm._e(),(workshop.available && !_vm.isPremium)?_c('div',{staticClass:\"workshop-restricted\"},[_vm._v(\" AUTHORS ONLY \")]):_vm._e(),_c('div',{staticClass:\"workshop-details\"},[_c('div',{staticClass:\"workshop-name\"},[_vm._v(\" \"+_vm._s(workshop.displayName)+\" \")]),_c('div',{staticClass:\"workshop-description\"},[_vm._v(\" \"+_vm._s(workshop.description)+\" \")])])])])})],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"display\":\"none\"}},[_c('div',{ref:\"chromePermissionModal\",staticClass:\"offline-storage\"},[_c('p',[_vm._v(\" Edward will work even when you don't have an Internet connection. To avoid data loss when offline, you need to grant app-level permissions on this device, including push notifications. \")]),_c('p',[_vm._v(\" Do you want to allow this? \")])])]),_c('div',{staticStyle:{\"display\":\"none\"}},[_c('div',{ref:\"standardPermissionModal\",staticClass:\"offline-storage\"},[_c('p',[_vm._v(\" Edward will work even when you don't have an Internet connection. To avoid data loss when offline, you need to give permission to store files on your system. \")]),_c('p',[_vm._v(\" Do you want to allow this? \")])])]),_c('div',{staticStyle:{\"display\":\"none\"}},[_c('div',{ref:\"permissionFailedModal\",staticClass:\"offline-storage\"},[_c('p',[_vm._v(\" Failed to get the required permissions. Edward may still work offline, but this could result in data loss. \")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- Chrome permissions modal -->\r\n    <div style=\"display: none\">\r\n      <div \r\n        class=\"offline-storage\" \r\n        ref=\"chromePermissionModal\"\r\n      >\r\n        <p>\r\n          Edward will work even when you don't have an Internet connection.\r\n          To avoid data loss when offline, you need to grant app-level permissions on this device,\r\n          including push notifications.\r\n        </p>\r\n        <p>\r\n          Do you want to allow this?\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <!-- Firefox/other permissions modal -->\r\n    <div style=\"display: none\">\r\n      <div \r\n        class=\"offline-storage\" \r\n        ref=\"standardPermissionModal\"\r\n      >\r\n        <p>\r\n          Edward will work even when you don't have an Internet connection.\r\n          To avoid data loss when offline, you need to give permission to store files on your system.\r\n        </p>\r\n        <p>\r\n          Do you want to allow this?\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <!-- Permission failed modal -->\r\n    <div style=\"display: none\">\r\n      <div \r\n        class=\"offline-storage\" \r\n        ref=\"permissionFailedModal\"\r\n      >\r\n        <p>\r\n          Failed to get the required permissions. Edward may still work offline,\r\n          but this could result in data loss.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cache from '../shared/cache'\r\nimport { detect } from 'detect-browser'\r\nimport swal from 'sweetalert'\r\n\r\nconst browser = detect()\r\nconst offlineModalSeen = new Cache('OFFLINE_MODAL_SEEN')\r\n\r\nfunction askPermission() {\r\n  return new Promise(((resolve, reject) => {\r\n    const permissionResult = Notification.requestPermission((result) => {\r\n      resolve(result)\r\n    })\r\n\r\n    if (permissionResult) {\r\n      permissionResult.then(resolve, reject)\r\n    }\r\n  }))\r\n    .then((permissionResult) => {\r\n      if (permissionResult !== 'granted') {\r\n        throw new Error('Push notification permission was not granted.')\r\n      }\r\n    })\r\n}\r\n\r\nexport default {\r\n  computed: {\r\n    isPremium() {\r\n      return this.$store.state.user.user.isPremium\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      allowsOffline: true,\r\n    }\r\n  },\r\n  methods: {\r\n    checkOfflineStorage() {\r\n      if (navigator.storage && navigator.storage.persisted) {\r\n        navigator.storage.persisted().then((persistent) => {\r\n          this.allowsOffline = persistent\r\n\r\n          const seen = offlineModalSeen.cacheGet()\r\n          if (!seen && this.isPremium && !persistent) {\r\n            this.promptForPermission()\r\n          }\r\n        })\r\n      }\r\n    },\r\n    chromePrompt() {\r\n      swal({\r\n        content: this.$refs.chromePermissionModal,\r\n        title: 'Offline Permissions',\r\n        buttons: {\r\n          cancel: 'No',\r\n          confirm: 'Yes',\r\n        },\r\n      }).then((allow) => {\r\n        offlineModalSeen.cacheSet(true)\r\n        if (allow) {\r\n          askPermission().then(() => navigator.storage.persist().then((persist) => {\r\n            this.allowsOffline = persist\r\n            if (!persist) {\r\n              throw new Error('Could not obtain persistent storage permissions.')\r\n            }\r\n          }), () => {\r\n            this.permissionFailed()\r\n          })\r\n        } else {\r\n          this.allowsOffline = false\r\n        }\r\n      })\r\n    },\r\n    permissionFailed() {\r\n      swal({\r\n        content: this.$refs.permissionFailedModal,\r\n        title: 'Permission not obtained',\r\n        icon: 'error',\r\n      })\r\n    },\r\n    promptForPermission() {\r\n      if (browser && browser.name === 'chrome') {\r\n        return this.chromePrompt()\r\n      }\r\n      return this.standardPrompt()\r\n    },\r\n    standardPrompt() {\r\n      swal({\r\n        content: this.$refs.standardPermissionModal,\r\n        title: 'Offline Permissions',\r\n        buttons: {\r\n          cancel: 'No',\r\n          confirm: 'Yes',\r\n        },\r\n      }).then((allow) => {\r\n        offlineModalSeen.cacheSet(true)\r\n        if (allow) {\r\n          navigator.storage.persist().then((persist) => {\r\n            this.allowsOffline = persist\r\n            if (!persist) {\r\n              this.permissionFailed()\r\n            }\r\n          })\r\n        } else {\r\n          this.allowsOffline = false\r\n        }\r\n      })\r\n    },\r\n  },\r\n  mounted() {\r\n    this.checkOfflineStorage()\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","<template>\r\n  <div \r\n    class=\"status-wrap\" \r\n    v-if=\"!isDemo\"\r\n  >\r\n    <div class=\"status\">\r\n      <div \r\n        class=\"status-saving\" \r\n        :class=\"{ 'show': isSaving }\"\r\n      >\r\n        <span class=\"mobile-xs-hide\">\r\n          Saving\r\n        </span>\r\n        ...\r\n      </div>\r\n      <div \r\n        class=\"status-saved\" \r\n        :class=\"{ 'show': !isSaving && saved }\"\r\n      >\r\n        <span class=\"mobile-xs-hide\">\r\n          Saved\r\n        </span>\r\n        <span v-html=\"savedIcon\" />\r\n      </div>\r\n      <div \r\n        class=\"status-error\" \r\n        :class=\"{ 'show': !isSaving && saveError }\"\r\n        :title=\"saveErrorText\" \r\n        v-tooltip=\"{ enabled: !isSaving && saveError }\"\r\n      >\r\n        <span class=\"mobile-xs-hide\">\r\n          Error\r\n        </span>\r\n        <span v-html=\"errorIcon\" />\r\n      </div>\r\n      <div \r\n        class=\"status-offline\" \r\n        :class=\"{ 'show': !isSaving && offline }\"\r\n        :title=\"offlineText\" \r\n        v-tooltip=\"{ enabled: !isSaving && offline }\" \r\n        ref=\"offlineStatus\"\r\n      >\r\n        <span class=\"mobile-xs-hide\">\r\n          Offline\r\n        </span>\r\n        <span v-html=\"offlineIcon\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '../api/api'\r\nimport Octicons from 'octicons'\r\nimport { Statuses, SET_STATUS_DONE, SET_STATUS_OFFLINE } from './status.store'\r\nimport tooltip from './tooltip.directive'\r\n\r\nlet offlineInterval\r\n\r\nexport default {\r\n  created() {\r\n    this.checkOffline()\r\n    offlineInterval = setInterval(this.checkOffline, 15 * 1000)\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(offlineInterval)\r\n  },\r\n  computed: {\r\n    accountType() {\r\n      return this.$store.state.user.user.accountType || {}\r\n    },\r\n    isDemo() {\r\n      return this.accountType.name === 'DEMO'\r\n    },\r\n    offline() {\r\n      return this.$store.state.status.status === Statuses.OFFLINE\r\n    },\r\n    saved() {\r\n      return this.$store.state.status.status === Statuses.SAVED\r\n    },\r\n    saving() {\r\n      return this.$store.state.status.status === Statuses.SAVING\r\n    },\r\n    saveError() {\r\n      return this.$store.state.status.status === Statuses.ERROR\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      errorIcon: Octicons.alert.toSVG({\r\n        height: 18,\r\n        width: 18,\r\n      }),\r\n      isSaving: false,\r\n      offlineIcon: Octicons.plug.toSVG({\r\n        height: 18,\r\n        width: 18,\r\n      }),\r\n      offlineText:\r\n        'No internet connection is available. Your work is saved locally. ' +\r\n        'To avoid losing work, don\\'t edit this document on any other device until the connection is restored.',\r\n      saveErrorText: 'An error has occurred. Your work may not be saved.',\r\n      savedIcon: Octicons.check.toSVG({\r\n        height: 18,\r\n        width: 18,\r\n      }),\r\n      savingDebouncer: window.setTimeout(() => {}),\r\n    }\r\n  },\r\n  directives: {\r\n    tooltip,\r\n  },\r\n  methods: {\r\n    checkOffline() {\r\n      api.isOnline().then(() => {\r\n        this.$store.commit(SET_STATUS_DONE)\r\n      }, () => {\r\n        this.$store.commit(SET_STATUS_OFFLINE)\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    offline(isOffline, wasOffline) {\r\n      if (isOffline === wasOffline || !isOffline) {\r\n        return\r\n      }\r\n\r\n      const el = this.$refs.offlineStatus\r\n      if (!el._tippy) {\r\n        console.warn('Expected a Tippy.js instance on statusSignal')\r\n        return\r\n      }\r\n\r\n      setTimeout(() => {\r\n        el._tippy.show()\r\n      }, 1000)\r\n    },\r\n    // A bit of trickery to make the \"Saving\" indicator show for at least 500ms.\r\n    // This comforts me.\r\n    saving(saving) {\r\n      if (saving) {\r\n        this.isSaving = true\r\n      }\r\n\r\n      clearTimeout(this.savingDebouncer)\r\n      this.savingDebouncer = window.setTimeout(() => {\r\n        this.isSaving = this.saving\r\n      }, 500)\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.status-wrap {\r\n  align-items: center;\r\n  display: flex;\r\n  font-size: 22px;\r\n  justify-content: center;\r\n  margin: 0 16px;\r\n}\r\n\r\n.status {\r\n  cursor: default;\r\n  display: inline-block;\r\n  height: 20px;\r\n  position: relative;\r\n  text-align: right;\r\n  width: 95px;\r\n}\r\n\r\n@media (max-width: 1000px) {\r\n  .status {\r\n    width: 55px;\r\n  }\r\n}\r\n\r\n@media (max-width: 650px) {\r\n  .status {\r\n    width: 16px;\r\n  }\r\n}\r\n\r\n.status-saving {\r\n  color: rgb(255, 165, 0);\r\n  fill: rgb(255, 165, 0);\r\n}\r\n\r\n.status-saved {\r\n  color: rgb(255, 255, 255);\r\n  fill: rgb(255, 255, 255);\r\n}\r\n\r\n.status-error {\r\n  color: rgb(255, 170, 0);\r\n  fill: rgb(255, 170, 0);\r\n}\r\n\r\n.status-offline {\r\n  color: rgb(255, 170, 0);\r\n  fill: rgb(255, 170, 0);\r\n}\r\n\r\n.status-saving, .status-saved, .status-error, .status-offline {\r\n  align-items: center;\r\n  cursor: default;\r\n  display: flex;\r\n  flex-direction: row;\r\n  opacity: 0;\r\n  position: absolute;\r\n  transition: opacity 500ms;\r\n}\r\n\r\n@media (max-width: 1000px) {\r\n  .status-saving, .status-saved, .status-error, .status-offline {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n.status-saving.show, .status-saved.show, .status-error.show, .status-offline.show {\r\n  opacity: 1;\r\n}\r\n</style>\r\n","import userApi from '../api/userApi'\r\n\r\nexport const COMMIT_NEW_EMAIL = 'COMMIT_NEW_EMAIL'\r\nexport const SET_DEFAULT_USER = 'SET_DEFAULT_USER'\r\nexport const SET_USER = 'SET_USER'\r\nexport const SET_USER_PROMISE = 'SET_USER_PROMISE'\r\nexport const UPDATE_EMAIL = 'SET_USER_EMAIL'\r\nexport const UPDATE_PASSWORD = 'SET_USER_PASSWORD'\r\n\r\nconst defaultUser = {\r\n  accountType: {\r\n    description: 'Either your internet or our servers are down right now. Any work you do may be lost.',\r\n    displayName: 'Connectivity issues',\r\n    name: 'ERROR',\r\n  },\r\n  email: 'ERROR',\r\n  isPremium: false,\r\n  verified: true,\r\n}\r\n\r\nfunction setSentryUser(user) {\r\n  if (!window.Raven || typeof window.Raven.setUserContext !== 'function') {\r\n    return\r\n  }\r\n\r\n  window.Raven.setUserContext(user)\r\n}\r\n\r\n// We provide a userPromise from the beginning to prevent race conditions,\r\n//  which could be disastrous given that we store user data based on the\r\n//  user type. However, the actual user API call occurs later, so we allow\r\n//  deferred resolving of the original promise via SET_USER_PROMISE.\r\nlet userPromiseResolve\r\n\r\nconst store = {\r\n  state: {\r\n    // user { accountType accountType, email string, isPremium boolean }\r\n    // accountType { description string, displayName string, name string }\r\n    user: {},\r\n    // A promise that will resolve once the user API call has returned.\r\n    // It cannot be rejected.\r\n    userPromise: new Promise((resolve) => {\r\n      userPromiseResolve = resolve\r\n    }),\r\n  },\r\n  actions: {\r\n    [UPDATE_EMAIL]({ commit }, { email }) {\r\n      commit(COMMIT_NEW_EMAIL, { email })\r\n      return userApi.updateEmail(email)\r\n    },\r\n  },\r\n  mutations: {\r\n    [COMMIT_NEW_EMAIL](state, { email }) {\r\n      state.user.email = email\r\n    },\r\n    [SET_DEFAULT_USER](state) {\r\n      state.user = defaultUser\r\n      setSentryUser()\r\n    },\r\n    [SET_USER](state, user) {\r\n      state.user = user\r\n      setSentryUser(user)\r\n    },\r\n    [SET_USER_PROMISE](state, promise) {\r\n      promise.then((data) => {\r\n        userPromiseResolve(data)\r\n      }, (err) => {\r\n        console.error(err)\r\n        userPromiseResolve(null, err)\r\n      })\r\n    },\r\n    [UPDATE_PASSWORD](state, { password }) {\r\n      userApi.updatePassword(password)\r\n    },\r\n  },\r\n}\r\n\r\nexport default store\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./offlineStorage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./offlineStorage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./offlineStorage.vue?vue&type=template&id=0a1b6efd&scoped=true&\"\nimport script from \"./offlineStorage.vue?vue&type=script&lang=js&\"\nexport * from \"./offlineStorage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a1b6efd\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.isDemo)?_c('div',{staticClass:\"status-wrap\"},[_c('div',{staticClass:\"status\"},[_c('div',{staticClass:\"status-saving\",class:{ 'show': _vm.isSaving }},[_c('span',{staticClass:\"mobile-xs-hide\"},[_vm._v(\" Saving \")]),_vm._v(\" ... \")]),_c('div',{staticClass:\"status-saved\",class:{ 'show': !_vm.isSaving && _vm.saved }},[_c('span',{staticClass:\"mobile-xs-hide\"},[_vm._v(\" Saved \")]),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.savedIcon)}})]),_c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({ enabled: !_vm.isSaving && _vm.saveError }),expression:\"{ enabled: !isSaving && saveError }\"}],staticClass:\"status-error\",class:{ 'show': !_vm.isSaving && _vm.saveError },attrs:{\"title\":_vm.saveErrorText}},[_c('span',{staticClass:\"mobile-xs-hide\"},[_vm._v(\" Error \")]),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.errorIcon)}})]),_c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:({ enabled: !_vm.isSaving && _vm.offline }),expression:\"{ enabled: !isSaving && offline }\"}],ref:\"offlineStatus\",staticClass:\"status-offline\",class:{ 'show': !_vm.isSaving && _vm.offline },attrs:{\"title\":_vm.offlineText}},[_c('span',{staticClass:\"mobile-xs-hide\"},[_vm._v(\" Offline \")]),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.offlineIcon)}})])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statusSignal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statusSignal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./statusSignal.vue?vue&type=template&id=37cef718&scoped=true&\"\nimport script from \"./statusSignal.vue?vue&type=script&lang=js&\"\nexport * from \"./statusSignal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./statusSignal.vue?vue&type=style&index=0&id=37cef718&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37cef718\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"main-menu\">\r\n    <div style=\"display:none\">\r\n      <offline-storage />\r\n    </div>\r\n    <div class=\"routes\">\r\n      <template v-for=\"route in routes\">\r\n        <router-link \r\n          :to=\"route.location\" \r\n          :key=\"route.name\"\r\n        >\r\n          <button \r\n            class=\"main-menu--button\" \r\n            :title=\"route.tooltip\" \r\n            v-tooltip \r\n          >\r\n            <img\r\n              class=\"main-menu--icon\"\r\n              :src=\"'img/' + route.icon\"\r\n            >\r\n            <div>{{ route.name }}</div>\r\n          </button>\r\n        </router-link>\r\n      </template>\r\n    </div>\r\n    <div class=\"extra\">\r\n      <status-signal />\r\n      <button\r\n        class=\"main-menu--button\"\r\n        ref=\"moreButton\"\r\n      >\r\n        <img\r\n          src=\"img/icons_more-white.png\"\r\n          class=\"main-menu--icon\"\r\n        >\r\n        <div>More</div>\r\n        <div\r\n          ref=\"moreMenu\"\r\n          style=\"display: none\"\r\n        >\r\n          <div class=\"more-menu\">\r\n            <router-link\r\n              class=\"disguised\"\r\n              to=\"/search\"\r\n            >\r\n              <button class=\"more-item\">\r\n                <span class=\"more-icon fas fa-search\" />\r\n                Search\r\n              </button>\r\n            </router-link>\r\n            <button\r\n              class=\"more-item\"\r\n              :disabled=\"!isOnline\"\r\n              @click=\"showWorkshops\"\r\n            >\r\n              <span class=\"more-icon fas fa-hammer\" />\r\n              Workshops\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </button>\r\n      <button\r\n        class=\"main-menu--button\"\r\n        ref=\"accountButton\"\r\n      >\r\n        <img \r\n          src=\"img/icons_account-white.png\"\r\n          class=\"main-menu--icon\"\r\n        >\r\n        <div>Account</div>\r\n        <div\r\n          ref=\"accountMenu\"\r\n          style=\"display: none\"\r\n        >\r\n          <div class=\"account-menu\">\r\n            <div class=\"account-email\">\r\n              {{ email }}\r\n            </div>\r\n            <div\r\n              class=\"account-type\"\r\n              :title=\"accountType.description\"\r\n              v-tooltip\r\n            >\r\n              {{ accountType.displayName }}\r\n            </div>\r\n            <div class=\"account-actions\">\r\n              <a\r\n                v-if=\"isOnline\"\r\n                href=\"/auth#/account\"\r\n              >\r\n                <button class=\"button-green account-action\">\r\n                  Account Settings\r\n                </button>\r\n              </a>\r\n              <div>\r\n                <button class=\"account-action\" @click=\"logOut()\">\r\n                  Log Out\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Workshops modal -->\r\n    <div style=\"display: none\">\r\n      <div \r\n        class=\"workshops\" \r\n        ref=\"workshopsModal\"\r\n      >\r\n        <h1 class=\"workshop-modal-title\">\r\n          Select a workshop\r\n        </h1>\r\n        <p \r\n          v-if=\"!isPremium\" \r\n          class=\"warn\"\r\n        >\r\n          Workshops are only available for Author accounts.\r\n        </p>\r\n        <div \r\n          v-for=\"workshop in workshops\" \r\n          :key=\"workshop.name\"\r\n          @click=\"setSelectedWorkshop(workshop)\"\r\n        >\r\n          <div \r\n            class=\"workshop\" \r\n            :class=\"{ 'restricted': !isPremium || !workshop.available, 'selected': selectedWorkshop === workshop }\"\r\n          >\r\n            <div \r\n              class=\"workshop-restricted\" \r\n              v-if=\"!workshop.available\"\r\n            >\r\n              COMING SOON\r\n            </div>\r\n            <div \r\n              class=\"workshop-restricted\" \r\n              v-if=\"workshop.available && !isPremium\"\r\n            >\r\n              AUTHORS ONLY\r\n            </div>\r\n            <div class=\"workshop-details\">\r\n              <div class=\"workshop-name\">\r\n                {{ workshop.displayName }}\r\n              </div>\r\n              <div class=\"workshop-description\">\r\n                {{ workshop.description }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport OfflineStorage from '../offlineStorage/offlineStorage.vue'\r\nimport { Statuses } from './status.store'\r\nimport StatusSignal from './statusSignal.vue'\r\nimport swal from 'sweetalert'\r\nimport tooltip from './tooltip.directive'\r\nimport writingWorkshops from '../../../models/writingWorkshop'\r\nimport tippy from 'tippy.js'\r\nimport userApi from '../api/userApi'\r\n\r\nexport default {\r\n  components: {\r\n    OfflineStorage,\r\n    StatusSignal,\r\n  },\r\n  computed: {\r\n    accountType() {\r\n      return this.$store.state.user.user.accountType || {}\r\n    },\r\n    email() {\r\n      return this.$store.state.user.user.email || ''\r\n    },\r\n    isOnline() {\r\n      return this.$store.state.status.status !== Statuses.OFFLINE\r\n    },\r\n    isPremium() {\r\n      return this.$store.state.user.user.isPremium\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      routes: [{\r\n        icon: 'icons_outline-white.png',\r\n        location: '/plan',\r\n        name: 'Plan',\r\n        tooltip: 'Create book-level notes.',\r\n      }, {\r\n        icon: 'icons_write-white.png',\r\n        location: '/write',\r\n        name: 'Write',\r\n        tooltip: 'Write your content.',\r\n      }, {\r\n        icon: 'icons_plan-white.png',\r\n        location: '/outline',\r\n        name: 'Outline',\r\n        tooltip: 'Create chapters and chapter-level notes.',\r\n      }],\r\n      selectedWorkshop: null,\r\n      toolsTooltip: 'Workshop your novel with free or prompted writing exercises.',\r\n      workshops: Object.keys(writingWorkshops).map(key => writingWorkshops[key]),\r\n    }\r\n  },\r\n  directives: {\r\n    tooltip,\r\n  },\r\n  mounted() {\r\n    tippy(this.$refs.moreButton, {\r\n      arrow: true,\r\n      content: this.$refs.moreMenu.firstChild,\r\n      distance: 10,\r\n      interactive: true,\r\n      placement: 'bottom',\r\n      theme: 'light nopadding',\r\n      trigger: 'click'\r\n    })\r\n\r\n    tippy(this.$refs.accountButton, {\r\n      arrow: true,\r\n      content: this.$refs.accountMenu.firstChild,\r\n      distance: 10,\r\n      interactive: true,\r\n      placement: 'bottom',\r\n      theme: 'light nopadding',\r\n      trigger: 'click'\r\n    })\r\n  },\r\n  methods: {\r\n    showWorkshops() {\r\n      if (this.isPremium && !this.selectedWorkshop) {\r\n        this.selectedWorkshop = this.workshops[0]\r\n      }\r\n\r\n      swal({\r\n        content: this.$refs.workshopsModal,\r\n        className: 'workshop-modal',\r\n        buttons: {\r\n          cancel: true,\r\n          confirm: !this.isPremium ? false : {\r\n            text: 'Begin',\r\n            className: 'button-green'\r\n          }\r\n        },\r\n      }).then(result => {\r\n        if (!result) {\r\n          return\r\n        }\r\n\r\n        this.startWorkshop(this.selectedWorkshop)\r\n      })\r\n    },\r\n    setSelectedWorkshop(workshop) {\r\n      this.selectedWorkshop = workshop\r\n    },\r\n    startWorkshop(workshop) {\r\n      if (!this.isPremium || !workshop.available) {\r\n        return\r\n      }\r\n\r\n      swal.close()\r\n      this.$router.push(workshop.route)\r\n    },\r\n    logOut() {\r\n      userApi.logOut().then(\r\n        () => {\r\n          window.location.href = '/auth'\r\n        },\r\n        () => {\r\n          swal({\r\n            icon: 'error',\r\n            text:\r\n              'Sorry, logout failed. If security is a concern, please clear your cookies and other browsing data and close your browser.'\r\n          })\r\n        }\r\n      )\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.main-menu {\r\n  align-items: center;\r\n  display: flex;\r\n  flex: 1;\r\n}\r\n\r\n.routes {\r\n  align-items: center;\r\n  display: flex;\r\n  flex: 1;\r\n  justify-content: center;\r\n}\r\n\r\n.routes .main-menu--button {\r\n  padding: 14px 52px;\r\n}\r\n\r\n.main-menu--button {\r\n  background-color: transparent;\r\n  border: none;\r\n  border-radius: 8px;\r\n  border-top-left-radius: 0;\r\n  border-top-right-radius: 0;\r\n  color: rgba(255, 255, 255, 1);\r\n  font-size: 18px;\r\n  height: 100%;\r\n  margin-bottom: 2px;\r\n  margin-top: 2px;\r\n  padding: 8px 16px;\r\n  transition: font-size 100ms;\r\n}\r\n\r\na:not(.router-link-active) .main-menu--button:not([disabled]):hover {\r\n  color: rgba(255, 255, 255, 0.7);\r\n}\r\n\r\n@media (max-width: 1000px) {\r\n  .routes .main-menu--button {\r\n    font-size: 16px;\r\n    padding: 6px 10px;\r\n  }\r\n\r\n  .main-menu--button {\r\n    font-size: 14px;\r\n    padding: 6px 10px;\r\n  }\r\n}\r\n\r\n.router-link-active > .main-menu--button {\r\n  background-color: #0F6858;\r\n  border: 3px solid #FFFFFF;\r\n  box-shadow: 0px 3px 6px 0px rgba(0,0,0,0.16);\r\n  height: 110px;\r\n  font-size: 22px;\r\n  padding: 22px 52px;\r\n}\r\n\r\n@media (max-width: 1000px) {\r\n  .router-link-active > .main-menu--button {\r\n    padding: 24px 16px;\r\n  }\r\n}\r\n\r\n.main-menu--icon {\r\n  transition: width 100ms;\r\n  width: 36px;\r\n}\r\n\r\n.router-link-active .main-menu--icon {\r\n  width: 45px;\r\n}\r\n\r\nhr.between:last-of-type {\r\n  display: none;\r\n}\r\n\r\n.extra {\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.more-menu {\r\n  padding: 8px 0;\r\n}\r\n\r\n.more-item {\r\n  background-color: inherit;\r\n  border: none;\r\n  border-radius: 0;\r\n  color: #323232;\r\n  cursor: pointer;\r\n  display: block;\r\n  fill: #323232;\r\n  font-size: inherit;\r\n  padding: 6px 20px;\r\n  text-align: left;\r\n  text-decoration: none;\r\n  transition: background-color 100ms, color 100ms, fill 100ms;\r\n  width: 100%;\r\n}\r\n\r\n.more-item[disabled] {\r\n  cursor: default;\r\n}\r\n\r\n.more-item:not([disabled]):hover {\r\n  background-color: #323232;\r\n  color: #fff;\r\n  fill: #fff;\r\n}\r\n\r\n.more-item:not(:last-of-type) {\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.more-icon {\r\n  margin-right: 6px;\r\n  width: 20px;\r\n}\r\n\r\n.account-menu {\r\n  font-size: 16px;\r\n  padding: 8px 16px;\r\n}\r\n\r\n.account-email {\r\n  color: #00866F;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n}\r\n\r\n.account-type {\r\n  font-weight: bold;\r\n}\r\n\r\n.account-actions {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-top: 16px;\r\n}\r\n\r\n.account-action {\r\n  margin-bottom: 8px;\r\n  width: 100%;\r\n}\r\n\r\n.warn {\r\n  color: #DA0000;\r\n}\r\n\r\n.workshop-modal-title {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.workshop {\r\n  align-items: center;\r\n  background-color: #fff;\r\n  border: none;\r\n  color: #323232;\r\n  cursor: pointer;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-start;\r\n  margin-bottom: 12px;\r\n  padding: 16px;\r\n  position: relative;\r\n  text-decoration: none;\r\n  transition: background-color 200ms, color 200ms;\r\n}\r\n\r\n.workshop.selected {\r\n  background-color: #00866F;\r\n  color: #fff;\r\n}\r\n\r\n.workshop.restricted {\r\n  cursor: default;\r\n}\r\n\r\n.workshop-restricted {\r\n  background-color: rgba(255, 255, 255, 0.85);\r\n  bottom: 0;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  left: 0;\r\n  padding-top: 5px;\r\n  position: absolute;\r\n  right: 0;\r\n  text-align: center;\r\n  top: 0;\r\n}\r\n\r\n.workshop-details {\r\n  align-items: flex-start;\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n}\r\n\r\n.workshop-name {\r\n  font-size: 20px;\r\n  text-align: left;\r\n}\r\n\r\n.workshop-description {\r\n  font-size: 14px;\r\n  text-align: left;\r\n  max-height: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.workshop.selected .workshop-description {\r\n  max-height: 100px;\r\n}\r\n</style>\r\n\r\n<style>\r\n.main-menu--icon {\r\n  fill: rgba(255, 255, 255, 1);\r\n  transition: fill 100ms ease-in-out;\r\n}\r\n\r\n.main-menu--button:not([disabled]):hover .main-menu--icon {\r\n  fill: rgba(255, 255, 255, 0.7);\r\n}\r\n\r\n.router-link-active > .main-menu--button .main-menu--icon {\r\n  fill: rgba(255, 255, 255, 1);\r\n}\r\n\r\n.workshop-modal {\r\n  background-color: #F2F9F8;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mainMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mainMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mainMenu.vue?vue&type=template&id=456d0a6d&scoped=true&\"\nimport script from \"./mainMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./mainMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mainMenu.vue?vue&type=style&index=0&id=456d0a6d&scoped=true&lang=css&\"\nimport style1 from \"./mainMenu.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"456d0a6d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"container\"},[_vm._m(0),_c('div',{staticClass:\"content\"},[(!_vm.hasDocuments)?_c('div',[_c('p',[_vm._v(\"You haven't created any documents yet.\")])]):_vm._e(),(_vm.hasDocuments)?_c('div',[_c('h3',[_vm._v(\"Choose a saved document:\")]),_c('div',{staticClass:\"document-picker\"},[_c('document-picker')],1)]):_vm._e()]),_c('div',{staticClass:\"content\"},[_vm._m(1),_c('div',{staticClass:\"types\"},_vm._l((_vm.documentTypes),function(type){return _c('button',{key:type.name,staticClass:\"type\",class:{ 'selected': type === _vm.selectedType },on:{\"click\":function($event){return _vm.selectDocument(type)}}},[_c('div',{staticClass:\"type-img\",domProps:{\"innerHTML\":_vm._s(type.svg)}}),_c('div',[_vm._v(_vm._s(type.name))])])}),0),(_vm.selectedType)?[_c('div',{staticClass:\"title\"},[_c('label',{attrs:{\"for\":\"new-document-title\"}},[_vm._v(\"Title\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.title),expression:\"title\"}],attrs:{\"id\":\"new-document-title\",\"placeholder\":'My ' + _vm.selectedType.name},domProps:{\"value\":(_vm.title)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.createDocument()},\"input\":function($event){if($event.target.composing){ return; }_vm.title=$event.target.value}}})]),_c('div',{staticClass:\"actions\"},[(_vm.saving)?_c('pulse-loader'):_vm._e(),(!_vm.saving)?_c('button',{staticClass:\"button-green\",attrs:{\"disabled\":!_vm.title},on:{\"click\":function($event){return _vm.createDocument()}}},[_vm._v(\" Create \")]):_vm._e(),(_vm.error)?_c('p',{staticClass:\"error\"},[_vm._v(\" That didn't work. Please try again. \")]):_vm._e()],1)]:_vm._e()],2)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('h2',[_vm._v(\"Welcome to Edward.\")]),_c('p',[_vm._v(\" New here? \"),_c('a',{attrs:{\"target\":\"_blank\",\"href\":\"https://www.youtube.com/watch?v=OvERL5CPPXM\"}},[_vm._v(\"Watch the introductory video.\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',[_vm._v(\"Create a new document:\")])])}]\n\nexport { render, staticRenderFns }","const createType = (name, svg, plans, chapters, topics) => ({\r\n  name, svg, plans, chapters, topics,\r\n})\r\n\r\nconst NOVEL = createType(\r\n  'Novel',\r\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 24 24\"><path d=\"M23 5v13.883l-1 .117v-16c-3.895.119-7.505.762-10.002 2.316-2.496-1.554-6.102-2.197-9.998-2.316v16l-1-.117v-13.883h-1v15h9.057c1.479 0 1.641 1 2.941 1 1.304 0 1.461-1 2.942-1h9.06v-15h-1zm-12 13.645c-1.946-.772-4.137-1.269-7-1.484v-12.051c2.352.197 4.996.675 7 1.922v11.613zm9-1.484c-2.863.215-5.054.712-7 1.484v-11.613c2.004-1.247 4.648-1.725 7-1.922v12.051z\"/></svg>',\r\n  ['Synopsis', 'Plot', 'Characters', 'Settings', 'Ideas'],\r\n  ['Introduction', 'Chapter 1'],\r\n  ['Events', 'Scenes', 'Conversations'],\r\n)\r\n\r\nconst ESSAY = createType(\r\n  'Essay',\r\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 24 24\"><path d=\"M21.155 8.64c-.909 1.519-2.327 3.067-4.097 3.004-.413.706-.852 1.677-1.339 2.803l-1.312.553c.936-2.343 2.231-4.961 3.698-6.994-.67.529-1.746 1.637-2.662 2.783-1.098-1.828-.3-3.691.973-5.179.021.641.359 1.196.601 1.475-.087-.53-.114-1.489.195-2.351.718-.732 1.364-1.271 2.113-1.76-.083.478.08 1.026.262 1.361.024-.49.224-1.43.521-1.84.924-.727 2.332-1.373 3.892-1.495-.081.973-.436 2.575-1.024 3.604-.515.404-1.221.68-1.791.833.493.089 1.031.077 1.494-.001-.269.743-.552 1.428-.998 2.276-.679.468-1.578.732-2.203.825.46.187 1.272.245 1.677.103zm-13.841 3.805l.645.781 4.773-2.791-.668-.768-4.75 2.778zm6.96-.238l-.668-.767-4.805 2.808.645.781 4.828-2.822zm4.679.007c-.421.203-.851.341-1.286.398-.12.231-.246.494-.377.773l.298.342c.623.692.459 1.704-.376 2.239-.773.497-5.341 3.376-6.386 4.035-.074-.721-.358-1.391-.826-1.948-.469-.557-6.115-7.376-7.523-9.178-.469-.6-.575-1.245-.295-1.816.268-.549.842-.918 1.43-.918.919 0 1.408.655 1.549 1.215.16.641-.035 1.231-.623 1.685l1.329 1.624 7.796-4.446c1.422-1.051 1.822-2.991.93-4.513-.618-1.053-1.759-1.706-2.978-1.706-1.188 0-.793-.016-9.565 4.475-1.234.591-2.05 1.787-2.05 3.202 0 .87.308 1.756.889 2.487 1.427 1.794 7.561 9.185 7.616 9.257.371.493.427 1.119.15 1.673-.277.555-.812.886-1.429.886-.919 0-1.408-.655-1.549-1.216-.156-.629.012-1.208.604-1.654l-1.277-1.545c-.822.665-1.277 1.496-1.377 2.442-.232 2.205 1.525 3.993 3.613 3.993.596 0 1.311-.177 1.841-.51l9.427-5.946c.957-.664 1.492-1.781 1.492-2.897 0-.745-.24-1.454-.688-2.003l-.359-.43zm-7.933-10.062c.188-.087.398-.134.609-.134.532 0 .997.281 1.243.752.312.596.226 1.469-.548 1.912l-5.097 2.888c-.051-1.089-.579-2.081-1.455-2.732l5.248-2.686zm2.097 13.383l.361-.905.249-.609-3.449 2.017.645.781 2.194-1.284z\"/></svg>',\r\n  ['Thesis Statement', 'Abstract', 'Research Notes', 'Ideas'],\r\n  ['Introduction', 'Part 1', 'Part 2', 'Part 3', 'Conclusion'],\r\n  ['Arguments', 'Counter-arguments', 'Citations'],\r\n)\r\n\r\nconst SCRIPT = createType(\r\n  'Script',\r\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 24 24\"><path d=\"M22 1v2h-2v-2h-2v4h-12v-4h-2v2h-2v-2h-2v22h2v-2h2v2h2v-4h12v4h2v-2h2v2h2v-22h-2zm-18 18h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2zm14 9h-12v-8h12v8zm4 3h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2z\"/></svg>',\r\n  ['Synopsis', 'Plot', 'Dramatis Personae', 'Settings', 'Ideas'],\r\n  ['Opening', 'First Act', 'Second Act', 'Third Act', 'Denouement'],\r\n  ['Events', 'Scenes'],\r\n)\r\n\r\nconst BLANK = createType(\r\n  'Blank',\r\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M15 2v5h5v15h-16v-20h11zm1-2h-14v24h20v-18l-6-6z\"/></svg>',\r\n  [],\r\n  ['Chapter 1'],\r\n  [],\r\n)\r\n\r\nconst types = [NOVEL, ESSAY, SCRIPT, BLANK]\r\n\r\nexport default types\r\n","<template>\r\n  <div class=\"wrap\">\r\n    <div class=\"container\">\r\n      <div class=\"header\">\r\n        <h2>Welcome to Edward.</h2>\r\n        <p>\r\n          New here? <a \r\n            target=\"_blank\" \r\n            href=\"https://www.youtube.com/watch?v=OvERL5CPPXM\"\r\n          >Watch the introductory video.</a>\r\n        </p>\r\n      </div>\r\n      <div class=\"content\">\r\n        <div v-if=\"!hasDocuments\">\r\n          <p>You haven't created any documents yet.</p>\r\n        </div>\r\n        <div v-if=\"hasDocuments\">\r\n          <h3>Choose a saved document:</h3>\r\n          <div class=\"document-picker\">\r\n            <document-picker />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"content\">\r\n        <div>\r\n          <h3>Create a new document:</h3>\r\n        </div>\r\n        <div class=\"types\">\r\n          <button \r\n            class=\"type\" \r\n            :class=\"{ 'selected': type === selectedType }\"\r\n            v-for=\"type in documentTypes\" \r\n            :key=\"type.name\"\r\n            @click=\"selectDocument(type)\"\r\n          >\r\n            <div\r\n              class=\"type-img\"\r\n              v-html=\"type.svg\"\r\n            />\r\n            <div>{{ type.name }}</div>\r\n          </button>\r\n        </div>\r\n        <template v-if=\"selectedType\">\r\n          <div class=\"title\">\r\n            <label for=\"new-document-title\">Title</label>\r\n            <input \r\n              id=\"new-document-title\"\r\n              :placeholder=\"'My ' + selectedType.name\"\r\n              v-model=\"title\"\r\n              @keyup.enter=\"createDocument()\"\r\n            >\r\n          </div>\r\n          <div class=\"actions\">\r\n            <pulse-loader v-if=\"saving\" />\r\n            <button \r\n              v-if=\"!saving\" \r\n              class=\"button-green\" \r\n              @click=\"createDocument()\" \r\n              :disabled=\"!title\"\r\n            >\r\n              Create\r\n            </button>\r\n            <p \r\n              class=\"error\" \r\n              v-if=\"error\"\r\n            >\r\n              That didn't work. Please try again.\r\n            </p>\r\n          </div>\r\n        </template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { SET_UP_DOCUMENT } from '../shared/document.store'\r\nimport documentTypes from './documentTypes'\r\nimport DocumentPicker from '../shared/documentPicker.vue'\r\nimport guid from '../shared/guid'\r\nimport PulseLoader from 'vue-spinner/src/PulseLoader.vue'\r\n\r\nexport default {\r\n  components: {\r\n    DocumentPicker,\r\n    PulseLoader,\r\n  },\r\n  computed: {\r\n    hasDocuments() {\r\n      return this.$store.state.document.ownedDocuments.length > 0\r\n    },\r\n    isPremium() {\r\n      return this.$store.state.user.user.isPremium\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      documentTypes,\r\n      error: false,\r\n      saving: false,\r\n      selectedType: null,\r\n      title: '',\r\n    }\r\n  },\r\n  methods: {\r\n    createDocument() {\r\n      const type = this.selectedType\r\n      const name = this.title\r\n\r\n      if (!type || !name) {\r\n        return\r\n      }\r\n\r\n      const newDocument = {\r\n        guid: guid(),\r\n        name,\r\n      }\r\n\r\n      this.saving = true\r\n      this.error = false\r\n\r\n      this.$store.dispatch(SET_UP_DOCUMENT, { document: newDocument, type }).then(() => {\r\n        this.saving = false\r\n      }, () => {\r\n        this.error = true\r\n        this.saving = false\r\n      })\r\n    },\r\n    selectDocument(type) {\r\n      this.selectedType = type\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrap {\r\n  display: block;\r\n  flex: 1;\r\n}\r\n\r\n.container {\r\n  background-color: #f0f0f0;\r\n  display: block;\r\n  flex: 1;\r\n  margin: 0 auto;\r\n  max-width: 800px;\r\n  padding: 16px;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 75px;\r\n  justify-content: center;\r\n  padding: 0 12px;\r\n}\r\n\r\n.header /deep/ p {\r\n  margin: 0;\r\n}\r\n\r\n.header /deep/ a {\r\n  font-family: 'Source Serif Pro', sans-serif;\r\n}\r\n\r\n.content {\r\n  padding: 12px;\r\n}\r\n\r\n.content /deep/ p {\r\n  margin: 0;\r\n}\r\n\r\n.document-picker {\r\n  margin-top: 6px;\r\n}\r\n\r\n.document-picker select {\r\n  border: 2px solid #323232;\r\n}\r\n\r\n.types {\r\n  display: flex;\r\n  margin-top: 8px;\r\n}\r\n\r\n.type {\r\n  align-items: center;\r\n  background-color: #F0F0F0;\r\n  border: 2px solid #323232;\r\n  border-radius: 3px;\r\n  color: #323232;\r\n  cursor: pointer;\r\n  display: flex;\r\n  fill: #323232;\r\n  flex-direction: column;\r\n  height: 90px;\r\n  justify-content: center;\r\n  margin-right: 12px;\r\n  transition: background-color 100ms, color 100ms, fill 1000ms;\r\n  padding: 8px;\r\n  width: 90px;\r\n}\r\n\r\n.type:not(.selected):hover {\r\n  background-color: #fff;\r\n}\r\n\r\n.type.selected {\r\n  background-color: #323232;\r\n  color: #fff;\r\n  fill: #fff;\r\n}\r\n\r\n.type-img {\r\n  height: 36px;\r\n}\r\n\r\n.title {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 16px 0;\r\n  max-width: 500px;\r\n}\r\n\r\n.error {\r\n  color: #DA0000;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wizard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wizard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./wizard.vue?vue&type=template&id=14c71065&scoped=true&\"\nimport script from \"./wizard.vue?vue&type=script&lang=js&\"\nexport * from \"./wizard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wizard.vue?vue&type=style&index=0&id=14c71065&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"14c71065\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <idle-watcher>\r\n    <transition \r\n      name=\"wrapper\" \r\n      mode=\"out-in\"\r\n    >\r\n      <div \r\n        id=\"app\" \r\n        class=\"app\" \r\n        v-if=\"loaded && currentDocument && currentDocument.guid\" \r\n        key=\"app\"\r\n      >\r\n        <document-menu />\r\n        <div class=\"app-header\">\r\n          <div class=\"logo-wrap\">\r\n            <img \r\n              class=\"logo\" \r\n              src=\"../../public/img/main-logo.png\"\r\n            >\r\n          </div>\r\n          <div class=\"app-header--menu\">\r\n            <main-menu />\r\n          </div>\r\n        </div>\r\n        <div class=\"page\">\r\n          <transition \r\n            name=\"wrapper\" \r\n            mode=\"out-in\"\r\n          >\r\n            <router-view />\r\n          </transition>\r\n        </div>\r\n      </div>\r\n      <div \r\n        v-else-if=\"!loaded\" \r\n        class=\"loading\" \r\n        key=\"loading\"\r\n      >\r\n        <img \r\n          class=\"logo\" \r\n          src=\"../../public/img/modal-logo.png\"\r\n        >\r\n        <pulse-loader />\r\n      </div>\r\n      <div \r\n        v-else \r\n        class=\"page\" \r\n        key=\"wizard\"\r\n      >\r\n        <wizard />\r\n      </div>\r\n    </transition>\r\n  </idle-watcher>\r\n</template>\r\n\r\n<script>\r\nimport Cache from './shared/cache'\r\nimport DocumentMenu from './shared/documentMenu.vue'\r\nimport IdleWatcher from './IdleWatcher.vue'\r\nimport { INIT_DOCUMENTS } from './shared/document.store'\r\nimport MainMenu from './shared/mainMenu.vue'\r\nimport PulseLoader from 'vue-spinner/src/PulseLoader.vue'\r\nimport { SET_DEFAULT_USER, SET_USER, SET_USER_PROMISE } from './shared/user.store'\r\nimport userApi from './api/userApi'\r\nimport Wizard from './wizard/wizard.vue'\r\n\r\nconst userCache = new Cache('CURRENT_USER')\r\n\r\nexport default {\r\n  beforeCreate() {\r\n    const userPromise = userApi.getUser()\r\n    const safeUserPromise = userPromise.then((user) => {\r\n      if (!user.verified) {\r\n        window.location.href = '/auth#/verification'\r\n        return\r\n      }\r\n\r\n      userCache.cacheSet(user)\r\n      this.$store.commit(SET_USER, user)\r\n      return user\r\n    }, () => {\r\n      const cachedUser = userCache.cacheGet()\r\n      if (cachedUser) {\r\n        this.$store.commit(SET_USER, cachedUser)\r\n        return cachedUser\r\n      }\r\n\r\n      this.$store.commit(SET_DEFAULT_USER)\r\n      return this.$store.state.user.user\r\n    })\r\n\r\n    this.$store.commit(SET_USER_PROMISE, safeUserPromise)\r\n  },\r\n  created() {\r\n    this.$store.dispatch(INIT_DOCUMENTS).then(() => {\r\n      this.loaded = true\r\n    }, (err) => {\r\n      console.error(err)\r\n      this.loaded = true\r\n    })\r\n\r\n    let routeTransitionTimeout = null\r\n\r\n    this.$router.beforeEach((to, from, next) => {\r\n      clearTimeout(routeTransitionTimeout)\r\n      routeTransitionTimeout = setTimeout(() => {\r\n        this.loaded = false\r\n      }, 800)\r\n      next()\r\n    })\r\n\r\n    this.$router.afterEach(() => {\r\n      clearTimeout(routeTransitionTimeout)\r\n      this.loaded = true\r\n    })\r\n\r\n    this.$router.onError(() => {\r\n      clearTimeout(routeTransitionTimeout)\r\n      this.loaded = true\r\n    })\r\n  },\r\n  components: {\r\n    DocumentMenu,\r\n    IdleWatcher,\r\n    MainMenu,\r\n    PulseLoader,\r\n    Wizard,\r\n  },\r\n  computed: {\r\n    currentDocument() {\r\n      return this.$store.state.document.currentDocument\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrapper-enter-active, .wrapper-leave-active {\r\n  transition: opacity 50ms;\r\n}\r\n\r\n.wrapper-enter, .wrapper-leave-to {\r\n  opacity: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n.wrapper-enter-to, .wrapper-leave {\r\n  opacity: 1;\r\n}\r\n\r\n.app {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n}\r\n\r\n.app-header {\r\n  background-color: #00866F;\r\n  box-shadow: 0px 3px 6px 0px rgba(0,0,0,0.16);\r\n  display: flex;\r\n  height: 75px;\r\n  width: 100%;\r\n  z-index: 50;\r\n}\r\n\r\n.app-header--menu {\r\n  display: flex;\r\n  flex: 1;\r\n  height: 100%;\r\n}\r\n\r\n.logo-wrap {\r\n  align-items: center;\r\n  color: #FFF;\r\n  display: flex;\r\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\r\n  font-size: 22px;\r\n  height: 100%;\r\n  justify-content: center;\r\n  padding-left: 30px;\r\n  padding-right: 30px;\r\n}\r\n\r\n.logo {\r\n  height: 32px;\r\n}\r\n\r\n@media (max-width: 800px) {\r\n  .logo-wrap {\r\n    padding-left: 12px;\r\n    padding-right: 4px;\r\n  }\r\n\r\n  .logo-wrap .logo {\r\n    height: 14px;\r\n  }\r\n}\r\n\r\n.loading {\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  height: 100vh;\r\n  width: 100vw;\r\n}\r\n\r\n.page {\r\n  display: flex;\r\n  flex: 1;\r\n  max-height: calc(100% - 62px);\r\n  overflow: auto;\r\n  padding: 44px 14px 14px 14px;\r\n}\r\n\r\n.tooltip {\r\n  color: #FFF;\r\n  cursor: default;\r\n  font-size: 16px;\r\n}\r\n\r\n.tooltip a {\r\n  color: #CCC;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=c70852e8&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=c70852e8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c70852e8\",\n  null\n  \n)\n\nexport default component.exports","import debounce from 'lodash/debounce'\r\nimport {\r\n  ADD_CHAPTER, ADD_PLAN, ADD_SECTION, ADD_TOPIC, ADD_TOPIC_TO_CHAPTER,\r\n  ARCHIVE_CHAPTER, ARCHIVE_PLAN, ARCHIVE_SECTION, ARCHIVE_TOPIC,\r\n  DELETE_CHAPTER, DELETE_PLAN, DELETE_SECTION, DELETE_TOPIC,\r\n  REARRANGE_CHAPTERS, REARRANGE_PLANS, REARRANGE_SECTIONS, REARRANGE_TOPICS,\r\n  RESTORE_CHAPTER, RESTORE_PLAN, RESTORE_SECTION, RESTORE_TOPIC,\r\n  UPDATE_CHAPTER, UPDATE_CHAPTER_CONTENT, UPDATE_PLAN,\r\n  UPDATE_SECTION, UPDATE_SECTION_CONTENT, UPDATE_SECTION_TAGS,\r\n  UPDATE_TOPIC, UPDATE_TOPIC_CONTENT,\r\n} from '../shared/chapters.store'\r\n\r\nimport { ADD_DOCUMENT, REMOVE_OWNED_DOCUMENT, UPDATE_DOCUMENT_NAME } from '../shared/document.store'\r\n\r\nimport {\r\n  ADD_WORKSHOP, ARCHIVE_WORKSHOP, DELETE_WORKSHOP, RESTORE_WORKSHOP,\r\n  UPDATE_WORKSHOPS_CONTENT,\r\n} from '../shared/workshops.store'\r\n\r\nimport { getStorageApi } from './storageSwitch'\r\n\r\nconst mutations = {\r\n  addDocument: [ADD_DOCUMENT],\r\n  deleteChapter: [DELETE_CHAPTER],\r\n  deleteDocument: [REMOVE_OWNED_DOCUMENT],\r\n  deletePlan: [DELETE_PLAN],\r\n  deleteSection: [DELETE_SECTION],\r\n  deleteTopic: [DELETE_TOPIC],\r\n  deleteWorkshop: [DELETE_WORKSHOP],\r\n  rearrangeChapter: [REARRANGE_CHAPTERS],\r\n  rearrangePlan: [REARRANGE_PLANS],\r\n  rearrangeSection: [REARRANGE_SECTIONS],\r\n  rearrangeTopic: [REARRANGE_TOPICS],\r\n  updateChapter: [ADD_CHAPTER, ADD_TOPIC_TO_CHAPTER, ARCHIVE_CHAPTER,\r\n    RESTORE_CHAPTER, UPDATE_CHAPTER, UPDATE_CHAPTER_CONTENT,\r\n    UPDATE_TOPIC_CONTENT],\r\n  updateDocument: [UPDATE_DOCUMENT_NAME],\r\n  updatePlan: [ADD_PLAN, ARCHIVE_PLAN, RESTORE_PLAN, UPDATE_PLAN],\r\n  updateSection: [ADD_SECTION, ARCHIVE_SECTION, RESTORE_SECTION,\r\n    UPDATE_SECTION, UPDATE_SECTION_CONTENT, UPDATE_SECTION_TAGS],\r\n  updateTopic: [ADD_TOPIC, ARCHIVE_TOPIC,\r\n    RESTORE_TOPIC, UPDATE_TOPIC],\r\n  updateWorkshop: [ADD_WORKSHOP, ARCHIVE_WORKSHOP, RESTORE_WORKSHOP],\r\n  updateWorkshops: [UPDATE_WORKSHOPS_CONTENT],\r\n}\r\n\r\nlet debouncedUpdateChapter = null\r\nlet chapterStorage = null\r\n\r\nconst getDebouncedUpdateChapter = () => {\r\n  if (!debouncedUpdateChapter) {\r\n    debouncedUpdateChapter = debounce((...args) => {\r\n      chapterStorage.updateChapter(...args)\r\n    }, 50)\r\n  }\r\n\r\n  return debouncedUpdateChapter\r\n}\r\n\r\nexport const chapterAutosaverPlugin = (store) => {\r\n  store.subscribe((mutation, state) => {\r\n    // Make sure we know the user type before handling mutations\r\n    state.user.userPromise.then((user) => {\r\n      getStorageApi(user).then((storage) => {\r\n        chapterStorage = storage\r\n        handleMutation(mutation, state, storage, getDebouncedUpdateChapter())\r\n      })\r\n    })\r\n  })\r\n}\r\n\r\nfunction handleMutation(mutation, state, storage, debouncedUpdateChapter) {\r\n  const { type, payload } = mutation\r\n  const documentGuid = state.document.currentDocument && state.document.currentDocument.guid\r\n\r\n  if (mutations.addDocument.includes(type)) {\r\n    storage.addDocument(payload)\r\n    return\r\n  }\r\n\r\n  if (mutations.deleteDocument.includes(type)) {\r\n    storage.deleteDocument(payload.guid)\r\n    return\r\n  }\r\n\r\n  if (mutations.updateDocument.includes(type)) {\r\n    storage.updateDocument(payload)\r\n    return\r\n  }\r\n\r\n  if (!documentGuid) {\r\n    return\r\n  }\r\n\r\n  if (mutations.deleteChapter.includes(type)) {\r\n    storage.deleteChapter(documentGuid, payload.chapter.guid)\r\n    return\r\n  }\r\n\r\n  if (mutations.deletePlan.includes(type)) {\r\n    storage.deletePlan(documentGuid, payload.plan.guid)\r\n    return\r\n  }\r\n\r\n  if (mutations.deleteSection.includes(type)) {\r\n    storage.deleteSection(documentGuid, payload.plan.guid, payload.section.guid)\r\n    return\r\n  }\r\n\r\n  if (mutations.deleteTopic.includes(type)) {\r\n    storage.deleteTopic(documentGuid, payload.topic.guid)\r\n    return\r\n  }\r\n\r\n  if (mutations.deleteWorkshop.includes(type)) {\r\n    storage.deleteWorkshop(documentGuid, payload.workshop.guid)\r\n    return\r\n  }\r\n\r\n  if (mutations.rearrangeChapter.includes(type)) {\r\n    storage.arrangeChapters(documentGuid, payload.chapters.map(chapter => chapter.guid))\r\n    return\r\n  }\r\n\r\n  if (mutations.rearrangePlan.includes(type)) {\r\n    storage.arrangePlans(documentGuid, payload.plans.map(plan => plan.guid))\r\n    return\r\n  }\r\n\r\n  if (mutations.rearrangeSection.includes(type)) {\r\n    storage.arrangeSections(documentGuid, payload.plan.guid, payload.sections.map(section => section.guid))\r\n    return\r\n  }\r\n\r\n  if (mutations.rearrangeTopic.includes(type)) {\r\n    storage.arrangeTopics(documentGuid, payload.topics.map(topic => topic.guid))\r\n    return\r\n  }\r\n\r\n  if (mutations.updateChapter.includes(type)) {\r\n    debouncedUpdateChapter(documentGuid, payload.chapter.guid, payload.chapter)\r\n    return\r\n  }\r\n\r\n  if (mutations.updatePlan.includes(type)) {\r\n    storage.updatePlan(documentGuid, payload.plan.guid, payload.plan)\r\n    return\r\n  }\r\n\r\n  if (mutations.updateSection.includes(type)) {\r\n    storage.updateSection(documentGuid, payload.plan.guid, payload.section.guid, payload.section)\r\n    return\r\n  }\r\n\r\n  if (mutations.updateTopic.includes(type)) {\r\n    storage.updateTopic(documentGuid, payload.topic.guid, payload.topic)\r\n    return\r\n  }\r\n\r\n  if (mutations.updateWorkshop.includes(type)) {\r\n    storage.updateWorkshops(documentGuid, [payload.workshop])\r\n  }\r\n\r\n  if (mutations.updateWorkshops.includes(type)) {\r\n    storage.updateWorkshops(documentGuid, payload.workshopUpdates.map(update => update.workshop))\r\n  }\r\n}\r\n","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nimport { chapterAutosaverPlugin } from './app/api/chapters.persist'\r\nimport composer from './app/composer/composer.store.js'\r\nimport chapters from './app/shared/chapters.store.js'\r\nimport document from './app/shared/document.store.js'\r\nimport status from './app/shared/status.store'\r\nimport user from './app/shared/user.store'\r\nimport workshop from './app/shared/workshops.store'\r\n\r\nVue.use(Vuex)\r\n\r\nconst store = new Vuex.Store({\r\n  modules: {\r\n    composer,\r\n    chapters,\r\n    document,\r\n    status,\r\n    user,\r\n    workshop,\r\n  },\r\n  plugins: [chapterAutosaverPlugin],\r\n})\r\n\r\nexport default store\r\n","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport Raven from 'raven-js'\r\nimport RavenVue from 'raven-js/plugins/vue'\r\n\r\nimport router from './app/router'\r\nimport App from './app/App.vue'\r\n\r\nimport './assets/yui-cssreset.css'\r\nimport 'tippy.js/dist/tippy.css'\r\nimport 'tippy.js/themes/light.css'\r\n\r\nimport './app.css'\r\nimport store from './store'\r\n\r\nif (window && window.isProd === true) {\r\n  Raven\r\n    .config('https://1deaeecd96244297ad475854be0d5502@sentry.io/540818')\r\n    .addPlugin(RavenVue, Vue)\r\n    .install()\r\n\r\n  window.Raven = Raven\r\n}\r\n\r\nVue.config.productionTip = false\r\n\r\nif ('serviceWorker' in navigator) {\r\n  window.addEventListener('load', () => {\r\n    navigator.serviceWorker.register('/service-worker.js').then((registration) => {\r\n      console.log('SW registered: ', registration)\r\n    }).catch((registrationError) => {\r\n      console.log('SW registration failed: ', registrationError)\r\n    })\r\n  })\r\n}\r\n\r\n/* eslint-disable no-new */\r\nexport default new Vue({\r\n  el: '#app',\r\n  components: { App },\r\n  router,\r\n  store,\r\n  render(h) {\r\n    return h('App')\r\n  },\r\n})\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wizard.vue?vue&type=style&index=0&id=14c71065&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wizard.vue?vue&type=style&index=0&id=14c71065&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{ref:\"container\",staticClass:\"editor\"},[_c('div',{ref:\"editor\",on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }if(!$event.ctrlKey){ return null; }return _vm.emitDone($event)}}})]),(_vm.showFullScreen)?_c('div',[_c('quill-full-screen',{attrs:{\"content\":_vm.content,\"content-id\":_vm.contentId},on:{\"close\":function($event){return _vm.hideFullScreen()},\"update:content\":_vm.emitFullscreenContent,\"update:selection\":_vm.emitSelection}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Quill from 'quill'\r\nimport 'quill/dist/quill.snow.css'\r\n\r\nconst toolbarOptions = [[\r\n  { header: [1, 2, 3, false] },\r\n], [\r\n  'bold', 'italic', 'underline', 'strike', 'blockquote', { list: 'ordered' }, { list: 'bullet' }, 'clean'\r\n]]\r\n\r\nconst allowedFormats = [\r\n  'header',\r\n  'size',\r\n  'bold',\r\n  'italic',\r\n  'underline',\r\n  'strike',\r\n  'list',\r\n  'blockquote',\r\n]\r\n\r\nconst createQuill = (el, placeholder, container, onFullScreen) => {\r\n  const tempToolbar = [...toolbarOptions]\r\n  const handlers = {}\r\n  if (onFullScreen) {\r\n    tempToolbar.push(['fullscreen'])\r\n    handlers.fullscreen = onFullScreen\r\n  }\r\n\r\n  const quill = new Quill(el, {\r\n    bounds: container,\r\n    formats: allowedFormats,\r\n    modules: {\r\n      toolbar: {\r\n        container: tempToolbar,\r\n        handlers,\r\n      },\r\n    },\r\n    placeholder,\r\n    theme: 'snow',\r\n  })\r\n\r\n  if (onFullScreen) {\r\n    const fullScreenButton = container.querySelector('.ql-fullscreen')\r\n    fullScreenButton.innerHTML = '<div class=\"fas fa-expand-arrows-alt\"></div>'\r\n  }\r\n\r\n  return quill\r\n}\r\n\r\nexport default createQuill\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"full-screen-wrap full-screen\"},[_c('div',{staticClass:\"actions\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isWideView),expression:\"!isWideView\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"action wide-view\",attrs:{\"title\":\"Wide view\"},domProps:{\"innerHTML\":_vm._s(_vm.wideSvg)},on:{\"click\":function($event){return _vm.showWideView()}}}),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isWideView),expression:\"isWideView\"},{name:\"tooltip\",rawName:\"v-tooltip\"}],staticClass:\"action narrow-view\",attrs:{\"title\":\"Book-width view\"},domProps:{\"innerHTML\":_vm._s(_vm.narrowSvg)},on:{\"click\":function($event){return _vm.showNarrowView()}}}),_c('button',{staticClass:\"action close\",domProps:{\"innerHTML\":_vm._s(_vm.exitSvg)},on:{\"click\":function($event){return _vm.close()}}})]),_c('div',{ref:\"container\",staticClass:\"container\",class:{ 'wide': _vm.isWideView }},[_c('div',{ref:\"editor\",staticClass:\"editor\"})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"full-screen-wrap full-screen\">\r\n    <div class=\"actions\">\r\n      <button \r\n        v-show=\"!isWideView\" \r\n        class=\"action wide-view\" \r\n        v-html=\"wideSvg\" \r\n        @click=\"showWideView()\"\r\n        title=\"Wide view\" \r\n        v-tooltip\r\n      />\r\n      <button \r\n        v-show=\"isWideView\" \r\n        class=\"action narrow-view\" \r\n        v-html=\"narrowSvg\" \r\n        @click=\"showNarrowView()\"\r\n        title=\"Book-width view\" \r\n        v-tooltip\r\n      />\r\n      <button \r\n        class=\"action close\" \r\n        v-html=\"exitSvg\" \r\n        @click=\"close()\"\r\n      />\r\n    </div>\r\n    <div \r\n      class=\"container\" \r\n      :class=\"{ 'wide': isWideView }\" \r\n      ref=\"container\"\r\n    >\r\n      <div \r\n        class=\"editor\" \r\n        ref=\"editor\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cache from './cache'\r\nimport createQuill from './quillBuilder'\r\nimport debounce from 'lodash/debounce'\r\nimport Octicons from 'octicons'\r\nimport tooltip from './tooltip.directive'\r\n\r\nconst width = new Cache('FULL_SCREEN_EDITOR_WIDTH')\r\n\r\nexport default {\r\n  beforeDestroy() {\r\n    this.handlers.forEach(([name, fn]) => this.quill.off(name, fn))\r\n  },\r\n  data() {\r\n    return {\r\n      exitSvg: Octicons.x.toSVG({\r\n        height: 30,\r\n        width: 30,\r\n      }),\r\n      handlers: [],\r\n      isWideView: false,\r\n      narrowSvg: Octicons['screen-normal'].toSVG({\r\n        height: 30,\r\n        width: 30,\r\n      }),\r\n      quill: null,\r\n      wideSvg: Octicons['screen-full'].toSVG({\r\n        height: 30,\r\n        width: 30,\r\n      }),\r\n    }\r\n  },\r\n  directives: {\r\n    tooltip,\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.$emit('close')\r\n    },\r\n    emitContent(content, contentId) {\r\n      this.$emit('update:content', { content, contentId })\r\n    },\r\n    emitSelection(selection) {\r\n      this.$emit('update:selection', selection)\r\n    },\r\n    listenQuill(quill) {\r\n      const textChanged = debounce((content, contentId) => {\r\n        this.emitContent(content, contentId)\r\n      }, 750, { maxWait: 2000 })\r\n\r\n      const onTextChange = () => {\r\n        const content = quill.getContents()\r\n        const contentId = this.contentId\r\n        textChanged(content, contentId)\r\n      }\r\n\r\n      const onSelectionChange = debounce((range) => {\r\n        if (!range) {\r\n          return\r\n        }\r\n\r\n        let selection\r\n        if (!range.length) {\r\n          selection = {\r\n            range: null,\r\n            text: '',\r\n          }\r\n        } else {\r\n          selection = {\r\n            range,\r\n            text: quill.getText(range.index, range.length),\r\n          }\r\n        }\r\n\r\n        this.emitSelection(selection)\r\n      }, 500)\r\n\r\n      quill.on('text-change', onTextChange)\r\n      quill.on('selection-change', onSelectionChange)\r\n\r\n      this.handlers.push(['text-change', onTextChange], ['selection-change', onSelectionChange])\r\n    },\r\n    showNarrowView() {\r\n      this.isWideView = false\r\n      width.cacheSet(false)\r\n    },\r\n    showWideView() {\r\n      this.isWideView = true\r\n      width.cacheSet(true)\r\n    },\r\n    updateQuill(quill, content) {\r\n      if (content) {\r\n        quill.setContents(content, 'api')\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.isWideView = width.cacheGet() || false\r\n\r\n    this.quill = createQuill(\r\n      this.$refs.editor,\r\n      'Write here.',\r\n      this.$refs.container,\r\n    )\r\n\r\n    this.updateQuill(this.quill, this.content)\r\n    this.listenQuill(this.quill)\r\n  },\r\n  props: {\r\n    content: {\r\n      required: true,\r\n      type: Object\r\n    },\r\n    contentId: {\r\n      default: null,\r\n      required: false,\r\n      type: String\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.full-screen-wrap {\r\n  background-color: rgba(255, 255, 255, 0.98);\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  left: 0;\r\n  position: fixed;\r\n  right: 0;\r\n  top: 0;\r\n  z-index: 100;\r\n}\r\n\r\n.actions {\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n  position: absolute;\r\n  right: 5px;\r\n  top: 5px;\r\n}\r\n\r\n.action {\r\n  align-items: center;\r\n  border: none;\r\n  display: flex;\r\n  fill: #000;\r\n  height: 45px;\r\n  justify-content: center;\r\n  padding: 0;\r\n  transition: fill 100ms;\r\n  width: 45px;\r\n}\r\n\r\n.action:hover {\r\n  fill: #CCC;\r\n}\r\n\r\n.container {\r\n  align-self: center;\r\n  height: calc(100% - 48px);\r\n  max-width: 500px;\r\n  padding: 20px 0;\r\n  width: 100%;\r\n}\r\n\r\n.container.wide {\r\n  max-width: 1000px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quillFullScreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quillFullScreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./quillFullScreen.vue?vue&type=template&id=6a040686&scoped=true&\"\nimport script from \"./quillFullScreen.vue?vue&type=script&lang=js&\"\nexport * from \"./quillFullScreen.vue?vue&type=script&lang=js&\"\nimport style0 from \"./quillFullScreen.vue?vue&type=style&index=0&id=6a040686&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a040686\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"wrap\">\r\n    <div \r\n      class=\"editor\" \r\n      ref=\"container\"\r\n    >\r\n      <div \r\n        ref=\"editor\" \r\n        @keyup.ctrl.enter=\"emitDone\"\r\n      />\r\n    </div>\r\n    <div v-if=\"showFullScreen\">\r\n      <quill-full-screen\r\n        :content=\"content\" \r\n        :content-id=\"contentId\"\r\n        @close=\"hideFullScreen()\"\r\n        @update:content=\"emitFullscreenContent\"\r\n        @update:selection=\"emitSelection\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport createQuill from './quillBuilder'\r\nimport debounce from 'lodash/debounce'\r\nimport escapeStringRegexp from 'escape-string-regexp'\r\nimport isEqual from 'lodash/isEqual'\r\nimport QuillFullScreen from './quillFullScreen.vue'\r\n\r\nexport default {\r\n  beforeDestroy() {\r\n    this.handlers.forEach(([name, fn]) => this.quill.off(name, fn))\r\n  },\r\n  components: {\r\n    QuillFullScreen,\r\n  },\r\n  data() {\r\n    return {\r\n      cachedContentId: null,\r\n      handlers: [],\r\n      quill: null,\r\n      showFullScreen: false,\r\n    }\r\n  },\r\n  methods: {\r\n    // disable/enable are provided for the parent component to use\r\n    disable() {\r\n      this.quill.enable(false)\r\n    },\r\n    enable() {\r\n      this.quill.enable()\r\n    },\r\n    emitContent(content, contentId) {\r\n      this.$emit('update:content', { content, contentId })\r\n    },\r\n    emitFullscreenContent({ content, contentId }) {\r\n      this.emitContent(content, contentId)\r\n    },\r\n    emitDone() {\r\n      this.$emit('shortcut:done')\r\n    },\r\n    emitSelection(selection) {\r\n      this.$emit('update:selection', selection)\r\n    },\r\n    focus() {\r\n      this.$nextTick(() => this.quill.setSelection(this.quill.getLength(), 0, 'silent'))\r\n    },\r\n    hideFullScreen() {\r\n      this.showFullScreen = false\r\n    },\r\n    listenQuill(quill) {\r\n      const selectionChanged = debounce((selection) => {\r\n        this.emitSelection(selection)\r\n      }, 500)\r\n\r\n      const onSelectionChange = (range) => {\r\n        let selection\r\n        if (!range || !range.length) {\r\n          selection = {\r\n            range: null,\r\n            text: '',\r\n          }\r\n        } else {\r\n          selection = {\r\n            range,\r\n            text: quill.getText(range.index, range.length),\r\n          }\r\n        }\r\n\r\n        selectionChanged(selection)\r\n      }\r\n\r\n      const textChanged = debounce((content, contentId) => {\r\n        this.emitContent(content, contentId)\r\n      }, 750, { maxWait: 2000 })\r\n\r\n      const onTextChange = () => {\r\n        const selection = quill.getSelection()\r\n        onSelectionChange(selection)\r\n        const content = quill.getContents()\r\n        const contentId = this.contentId\r\n        textChanged(content, contentId)\r\n      }\r\n\r\n      quill.on('text-change', onTextChange)\r\n      quill.on('selection-change', onSelectionChange)\r\n\r\n      this.handlers.push(['text-change', onTextChange], ['selection-change', onSelectionChange])\r\n    },\r\n    updateQuill(quill, content, silent) {\r\n      if (content) {\r\n        quill.setContents(content, silent ? 'silent' : 'api')\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.quill = createQuill(\r\n      this.$refs.editor,\r\n      'Write here.',\r\n      this.container || this.$refs.container,\r\n      () => {\r\n        this.showFullScreen = true\r\n      },\r\n    )\r\n\r\n    this.updateQuill(this.quill, this.content, true)\r\n    this.listenQuill(this.quill)\r\n  },\r\n  props: {\r\n    container: {\r\n      default: null,\r\n      required: false,\r\n      type: null\r\n    },\r\n    content: {\r\n      required: true,\r\n      type: null\r\n    },\r\n    contentId: {\r\n      required: false,\r\n      default: null,\r\n      type: String\r\n    },\r\n    scrollTo: {\r\n      default: null,\r\n      type: Object\r\n    },\r\n  },\r\n  watch: {\r\n    content(delta) {\r\n      if (delta === undefined || isEqual(delta, this.quill.getContents())) {\r\n        return\r\n      }\r\n\r\n      if (this.contentId !== this.cachedContentId) {\r\n        this.cachedContentId = this.contentId\r\n        this.quill.setContents(null, 'silent')\r\n        this.quill.setContents(delta, 'silent')\r\n      } else {\r\n        this.updateQuill(this.quill, delta, true)\r\n      }\r\n    },\r\n    scrollTo(descriptor) {\r\n      if (!descriptor || !~descriptor.paragraphIndex) {\r\n        return\r\n      }\r\n\r\n      const editor = this.$refs.editor.querySelector('.ql-editor')\r\n      const element = editor.childNodes[descriptor.paragraphIndex]\r\n      element.parentNode.scrollTop = element.offsetTop\r\n\r\n      if (!~descriptor.searchTermIndex) {\r\n        return\r\n      }\r\n\r\n      const searchTerm = this.$store.state.composer.selection.text\r\n      const contents = this.quill.getText()\r\n      const search = new RegExp(escapeStringRegexp(searchTerm), 'gi')\r\n\r\n      const searchRanges = getAllOccurrences(search, contents)\r\n      const selectedRange = searchRanges[descriptor.searchTermIndex]\r\n      this.quill.setSelection(selectedRange, 'api')\r\n    },\r\n  },\r\n}\r\n\r\nfunction getAllOccurrences(regex, str) {\r\n  const ranges = []\r\n  let result\r\n  while ((result = regex.exec(str))) {\r\n    ranges.push({\r\n      index: result.index,\r\n      length: result[0].length,\r\n    })\r\n  }\r\n  return ranges\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wrap {\r\n  height: calc(100% - 48px);\r\n}\r\n\r\n.editor {\r\n  height: 100%;\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n</style>\r\n\r\n<style>\r\n.ql-toolbar {\r\n  align-items: center;\r\n  background-color: #D6D6D6;\r\n  border: 0 !important;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.ql-container {\r\n  background-color: #FFF;\r\n  border: 0 !important;\r\n}\r\n\r\n.ql-editor {\r\n  background-color: transparent;\r\n  font-family: 'Source Serif Pro', sans-serif;\r\n  font-size: 16px;\r\n  overflow-wrap: break-word;\r\n  padding: 12px 20px 12px 10px;\r\n  word-break: break-word;\r\n}\r\n\r\n.ql-editor p {\r\n  padding-bottom: 6px;\r\n}\r\n\r\n.ql-editor h1, .ql-editor h2, .ql-editor h3 {\r\n  font-family: 'Asap Condensed', sans-serif;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.ql-editor h1 {\r\n  font-size: 25px;\r\n}\r\n\r\n.ql-fullscreen {\r\n  fill: #444;\r\n  width: auto !important;\r\n}\r\n\r\n.ql-fullscreen:hover {\r\n  fill: #06c;\r\n}\r\n\r\n.ql-picker {\r\n  background-color: #fff;\r\n  border: 2px solid #323232;\r\n  height: 32px !important;\r\n}\r\n\r\n.ql-picker .ql-picker-label {\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n}\r\n\r\n.ql-formats, .ql-snow .ql-formats {\r\n  display: flex;\r\n}\r\n\r\n.ql-formats button, .ql-snow .ql-formats button {\r\n  background-color: #F0F0F0;\r\n  border: 2px solid #323232;\r\n  border-radius: 8px;\r\n  color: #323232;\r\n  fill: #323232;\r\n  display: flex;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  height: 32px;\r\n  margin-right: 8px;\r\n  opacity: 1;\r\n  width: 32px;\r\n}\r\n\r\n.ql-formats button.ql-active, .ql-snow .ql-formats button.ql-active {\r\n  background-color: #323232;\r\n  color: #F0F0F0;\r\n  fill: #F0F0F0;\r\n}\r\n\r\n.ql-snow .ql-formats button.ql-active .ql-stroke {\r\n  stroke: #F0F0F0;\r\n}\r\n\r\n.ql-snow .ql-formats button.ql-active .ql-fill {\r\n  fill: #F0F0F0;\r\n}\r\n\r\n.ql-formats:nth-of-type(3) {\r\n  display: flex;\r\n  flex: 1;\r\n  justify-content: flex-end;\r\n  margin-right: 0 !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quillEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quillEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./quillEditor.vue?vue&type=template&id=4094e8ab&scoped=true&\"\nimport script from \"./quillEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./quillEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./quillEditor.vue?vue&type=style&index=0&id=4094e8ab&scoped=true&lang=css&\"\nimport style1 from \"./quillEditor.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4094e8ab\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordDefine.vue?vue&type=style&index=0&id=1ef4dcac&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordDefine.vue?vue&type=style&index=0&id=1ef4dcac&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotFound.vue?vue&type=style&index=0&id=00a62670&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotFound.vue?vue&type=style&index=0&id=00a62670&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentPicker.vue?vue&type=style&index=0&id=7c6cc11b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentPicker.vue?vue&type=style&index=0&id=7c6cc11b&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quillFullScreen.vue?vue&type=style&index=0&id=6a040686&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quillFullScreen.vue?vue&type=style&index=0&id=6a040686&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statusSignal.vue?vue&type=style&index=0&id=37cef718&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./statusSignal.vue?vue&type=style&index=0&id=37cef718&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workshopList.vue?vue&type=style&index=0&id=2b85936c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workshopList.vue?vue&type=style&index=0&id=2b85936c&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mainMenu.vue?vue&type=style&index=0&id=456d0a6d&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mainMenu.vue?vue&type=style&index=0&id=456d0a6d&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planner.page.vue?vue&type=style&index=0&id=4e61483b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planner.page.vue?vue&type=style&index=0&id=4e61483b&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentEdit.page.vue?vue&type=style&index=0&id=439a041e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentEdit.page.vue?vue&type=style&index=0&id=439a041e&scoped=true&lang=css&\"","import clone from 'lodash/clone'\r\nimport localForage from 'localforage'\r\nimport uniq from 'lodash/uniq'\r\n\r\nconst { orderPromises } = require('../../../utilities')\r\n\r\nclass LocalStorageApi {\r\n  constructor(username) {\r\n    if (!username) {\r\n      throw new Error('Username was not supplied for LocalStorageApi.')\r\n    }\r\n\r\n    localForage.setDriver([localForage.INDEXEDDB, localForage.WEBSQL, localForage.LOCALSTORAGE])\r\n    this.storage = localForage\r\n    window._storage = this.storage\r\n    this.getStorageKeys = () => this.storage.keys()\r\n\r\n    this.planKeyPrefix = documentGuid => `${documentGuid}_PLAN_DATA_`\r\n    this.planOrderKey = documentGuid => `${documentGuid}_PLAN_ORDER`\r\n    this.getPlanKey = (documentGuid, planGuid) => `${this.planKeyPrefix(documentGuid)}${planGuid}`\r\n\r\n    this.sectionKeyPrefix = (documentGuid, planGuid) => `${documentGuid}_SECTION_DATA_${planGuid}_`\r\n    this.sectionOrderKey = (documentGuid, planGuid) => `${documentGuid}_SECTION_ORDER_${planGuid}`\r\n    this.getSectionKey = (documentGuid, planGuid, sectionGuid) => `${this.sectionKeyPrefix(documentGuid, planGuid)}${sectionGuid}`\r\n\r\n    this.chapterKeyPrefix = documentGuid => `${documentGuid}_CHAPTER_DATA_`\r\n    this.chapterOrderKey = documentGuid => `${documentGuid}_CHAPTER_ORDER`\r\n    this.getChapterKey = (documentGuid, chapterGuid) => `${this.chapterKeyPrefix(documentGuid)}${chapterGuid}`\r\n\r\n    this.topicKeyPrefix = documentGuid => `${documentGuid}_TOPIC_DATA_`\r\n    this.topicOrderKey = documentGuid => `${documentGuid}_TOPIC_ORDER`\r\n    this.getTopicKey = (documentGuid, topicGuid) => `${this.topicKeyPrefix(documentGuid)}${topicGuid}`\r\n\r\n    this.legacyDocumentGuids = 'DOCUMENT_IDS'\r\n    this.documentGuidsKey = `${username}_DOCUMENT_IDS`\r\n    this.documentsKey = documentGuid => `DOCUMENT_${documentGuid}`\r\n  }\r\n\r\n  // INFO\r\n  isPremium() {\r\n    return false\r\n  }\r\n\r\n  addDocument({ guid, name }) {\r\n    return this._getAllDocumentGuids().then((documentGuids) => {\r\n      if (!documentGuids.includes(guid)) {\r\n        documentGuids.push(guid)\r\n        return this.storage.setItem(this.documentGuidsKey, documentGuids)\r\n      }\r\n    }).then(() => this.storage.setItem(this.documentsKey(guid), { guid, name }))\r\n  }\r\n\r\n  arrangeChapters(documentGuid, chapterGuids) {\r\n    return this.storage.setItem(this.chapterOrderKey(documentGuid), chapterGuids)\r\n  }\r\n\r\n  arrangePlans(documentGuid, planGuids) {\r\n    return this.storage.setItem(this.planOrderKey(documentGuid), planGuids)\r\n  }\r\n\r\n  arrangeSections(documentGuid, planGuid, sectionGuids) {\r\n    return this.storage.setItem(this.sectionOrderKey(documentGuid, planGuid), sectionGuids)\r\n  }\r\n\r\n  arrangeTopics(documentGuid, topicGuids) {\r\n    return this.storage.setItem(this.topicOrderKey(documentGuid), topicGuids)\r\n  }\r\n\r\n  deleteChapter(documentGuid, chapterGuid) {\r\n    const key = this.getChapterKey(documentGuid, chapterGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteDocument(guid) {\r\n    // Remove document from document list\r\n    return this._getAllDocumentGuids().then((documentGuids) => {\r\n      if (documentGuids.includes(guid)) {\r\n        documentGuids.splice(documentGuids.indexOf(guid), 1)\r\n      }\r\n\r\n      return this.storage.setItem(this.documentGuidsKey, documentGuids)\r\n    }).then(() =>\r\n      // Remove all content (chapters, plans, sections, topics)\r\n      Promise.all([\r\n        this._getAllChapters(guid).then(chapters =>\r\n          Promise.all(chapters.map(chapter => this.deleteChapter(guid, chapter.guid)))),\r\n        this._getAllPlans(guid).then(plans => Promise.all(plans.map(plan => this._getAllSections(guid, plan.guid).then(sections =>\r\n          Promise.all(sections.map(section => this.deleteSection(guid, plan.guid, section.guid)))).then(() => this.deletePlan(guid, plan.guid))))),\r\n        this._getAllTopics(guid).then(topics =>\r\n          Promise.all(topics.map(topic => this.deleteTopic(guid, topic.guid)))),\r\n      ]).then(() => this.storage.removeItem(this.documentsKey(guid))))\r\n  }\r\n\r\n  deletePlan(documentGuid, planGuid) {\r\n    const key = this.getPlanKey(documentGuid, planGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteSection(documentGuid, planGuid, sectionGuid) {\r\n    const key = this.getSectionKey(documentGuid, planGuid, sectionGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteTopic(documentGuid, topicGuid) {\r\n    const key = this.getTopicKey(documentGuid, topicGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteWorkshop() {\r\n    throw new Error('Workshops are a Author-only feature.')\r\n  }\r\n\r\n  _getAllChapters(documentGuid) {\r\n    const prefix = this.chapterKeyPrefix(documentGuid)\r\n\r\n    return Promise.all([\r\n      this._getChaptersSortOrder(documentGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix))),\r\n    ]).then(([sortOrder, keys]) => Promise.all(keys.map(key => this.storage.getItem(key))).then((chapters) => {\r\n      chapters.sort((chap1, chap2) => sortOrder.indexOf(chap1.guid) - sortOrder.indexOf(chap2.guid))\r\n\r\n      return chapters\r\n    }))\r\n  }\r\n\r\n  getAllChapters(documentGuid) {\r\n    return this._getAllChapters(documentGuid)\r\n  }\r\n\r\n  _getAllDocumentGuids() {\r\n    // Migrate old document guids to an email-identified key\r\n    return Promise.all([\r\n      this.storage.getItem(this.legacyDocumentGuids),\r\n      this.storage.getItem(this.documentGuidsKey),\r\n    ]).then(([legacyGuids, guids]) => {\r\n      if (Array.isArray(legacyGuids)) {\r\n        const allGuids = uniq(legacyGuids.concat(guids || []))\r\n        return (\r\n          this.storage.setItem(this.documentGuidsKey, allGuids)\r\n            .then(() => this.storage.removeItem(this.legacyDocumentGuids))\r\n            .then(() => allGuids)\r\n        )\r\n      }\r\n      return uniq(guids || [])\r\n    })\r\n  }\r\n\r\n  _getAllDocuments() {\r\n    return this._getAllDocumentGuids().then(guids => Promise.all(guids.map((guid) => {\r\n      const key = this.documentsKey(guid)\r\n      return this.storage.getItem(key)\r\n    })))\r\n  }\r\n\r\n  getAllDocuments() {\r\n    return this._getAllDocuments()\r\n  }\r\n\r\n  _getAllPlans(documentGuid) {\r\n    const prefix = this.planKeyPrefix(documentGuid)\r\n\r\n    return Promise.all([\r\n      this._getPlansSortOrder(documentGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix))),\r\n    ]).then(([sortOrder, keys]) => Promise.all(keys.map(key => this.storage.getItem(key))).then(plans => Promise.all(plans.map(plan => this._getAllSections(documentGuid, plan.guid).then((sections) => {\r\n      plan.sections = sections\r\n    }))).then(() => {\r\n      plans.sort((plan1, plan2) => sortOrder.indexOf(plan1.guid) - sortOrder.indexOf(plan2.guid))\r\n      return plans\r\n    })))\r\n  }\r\n\r\n  getAllPlans(documentGuid) {\r\n    return this._getAllPlans(documentGuid)\r\n  }\r\n\r\n  _getAllSections(documentGuid, planGuid) {\r\n    const prefix = this.sectionKeyPrefix(documentGuid, planGuid)\r\n\r\n    return Promise.all([\r\n      this._getSectionSortOrder(documentGuid, planGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix))),\r\n    ]).then(([sortOrder, keys]) => Promise.all(keys.map(key => this.storage.getItem(key))).then((sections) => {\r\n      sections.sort((section1, section2) => sortOrder.indexOf(section1.guid) - sortOrder.indexOf(section2.guid))\r\n      return sections\r\n    }))\r\n  }\r\n\r\n  _getAllTopics(documentGuid) {\r\n    const prefix = this.topicKeyPrefix(documentGuid)\r\n\r\n    return Promise.all([\r\n      this._getTopicsSortOrder(documentGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix))),\r\n    ]).then(([sortOrder, keys]) => Promise.all(keys.map(key => this.storage.getItem(key))).then((topics) => {\r\n      topics.sort((topic1, topic2) => sortOrder.indexOf(topic1.guid) - sortOrder.indexOf(topic2.guid))\r\n      return topics\r\n    }))\r\n  }\r\n\r\n  getAllTopics(documentGuid) {\r\n    return this._getAllTopics(documentGuid)\r\n  }\r\n\r\n  _getChaptersSortOrder(documentGuid) {\r\n    return this.storage.getItem(this.chapterOrderKey(documentGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  _getPlansSortOrder(documentGuid) {\r\n    return this.storage.getItem(this.planOrderKey(documentGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  _getSectionSortOrder(documentGuid, planGuid) {\r\n    return this.storage.getItem(this.sectionOrderKey(documentGuid, planGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  _getTopicsSortOrder(documentGuid) {\r\n    return this.storage.getItem(this.topicOrderKey(documentGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  getAllWorkshops() {\r\n    throw new Error('Workshops are a Author-only feature.')\r\n  }\r\n\r\n  saveAllContent(documentGuid, { chapters, plans, topics }) {\r\n    const updateTopicFns = topics.map(topic => () => this.updateTopic(documentGuid, topic.guid, topic))\r\n    const updateTopicPromise = orderPromises(updateTopicFns)\r\n    const updateChapterPromise = updateTopicPromise.then(() => {\r\n      const updateChapterFns = chapters.map(chapter => () => this.updateChapter(documentGuid, chapter.guid, chapter))\r\n      return orderPromises(updateChapterFns)\r\n    })\r\n\r\n    const updatePlanFns = plans.map(plan => () => this.updatePlan(documentGuid, plan.guid, plan).then(() => {\r\n      const updateSectionFns = plan.sections.map(section => () => this.updateSection(documentGuid, plan.guid, section.guid, section))\r\n      return orderPromises(updateSectionFns)\r\n    }))\r\n    const updatePlanPromise = orderPromises(updatePlanFns)\r\n\r\n    return Promise.all([updateChapterPromise, updatePlanPromise])\r\n  }\r\n\r\n  updateChapter(documentGuid, chapterGuid, chapter) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getChapterKey(documentGuid, chapterGuid)\r\n    return Promise.all([\r\n      this.storage.setItem(key, chapter),\r\n      this._getChaptersSortOrder(documentGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(chapterGuid)) {\r\n          sortOrder.push(chapterGuid)\r\n          return this.arrangeChapters(documentGuid, sortOrder)\r\n        }\r\n      }),\r\n    ])\r\n  }\r\n\r\n  updateDocument({ guid, name }) {\r\n    return this.storage.setItem(this.documentsKey(guid), { guid, name })\r\n  }\r\n\r\n  updatePlan(documentGuid, planGuid, plan) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getPlanKey(documentGuid, planGuid)\r\n\r\n    plan = clone(plan)\r\n    plan.sections = null\r\n\r\n    return Promise.all([\r\n      this.storage.setItem(key, plan),\r\n      this._getPlansSortOrder(documentGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(planGuid)) {\r\n          sortOrder.push(planGuid)\r\n          return this.arrangePlans(documentGuid, sortOrder)\r\n        }\r\n      }),\r\n    ])\r\n  }\r\n\r\n  updateSection(documentGuid, planGuid, sectionGuid, section) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getSectionKey(documentGuid, planGuid, sectionGuid)\r\n\r\n    return Promise.all([\r\n      this.storage.setItem(key, section),\r\n      this._getSectionSortOrder(documentGuid, planGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(sectionGuid)) {\r\n          sortOrder.push(sectionGuid)\r\n          return this.arrangeSections(documentGuid, sortOrder)\r\n        }\r\n      }),\r\n    ])\r\n  }\r\n\r\n  updateTopic(documentGuid, topicGuid, topic) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getTopicKey(documentGuid, topicGuid)\r\n\r\n    return Promise.all([\r\n      this.storage.setItem(key, topic),\r\n      this._getTopicsSortOrder(documentGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(topicGuid)) {\r\n          sortOrder.push(topicGuid)\r\n          return this.arrangeTopics(documentGuid, sortOrder)\r\n        }\r\n      }),\r\n    ])\r\n  }\r\n\r\n  updateWorkshops() {\r\n    throw new Error('Workshops are a Author-only feature.')\r\n  }\r\n\r\n  /*\r\n    FULL EXPORT / IMPORT\r\n  */\r\n\r\n  docExport(guid, name) {\r\n    return Promise.all([\r\n      this._getAllChapters(guid),\r\n      this._getAllTopics(guid),\r\n      this._getAllPlans(guid).then(plans => Promise.all(plans.map(plan => this._getAllSections(guid, plan.guid).then((sections) => {\r\n        plan.sections = sections\r\n        return plan\r\n      })))),\r\n    ]).then(([chapters, topics, plans]) => {\r\n      const doc = {\r\n        guid,\r\n        name,\r\n        chapters,\r\n        topics,\r\n        plans,\r\n      }\r\n      return doc\r\n    })\r\n  }\r\n\r\n  docImport(doc) {\r\n    let backup\r\n    return this.docExport(doc.guid).then((_backup) => {\r\n      backup = _backup\r\n    }).then(() => this.deleteDocument(doc.guid)).then(() => {\r\n      if (!doc) {\r\n        throw new Error('Attempted to import an empty backup')\r\n      }\r\n\r\n      return this.addDocument(doc).then(() => this.saveAllContent(doc.guid, doc))\r\n    })\r\n      .then(undefined, (err) => {\r\n        console.error(err)\r\n        return this.addDocument(backup).then(() => this.saveAllContent(backup.guid, backup))\r\n      })\r\n  }\r\n\r\n  getFullExport() {\r\n    return this._getAllDocuments().then(documents => Promise.all(documents.map(doc => Promise.all([\r\n      this._getAllChapters(doc.guid),\r\n      this._getAllTopics(doc.guid),\r\n      this._getAllPlans(doc.guid).then(plans => Promise.all(plans.map(plan =>\r\n        this._getAllSections(doc.guid, plan.guid).then((sections) => {\r\n          plan.sections = sections\r\n          return plan\r\n        })))),\r\n    ]).then(([chapters, topics, plans]) => {\r\n      doc.chapters = chapters\r\n      doc.topics = topics\r\n      doc.plans = plans\r\n      return doc\r\n    }))))\r\n  }\r\n\r\n  revertImport(backup) {\r\n    return (\r\n      Promise.all(Object.keys(backup).map(key => this.storage.setItem(key, backup[key])))\r\n        .then(undefined, (importErr) => {\r\n          console.error(importErr)\r\n          throw importErr\r\n        })\r\n    )\r\n  }\r\n\r\n  doFullImport(documents) {\r\n    const backup = {}\r\n\r\n    return this.storage.iterate((value, key) => {\r\n      backup[key] = value\r\n    }).then(() => this.storage.clear().then(() => {\r\n      if (!documents || !Array.isArray(documents) || !documents.length) {\r\n        throw new Error('Attempted to import an empty backup')\r\n      }\r\n\r\n      const addDocumentPromises = documents.map(doc =>\r\n        () => this.addDocument(doc).then(() => this.saveAllContent(doc.guid, doc)))\r\n\r\n      return orderPromises(addDocumentPromises)\r\n    })).then(undefined, (err) => {\r\n      console.error(err)\r\n      return this.revertImport(backup)\r\n    })\r\n  }\r\n}\r\n\r\nexport default LocalStorageApi\r\n","import api from './api'\r\nimport DemoStorageApi from './demoStorage'\r\nimport LocalStorageApi from './localStorage'\r\nimport ServerStorageApi from './serverStorage'\r\nimport OfflineStorageApi from './offlineStorage'\r\n\r\nlet storageApi\r\nlet temporaryStoragePromiseResolve\r\nconst temporaryStoragePromise = new Promise((resolve) => {\r\n  temporaryStoragePromiseResolve = resolve\r\n})\r\n\r\nconst setStorageApi = function (storage) {\r\n  if (!storageApi) {\r\n    temporaryStoragePromiseResolve(storage)\r\n  }\r\n\r\n  storageApi = storage\r\n  return storage\r\n}\r\n\r\nexport const storageApiPromise = function () {\r\n  if (storageApi) {\r\n    return Promise.resolve(storageApi)\r\n  }\r\n\r\n  return temporaryStoragePromise\r\n}\r\n\r\nconst cachedStorage = {\r\n  Local: {\r\n    cached: null,\r\n    get: username => new LocalStorageApi(username),\r\n  },\r\n  Demo: {\r\n    cached: null,\r\n    get: () => new DemoStorageApi(),\r\n  },\r\n  Server: {\r\n    cached: null,\r\n    get: username => new ServerStorageApi(username),\r\n  },\r\n  Offline: {\r\n    cached: null,\r\n    get: username => new OfflineStorageApi(username),\r\n  },\r\n}\r\n\r\nlet waitForInit = Promise.resolve()\r\nconst getCached = (storage, username) => {\r\n  if (!storage.cached) {\r\n    storage.cached = storage.get(username)\r\n  }\r\n\r\n  if (typeof storage.cached.init === 'function' && storageApi !== storage.cached) {\r\n    waitForInit = storage.cached.init() || Promise.resolve()\r\n  }\r\n\r\n  setStorageApi(storage.cached)\r\n  return waitForInit.then(() => storage.cached)\r\n}\r\n\r\nexport function getStorageApi(user) {\r\n  let isOnlinePromise\r\n  if (api.isOnlineCached === null) {\r\n    isOnlinePromise = api.isOnline().then(() => null, () => null)\r\n  } else {\r\n    isOnlinePromise = Promise.resolve()\r\n  }\r\n  \r\n  return isOnlinePromise.then(() => {\r\n    const isOnline = api.isOnlineCached\r\n    if (!user || !user.accountType) {\r\n      return getCached(cachedStorage.Demo)\r\n    }\r\n  \r\n    if (user.accountType.name === 'DEMO') {\r\n      return getCached(cachedStorage.Demo)\r\n    }\r\n  \r\n    if (!user.email) {\r\n      throw new Error('User does not have a valid username/email for initializing storage.')\r\n    }\r\n  \r\n    if (!user.isPremium) {\r\n      return getCached(cachedStorage.Local, user.email)\r\n    }\r\n  \r\n    if (!isOnline) {\r\n      return getCached(cachedStorage.Offline, user.email)\r\n    }\r\n  \r\n    if (user.isPremium) {\r\n      return getCached(cachedStorage.Server, user.email)\r\n    }\r\n  \r\n    return getCached(cachedStorage.Local, user.email)\r\n  })\r\n}\r\n","import clone from 'lodash/clone'\r\nimport localForage from 'localforage'\r\nimport uniq from 'lodash/uniq'\r\n\r\nconst { orderPromises } = require('../../../utilities')\r\n\r\nclass DemoStorageApi {\r\n  constructor() {\r\n    localForage.setDriver(localForage.LOCALSTORAGE)\r\n    this.storage = localForage\r\n    window._storage = this.storage\r\n    this.getStorageKeys = () => this.storage.keys()\r\n\r\n    this.planKeyPrefix = documentGuid => `${documentGuid}_PLAN_DATA_`\r\n    this.planOrderKey = documentGuid => `${documentGuid}_PLAN_ORDER`\r\n    this.getPlanKey = (documentGuid, planGuid) => `${this.planKeyPrefix(documentGuid)}${planGuid}`\r\n\r\n    this.sectionKeyPrefix = (documentGuid, planGuid) => `${documentGuid}_SECTION_DATA_${planGuid}_`\r\n    this.sectionOrderKey = (documentGuid, planGuid) => `${documentGuid}_SECTION_ORDER_${planGuid}`\r\n    this.getSectionKey = (documentGuid, planGuid, sectionGuid) => `${this.sectionKeyPrefix(documentGuid, planGuid)}${sectionGuid}`\r\n\r\n    this.chapterKeyPrefix = documentGuid => `${documentGuid}_CHAPTER_DATA_`\r\n    this.chapterOrderKey = documentGuid => `${documentGuid}_CHAPTER_ORDER`\r\n    this.getChapterKey = (documentGuid, chapterGuid) => `${this.chapterKeyPrefix(documentGuid)}${chapterGuid}`\r\n\r\n    this.topicKeyPrefix = documentGuid => `${documentGuid}_TOPIC_DATA_`\r\n    this.topicOrderKey = documentGuid => `${documentGuid}_TOPIC_ORDER`\r\n    this.getTopicKey = (documentGuid, topicGuid) => `${this.topicKeyPrefix(documentGuid)}${topicGuid}`\r\n\r\n    this.documentGuidsKey = 'DOCUMENT_IDS'\r\n    this.documentsKey = documentGuid => `DOCUMENT_${documentGuid}`\r\n  }\r\n\r\n  // INFO\r\n  isPremium() {\r\n    return false\r\n  }\r\n\r\n  addDocument({ guid, name }) {\r\n    window.onbeforeunload = function () {\r\n      localStorage.clear()\r\n    }\r\n\r\n    return this._getAllDocumentGuids().then((documentGuids) => {\r\n      if (!documentGuids.includes(guid)) {\r\n        documentGuids.push(guid)\r\n        return this.storage.setItem(this.documentGuidsKey, documentGuids)\r\n      }\r\n    }).then(() => this.storage.setItem(this.documentsKey(guid), { guid, name }))\r\n  }\r\n\r\n  arrangeChapters(documentGuid, chapterGuids) {\r\n    return this.storage.setItem(this.chapterOrderKey(documentGuid), chapterGuids)\r\n  }\r\n\r\n  arrangePlans(documentGuid, planGuids) {\r\n    return this.storage.setItem(this.planOrderKey(documentGuid), planGuids)\r\n  }\r\n\r\n  arrangeSections(documentGuid, planGuid, sectionGuids) {\r\n    return this.storage.setItem(this.sectionOrderKey(documentGuid, planGuid), sectionGuids)\r\n  }\r\n\r\n  arrangeTopics(documentGuid, topicGuids) {\r\n    return this.storage.setItem(this.topicOrderKey(documentGuid), topicGuids)\r\n  }\r\n\r\n  deleteChapter(documentGuid, chapterGuid) {\r\n    const key = this.getChapterKey(documentGuid, chapterGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteDocument(guid) {\r\n    // Remove document from document list\r\n    return this._getAllDocumentGuids().then((documentGuids) => {\r\n      if (documentGuids.includes(guid)) {\r\n        documentGuids.splice(documentGuids.indexOf(guid), 1)\r\n      }\r\n\r\n      return this.storage.setItem(this.documentGuidsKey, documentGuids)\r\n    }).then(() =>\r\n      // Remove all content (chapters, plans, sections, topics)\r\n      Promise.all([\r\n        this._getAllChapters(guid).then(chapters =>\r\n          Promise.all(chapters.map(chapter => this.deleteChapter(guid, chapter.guid)))),\r\n        this._getAllPlans(guid).then(plans => Promise.all(plans.map(plan => this._getAllSections(guid, plan.guid).then(sections =>\r\n          Promise.all(sections.map(section => this.deleteSection(guid, plan.guid, section.guid)))).then(() => this.deletePlan(guid, plan.guid))))),\r\n        this._getAllTopics(guid).then(topics =>\r\n          Promise.all(topics.map(topic => this.deleteTopic(guid, topic.guid)))),\r\n      ]).then(() => this.storage.removeItem(this.documentsKey(guid))))\r\n  }\r\n\r\n  deletePlan(documentGuid, planGuid) {\r\n    const key = this.getPlanKey(documentGuid, planGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteSection(documentGuid, planGuid, sectionGuid) {\r\n    const key = this.getSectionKey(documentGuid, planGuid, sectionGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteTopic(documentGuid, topicGuid) {\r\n    const key = this.getTopicKey(documentGuid, topicGuid)\r\n    return this.storage.removeItem(key)\r\n  }\r\n\r\n  deleteWorkshop() {\r\n    // Not implemented here. Author-only feature.\r\n  }\r\n\r\n  _getAllChapters(documentGuid) {\r\n    const prefix = this.chapterKeyPrefix(documentGuid)\r\n\r\n    return Promise.all([\r\n      this._getChaptersSortOrder(documentGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix))),\r\n    ]).then(([sortOrder, keys]) => Promise.all(keys.map(key => this.storage.getItem(key))).then((chapters) => {\r\n      chapters.sort((chap1, chap2) => sortOrder.indexOf(chap1.guid) - sortOrder.indexOf(chap2.guid))\r\n\r\n      return chapters\r\n    }))\r\n  }\r\n\r\n  getAllChapters(documentGuid) {\r\n    return this._getAllChapters(documentGuid)\r\n  }\r\n\r\n  _getAllDocumentGuids() {\r\n    return this.storage.getItem(this.documentGuidsKey).then(guids => uniq(guids) || [])\r\n  }\r\n\r\n  _getAllDocuments() {\r\n    return this._getAllDocumentGuids().then(guids => Promise.all(guids.map((guid) => {\r\n      const key = this.documentsKey(guid)\r\n      return this.storage.getItem(key)\r\n    })))\r\n  }\r\n\r\n  getAllDocuments() {\r\n    return this._getAllDocuments()\r\n  }\r\n\r\n  _getAllPlans(documentGuid) {\r\n    const prefix = this.planKeyPrefix(documentGuid)\r\n\r\n    return Promise.all([\r\n      this._getPlansSortOrder(documentGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix))),\r\n    ]).then(([sortOrder, keys]) => Promise.all(keys.map(key => this.storage.getItem(key))).then(plans => Promise.all(plans.map(plan => this._getAllSections(documentGuid, plan.guid).then((sections) => {\r\n      plan.sections = sections\r\n    }))).then(() => {\r\n      plans.sort((plan1, plan2) => sortOrder.indexOf(plan1.guid) - sortOrder.indexOf(plan2.guid))\r\n      return plans\r\n    })))\r\n  }\r\n\r\n  getAllPlans(documentGuid) {\r\n    return this._getAllPlans(documentGuid)\r\n  }\r\n\r\n  _getAllSections(documentGuid, planGuid) {\r\n    const prefix = this.sectionKeyPrefix(documentGuid, planGuid)\r\n\r\n    return Promise.all([\r\n      this._getSectionSortOrder(documentGuid, planGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix))),\r\n    ]).then(([sortOrder, keys]) => Promise.all(keys.map(key => this.storage.getItem(key))).then((sections) => {\r\n      sections.sort((section1, section2) => sortOrder.indexOf(section1.guid) - sortOrder.indexOf(section2.guid))\r\n      return sections\r\n    }))\r\n  }\r\n\r\n  _getAllTopics(documentGuid) {\r\n    const prefix = this.topicKeyPrefix(documentGuid)\r\n\r\n    return Promise.all([\r\n      this._getTopicsSortOrder(documentGuid),\r\n      this.getStorageKeys().then(keys => keys.filter(key => key.startsWith(prefix))),\r\n    ]).then(([sortOrder, keys]) => Promise.all(keys.map(key => this.storage.getItem(key))).then((topics) => {\r\n      topics.sort((topic1, topic2) => sortOrder.indexOf(topic1.guid) - sortOrder.indexOf(topic2.guid))\r\n      return topics\r\n    }))\r\n  }\r\n\r\n  getAllTopics(documentGuid) {\r\n    return this._getAllTopics(documentGuid)\r\n  }\r\n\r\n  _getChaptersSortOrder(documentGuid) {\r\n    return this.storage.getItem(this.chapterOrderKey(documentGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  _getPlansSortOrder(documentGuid) {\r\n    return this.storage.getItem(this.planOrderKey(documentGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  _getSectionSortOrder(documentGuid, planGuid) {\r\n    return this.storage.getItem(this.sectionOrderKey(documentGuid, planGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  _getTopicsSortOrder(documentGuid) {\r\n    return this.storage.getItem(this.topicOrderKey(documentGuid)).then(sortOrder => sortOrder || [])\r\n  }\r\n\r\n  getAllWorkshops() {\r\n    // Not implemented here. Author-only feature.\r\n    return []\r\n  }\r\n\r\n  saveAllContent(documentGuid, { chapters, plans, topics }) {\r\n    return Promise.all([\r\n      Promise.all(chapters.map(chapter => this.updateChapter(documentGuid, chapter.guid, chapter))),\r\n      Promise.all(plans.map(plan => this.updatePlan(documentGuid, plan.guid, plan).then(() => Promise.all(plan.sections.map(section =>\r\n        this.updateSection(documentGuid, plan.guid, section.guid, section)))))),\r\n      Promise.all(topics.map(topic => this.updateTopic(documentGuid, topic.guid, topic))),\r\n    ])\r\n  }\r\n\r\n  updateChapter(documentGuid, chapterGuid, chapter) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getChapterKey(documentGuid, chapterGuid)\r\n    return Promise.all([\r\n      this.storage.setItem(key, chapter),\r\n      this._getChaptersSortOrder(documentGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(chapterGuid)) {\r\n          sortOrder.push(chapterGuid)\r\n          return this.arrangeChapters(documentGuid, sortOrder)\r\n        }\r\n      }),\r\n    ])\r\n  }\r\n\r\n  updateDocument({ guid, name }) {\r\n    return this.storage.setItem(this.documentsKey(guid), { guid, name })\r\n  }\r\n\r\n  updatePlan(documentGuid, planGuid, plan) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getPlanKey(documentGuid, planGuid)\r\n\r\n    plan = clone(plan)\r\n    plan.sections = null\r\n\r\n    return Promise.all([\r\n      this.storage.setItem(key, plan),\r\n      this._getPlansSortOrder(documentGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(planGuid)) {\r\n          sortOrder.push(planGuid)\r\n          return this.arrangePlans(documentGuid, sortOrder)\r\n        }\r\n      }),\r\n    ])\r\n  }\r\n\r\n  updateSection(documentGuid, planGuid, sectionGuid, section) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getSectionKey(documentGuid, planGuid, sectionGuid)\r\n\r\n    return Promise.all([\r\n      this.storage.setItem(key, section),\r\n      this._getSectionSortOrder(documentGuid, planGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(sectionGuid)) {\r\n          sortOrder.push(sectionGuid)\r\n          return this.arrangeSections(documentGuid, sortOrder)\r\n        }\r\n      }),\r\n    ])\r\n  }\r\n\r\n  updateTopic(documentGuid, topicGuid, topic) {\r\n    if (!documentGuid) {\r\n      return\r\n    }\r\n\r\n    const key = this.getTopicKey(documentGuid, topicGuid)\r\n\r\n    return Promise.all([\r\n      this.storage.setItem(key, topic),\r\n      this._getTopicsSortOrder(documentGuid).then((sortOrder = []) => {\r\n        if (!sortOrder.includes(topicGuid)) {\r\n          sortOrder.push(topicGuid)\r\n          return this.arrangeTopics(documentGuid, sortOrder)\r\n        }\r\n      }),\r\n    ])\r\n  }\r\n\r\n  updateWorkshops() {\r\n    // Not implemented here. Author-only feature.\r\n  }\r\n\r\n  /*\r\n    FULL EXPORT / IMPORT\r\n  */\r\n\r\n  docExport(guid, name) {\r\n    return Promise.all([\r\n      this._getAllChapters(guid),\r\n      this._getAllTopics(guid),\r\n      this._getAllPlans(guid).then(plans => Promise.all(plans.map((plan) => {\r\n        this._getAllSections(guid, plan.guid).then((sections) => {\r\n          plan.sections = sections\r\n          return plan\r\n        })\r\n      }))),\r\n    ]).then(([chapters, topics, plans]) => {\r\n      const doc = {\r\n        guid,\r\n        name,\r\n        chapters,\r\n        topics,\r\n        plans,\r\n      }\r\n      return doc\r\n    })\r\n  }\r\n\r\n  docImport(doc) {\r\n    let backup\r\n    return this.docExport(doc.guid).then((_backup) => {\r\n      backup = _backup\r\n    }).then(() => this.deleteDocument(doc.guid)).then(() => {\r\n      if (!doc) {\r\n        throw new Error('Attempted to import an empty backup')\r\n      }\r\n\r\n      return this.addDocument(doc).then(() => this.saveAllContent(doc.guid, doc))\r\n    })\r\n      .then(undefined, (err) => {\r\n        console.error(err)\r\n        return this.addDocument(backup).then(() => this.saveAllContent(backup.guid, backup))\r\n      })\r\n  }\r\n\r\n  getFullExport() {\r\n    return this._getAllDocuments().then(documents => Promise.all(documents.map(doc => Promise.all([\r\n      this._getAllChapters(doc.guid),\r\n      this._getAllTopics(doc.guid),\r\n      this._getAllPlans(doc.guid).then(plans => Promise.all(plans.map(plan =>\r\n        this._getAllSections(doc.guid, plan.guid).then((sections) => {\r\n          plan.sections = sections\r\n          return plan\r\n        })))),\r\n    ]).then(([chapters, topics, plans]) => {\r\n      doc.chapters = chapters\r\n      doc.topics = topics\r\n      doc.plans = plans\r\n      return doc\r\n    }))))\r\n  }\r\n\r\n  revertImport(backup) {\r\n    return (\r\n      Promise.all(Object.keys(backup).map(key => this.storage.setItem(key, backup[key])))\r\n        .then(undefined, (importErr) => {\r\n          console.error(importErr)\r\n          throw importErr\r\n        })\r\n    )\r\n  }\r\n\r\n  doFullImport(documents) {\r\n    const backup = {}\r\n\r\n    return this.storage.iterate((value, key) => {\r\n      backup[key] = value\r\n    }).then(() => this.storage.clear().then(() => {\r\n      if (!documents || !Array.isArray(documents) || !documents.length) {\r\n        throw new Error('Attempted to import an empty backup')\r\n      }\r\n\r\n      const addDocumentPromises = documents.map(doc =>\r\n        () => this.addDocument(doc).then(() => this.saveAllContent(doc.guid, doc)))\r\n\r\n      return orderPromises(addDocumentPromises)\r\n    })).then(undefined, (err) => {\r\n      console.error(err)\r\n      return this.revertImport(backup)\r\n    })\r\n  }\r\n}\r\n\r\nexport default DemoStorageApi\r\n","import Cache, { UNRESETTABLE } from '../shared/cache'\r\nimport clone from 'lodash/clone'\r\nimport localForage from 'localforage'\r\nimport VueInstance from '../../app'\r\n\r\nclass OfflineStorageApi {\r\n  constructor(username) {\r\n    if (!username) {\r\n      throw new Error('Username was not supplied for OfflineStorageApi.')\r\n    }\r\n\r\n    this.store = VueInstance.$store\r\n\r\n    this.requiresSyncCache = new Cache(`${UNRESETTABLE}_HAS_GONE_OFFLINE`)\r\n\r\n    localForage.setDriver([localForage.INDEXEDDB, localForage.WEBSQL, localForage.LOCALSTORAGE])\r\n    this.storage = localForage\r\n    window._storage = this.storage\r\n\r\n    this.offlinePrefix = '@OFFLINE'\r\n    this.docGuid = () => this.store.state.document.currentDocument.guid\r\n    this.docKey = () => `${this.offlinePrefix}_USER_${username}_DOCUMENT_${this.docGuid()}`\r\n  }\r\n\r\n  init() {\r\n    this.requiresSyncCache.cacheSet(true)\r\n    return Promise.resolve()\r\n  }\r\n\r\n  isPremium() {\r\n    return true\r\n  }\r\n\r\n  getLatestStoredDocument() {\r\n    return this.storage.keys().then((keys) => {\r\n      const docKey = keys.filter(key => key.startsWith(this.offlinePrefix))[0]\r\n      if (!docKey) {\r\n        return null\r\n      }\r\n      return this.storage.getItem(docKey)\r\n    })\r\n  }\r\n\r\n  getStoredDocument() {\r\n    return this.storage.getItem(this.docKey())\r\n  }\r\n\r\n  clearOldStorage() {\r\n    return this.storage.keys().then((keys) => {\r\n      const deletePromises = keys.filter(key => key.startsWith(this.offlinePrefix)).map(key => this.storage.removeItem(key))\r\n      return Promise.all(deletePromises)\r\n    })\r\n  }\r\n\r\n  updateStorage() {\r\n    const doc = clone(this.store.state.document.currentDocument)\r\n\r\n    if (!doc) {\r\n      console.warn('Document not yet loaded.')\r\n      return\r\n    }\r\n\r\n    doc.chapters = this.store.state.chapters.chapters\r\n    doc.topics = this.store.state.chapters.topics\r\n    doc.plans = this.store.state.chapters.plans\r\n    doc.workshops = this.store.state.workshop.workshops\r\n    return this.clearOldStorage().then(() => this.storage.setItem(this.docKey(), doc))\r\n  }\r\n\r\n  notAllowedError() {\r\n    throw new Error('This action is not available while offline.')\r\n  }\r\n\r\n  // Disallowed operations\r\n\r\n  addDocument() { return this.notAllowedError() }\r\n\r\n  deleteDocument() { return this.notAllowedError() }\r\n\r\n  // Storage updates\r\n\r\n  arrangeChapters() { return this.updateStorage() }\r\n\r\n  arrangePlans() { return this.updateStorage() }\r\n\r\n  arrangeSections() { return this.updateStorage() }\r\n\r\n  arrangeTopics() { return this.updateStorage() }\r\n\r\n  deleteChapter() { return this.updateStorage() }\r\n\r\n  deletePlan() { return this.updateStorage() }\r\n\r\n  deleteSection() { return this.updateStorage() }\r\n\r\n  deleteTopic() { return this.updateStorage() }\r\n\r\n  deleteWorkshop() { return this.updateStorage() }\r\n\r\n  saveAllContent() { return this.updateStorage() }\r\n\r\n  updateChapter() { return this.updateStorage() }\r\n\r\n  updateDocument() { return this.updateStorage() }\r\n\r\n  updatePlan() { return this.updateStorage() }\r\n\r\n  updateSection() { return this.updateStorage() }\r\n\r\n  updateTopic() { return this.updateStorage() }\r\n\r\n  updateWorkshops() { return this.updateStorage() }\r\n\r\n  getAllChapters(documentGuid) {\r\n    return this.getLatestStoredDocument().then(doc => {\r\n      if (documentGuid !== doc.guid) {\r\n        throw new Error('Cannot get chapters from a different document while offline.')\r\n      }\r\n\r\n      return doc.chapters\r\n    })\r\n  }\r\n\r\n  getAllDocuments() {\r\n    return this.getLatestStoredDocument().then(doc => (doc ? [doc] : []))\r\n  }\r\n\r\n  getAllPlans(documentGuid) {\r\n    return this.getLatestStoredDocument().then(doc => {\r\n      if (documentGuid !== doc.guid) {\r\n        throw new Error('Cannot get plans from a different document while offline.')\r\n      }\r\n\r\n      return doc.plans\r\n    })\r\n  }\r\n\r\n  getAllTopics(documentGuid) {\r\n    return this.getLatestStoredDocument().then(doc => {\r\n      if (documentGuid !== doc.guid) {\r\n        throw new Error('Cannot get topics from a different document while offline.')\r\n      }\r\n\r\n      return doc.topics\r\n    })\r\n  }\r\n\r\n  getAllWorkshops(documentGuid) {\r\n    return this.getLatestStoredDocument().then(doc => {\r\n      if (documentGuid !== doc.guid) {\r\n        throw new Error('Cannot get workshops from a different document while offline.')\r\n      }\r\n\r\n      return doc.workshops\r\n    })\r\n  }\r\n\r\n  /*\r\n    FULL EXPORT / IMPORT\r\n  */\r\n\r\n  docExport(guid) {\r\n    if (guid !== this.docGuid()) {\r\n      throw new Error('Cannot export a different document while offline.')\r\n    }\r\n\r\n    return this.getStoredDocument()\r\n  }\r\n\r\n  docImport() {\r\n    throw new Error('Cannot import a document while offline.')\r\n  }\r\n\r\n  getFullExport() {\r\n    throw new Error('Cannot export all documents while offline.')\r\n  }\r\n\r\n  doFullImport() {\r\n    throw new Error('Cannot do a full import while offline.')\r\n  }\r\n}\r\n\r\nexport default OfflineStorageApi\r\n","import api from './api'\r\nimport OfflineStorageApi from './offlineStorage'\r\nimport shallowEqualArrays from 'shallow-equal/arrays'\r\nimport VersionResolver from '../shared/versionResolver'\r\nimport VueInstance from '../../app'\r\nimport { SET_STATUS_DONE, SET_STATUS_ERROR, SET_STATUS_OFFLINE, SET_STATUS_SAVING } from '../shared/status.store'\r\nimport { LOAD_CONTENT } from '../shared/chapters.store'\r\nimport { LOAD_WORKSHOPS } from '../shared/workshops.store'\r\nimport debounce from 'lodash/debounce'\r\n\r\nclass ServerStorageApi {\r\n  constructor(username) {\r\n    if (!username) {\r\n      throw new Error('Username was not supplied for ServerStorageApi.')\r\n    }\r\n\r\n    let savingCounter = 0\r\n    const store = VueInstance.$store\r\n\r\n    this.offlineStorage = new OfflineStorageApi(username)\r\n\r\n    this.goOffline = () => {\r\n      store.commit(SET_STATUS_OFFLINE)\r\n      api.isOnlineCached = false\r\n      return this.offlineStorage.updateStorage()\r\n    }\r\n\r\n    const saving = () => {\r\n      savingCounter++\r\n      store.commit(SET_STATUS_SAVING)\r\n      return this.offlineStorage.updateStorage()\r\n    }\r\n\r\n    const done = (isError, isOffline) => {\r\n      savingCounter--\r\n      if (savingCounter > 0) {\r\n        return\r\n      }\r\n      savingCounter = 0\r\n\r\n      if (!isError) {\r\n        store.commit(SET_STATUS_DONE)\r\n        return\r\n      }\r\n\r\n      if (isOffline) {\r\n        this.goOffline()\r\n        return\r\n      }\r\n\r\n      store.commit(SET_STATUS_ERROR)\r\n    }\r\n\r\n    this.wrapStatus = (promise) => {\r\n      saving()\r\n      promise.then(\r\n        () => done(false),\r\n        () => {\r\n          api.isOnline().then(() => done(true, false), () => done(true, true))\r\n        },\r\n      )\r\n      return promise\r\n    }\r\n\r\n    const updateStorageAfterDebounced = debounce(promise => {\r\n      promise.then(() => this.offlineStorage.updateStorage())\r\n    }, 1000)\r\n\r\n    this.updateStorageAfter = promise => {\r\n      updateStorageAfterDebounced(promise)\r\n      return promise\r\n    }\r\n\r\n    this.waitUntilDone = () => new Promise((resolve, reject) => {\r\n      let counter = 0\r\n\r\n      const intervalId = window.setInterval(() => {\r\n        // Reject after waiting 10 seconds\r\n        if ((counter / 10) > 10) {\r\n          reject()\r\n          return\r\n        }\r\n\r\n        if (store.state.status.saving) {\r\n          counter++\r\n          return\r\n        }\r\n\r\n        window.clearInterval(intervalId)\r\n        resolve()\r\n      }, 100)\r\n    })\r\n\r\n    this.loadDocument = (document) => {\r\n      store.commit(LOAD_CONTENT, {\r\n        chapters: document.chapters || [],\r\n        plans: document.plans || [],\r\n        topics: document.topics || [],\r\n      })\r\n      store.commit(LOAD_WORKSHOPS, { workshops: document.workshops || [] })\r\n    }\r\n  }\r\n\r\n  init() {\r\n    if (!this.offlineStorage.requiresSyncCache.cacheGet()) {\r\n      return\r\n    }\r\n\r\n    return this.syncCache()\r\n  }\r\n\r\n  syncCache() {\r\n    const restoredToken = '[RESTORED]'\r\n\r\n    return this.offlineStorage.getLatestStoredDocument().then((offlineDoc) => {\r\n      if (!offlineDoc || !offlineDoc.guid) {\r\n        return\r\n      }\r\n\r\n      let resolvedDoc\r\n      return api.docExport(offlineDoc.guid).then((onlineDoc) => {\r\n        const matchBy = obj => obj && obj.guid\r\n        const markDeleted = (obj) => {\r\n          if (!obj) return\r\n\r\n          if (typeof obj.title !== 'string') {\r\n            obj.title = ''\r\n          }\r\n\r\n          if (obj.title.includes(restoredToken)) return\r\n\r\n          obj.title = `${obj.title} ${restoredToken}`\r\n        }\r\n\r\n        const resolvedChapters = VersionResolver.getMostRecentEach(onlineDoc.chapters, offlineDoc.chapters, matchBy, markDeleted)\r\n        const resolvedTopics = VersionResolver.getMostRecentEach(onlineDoc.topics, offlineDoc.topics, matchBy, markDeleted)\r\n        const resolvedPlans = VersionResolver.getMostRecentEach(onlineDoc.plans, offlineDoc.plans, matchBy, markDeleted)\r\n        const resolvedWorkshops = VersionResolver.getMostRecentEach(\r\n          onlineDoc.workshops, offlineDoc.workshops,\r\n          workshop => (workshop && workshop.guid ? `${workshop.guid}|${workshop.order}` : null), markDeleted,\r\n        )\r\n\r\n        const newDoc = {\r\n          name: offlineDoc.name,\r\n          chapters: resolvedChapters,\r\n          topics: resolvedTopics,\r\n          plans: resolvedPlans,\r\n          workshops: resolvedWorkshops,\r\n        }\r\n\r\n        if (\r\n          offlineDoc.name === onlineDoc.name &&\r\n          shallowEqualArrays(resolvedChapters, onlineDoc.chapters) &&\r\n          shallowEqualArrays(resolvedTopics, onlineDoc.topics) &&\r\n          shallowEqualArrays(resolvedPlans, onlineDoc.plans) &&\r\n          shallowEqualArrays(resolvedWorkshops, onlineDoc.workshops)\r\n        ) {\r\n          return\r\n        }\r\n\r\n        resolvedDoc = Object.assign(onlineDoc, newDoc)\r\n        return this.docImport(resolvedDoc)\r\n      }, () => {\r\n        resolvedDoc = offlineDoc\r\n        return this.docImport(offlineDoc)\r\n      }).then(() => this.offlineStorage.clearOldStorage()).then(() => {\r\n        this.loadDocument(resolvedDoc)\r\n      }, () => {\r\n        this.goOffline().then(() => {\r\n          throw new Error('Attempted to resolve a cached document and import it, but the doc import API threw an error.')\r\n        })\r\n      })\r\n    }).then(() => (\r\n      this.offlineStorage.clearOldStorage()\r\n        .then(() => this.offlineStorage.updateStorage())\r\n        .then(() => this.offlineStorage.requiresSyncCache.cacheSet(false))\r\n    ))\r\n  }\r\n\r\n  // INFO\r\n\r\n  isPremium() {\r\n    return true\r\n  }\r\n\r\n  // DOCUMENTS\r\n\r\n  addDocument({ guid, name }) {\r\n    return this.wrapStatus(api.addDocument({ guid, name }).catch((err) => {\r\n      throw err\r\n    }))\r\n  }\r\n\r\n  getAllDocuments() {\r\n    return api.getDocuments()\r\n  }\r\n\r\n  deleteDocument(guid) {\r\n    return this.wrapStatus(api.deleteDocument({ guid }))\r\n  }\r\n\r\n  updateDocument({ guid, name }) {\r\n    return this.wrapStatus(api.updateDocument({ guid, name }))\r\n  }\r\n\r\n  // ARRANGE\r\n\r\n  arrangeChapters(documentGuid, chapterGuids) {\r\n    return this.wrapStatus(api.arrangeChapters({ documentGuid, chapterGuids }))\r\n  }\r\n\r\n  arrangePlans(documentGuid, planGuids) {\r\n    return this.wrapStatus(api.arrangePlans({ documentGuid, planGuids }))\r\n  }\r\n\r\n  arrangeSections(documentGuid, planGuid, sectionGuids) {\r\n    return this.wrapStatus(api.arrangeSections({ documentGuid, planGuid, sectionGuids }))\r\n  }\r\n\r\n  arrangeTopics(documentGuid, topicGuids) {\r\n    return this.wrapStatus(api.arrangeTopics({ documentGuid, topicGuids }))\r\n  }\r\n\r\n  // DELETE\r\n\r\n  deleteChapter(documentGuid, chapterGuid) {\r\n    return this.wrapStatus(api.deleteChapter({ documentGuid, chapterGuid }))\r\n  }\r\n\r\n  deletePlan(documentGuid, planGuid) {\r\n    return this.wrapStatus(api.deletePlan({ documentGuid, planGuid }))\r\n  }\r\n\r\n  deleteSection(documentGuid, planGuid, sectionGuid) {\r\n    return this.wrapStatus(api.deleteSection({ documentGuid, planGuid, sectionGuid }))\r\n  }\r\n\r\n  deleteTopic(documentGuid, topicGuid) {\r\n    return this.wrapStatus(api.deleteTopic({ documentGuid, topicGuid }))\r\n  }\r\n\r\n  deleteWorkshop(documentGuid, workshopGuid) {\r\n    return this.wrapStatus(api.deleteWorkshopContent({ documentGuid, guid: workshopGuid }))\r\n  }\r\n\r\n  // GET\r\n\r\n  getAllChapters(documentGuid) {\r\n    return this.updateStorageAfter(api.getChapters(documentGuid))\r\n  }\r\n\r\n  getAllPlans(documentGuid) {\r\n    return this.updateStorageAfter(api.getPlans(documentGuid))\r\n  }\r\n\r\n  getAllTopics(documentGuid) {\r\n    return this.updateStorageAfter(api.getTopics(documentGuid))\r\n  }\r\n\r\n  getAllWorkshops(documentGuid) {\r\n    return this.updateStorageAfter(api.getWorkshops(documentGuid))\r\n  }\r\n\r\n  // UPDATE\r\n\r\n  updateChapter(documentGuid, chapterGuid, chapter) {\r\n    return this.wrapStatus(api.updateChapter({ documentGuid, chapterGuid, chapter }))\r\n  }\r\n\r\n  updatePlan(documentGuid, planGuid, plan) {\r\n    return this.wrapStatus(api.updatePlan({ documentGuid, planGuid, plan }))\r\n  }\r\n\r\n  updateSection(documentGuid, planGuid, sectionGuid, section) {\r\n    return this.wrapStatus(api.updateSection({\r\n      documentGuid, planGuid, sectionGuid, section,\r\n    }))\r\n  }\r\n\r\n  updateTopic(documentGuid, topicGuid, topic) {\r\n    return this.wrapStatus(api.updateTopic({ documentGuid, topicGuid, topic }))\r\n  }\r\n\r\n  updateWorkshops(documentGuid, workshops) {\r\n    return this.wrapStatus(api.updateWorkshopContents({ documentGuid, workshops }))\r\n  }\r\n\r\n  saveAllContent(documentGuid, { chapters, plans, topics }) {\r\n    return this.waitUntilDone().then(() => this.wrapStatus(api.saveAllContent({\r\n      documentGuid, chapters, plans, topics,\r\n    })))\r\n  }\r\n\r\n  // EXPORT/IMPORT\r\n\r\n  docExport(documentGuid) {\r\n    return api.docExport(documentGuid)\r\n  }\r\n\r\n  docImport(doc) {\r\n    return api.docImport(doc)\r\n  }\r\n\r\n  fullExport() {\r\n    return api.fullExport().then(data => JSON.stringify(data))\r\n  }\r\n\r\n  fullImport(json) {\r\n    const data = JSON.parse(json)\r\n    return api.fullImport(data)\r\n  }\r\n\r\n  exportToWord({ guid, title, includeArchived }) {\r\n    return api.exportToWord({ guid, title, includeArchived })\r\n  }\r\n}\r\n\r\nexport default ServerStorageApi\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IdleWatcher.vue?vue&type=style&index=0&id=98693c92&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IdleWatcher.vue?vue&type=style&index=0&id=98693c92&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./composer.page.vue?vue&type=style&index=0&id=0adf0965&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./composer.page.vue?vue&type=style&index=0&id=0adf0965&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./match.vue?vue&type=style&index=0&id=63f98196&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./match.vue?vue&type=style&index=0&id=63f98196&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textMagnifier.vue?vue&type=style&index=0&id=2b7f0647&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textMagnifier.vue?vue&type=style&index=0&id=2b7f0647&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textMap.vue?vue&type=style&index=0&id=0a50dd92&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textMap.vue?vue&type=style&index=0&id=0a50dd92&scoped=true&lang=css&\"","const createWorkshop = function (name, displayName, description, route, available) {\r\n  return { name: name, displayName: displayName, description: description, route: route, available: available }\r\n}\r\n\r\nconst workshops = {\r\n  FREE_WRITE: createWorkshop('FREE_WRITE', 'Free Writing',\r\n    'Warm up with a brief writing session. No prompts, no rules. Limit by time or word count.',\r\n    '/workshop/free-write', true),\r\n  NOVEL_QUICKSTART: createWorkshop('NOVEL_QUICKSTART', 'Novel Quickstart',\r\n    'Answer a few basic prompts to get ideas flowing for your novel.',\r\n    '/workshop/novel-quickstart', true),\r\n  WRITERS_UNBLOCK: createWorkshop('WRITERS_UNBLOCK', 'Writer\\'s Unblock',\r\n    'Got writer\\'s block? Get moving again by doing a word incorporation exercise.',\r\n    '/workshop/unblock', true),\r\n  PLOT_WORKSHOP: createWorkshop('PLOT_WORKSHOP', 'Plot & Character Workshop',\r\n    'Figure out what happens next and develop your characters by responding to curated prompts.',\r\n    '/workshop/plot', true),\r\n  SETTING_WORKSHOP: createWorkshop('SETTING_WORKSHOP', 'Setting Workshop',\r\n    'Build a stronger sense of place by exploring the setting of your novel.',\r\n    '/workshop/setting', true)\r\n}\r\n\r\nexport default workshops\r\n","// Complete an array of promises in order, each one waiting for the previous one to resolve\r\nfunction orderPromises(promiseFns) {\r\n  if (!Array.isArray(promiseFns) || (promiseFns.length && typeof promiseFns[0] !== 'function')) {\r\n    throw new TypeError(`orderPromises expects an array of functions. Received: ${JSON.stringify(promiseFns)}`)\r\n  }\r\n\r\n  if (!promiseFns.length) {\r\n    return Promise.resolve()\r\n  }\r\n\r\n  const promise = promiseFns[0]()\r\n\r\n  if (!promise.then) {\r\n    throw new TypeError(`A function in the array passed to orderPromises did not return a promise. Returned: ${JSON.stringify(promise)}`)\r\n  }\r\n\r\n  return promise.then(() => orderPromises(promiseFns.slice(1)))\r\n}\r\n\r\n// getNewLine, getNewSegment, getStyles, getStyledArrayFromChapters:\r\n// From an array of Edward chapters, produce an array of Line objects.\r\n// Line { text: string | Segment[], style: string | string[], pageBreak: undefined | 'before' }\r\n// Segment { text: string, style: string[] }\r\n// Line style strings: h1|h2|h3|blockquote|ul|ol|chapterHeading\r\n// Segment style strings: bold|italic|underline|strike\r\n\r\nfunction getNewLine() {\r\n  return {\r\n    text: [],\r\n    style: [],\r\n  }\r\n}\r\n\r\nfunction getNewSegment(text, style) {\r\n  return {\r\n    text: text || '',\r\n    style: style || [],\r\n  }\r\n}\r\n\r\nconst listMap = {\r\n  bullet: 'ul',\r\n  ordered: 'ol',\r\n}\r\nfunction getStyles(attributes) {\r\n  const styles = []\r\n  const lineStyles = []\r\n\r\n  if (!attributes) {\r\n    return { styles, lineStyles }\r\n  }\r\n\r\n  for (const attr in attributes) {\r\n    if (['bold', 'italic', 'underline', 'strike'].includes(attr)) {\r\n      styles.push(attr)\r\n      continue\r\n    }\r\n\r\n    if (attr === 'header') {\r\n      lineStyles.push(`h${attributes[attr]}`)\r\n      continue\r\n    }\r\n\r\n    if (attr === 'blockquote') {\r\n      lineStyles.push('blockquote')\r\n      continue\r\n    }\r\n\r\n    if (attr === 'list') {\r\n      lineStyles.push(listMap[attributes[attr]])\r\n      continue\r\n    }\r\n  }\r\n\r\n  return { styles, lineStyles }\r\n}\r\n\r\nfunction getStyledArrayFromChapters(chapters) {\r\n  const splitContent = []\r\n\r\n  for (const chapter of chapters) {\r\n    splitContent.push({\r\n      text: chapter.title,\r\n      style: 'chapterHeading',\r\n      pageBreak: 'before',\r\n    })\r\n\r\n    let currentLine = getNewLine()\r\n    const ops = (chapter.content && chapter.content.ops) || []\r\n    for (const op of ops) {\r\n      const insert = op.insert\r\n      const { styles, lineStyles } = getStyles(op.attributes)\r\n\r\n      if (lineStyles.length) {\r\n        currentLine.style.push(...lineStyles)\r\n      }\r\n\r\n      if (insert === '\\n') {\r\n        splitContent.push(currentLine)\r\n        currentLine = getNewLine()\r\n        continue\r\n      }\r\n\r\n      if (insert.includes('\\n')) {\r\n        const [first, ...lines] = insert.split('\\n')\r\n        if (first) {\r\n          const segment = getNewSegment(first, styles)\r\n          currentLine.text.push(segment)\r\n        }\r\n\r\n        splitContent.push(currentLine)\r\n        currentLine = getNewLine()\r\n\r\n        for (let ix = 0; ix < lines.length - 1; ix++) {\r\n          const line = lines[ix]\r\n          const segment = getNewSegment(line, styles)\r\n          currentLine.text.push(segment)\r\n\r\n          splitContent.push(currentLine)\r\n          currentLine = getNewLine()\r\n        }\r\n\r\n        const last = lines[lines.length - 1]\r\n        const segment = getNewSegment(last, styles)\r\n        currentLine.text.push(segment)\r\n\r\n        continue\r\n      }\r\n\r\n      const segment = getNewSegment(insert, styles)\r\n      currentLine.text.push(segment)\r\n    }\r\n  }\r\n\r\n  return splitContent\r\n}\r\n\r\nexport {\r\n  orderPromises,\r\n  getStyledArrayFromChapters\r\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentMenu.vue?vue&type=style&index=0&id=d0d7d372&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./documentMenu.vue?vue&type=style&index=0&id=d0d7d372&scoped=true&lang=css&\"","import TrimEnd from 'lodash/trimEnd'\r\nimport TrimStart from 'lodash/trimStart'\r\n\r\nimport DeltaToHtmlConverter from 'quill-delta-to-html'\r\n\r\nexport const GetContentString = (delta) => {\r\n  if (!delta || !delta.ops) {\r\n    return ''\r\n  }\r\n\r\n  const inserts = delta.ops.map(op => op.insert || '')\r\n  const joined = inserts.join('')\r\n  return joined.trim().length ? joined : ''\r\n}\r\n\r\nconst wordStartRe = /^[a-zA-Z0-9'\\-_@&]/\r\nconst wordContentRe = /[a-zA-Z0-9]+/\r\nexport const GetWordArray = (delta) => {\r\n  const content = GetContentString(delta)\r\n  const tokens = content.split(/\\s/g)\r\n  return tokens.map((token) => {\r\n    token = TrimEnd(token, '.,;:?!\"\\'`')\r\n    token = TrimStart(token, '\"\\'`')\r\n    return token\r\n  }).filter(token =>\r\n    wordStartRe.test(token) && wordContentRe.test(token))\r\n}\r\nexport const GetHtml = (delta) => {\r\n  if (!delta || !delta.ops) {\r\n    return ''\r\n  }\r\n\r\n  const converter = new DeltaToHtmlConverter(delta.ops, {})\r\n  return converter.convert()\r\n}\r\n\r\n// Inspired by Tim Down\r\n// https://stackoverflow.com/a/3410557/4347245\r\nexport const GetIndicesOf = (search, str) => {\r\n  const fullString = str.toLowerCase()\r\n  const searchString = search.toLowerCase()\r\n\r\n  const searchStringLength = searchString.length\r\n  if (searchStringLength === 0 || !fullString.trim()) {\r\n    return []\r\n  }\r\n\r\n  const indices = []\r\n  let startIndex = 0\r\n  let index = fullString.indexOf(searchString, startIndex)\r\n  while (index > -1) {\r\n    indices.push(index)\r\n    startIndex = index + searchStringLength\r\n    index = fullString.indexOf(searchString, startIndex)\r\n  }\r\n\r\n  return indices\r\n}\r\n","const cacheKeysStorage = '_all-cache-keys'\r\nconst allCacheKeys = JSON.parse(window.localStorage.getItem(cacheKeysStorage)) || []\r\n\r\nexport const UNRESETTABLE = 'UNRESETTABLE'\r\n\r\nexport function resetCache() {\r\n  for (const key of allCacheKeys) {\r\n    window.localStorage.removeItem(key)\r\n  }\r\n  allCacheKeys.splice(0, allCacheKeys.length)\r\n  window.localStorage.setItem(cacheKeysStorage, JSON.stringify([]))\r\n}\r\n\r\nclass Cache {\r\n  constructor(key) {\r\n    this.key = key\r\n    if (!key.includes(UNRESETTABLE)) {\r\n      allCacheKeys.push(key)\r\n    }\r\n    window.localStorage.setItem(cacheKeysStorage, JSON.stringify(allCacheKeys))\r\n  }\r\n\r\n  cacheDelete() {\r\n    window.localStorage.removeItem(this.key)\r\n  }\r\n\r\n  cacheGet() {\r\n    return JSON.parse(window.localStorage.getItem(this.key))\r\n  }\r\n\r\n  cacheSet(val) {\r\n    window.localStorage.setItem(this.key, JSON.stringify(val))\r\n  }\r\n}\r\n\r\nexport default Cache\r\n","import difference from 'lodash/difference'\r\nimport VersionResolver from './versionResolver'\r\n\r\n// These two commands will be used together\r\nexport const NUKE_CONTENT = 'NUKE_CONTENT'\r\nexport const LOAD_CONTENT = 'LOAD_CONTENT'\r\n\r\n// PLANS have SECTIONS\r\n// CHAPTERS have TOPICS (chapterTopics)\r\n// DOCUMENTS have TOPICS (masterTopics)\r\n// Each masterTopic has a corresponding chapterTopic in each chapter\r\n\r\nexport const ADD_PLAN = 'ADD_PLAN'\r\nexport const ARCHIVE_PLAN = 'ARCHIVE_PLAN'\r\nexport const DELETE_PLAN = 'DELETE_PLAN'\r\nexport const REARRANGE_PLANS = 'REARRANGE_PLANS'\r\nexport const RESTORE_PLAN = 'RESTORE_PLAN'\r\nexport const UPDATE_PLAN = 'UPDATE_PLAN'\r\n\r\nexport const ADD_SECTION = 'ADD_SECTION'\r\nexport const ARCHIVE_SECTION = 'ARCHIVE_SECTION'\r\nexport const DELETE_SECTION = 'DELETE_SECTION'\r\nexport const REARRANGE_SECTIONS = 'REARRANGE_SECTIONS'\r\nexport const RESTORE_SECTION = 'RESTORE_SECTION'\r\nexport const UPDATE_SECTION = 'UPDATE_SECTION'\r\nexport const UPDATE_SECTION_CONTENT = 'UPDATE_SECTION_CONTENT'\r\nexport const UPDATE_SECTION_TAGS = 'UPDATE_SECTION_TAGS'\r\n\r\nexport const ADD_CHAPTER = 'ADD_CHAPTER'\r\nexport const ADD_TOPIC_TO_CHAPTER = 'ADD_TOPIC_TO_CHAPTER'\r\nexport const ARCHIVE_CHAPTER = 'ARCHIVE_CHAPTER'\r\nexport const DELETE_CHAPTER = 'DELETE_CHAPTER'\r\nexport const REARRANGE_CHAPTERS = 'REARRANGE_CHAPTERS'\r\nexport const RESTORE_CHAPTER = 'RESTORE_CHAPTER'\r\nexport const UPDATE_CHAPTER = 'UPDATE_CHAPTER'\r\nexport const UPDATE_CHAPTER_CONTENT = 'UPDATE_CHAPTER_CONTENT'\r\n\r\nexport const ADD_TOPIC = 'ADD_TOPIC'\r\nexport const ARCHIVE_TOPIC = 'ARCHIVE_TOPIC'\r\nexport const DELETE_TOPIC = 'DELETE_TOPIC'\r\nexport const REARRANGE_TOPICS = 'REARRANGE_TOPICS'\r\nexport const RESTORE_TOPIC = 'RESTORE_TOPIC'\r\nexport const UPDATE_TOPIC = 'UPDATE_TOPIC'\r\nexport const UPDATE_TOPIC_CONTENT = 'UPDATE_TOPIC_CONTENT'\r\n\r\nconst store = {\r\n  state: {\r\n    // plan [{ archived bool false, guid Guid, title string, sections [section] }]\r\n    // section { archived bool false, content Delta null, guid Guid, tags [string], title string }\r\n    plans: [],\r\n    // chapters [{ archived bool false, content Delta null, guid Guid, title string, topics topicDict {} }]\r\n    // topicDict { [guid]: chapterTopic }\r\n    // chapterTopic { content Delta null, guid Guid }\r\n    chapters: [],\r\n    // topic [{ archived bool false, guid Guid, title string }]\r\n    topics: [],\r\n  },\r\n  mutations: {\r\n    // CONTENT\r\n    [NUKE_CONTENT](state) {\r\n      state.plans = []\r\n      state.chapters = []\r\n      state.topics = []\r\n    },\r\n    [LOAD_CONTENT](state, { plans, chapters, topics }) {\r\n      state.plans = plans\r\n      state.chapters = chapters\r\n      state.topics = topics\r\n    },\r\n    // PLANS\r\n    [ADD_PLAN](state, { plan }) {\r\n      VersionResolver.timestamp(plan)\r\n      state.plans.push(plan)\r\n    },\r\n    [ARCHIVE_PLAN](state, { plan }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`ARCHIVE_PLAN: Cannot archive plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      plan.archived = true\r\n    },\r\n    [DELETE_PLAN](state, { plan }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`DELETE_PLAN: Cannot delete plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      state.plans.splice(state.plans.indexOf(plan), 1)\r\n    },\r\n    [REARRANGE_PLANS](state, { plans }) {\r\n      if (!containSameElements(state.plans, plans)) {\r\n        throw new Error('REARRANGE_PLANS: Cannot rearrange plans: an invalid plan array was received.')\r\n      }\r\n\r\n      VersionResolver.timestampEach(plans)\r\n      state.plans = plans\r\n    },\r\n    [RESTORE_PLAN](state, { plan }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`RESTORE_PLAN: Cannot restore plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      plan.archived = false\r\n    },\r\n    [UPDATE_PLAN](state, { plan, newTitle }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`UPDATE_PLAN: Cannot update plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      plan.title = newTitle\r\n    },\r\n    // SECTIONS\r\n    [ADD_SECTION](state, { plan, section }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`ADD_SECTION: Cannot mutate plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      VersionResolver.timestamp(section)\r\n      plan.sections.push(section)\r\n    },\r\n    [ARCHIVE_SECTION](state, { plan, section }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`ARCHIVE_SECTION: Cannot archive section of plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      if (!plan.sections.includes(section)) {\r\n        throw new Error(`ARCHIVE_SECTION: Cannot archive section \"${section.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      VersionResolver.timestamp(section)\r\n      section.archived = true\r\n    },\r\n    [DELETE_SECTION](state, { plan, section }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`DELETE_SECTION: Cannot delete section of plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      if (!plan.sections.includes(section)) {\r\n        throw new Error(`DELETE_SECTION: Cannot delete section \"${section.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      VersionResolver.timestamp(section)\r\n      plan.sections.splice(plan.sections.indexOf(section), 1)\r\n    },\r\n    [REARRANGE_SECTIONS](state, { plan, sections }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`REARRANGE_SECTIONS: Cannot rearrange sections of plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      if (!containSameElements(plan.sections, sections)) {\r\n        throw new Error('REARRANGE_SECTIONS: Cannot rearrange sections: an invalid section array was received.')\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      VersionResolver.timestampEach(sections)\r\n      plan.sections = sections\r\n    },\r\n    [RESTORE_SECTION](state, { plan, section }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`RESTORE_SECTION: Cannot restore section of plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      if (!plan.sections.includes(section)) {\r\n        throw new Error(`RESTORE_SECTION: Cannot restore section \"${section.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      VersionResolver.timestamp(section)\r\n      section.archived = false\r\n    },\r\n    [UPDATE_SECTION](state, { plan, section, newTitle }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`UPDATE_SECTION: Cannot update section of plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      if (!plan.sections.includes(section)) {\r\n        throw new Error(`UPDATE_SECTION: Cannot update section \"${section.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      VersionResolver.timestamp(section)\r\n      section.title = newTitle\r\n    },\r\n    [UPDATE_SECTION_CONTENT](state, { plan, section, newContent }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`UPDATE_SECTION_CONTENT: Cannot update section of plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      if (!plan.sections.includes(section)) {\r\n        throw new Error(`UPDATE_SECTION_CONTENT: Cannot update section \"${section.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      VersionResolver.timestamp(section)\r\n      section.content = newContent\r\n    },\r\n    [UPDATE_SECTION_TAGS](state, { plan, section, newTags }) {\r\n      if (!state.plans.includes(plan)) {\r\n        throw new Error(`UPDATE_SECTION_TAGS: Cannot update section of plan \"${plan.title}\": does not exist.`)\r\n      }\r\n\r\n      if (!plan.sections.includes(section)) {\r\n        throw new Error(`UPDATE_SECTION_TAGS: Cannot update section \"${section.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(plan)\r\n      VersionResolver.timestamp(section)\r\n      section.tags = newTags\r\n    },\r\n    // CHAPTERS\r\n    [ADD_CHAPTER](state, { chapter }) {\r\n      VersionResolver.timestamp(chapter)\r\n      state.chapters.push(chapter)\r\n    },\r\n    [ADD_TOPIC_TO_CHAPTER](state, { chapter, topic }) {\r\n      if (!state.chapters.includes(chapter)) {\r\n        throw new Error(`ADD_TOPIC_TO_CHAPTER: Cannot mutate chapter \"${chapter.title}\": does not exist.`)\r\n      }\r\n\r\n      if (!state.topics.includes(topic)) {\r\n        throw new Error(`ADD_TOPIC_TO_CHAPTER: Cannot include topic \"${topic.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(chapter)\r\n      chapter.topics[topic.guid] = {\r\n        content: null,\r\n        guid: topic.guid,\r\n      }\r\n    },\r\n    [ARCHIVE_CHAPTER](state, { chapter }) {\r\n      if (!state.chapters.includes(chapter)) {\r\n        throw new Error(`ARCHIVE_CHAPTER: Cannot archive chapter \"${chapter.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(chapter)\r\n      chapter.archived = true\r\n    },\r\n    [DELETE_CHAPTER](state, { chapter }) {\r\n      if (!state.chapters.includes(chapter)) {\r\n        throw new Error(`DELETE_CHAPTER: Cannot delete chapter \"${chapter.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(chapter)\r\n      state.chapters.splice(state.chapters.indexOf(chapter), 1)\r\n    },\r\n    [REARRANGE_CHAPTERS](state, { chapters }) {\r\n      if (!containSameElements(state.chapters, chapters)) {\r\n        throw new Error('REARRANGE_CHAPTERS: Cannot rearrange chapters: an invalid chapter array was received.')\r\n      }\r\n\r\n      VersionResolver.timestampEach(chapters)\r\n      state.chapters = chapters\r\n    },\r\n    [RESTORE_CHAPTER](state, { chapter }) {\r\n      if (!state.chapters.includes(chapter)) {\r\n        throw new Error(`RESTORE_CHAPTER: Cannot restore chapter \"${chapter.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(chapter)\r\n      chapter.archived = false\r\n    },\r\n    [UPDATE_CHAPTER](state, { chapter, newTitle }) {\r\n      if (!state.chapters.includes(chapter)) {\r\n        throw new Error(`UPDATE_CHAPTER: Cannot update chapter \"${chapter.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(chapter)\r\n      chapter.title = newTitle\r\n    },\r\n    [UPDATE_CHAPTER_CONTENT](state, { chapter, newContent }) {\r\n      if (!state.chapters.includes(chapter)) {\r\n        throw new Error(`UPDATE_CHAPTER_CONTENT: Cannot update content of chapter \"${chapter.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(chapter)\r\n      chapter.content = newContent\r\n    },\r\n    // TOPICS\r\n    [ADD_TOPIC](state, { topic }) {\r\n      VersionResolver.timestamp(topic)\r\n      state.topics.push(topic)\r\n    },\r\n    [ARCHIVE_TOPIC](state, { topic }) {\r\n      if (!state.topics.includes(topic)) {\r\n        throw new Error(`ARCHIVE_TOPIC: Cannot archive topic \"${topic.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(topic)\r\n      topic.archived = true\r\n    },\r\n    [DELETE_TOPIC](state, { topic }) {\r\n      if (!state.topics.includes(topic)) {\r\n        throw new Error(`DELETE_TOPIC: Cannot archive topic \"${topic.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(topic)\r\n      state.topics.splice(state.topics.indexOf(topic), 1)\r\n\r\n      state.chapters = state.chapters.map((chapter) => {\r\n        if (chapter.topics[topic.guid]) {\r\n          delete chapter.topics[topic.guid]\r\n        }\r\n\r\n        return chapter\r\n      })\r\n    },\r\n    [REARRANGE_TOPICS](state, { topics }) {\r\n      if (!containSameElements(state.topics, topics)) {\r\n        throw new Error('REARRANGE_TOPICS: Cannot rearrange topics: an invalid topic array was received.')\r\n      }\r\n\r\n      VersionResolver.timestampEach(topics)\r\n      state.topics = topics\r\n    },\r\n    [RESTORE_TOPIC](state, { topic }) {\r\n      if (!state.topics.includes(topic)) {\r\n        throw new Error(`RESTORE_TOPIC: Cannot restore topic \"${topic.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(topic)\r\n      topic.archived = false\r\n    },\r\n    [UPDATE_TOPIC](state, { topic, newTitle }) {\r\n      if (!state.topics.includes(topic)) {\r\n        throw new Error(`UPDATE_TOPIC: Cannot update topic \"${topic.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(topic)\r\n      topic.title = newTitle\r\n    },\r\n    [UPDATE_TOPIC_CONTENT](state, { chapter, topic, newContent }) {\r\n      if (!state.chapters.includes(chapter)) {\r\n        throw new Error(`UPDATE_TOPIC_CONTENT: Cannot update topic content for chapter \"${chapter.title}\": does not exist.`)\r\n      }\r\n\r\n      if (!state.topics.find(masterTopic => masterTopic.guid === topic.guid)) {\r\n        throw new Error(`UPDATE_TOPIC_CONTENT: Cannot update content of topic \"${topic.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(topic)\r\n      topic.content = newContent\r\n    },\r\n  },\r\n}\r\n\r\nfunction containSameElements(arr1, arr2) {\r\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) {\r\n    return false\r\n  }\r\n\r\n  if (arr1.length !== arr2.length) {\r\n    return false\r\n  }\r\n\r\n  const diff = [...difference(arr1, arr2), ...difference(arr2, arr1)]\r\n\r\n  return diff.length === 0\r\n}\r\n\r\nexport default store\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mainMenu.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mainMenu.vue?vue&type=style&index=1&lang=css&\"","export const SET_STATUS_DONE = 'SET_STATUS_DONE'\r\nexport const SET_STATUS_ERROR = 'SET_STATUS_ERROR'\r\nexport const SET_STATUS_OFFLINE = 'SET_STATUS_OFFLINE'\r\nexport const SET_STATUS_SAVING = 'SET_STATUS_SAVING'\r\n\r\nexport const Statuses = {\r\n  SAVED: 'SAVED',\r\n  SAVING: 'SAVING',\r\n  ERROR: 'ERROR',\r\n  OFFLINE: 'OFFLINE',\r\n}\r\n\r\nconst store = {\r\n  state: {\r\n    status: Statuses.SAVED,\r\n  },\r\n  mutations: {\r\n    [SET_STATUS_DONE](state) {\r\n      state.status = Statuses.SAVED\r\n    },\r\n    [SET_STATUS_ERROR](state) {\r\n      state.status = Statuses.ERROR\r\n    },\r\n    [SET_STATUS_OFFLINE](state) {\r\n      state.status = Statuses.OFFLINE\r\n    },\r\n    [SET_STATUS_SAVING](state) {\r\n      if (state.status !== Statuses.OFFLINE) {\r\n        state.status = Statuses.SAVING\r\n      }\r\n    },\r\n  },\r\n}\r\n\r\nexport default store\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=c70852e8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=c70852e8&scoped=true&lang=css&\"","import Cache, { resetCache } from './cache'\r\nimport { storageApiPromise } from '../api/storageSwitch'\r\nimport guid from './guid'\r\nimport { LOAD_CONTENT, NUKE_CONTENT } from './chapters.store'\r\nimport { LOAD_WORKSHOPS, NUKE_WORKSHOPS } from './workshops.store'\r\n\r\nexport const ADD_DOCUMENT = 'ADD_DOCUMENT'\r\nexport const CHANGE_DOCUMENT = 'CHANGE_DOCUMENT'\r\nexport const DELETE_DOCUMENT = 'DELETE_DOCUMENT'\r\nexport const INIT_DOCUMENTS = 'INIT_DOCUMENTS'\r\nexport const REMOVE_OWNED_DOCUMENT = 'REMOVE_OWNED_DOCUMENT'\r\nexport const SET_UP_DOCUMENT = 'SET_UP_DOCUMENT'\r\nexport const UNLOAD_CURRENT_DOCUMENT = 'UNLOAD_CURRENT_DOCUMENT'\r\nexport const UPDATE_DOCUMENT_NAME = 'UPDATE_DOCUMENT_NAME'\r\n\r\nconst LOAD_DOCUMENTS = 'LOAD_DOCUMENTS'\r\nconst UPDATE_DOCUMENT_METADATA = 'UPDATE_DOCUMENT_METADATA'\r\n\r\n// Cache the document currently in progress\r\nconst cache = new Cache('CURRENT_DOCUMENT')\r\n\r\nconst store = {\r\n  state: {\r\n    currentDocument: null, // document { guid String, name String }\r\n    ownedDocuments: [], // document[]\r\n  },\r\n  actions: {\r\n    [CHANGE_DOCUMENT]({ commit, dispatch }, { guid, name, shouldReset }) {\r\n      return dispatch(UNLOAD_CURRENT_DOCUMENT, { shouldReset }).then(() => storageApiPromise().then((storage) => {\r\n        // Get the new document from storage\r\n        const promises = [\r\n          storage.getAllChapters(guid),\r\n          storage.getAllPlans(guid),\r\n          storage.getAllTopics(guid),\r\n          storage.isPremium() ? storage.getAllWorkshops(guid) : Promise.resolve(false),\r\n        ]\r\n\r\n        return Promise.all(promises).then(([chapters, plans, topics, workshops]) => {\r\n          commit(LOAD_CONTENT, { plans, chapters, topics })\r\n\r\n          if (workshops) {\r\n            commit(LOAD_WORKSHOPS, { workshops })\r\n          }\r\n\r\n          commit(UPDATE_DOCUMENT_METADATA, { guid, name })\r\n          cache.cacheSet({ guid, name })\r\n        }, (err) => {\r\n          throw err\r\n        })\r\n      }))\r\n    },\r\n    [DELETE_DOCUMENT]({ commit, dispatch }, { guid }) {\r\n      dispatch(UNLOAD_CURRENT_DOCUMENT).then(() => {\r\n        commit(REMOVE_OWNED_DOCUMENT, { guid })\r\n      })\r\n    },\r\n    [INIT_DOCUMENTS]({ commit, dispatch, state }) {\r\n      return storageApiPromise().then(storage => storage.getAllDocuments().then((documents) => {\r\n        commit(LOAD_DOCUMENTS, documents)\r\n        const currentDocument = cache.cacheGet()\r\n\r\n        if (!currentDocument || !state.ownedDocuments.some(document => document.guid === currentDocument.guid)) {\r\n          return\r\n        }\r\n\r\n        return dispatch(CHANGE_DOCUMENT, { ...currentDocument, shouldReset: false })\r\n      }), console.error)\r\n    },\r\n    [SET_UP_DOCUMENT]({ dispatch, state }, { document, type }) {\r\n      const plans = type.plans.map(title => ({\r\n        archived: false,\r\n        guid: guid(),\r\n        title,\r\n        sections: [{\r\n          archived: false,\r\n          content: null,\r\n          guid: guid(),\r\n          tags: [],\r\n          title,\r\n        }],\r\n      }))\r\n\r\n      const chapters = type.chapters.map(title => ({\r\n        archived: false,\r\n        content: null,\r\n        guid: guid(),\r\n        title,\r\n        topics: {},\r\n      }))\r\n\r\n      const topics = type.topics.map(title => ({\r\n        archived: false,\r\n        guid: guid(),\r\n        title,\r\n      }))\r\n\r\n      return storageApiPromise().then(storage => Promise.resolve(storage.addDocument(document)).then(() => storage)).then(storage => storage.saveAllContent(document.guid, { chapters, plans, topics }))\r\n      // Don't use the ADD_DOCUMENT mutation here or it will try to add the document to storage again\r\n        .then(() => state.ownedDocuments.push(document))\r\n        .then(() => dispatch(CHANGE_DOCUMENT, document))\r\n    },\r\n    [UNLOAD_CURRENT_DOCUMENT]({ commit }, { shouldReset } = { shouldReset: false }) {\r\n      return new Promise((resolve) => {\r\n        if (shouldReset) {\r\n          resetCache()\r\n        }\r\n        commit(UPDATE_DOCUMENT_METADATA, { guid: null, name: null })\r\n        commit(NUKE_CONTENT)\r\n        commit(NUKE_WORKSHOPS)\r\n        resolve()\r\n      })\r\n    },\r\n  },\r\n  mutations: {\r\n    [ADD_DOCUMENT](state, { guid, name }) {\r\n      state.ownedDocuments.push({ guid, name })\r\n    },\r\n    [LOAD_DOCUMENTS](state, documents) {\r\n      state.ownedDocuments = documents\r\n    },\r\n    [REMOVE_OWNED_DOCUMENT](state, { guid }) {\r\n      let documentIndex\r\n      state.ownedDocuments.some((document, index) => {\r\n        if (document.guid === guid) {\r\n          documentIndex = index\r\n          return true\r\n        }\r\n      })\r\n      state.ownedDocuments.splice(documentIndex, 1)\r\n    },\r\n    [UPDATE_DOCUMENT_METADATA](state, { guid, name }) {\r\n      state.currentDocument = { guid, name }\r\n    },\r\n    [UPDATE_DOCUMENT_NAME](state, { guid, name }) {\r\n      state.currentDocument.name = name\r\n      cache.cacheSet({ guid, name })\r\n\r\n      state.ownedDocuments.some((document) => {\r\n        if (document.guid === guid) {\r\n          document.name = name\r\n          return true\r\n        }\r\n      })\r\n    },\r\n  },\r\n}\r\n\r\nexport default store\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.page.vue?vue&type=style&index=0&id=d0041b20&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.page.vue?vue&type=style&index=0&id=d0041b20&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topicList.vue?vue&type=style&index=0&id=95e4884a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topicList.vue?vue&type=style&index=0&id=95e4884a&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outliner.page.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outliner.page.vue?vue&type=style&index=1&lang=css&\"","import uuid from 'uuid/v1'\r\n\r\nconst guid = () => uuid()\r\n\r\nexport default guid\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outliner.page.vue?vue&type=style&index=0&id=23fffb5a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outliner.page.vue?vue&type=style&index=0&id=23fffb5a&scoped=true&lang=css&\"","module.exports = \"data:image/png;base64,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\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quillEditor.vue?vue&type=style&index=0&id=4094e8ab&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quillEditor.vue?vue&type=style&index=0&id=4094e8ab&scoped=true&lang=css&\"","import axiosBase from 'axios'\r\n\r\nconst axios = axiosBase.create({\r\n  headers: {\r\n    Pragma: 'no-cache',\r\n    'Cache-Control': 'no-store',\r\n  },\r\n})\r\n\r\nconst route = route => `/api/${route}`\r\n\r\nclass Api {\r\n  constructor () {\r\n    this.isOnlineCached = null\r\n  }\r\n\r\n  isOnline() {\r\n    const promise = this.simpleGet(route('online'))\r\n    promise.then(() => {\r\n      this.isOnlineCached = true\r\n    }, err => {\r\n      if (err.response && err.response.status === 401) {\r\n        setTimeout(() => window.location.reload(), 2000)\r\n      }\r\n      this.isOnlineCached = false\r\n    })\r\n    return promise\r\n  }\r\n\r\n  simpleGet(route) {\r\n    return axios.get(route).then(response => response.data)\r\n  }\r\n\r\n  simplePost(route, body) {\r\n    return axios.post(route, body).then(response => response.data)\r\n  }\r\n\r\n  saveAllContent(data) { return this.simplePost(route('document/saveAll'), data) }\r\n\r\n  // DOCUMENTS\r\n  addDocument(doc) { return this.simplePost(route('document/add'), doc) }\r\n  deleteDocument(doc) { return this.simplePost(route('document/delete'), doc) }\r\n  getDocuments() {\r\n    return this.simpleGet(route('documents')).then(documents => documents.map(doc => doc))\r\n  }\r\n  updateDocument(doc) { return this.simplePost(route('document/update'), doc) }\r\n\r\n  // CHAPTERS\r\n  arrangeChapters(data) { return this.simplePost(route('chapter/arrange'), data) }\r\n  deleteChapter(data) { return this.simplePost(route('chapter/delete'), data) }\r\n  getChapters(documentGuid) { return this.simpleGet(route(`chapters/${documentGuid}`)) }\r\n  updateChapter(data) { return this.simplePost(route('chapter/update'), data) }\r\n\r\n  // TOPICS\r\n  arrangeTopics(data) { return this.simplePost(route('topic/arrange'), data) }\r\n  deleteTopic(data) { return this.simplePost(route('topic/delete'), data) }\r\n  // This returns MasterTopics; ChapterTopics are returned with their associated chapters\r\n  getTopics(documentGuid) { return this.simpleGet(route(`topics/${documentGuid}`)) }\r\n  updateTopic(data) { return this.simplePost(route('topic/update'), data) }\r\n\r\n  // PLANS\r\n  arrangePlans(data) { return this.simplePost(route('plan/arrange'), data) }\r\n  deletePlan(data) { return this.simplePost(route('plan/delete'), data) }\r\n  getPlans(documentGuid) { return this.simpleGet(route(`plans/${documentGuid}`)) }\r\n  updatePlan(data) { return this.simplePost(route('plan/update'), data) }\r\n\r\n  // SECTIONS\r\n  arrangeSections(data) { return this.simplePost(route('section/arrange'), data) }\r\n  deleteSection(data) { return this.simplePost(route('section/delete'), data) }\r\n  // No get method; sections are returned with their associated plans\r\n  updateSection(data) { return this.simplePost(route('section/update'), data) }\r\n\r\n  // WORKSHOPS\r\n  deleteWorkshopContent({ documentGuid, guid }) {\r\n    return this.simplePost(route('workshop-content/delete'), { documentGuid, guid })\r\n  }\r\n  getWorkshops(documentGuid) { return this.simpleGet(route(`workshop-content/${documentGuid}`)) }\r\n  updateWorkshopContents({ documentGuid, workshops }) {\r\n    return this.simplePost(route('workshop-content/update'), { documentGuid, workshops })\r\n  }\r\n\r\n  // EXPORT/IMPORT\r\n  docExport(documentGuid) { return this.simpleGet(route(`backup/export/document/${documentGuid}`)) }\r\n  docImport({\r\n    guid, name, chapters, topics, plans, workshops,\r\n  }) {\r\n    return this.simplePost(route('backup/import/document'), {\r\n      guid, name, chapters, topics, plans, workshops,\r\n    })\r\n  }\r\n  fullExport() { return this.simpleGet(route('backup/export')) }\r\n  fullImport(data) { return this.simplePost(route('backup/import'), data) }\r\n  exportToWord({ guid, title, includeArchived }) {\r\n    return new Promise((resolve) => {\r\n      window.open(route(`word/export-chapters?guid=${guid}&title=${title}&includeArchived=${!!includeArchived}`), '_blank')\r\n      resolve()\r\n    })\r\n  }\r\n}\r\n\r\nexport default new Api()\r\n","import clone from 'lodash/clone'\r\n\r\nclass VersionResolver {\r\n  constructor() {\r\n    this.timestampField = 'updated_at'\r\n  }\r\n\r\n  timestamp(obj) {\r\n    obj[this.timestampField] = Date.now()\r\n  }\r\n\r\n  timestampEach(arr) {\r\n    arr.forEach(obj => this.timestamp(obj))\r\n  }\r\n\r\n  getTimestamp(obj) {\r\n    if (!obj[this.timestampField]) {\r\n      return null\r\n    }\r\n    return new Date(obj[this.timestampField]).getTime()\r\n  }\r\n\r\n  getMostRecent(defaultObj, obj2) {\r\n    const defaultTimestamp = this.getTimestamp(defaultObj)\r\n    const timestamp2 = this.getTimestamp(obj2)\r\n\r\n    if (!!timestamp2 && timestamp2 > defaultTimestamp) {\r\n      return obj2\r\n    }\r\n\r\n    return defaultObj\r\n  }\r\n\r\n  getMostRecentEach(defaultArr, arr2, matchBy, markAsDeleted) {\r\n    const returnList = []\r\n\r\n    for (const index in defaultArr) {\r\n      const obj = clone(defaultArr[index])\r\n      if (!matchBy(obj)) {\r\n        continue\r\n      }\r\n\r\n      returnList.push(obj)\r\n      const arr2match = arr2.find(arrObj => matchBy(arrObj) === matchBy(obj))\r\n\r\n      if (!arr2match) {\r\n        markAsDeleted(obj)\r\n      }\r\n    }\r\n\r\n    for (const index in arr2) {\r\n      const obj = clone(arr2[index])\r\n      if (!matchBy(obj)) {\r\n        continue\r\n      }\r\n\r\n      const defaultMatch = returnList.find(returnObj => matchBy(returnObj) === matchBy(obj))\r\n\r\n      if (!defaultMatch) {\r\n        markAsDeleted(obj)\r\n        returnList.splice(index, 0, obj)\r\n        continue\r\n      }\r\n\r\n      const replacement = this.getMostRecent(defaultMatch, obj)\r\n      if (replacement === defaultMatch) {\r\n        continue\r\n      }\r\n\r\n      returnList.splice(returnList.indexOf(defaultMatch), 1, replacement)\r\n    }\r\n\r\n    return returnList\r\n  }\r\n}\r\n\r\nexport default new VersionResolver()\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plansList.vue?vue&type=style&index=0&id=08268966&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plansList.vue?vue&type=style&index=0&id=08268966&scoped=true&lang=css&\"","import VersionResolver from './versionResolver'\r\n\r\nexport const ADD_WORKSHOP = 'ADD_WORKSHOP'\r\nexport const ARCHIVE_WORKSHOP = 'ARCHIVE_WORKSHOP'\r\nexport const DELETE_WORKSHOP = 'DELETE_WORKSHOP'\r\nexport const RESTORE_WORKSHOP = 'RESTORE_WORKSHOP'\r\nexport const UPDATE_WORKSHOPS_CONTENT = 'UPDATE_WORKSHOPS_CONTENT'\r\n\r\nexport const LOAD_WORKSHOPS = 'LOAD_WORKSHOPS'\r\nexport const NUKE_WORKSHOPS = 'NUKE_WORKSHOPS'\r\n\r\nconst store = {\r\n  state: {\r\n    // workshop [{ archived bool false, guid Guid, title string, order number, workshopName string, content Delta null, date Date }]\r\n    workshops: [],\r\n  },\r\n  mutations: {\r\n    // Standard workshop mutations\r\n    [ADD_WORKSHOP](state, { workshop }) {\r\n      VersionResolver.timestamp(workshop)\r\n      state.workshops.push(workshop)\r\n    },\r\n    [ARCHIVE_WORKSHOP](state, { workshop }) {\r\n      if (!state.workshops.includes(workshop)) {\r\n        throw new Error(`${ARCHIVE_WORKSHOP}: Cannot archive workshop \"${workshop.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(workshop)\r\n      workshop.archived = true\r\n    },\r\n    [DELETE_WORKSHOP](state, { workshop }) {\r\n      if (!state.workshops.includes(workshop)) {\r\n        throw new Error(`${DELETE_WORKSHOP}: Cannot delete workshop \"${workshop.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(workshop)\r\n      state.workshops.splice(state.workshops.indexOf(workshop), 1)\r\n    },\r\n    [RESTORE_WORKSHOP](state, { workshop }) {\r\n      if (!state.workshops.includes(workshop)) {\r\n        throw new Error(`${RESTORE_WORKSHOP}: Cannot restore workshop \"${workshop.title}\": does not exist.`)\r\n      }\r\n\r\n      VersionResolver.timestamp(workshop)\r\n      workshop.archived = false\r\n    },\r\n    [UPDATE_WORKSHOPS_CONTENT](state, { workshopUpdates: [...workshopUpdates] }) {\r\n      for (const { workshop, newContent, newTitle } of workshopUpdates) {\r\n        if (!state.workshops.includes(workshop)) {\r\n          throw new Error(`${UPDATE_WORKSHOPS_CONTENT}: Cannot update workshop \"${workshop.title}\": does not exist.`)\r\n        }\r\n\r\n        VersionResolver.timestamp(workshop)\r\n        workshop.content = newContent\r\n\r\n        if (newTitle) {\r\n          workshop.title = newTitle\r\n        }\r\n      }\r\n    },\r\n\r\n    // Overwrite all workshops or the workshop list\r\n    [LOAD_WORKSHOPS](state, { workshops }) {\r\n      if (!Array.isArray(workshops)) {\r\n        throw new Error(`${LOAD_WORKSHOPS}: Cannot load workshops: argument is not an array.`)\r\n      }\r\n\r\n      state.workshops = workshops\r\n    },\r\n    [NUKE_WORKSHOPS](state) {\r\n      state.workshops = []\r\n    },\r\n  },\r\n}\r\n\r\nexport default store\r\n","import tippy from 'tippy.js'\r\n\r\nconst tooltip = ({\r\n  arrow = true, content, distance = 10, el, interactive, placement = 'bottom', hideOnClick = true,\r\n} = {}) => tippy(el, {\r\n  arrow,\r\n  distance,\r\n  hideOnClick,\r\n  content,\r\n  interactive,\r\n  placement,\r\n})\r\n\r\nexport default tooltip\r\n","import tooltip from './tippyBuilder'\r\n\r\nconst directive = {\r\n  bind: (el, { value = {} }) => {\r\n    const {\r\n      arrow = true, content: _content, distance = 10, interactive = false, enabled = true,\r\n    } = value\r\n\r\n    let content = _content\r\n    const title = el.getAttribute('title')\r\n    if (!content && title) {\r\n      content = title\r\n      el.removeAttribute('title')\r\n    }\r\n\r\n    const tippy = tooltip({\r\n      arrow,\r\n      content,\r\n      distance,\r\n      el,\r\n      interactive,\r\n    })\r\n\r\n    if (!tippy) {\r\n      console.warn('Expected a Tippy.js instance to be returned')\r\n      return\r\n    }\r\n\r\n    if (enabled) {\r\n      return\r\n    }\r\n\r\n    tippy.disable()\r\n  },\r\n  update: (el, { value = {} }) => {\r\n    const { enabled = true } = value\r\n\r\n    const tippy = el._tippy\r\n\r\n    if (!tippy) {\r\n      console.warn('Expected a Tippy.js instance on el with v-tooltip')\r\n      return\r\n    }\r\n\r\n    if (enabled) {\r\n      tippy.enable()\r\n    } else {\r\n      tippy.disable()\r\n    }\r\n  },\r\n}\r\n\r\nexport default directive\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabsList.vue?vue&type=style&index=0&id=476162f6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabsList.vue?vue&type=style&index=0&id=476162f6&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chipsList.vue?vue&type=style&index=0&id=71787b38&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chipsList.vue?vue&type=style&index=0&id=71787b38&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quillEditor.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quillEditor.vue?vue&type=style&index=1&lang=css&\""],"sourceRoot":""}