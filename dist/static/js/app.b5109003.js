(function(t){function e(e){for(var i,r,a=e[0],c=e[1],u=e[2],l=0,h=[];l<a.length;l++)r=a[l],o[r]&&h.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(h.length)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,r=1;r<n.length;r++){var a=n[r];0!==o[a]&&(i=!1)}i&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var i={},r={app:0},o={app:0},s=[];function a(t){return c.p+"static/js/"+({analyser:"analyser",exporter:"exporter","w-free-write":"w-free-write","w-novel-quickstart":"w-novel-quickstart","w-plot-workshop":"w-plot-workshop","w-setting-workshop":"w-setting-workshop","w-writers-unblock":"w-writers-unblock"}[t]||t)+"."+{analyser:"50d7fb4e",exporter:"797a242e","w-free-write":"0fc331d9","w-novel-quickstart":"f846ed19","w-plot-workshop":"eac2ab8e","w-setting-workshop":"566449ca","w-writers-unblock":"0ebd77fa"}[t]+".js"}function c(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={analyser:1,exporter:1,"w-free-write":1,"w-novel-quickstart":1,"w-plot-workshop":1,"w-setting-workshop":1,"w-writers-unblock":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise(function(e,n){for(var i="static/css/"+({analyser:"analyser",exporter:"exporter","w-free-write":"w-free-write","w-novel-quickstart":"w-novel-quickstart","w-plot-workshop":"w-plot-workshop","w-setting-workshop":"w-setting-workshop","w-writers-unblock":"w-writers-unblock"}[t]||t)+"."+{analyser:"44b53cca",exporter:"049e3d90","w-free-write":"7697b0ba","w-novel-quickstart":"e38debc6","w-plot-workshop":"817c5a4f","w-setting-workshop":"817c5a4f","w-writers-unblock":"8b4a7c0f"}[t]+".css",o=c.p+i,s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var u=s[a],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===i||l===o))return e()}var h=document.getElementsByTagName("style");for(a=0;a<h.length;a++){u=h[a],l=u.getAttribute("data-href");if(l===i||l===o)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var i=e&&e.target&&e.target.src||o,s=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");s.request=i,delete r[t],d.parentNode.removeChild(d),n(s)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){r[t]=0}));var i=o[t];if(0!==i)if(i)e.push(i[2]);else{var s=new Promise(function(e,n){i=o[t]=[e,n]});e.push(i[2]=s);var u,l=document.getElementsByTagName("head")[0],h=document.createElement("script");h.charset="utf-8",h.timeout=120,c.nc&&h.setAttribute("nonce",c.nc),h.src=a(t),u=function(e){h.onerror=h.onload=null,clearTimeout(d);var n=o[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+i+": "+r+")");s.type=i,s.request=r,n[1](s)}o[t]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:h})},12e4);h.onerror=h.onload=u,l.appendChild(h)}return Promise.all(e)},c.m=t,c.c=i,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(n,i,function(e){return t[e]}.bind(null,i));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var h=0;h<u.length;h++)e(u[h]);var d=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("1112")},"017f":function(t,e,n){},"0200":function(t,e,n){},"0b67":function(t,e,n){},"0dfa":function(t,e,n){"use strict";var i=n("8286"),r=n.n(i);r.a},1112:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),r=n("3652"),o=n.n(r),s=n("2955"),a=n.n(s),c=n("53ca"),u=(n("ac6a"),n("8c4f")),l=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},h=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"not-found"},[n("h3",[t._v("Something went wrong.")]),n("p",[t._v("\n      This page doesn't exist. If you're having trouble with the app, please contact us at\n      "),n("a",{attrs:{href:"mailto:support@edwardtheapp.com"}},[t._v("support@edwardtheapp.com")]),t._v(".\n    ")])])])}],d={},p=d,f=(n("24bb"),n("2877")),v=Object(f["a"])(p,l,h,!1,null,"00a62670",null);v.options.__file="NotFound.vue";var m=v.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"composer-wrap"},[t.hasChapters?n("div",{staticClass:"composer"},[n("div",{staticClass:"map-wrap"},[n("text-map",{attrs:{"editor-element":t.editorElement,"data-stream":t.activeChapter.content,mark:t.mark},on:{select:t.selectMap}})],1),n("div",{staticClass:"editor-wrap"},[n("tabs-list",{attrs:{"active-index":t.activeChapterIndex,"data-array":t.allChapters,"filter-tabs":t.isViewing,"item-name":"Chapter"},on:{add:t.addChapter,hover:t.hoverChapter,unhover:t.unhoverChapter,"update:activeIndex":t.selectChapter}}),n("div",{ref:"editorContainer",staticClass:"below-tabs"},[n("div",{staticClass:"stats",class:{active:t.showStats}},[n("div",{staticClass:"stats-content"},[n("p",[n("b",[t._v(t._s(t.activeChapter.title))])]),n("p",[t._v(t._s(t.chapterWordCount)+" words")]),n("p",[t._v(t._s(t.chapterParagraphCount)+" paragraphs")]),n("p",[t._v(t._s(t.chapterPageCount)+" pages")]),n("p",[t._v(t._s(t.chapterReadTimeMinutes)+" minute read")]),n("br"),n("p",[n("b",[t._v(t._s(t.documentTitle)+" (Full document)")])]),n("p",[t._v(t._s(t.documentWordCount)+" words")]),n("p",[t._v(t._s(t.documentPageCount)+" pages")]),n("p",[t._v(t._s(t.documentReadTimeMinutes)+" minute read")])])]),n("div",{staticClass:"define"},[n("word-define",{attrs:{word:t.mark}})],1),n("quill-editor",{ref:"textEditor",attrs:{content:t.activeChapter.content,"content-id":t.activeChapter.guid,"scroll-to":t.scrollTo,container:t.editorContainerNode},on:{"update:content":t.updateContent,"update:selection":t.updateSelection}})],1)],1),n("div",{staticClass:"sidebar-wrap"},[n("div",{staticClass:"sidebar-options"},[n("div",{staticClass:"plan-switch"},[n("button",{staticClass:"switch-label",class:{active:"outline"===t.sidebar},on:{click:function(e){t.switchOutline()}}},[n("div",{domProps:{innerHTML:t._s(t.outlineSvg)}}),n("div",{staticClass:"switch-label-text"},[t._v("Outline")])]),n("hr",{staticClass:"vert"}),n("button",{staticClass:"switch-label",class:{active:"plan"===t.sidebar},on:{click:function(e){t.switchPlans()}}},[n("div",{domProps:{innerHTML:t._s(t.planSvg)}}),n("div",{staticClass:"switch-label-text"},[t._v("Plans")])]),t.isPremium?[n("hr",{staticClass:"vert"}),n("button",{staticClass:"switch-label",class:{active:"workshop"===t.sidebar},on:{click:function(e){t.switchWorkshops()}}},[n("div",{domProps:{innerHTML:t._s(t.workshopSvg)}}),n("div",{staticClass:"switch-label-text"},[t._v("Workshops")])])]:t._e()],2),n("div",{staticClass:"archived-filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.archived,expression:"filters.archived"}],attrs:{id:"showArchivedTopics",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.archived)?t._i(t.filters.archived,null)>-1:t.filters.archived},on:{change:function(e){var n=t.filters.archived,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=null,s=t._i(n,o);i.checked?s<0&&t.$set(t.filters,"archived",n.concat([o])):s>-1&&t.$set(t.filters,"archived",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"archived",r)}}}),n("label",{attrs:{for:"showArchivedTopics"}},[t._v("Show Archived")])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"plan"===t.sidebar,expression:"sidebar === 'plan'"}],staticClass:"sidebar-content"},[t.hasPlans?[n("plans-list",{attrs:{"filter-plans":t.showPlan,"filter-sections":t.showSection}})]:[n("div",[t._v("No plans yet.")]),n("div",[n("router-link",{attrs:{to:"/plan"}},[t._v("Start planning")])],1)]],2),n("div",{directives:[{name:"show",rawName:"v-show",value:"outline"===t.sidebar,expression:"sidebar === 'outline'"}],staticClass:"sidebar-content"},[t.hasTopics?[n("div",{staticClass:"topic-list-wrap"},[n("topic-list",{attrs:{chapter:t.activeChapter,"filter-topics":t.showTopic,topics:t.allTopics}})],1)]:[n("div",[t._v("No outline yet.")]),n("div",[n("router-link",{attrs:{to:"/outline"}},[t._v("Start outlining")])],1)]],2),n("div",{directives:[{name:"show",rawName:"v-show",value:"workshop"===t.sidebar,expression:"sidebar === 'workshop'"}],staticClass:"sidebar-content"},[t.hasWorkshops?[n("workshop-list",{ref:"workshopList",attrs:{"filter-workshops":t.showWorkshop}})]:[n("div",[t._v("No workshops completed yet.")]),n("div",[n("router-link",{attrs:{to:"/workshop/free-write"}},[t._v("Do a free write")])],1)]],2)])]):n("div",[n("div",[t._v("No chapters yet.")]),n("div",[n("router-link",{attrs:{to:"/outline"}},[t._v("Create one")])],1)])])},w=[],C=(n("a481"),n("6762"),n("2fdb"),n("4917"),n("7514"),n("7f7f"),n("8410")),k=n("7f24"),y=n("7d4e"),_=n("bec3"),b=n("d884"),T=n.n(b),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.viewingPlans.length>0,expression:"viewingPlans.length > 0"}],staticClass:"plans-wrap"},[n("tabs-list",{attrs:{"active-index":t.activePlanIndex,"data-array":t.allPlans,"filter-tabs":t.filterPlans,"item-name":"Plan"},on:{add:t.addPlan,"update:activeIndex":t.selectPlan}}),t.activePlan?n("div",{staticClass:"plan"},[n("div",{staticClass:"plan-header"},[n("h4",{staticClass:"plan-title"},[t._v("\n        "+t._s(t.activePlan.title)+"\n      ")]),n("div",{staticClass:"plan-actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.activePlan.archived,expression:"!activePlan.archived"}],staticClass:"plan-action",on:{click:function(e){t.archivePlan({index:t.activePlanIndex})}}},[t._v("Archive")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.activePlan.archived,expression:"activePlan.archived"}],staticClass:"plan-action",on:{click:function(e){t.restorePlan({index:t.activePlanIndex})}}},[t._v("Restore")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.activePlan.archived,expression:"activePlan.archived"}],staticClass:"plan-action button-red",on:{click:function(e){t.deletePlan({index:t.activePlanIndex})}}},[t._v("Delete Forever")])])]),n("div",{staticClass:"plan-body"},[n("div",{staticClass:"chips-wrap section-chips"},[n("div",{staticClass:"section-title"},[n("h3",[t._v("Sections")]),n("button",{staticClass:"help-icon",domProps:{innerHTML:t._s(t.helpIconSvg)},on:{click:function(e){t.helpClick(t.helpSectionChipsModal,"Section List")}}})]),n("chips-list",{attrs:{name:"Section","name-prop":"title","data-array":t.activePlanSections,"filter-chips":t.filterSections,"is-deletable":t.isDeletable},on:{add:t.addSection,delete:t.archiveSection,rearrange:t.rearrangeSection,restore:t.restoreSection,update:t.renameSection}})],1),n("div",{staticClass:"sections"},t._l(t.activePlan.sections,function(e,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.filterSections(e),expression:"filterSections(section)"}],key:e.guid,staticClass:"section"},[n("div",{staticClass:"section-header"},[n("h5",{staticClass:"section-title"},[t._v("\n              "+t._s(e.title)+"\n            ")]),n("div",{staticClass:"section-actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!e.archived,expression:"!section.archived"}],staticClass:"section-action",on:{click:function(e){t.archiveSection({index:i})}}},[t._v("Archive")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.archived,expression:"section.archived"}],staticClass:"section-action",on:{click:function(e){t.restoreSection({index:i})}}},[t._v("Restore")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.archived,expression:"section.archived"}],staticClass:"section-action button-red",on:{click:function(e){t.deleteSection({index:i})}}},[t._v("Delete Forever")])])]),n("div",{staticClass:"section-content"},[e.archived?t._e():n("div",{staticClass:"content-actions"},[t.isEditing(i)?t._e():n("button",{staticClass:"button-link",on:{click:function(e){t.editSection(i)}}},[n("span",{staticClass:"button-link-icon",domProps:{innerHTML:t._s(t.editSvg)}}),t._v("Edit\n              ")]),t.isEditing(i)?n("button",{staticClass:"button-link",on:{click:function(e){t.endEditSection()}}},[n("span",{staticClass:"button-link-icon",domProps:{innerHTML:t._s(t.doneSvg)}}),t._v("Done Editing\n              ")]):t._e()]),t.isEditing(i)?t._e():n("div",{staticClass:"content-static",class:{"space-above":e.archived}},[n("div",{domProps:{innerHTML:t._s(t.getHtml(e))}}),e.archived||t.getTextContent(e.content)?t._e():n("span",{staticClass:"content-placeholder"},[t._v('\n                No content yet. Click "Edit" to add some.\n              ')])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isEditing(i),expression:"isEditing(index)"}],staticClass:"content-editable"},[n("quill-editor",{ref:"quillEditor",refInFor:!0,attrs:{content:e.content,"content-id":t.activePlan.guid},on:{"update:content":function(n){t.updateContent(e,n)},"shortcut:done":function(e){t.endEditSection()}}})],1)])])}))])]):t._e(),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"helpSectionChipsModal",staticClass:"help"},[n("p",[t._v("This is the section list. It's the easiest place to add, archive, restore, rename, and rearrange sections.")]),n("p",[t._v('To add a section, type its name into the "New Section" box and click "Add".')]),n("p",[t._v('\n        To archive a section, click the "X" next to its name in the list.\n        Archiving a section removes it from your document without deleting it permanently.\n      ')]),n("p",[t._v('To restore an archived section, check the "Show Archived" box, then click the "+" next to its name in the list.')]),n("p",[t._v("To rename a section, click the pencil icon next to its name in the list.")]),n("p",[t._v("To rearrange a section, click and drag it to where you want it to go.")])])])],1)},S=[],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chip-list-wrap"},[n("div",{staticClass:"chip-list"},[n("draggable",{attrs:{options:t.draggableOptions},model:{value:t.reactiveArray,callback:function(e){t.reactiveArray=e},expression:"reactiveArray"}},t._l(t.reactiveArray,function(e,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.filterChips(e),expression:"filterChips(chip)"}],key:i,staticClass:"chip",class:{light:!t.isDeletable(e)}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showChipInput(i),expression:"!showChipInput(index)"}],staticClass:"chip-content"},[n("span",{staticClass:"chip-draggable"},[t._v("\n            "+t._s(e[t.nameProp])+"\n          ")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.isDeletable(e),expression:"isDeletable(chip)"}],staticClass:"button-icon chip-action-button action-rename",domProps:{innerHTML:t._s(t.editSvg)},on:{click:function(n){t.renameChip(i,e[t.nameProp])}}}),n("button",{directives:[{name:"show",rawName:"v-show",value:t.isDeletable(e),expression:"isDeletable(chip)"}],staticClass:"button-icon chip-action-button action-delete",domProps:{innerHTML:t._s(t.deleteSvg)},on:{click:function(e){t.deleteChip(i)}}}),n("button",{directives:[{name:"show",rawName:"v-show",value:!t.isDeletable(e),expression:"!isDeletable(chip)"}],staticClass:"button-icon chip-action-button action-restore",domProps:{innerHTML:t._s(t.addSvg)},on:{click:function(e){t.restoreChip(i)}}})]),t.showChipInput(i)?n("div",{staticClass:"chip-content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.chipValues[i],expression:"chipValues[index]"}],staticClass:"chip-input",attrs:{placeholder:e[t.nameProp]},domProps:{value:t.chipValues[i]},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.saveChipValue(i)},input:function(e){e.target.composing||t.$set(t.chipValues,i,e.target.value)}}}),n("button",{staticClass:"button-green chip-add-button",attrs:{disabled:!t.chipValues[i]},on:{click:function(e){t.saveChipValue(i)}}},[n("span",{staticClass:"u-center-all chip-add-svg",domProps:{innerHTML:t._s(t.saveSvg)}}),t._v(" Save\n          ")]),n("button",{staticClass:"button-red chip-add-button",on:{click:function(e){t.cancelRename(i)}}},[n("span",{staticClass:"u-center-all chip-add-svg",domProps:{innerHTML:t._s(t.cancelSvg)}}),t._v(" Cancel\n          ")])]):t._e()])}))],1),n("div",{staticClass:"chip"},[n("div",{staticClass:"chip-content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newChip,expression:"newChip"}],staticClass:"chip-input",attrs:{placeholder:t.placeholder},domProps:{value:t.newChip},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addNewChip(e):null},input:function(e){e.target.composing||(t.newChip=e.target.value)}}}),n("button",{staticClass:"button-green chip-add-button",attrs:{disabled:!t.newChip},on:{click:t.addNewChip}},[n("span",{staticClass:"u-center-all chip-add-svg",domProps:{innerHTML:t._s(t.addSvg)}}),t._v(" Add\n      ")])])])])},O=[],x=n("1516"),A=n.n(x),I=n("1940"),D=n.n(I),N={components:{draggable:A.a},computed:{placeholder:function(){return"New ".concat(this.name,"...")},reactiveArray:{get:function(){return this.dataArray},set:function(t){this.$emit("rearrange",t)}}},data:function(){return{addSvg:T.a.plus.toSVG({height:14,width:14}),cancelSvg:T.a["circle-slash"].toSVG({height:14,width:14}),chipValues:[],deleteSvg:T.a.x.toSVG({height:14,width:14}),draggableOptions:{animation:100,draggable:".chip",group:this.name,handle:".chip-draggable"},editSvg:T.a.pencil.toSVG({height:14,width:14}),newChip:"",saveSvg:T.a.check.toSVG({height:14,width:14})}},methods:{addNewChip:function(){var t=this.assertUnique(this.dataArray,this.nameProp,this.newChip);t&&(this.$emit("add",this.newChip),this.newChip="")},assertUnique:function(t,e,n){var i=t.find(function(t){return t[e]===n});return!i||(D()({icon:"error",text:"Sorry, ".concat(this.name.toLowerCase()," ").concat(e,'s must be unique. "').concat(n,'" is already in use.\n                 Please choose a different ').concat(e,".")}),!1)},cancelRename:function(t){this.$set(this.chipValues,t,null)},deleteChip:function(t){this.$emit("delete",{index:t})},renameChip:function(t,e){this.$set(this.chipValues,t,e)},restoreChip:function(t){this.$emit("restore",{index:t})},saveChipValue:function(t){var e=this.dataArray.slice();e.splice(t,1);var n=this.assertUnique(e,this.nameProp,this.chipValues[t]);n&&(this.$emit("update",{index:t,value:this.chipValues[t]}),this.$set(this.chipValues,t,null))},showChipInput:function(t){return"string"===typeof this.chipValues[t]}},props:{dataArray:{required:!0,type:Array},filterChips:{required:!0,type:Function},isDeletable:{required:!0,type:Function},name:{required:!0,type:String},nameProp:{required:!0,type:String}}},W=N,$=(n("9825"),Object(f["a"])(W,E,O,!1,null,"454a4b13",null));$.options.__file="chipsList.vue";var R=$.exports,j=n("1c03"),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabs"},[t._l(t.dataArray,function(e,i){return n("button",{directives:[{name:"show",rawName:"v-show",value:t.filterTabs(e),expression:"filterTabs(item)"}],key:e.guid,staticClass:"button-tab",class:{active:t.isActive(i)},on:{click:function(e){t.selectItem(i)},mouseover:function(e){t.hoverItem(i)},mouseout:function(e){t.unhoverItem()}}},[t._v("\n    "+t._s(e.title)+"\n  ")])}),t.canAdd?n("button",{directives:[{name:"show",rawName:"v-show",value:!t.showAddItem,expression:"!showAddItem"}],staticClass:"button-tab add-button",domProps:{innerHTML:t._s(t.addSvg)},on:{click:t.showNewItem}}):t._e(),t.canAdd?n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddItem,expression:"showAddItem"}],staticClass:"button-tab add-tab"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem,expression:"newItem"}],staticClass:"tab-input",attrs:{placeholder:"New "+t.itemName+"..."},domProps:{value:t.newItem},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addItem(e):null},input:function(e){e.target.composing||(t.newItem=e.target.value)}}}),n("button",{staticClass:"button-green tab-internal-button",on:{click:t.addItem}},[n("span",{staticClass:"u-center-all icon",domProps:{innerHTML:t._s(t.saveSvg)}}),t._v(" Save\n    ")]),n("button",{staticClass:"button-red tab-internal-button",on:{click:t.cancelAddItem}},[n("span",{staticClass:"u-center-all icon",domProps:{innerHTML:t._s(t.cancelSvg)}}),t._v(" Cancel\n    ")])]):t._e()],2)},M=[],G=(n("c5f6"),{components:{},computed:{},data:function(){return{addSvg:T.a.plus.toSVG({height:14,width:14}),cancelSvg:T.a["circle-slash"].toSVG({height:14,width:14}),newItem:"",saveSvg:T.a.check.toSVG({height:14,width:14}),showAddItem:!1,tabCache:new k["b"]("CURRENT_".concat(this.itemName,"_TAB"))}},methods:{addItem:function(){this.$emit("add",this.newItem),this.newItem="",this.showAddItem=!1},hoverItem:function(t){this.$emit("hover",t)},isActive:function(t){return t===this.activeIndex},selectItem:function(t){this.$emit("update:activeIndex",t)},showNewItem:function(){this.showAddItem=!0},cancelAddItem:function(){this.showAddItem=!1,this.newItem=""},unhoverItem:function(){this.$emit("unhover")}},mounted:function(){var t=this.tabCache.cacheGet();t&&t<this.dataArray.length?this.selectItem(t):this.selectItem(0)},props:{activeIndex:{required:!0,type:Number},dataArray:{required:!0,type:Array},filterTabs:{required:!0,type:Function},itemName:{required:!0,type:String},canAdd:{required:!1,default:!0,type:Boolean}},watch:{activeIndex:function(t){this.tabCache.cacheSet(t)}}}),K=G,q=(n("39e3"),Object(f["a"])(K,L,M,!1,null,"e5dddd7a",null));q.options.__file="tabsList.vue";var H=q.exports,F=function(t,e){var n=1,i=60;return!(e.length<n||e.length>i)||(D()({icon:"error",text:"Sorry, ".concat(t," titles must be between ").concat(n," and ").concat(i," letters.")}),!1)},V={components:{ChipsList:R,QuillEditor:j["a"],TabsList:H},computed:{activePlan:function(){return this.allPlans[this.activePlanIndex]},activePlanSections:function(){return this.activePlan&&this.activePlan.sections||[]},allPlans:function(){return this.$store.state.chapters.plans||[]},viewingPlans:function(){var t=this;return this.allPlans.filter(function(e){return t.filterPlans(e)})}},data:function(){return{activePlanIndex:-1,doneSvg:T.a.check.toSVG({height:14,width:14}),editingSectionIndex:-1,editSvg:T.a.pencil.toSVG({height:14,width:14}),helpIconSvg:T.a.question.toSVG({class:"help-icon--svg",height:16,width:16})}},methods:{addPlan:function(t){if(F("plan",t)){var e={archived:!1,guid:Object(_["a"])(),title:t,sections:[]};this.$store.commit(C["b"],{plan:e}),console.log(this.activePlanIndex)}},addSection:function(t){if(F("section",t)){var e={archived:!1,content:null,guid:Object(_["a"])(),tags:[],title:t};this.$store.commit(C["c"],{plan:this.activePlan,section:e})}},archivePlan:function(t){var e=t.index;this.$store.commit(C["g"],{plan:this.allPlans[e]}),e!==this.activePlanIndex||this.filterPlans(this.allPlans[e])||this.selectPlan(-1)},archiveSection:function(t){var e=t.index;this.$store.commit(C["h"],{plan:this.activePlan,section:this.activePlan.sections[e]})},deletePlan:function(t){var e=this,n=t.index;D()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this plan? Its sections and all of their content will be lost. This cannot be undone.",title:"Delete Forever?"}).then(function(t){t&&(e.$store.commit(C["k"],{plan:e.allPlans[n]}),n===e.activePlanIndex&&e.selectPlan(-1))})},deleteSection:function(t){var e=this,n=t.index;D()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this section? Its content will be lost. This cannot be undone.",title:"Delete Forever?"}).then(function(t){t&&e.$store.commit(C["l"],{plan:e.activePlan,section:e.activePlan.sections[n]})})},editSection:function(t){this.editingSectionIndex=t,this.$refs.quillEditor[t].focus()},endEditSection:function(){this.editingSectionIndex=-1},getHtml:function(t){return Object(y["b"])(t.content)},getTextContent:function(t){return Object(y["a"])(t)},helpClick:function(t,e){D()({content:t,title:e})},isDeletable:function(t){return!t.archived},isEditing:function(t){return this.editingSectionIndex===t},rearrangeSection:function(t){this.$store.commit(C["r"],{plan:this.activePlan,sections:t})},renameSection:function(t){var e=t.index,n=t.value;F("section",n)&&this.$store.commit(C["A"],{plan:this.activePlan,section:this.activePlan.sections[e],newTitle:n})},restorePlan:function(t){var e=t.index;this.$store.commit(C["u"],{plan:this.allPlans[e]})},restoreSection:function(t){var e=t.index;this.$store.commit(C["v"],{plan:this.activePlan,section:this.activePlan.sections[e]})},selectPlan:function(t){-1===t&&(t=0),this.allPlans[t]&&this.allPlans[t].archived&&(t=this.allPlans.indexOf(this.viewingPlans[0])),this.activePlanIndex=t},updateContent:function(t,e){var n=e.content,i=e.contentId,r=this.allPlans.find(function(t){return t.guid===i});this.$store.commit(C["B"],{plan:r,newContent:n,section:t})},updateTags:function(t,e){this.$store.commit(C["C"],{plan:this.activePlan,newTags:e,section:t})}},mounted:function(){this.helpSectionChipsModal=this.$refs.helpSectionChipsModal},props:{filterPlans:{required:!0,type:Function},filterSections:{required:!0,type:Function}}},U=V,z=(n("d22a"),Object(f["a"])(U,P,S,!1,null,"7275fea1",null));z.options.__file="plansList.vue";var B=z.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{ref:"mapWrap",staticClass:"map",on:{click:t.mapClick}},[n("div",{ref:"map",staticClass:"map-inner",domProps:{innerHTML:t._s(t.mapHtml)}})]),n("button",{staticClass:"help-icon",domProps:{innerHTML:t._s(t.helpIconSvg)},on:{click:t.helpClick}}),n("text-magnifier",{attrs:{html:t.mapHtml,"magnify-el":t.mapNode,mark:t.mark,"wrap-el":t.mapWrapNode}}),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"helpModal",staticClass:"help"},[n("p",[t._v("This is the mini-map. It's the 10,000 foot view of your document. As you write, you'll see it fill up.")]),n("p",[t._v("It has a couple of helpful features:")]),t._m(0)])])],1)},J=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("If you hover your mouse on the mini-map, a magnifier will appear to help you scan through your document quickly.")]),n("li",[t._v("If you click a paragraph in the mini-map, you'll jump to that paragraph in the editor.")]),n("li",[t._v("If you highlight a word in the editor, every appearance of that word will be highlighted in the mini-map.")]),n("li",[t._v("If you click a highlighted word in the mini-map, you'll jump to that word in the editor and highlight it.")])])}],X=(n("28a5"),n("2909")),Y=(n("5f02"),n("b047")),Z=n.n(Y),tt=n("6f56"),et=n.n(tt),nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrap",staticClass:"magnifier-wrap",class:{show:t.show}},[n("div",{ref:"magnifier",staticClass:"magnifier"},[n("div",{ref:"magnifierContent",staticClass:"magnifier-content map"})])])},it=[],rt={data:function(){return{cachedHtml:"",magnifyRadius:50,scale:5,show:!1,wrapElBoundingClientRect:null}},destroyed:function(){this.magnifyEl.removeEventListener("mousemove",this.mouseMove),this.magnifyEl.removeEventListener("mouseleave",this.mouseLeave)},methods:{getRelativeCoords:function(t,e){var n=t.clientX-e.left,i=t.clientY-e.top;return{x:n,y:i}},mouseLeave:function(){this.show=!1},mouseMove:function(t){this.cachedHtml!==this.html&&(this.cachedHtml=this.html);var e=this.getRelativeCoords(t,this.magnifyEl.getBoundingClientRect()),n=e.x,i=e.y;n=this.transformCoord(n,95),i=this.transformCoord(i,30);var r=this.$refs.magnifier.style;r.left="".concat(n,"px"),r.top="".concat(i,"px"),this.show=!0},refresh:function(){var t=this.magnifyEl.cloneNode(!0),e=this.$refs.magnifierContent;e.innerHTML="",e.appendChild(t)},transformCoord:function(t,e){return-t*this.scale+e}},mounted:function(){var t=this,e=this;this.$nextTick(function(){t.wrapElBoundingClientRect=t.wrapEl.getBoundingClientRect(),t.magnifyEl.addEventListener("mousemove",e.mouseMove),t.magnifyEl.addEventListener("mouseleave",e.mouseLeave)})},props:{html:{required:!0,type:String},magnifyEl:{required:!0,type:null},mark:{required:!0,type:String},wrapEl:{required:!0,type:null}},watch:{cachedHtml:function(){this.refresh()},mark:function(){this.refresh()}}},ot=rt,st=(n("71f0"),Object(f["a"])(ot,nt,it,!1,null,"1417fd9c",null));st.options.__file="textMagnifier.vue";var at=st.exports,ct={components:{TextMagnifier:at},data:function(){return{helpIconSvg:T.a.question.toSVG({class:"help-icon--svg",height:20,width:20}),helpNode:null,mapHtml:"",mapNode:null,mapWrapNode:null,markInstance:null,mouse:{x:null,y:null}}},methods:{helpClick:function(){D()({content:this.helpNode,title:"Tip"})},mapClick:function(t){var e=t.target;if("mark"!==e.tagName.toLowerCase()){var n=Object(X["a"])(e.parentNode.classList);if(!n.includes("wrap"))if(n.includes("map-inner")){var i=Object(X["a"])(e.parentNode.childNodes).indexOf(e);this.$emit("select",{paragraphIndex:i,searchTermIndex:-1})}else this.mapClick({target:e.parentNode})}else this.markClick({target:e})},markClick:function(t){var e=t.target,n=this.$refs.map,i=Object(X["a"])(n.querySelectorAll("mark")),r=i.indexOf(e),o=e.parentNode,s=Object(X["a"])(o.parentNode.childNodes).indexOf(o);this.$emit("select",{paragraphIndex:s,searchTermIndex:r})},updateMap:function(){if(this.editorElement){var t=this.editorElement.$el.querySelector(".ql-editor");this.mapHtml=t.innerHTML}}},mounted:function(){this.$nextTick(this.updateMap),this.helpNode=this.$refs.helpModal,this.markInstance=new et.a(this.$refs.map),this.mapNode=this.$refs.map,this.mapWrapNode=this.$refs.mapWrap},props:{dataStream:{required:!0,type:null},editorElement:{required:!0,type:null},mark:{default:null,type:String}},watch:{dataStream:Z()(function(){this.updateMap()},250),mark:function(t){this.markInstance.unmark(),t.length<3||ut(t)>3||this.markInstance.mark(t,{separateWordSearch:!1})}}};function ut(t){return t.trim().split(/\s/).length}var lt=ct,ht=(n("7ac5"),Object(f["a"])(lt,Q,J,!1,null,"2cff7cef",null));ht.options.__file="textMap.vue";var dt=ht.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},t._l(t.chapterTopics,function(e,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showTopic(e),expression:"showTopic(topic)"}],key:e.guid,staticClass:"topic"},[n("div",{staticClass:"topic-head"},[n("h5",{staticClass:"topic-title"},[t._v("\n        "+t._s(t.getMasterTopic(e).title)+"\n      ")]),n("div",{staticClass:"topic-actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.getMasterTopic(e).archived,expression:"!getMasterTopic(topic).archived"}],staticClass:"topic-action",on:{click:function(e){t.archiveTopic({index:i})}}},[t._v("Archive")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.getMasterTopic(e).archived,expression:"getMasterTopic(topic).archived"}],staticClass:"topic-action",on:{click:function(e){t.restoreTopic({index:i})}}},[t._v("Restore")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.getMasterTopic(e).archived,expression:"getMasterTopic(topic).archived"}],staticClass:"topic-action button-red",on:{click:function(e){t.deleteTopic({index:i})}}},[t._v("Delete Forever")])])]),n("div",{staticClass:"topic-content"},[t.showActions(e)?n("div",{staticClass:"content-actions"},[t.isEditing(i)?t._e():n("button",{staticClass:"button-link",on:{click:function(e){t.editTopic(i)}}},[n("span",{staticClass:"button-link-icon",domProps:{innerHTML:t._s(t.editSvg)}}),t._v("Edit\n        ")]),t.isEditing(i)?n("button",{staticClass:"button-link",on:{click:function(e){t.endEditTopic()}}},[n("span",{staticClass:"button-link-icon",domProps:{innerHTML:t._s(t.doneSvg)}}),t._v("Done Editing\n        ")]):t._e()]):t._e(),t.isEditing(i)?t._e():n("div",{staticClass:"content-static",class:{"space-above":!t.showActions(e)}},[n("div",{domProps:{innerHTML:t._s(t.getHtml(e))}}),t.showActions(e)&&!t.getTextContent(e.content)?n("span",{staticClass:"content-placeholder"},[t._v('\n          No content yet. Click "Edit" to add some.\n        ')]):t._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isEditing(i),expression:"isEditing(index)"}],staticClass:"content-editable"},[n("quill-editor",{ref:"quillEditor",refInFor:!0,attrs:{content:e.content,"content-id":t.chapter.guid},on:{"update:content":function(n){t.updateContent(e,n)},"shortcut:done":function(e){t.endEditTopic()}}})],1)])])}))},ft=[],vt={components:{QuillEditor:j["a"]},computed:{allChapters:function(){return this.$store.state.chapters.chapters},chapterTopics:function(){var t=this;return this.chapter?this.topics.map(function(e){return t.getTopic(t.chapter,e)}).filter(function(t){return!!t}):[]}},data:function(){return{doneSvg:T.a.check.toSVG({height:14,width:14}),editingTopicIndex:-1,editSvg:T.a.pencil.toSVG({height:14,width:14})}},methods:{archiveTopic:function(t){var e=t.index;this.$store.commit(C["i"],{topic:this.topics[e]})},deleteTopic:function(t){var e=this,n=t.index;D()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this topic? It will be deleted from every chapter.\n               This cannot be undone.",title:"Delete from every chapter?"}).then(function(t){t&&e.$store.commit(C["m"],{topic:e.topics[n]})})},editTopic:function(t){this.editingTopicIndex=t,this.$refs.quillEditor[t].focus()},endEditTopic:function(){this.editingTopicIndex=-1},getHtml:function(t){return Object(y["b"])(t.content)},getMasterTopic:function(t){return this.topics.find(function(e){return e.guid===t.guid})||{}},getTopic:function(t,e){return t.topics||(t.topics={}),t.topics[e.guid]||this.$store.commit(C["e"],{chapter:t,topic:e}),t.topics[e.guid]},getTextContent:function(t){return Object(y["a"])(t)},isEditing:function(t){return this.editingTopicIndex===t},restoreTopic:function(t){var e=t.index;this.$store.commit(C["w"],{topic:this.topics[e]})},showActions:function(t){return!this.getMasterTopic(t).archived&&!this.chapter.archived},showTopic:function(t){return!!t&&this.filterTopics(t)},updateContent:function(t,e){var n=e.content,i=e.contentId,r=this.allChapters.find(function(t){return t.guid===i}),o=r.topics[t.guid];this.$store.commit(C["E"],{chapter:r,newContent:n,topic:o})}},props:{chapter:{required:!0,type:Object},filterTopics:{required:!0,type:Function},topics:{required:!0,type:Array}}},mt=vt,gt=(n("96a4"),Object(f["a"])(mt,pt,ft,!1,null,"109018ef",null));gt.options.__file="topicList.vue";var wt=gt.exports,Ct=n("ade3"),kt="UPDATE_SELECTION",yt={state:{selection:{range:null,text:""}},mutations:Object(Ct["a"])({},kt,function(t,e){t.selection=e})},_t=yt,bt=n("5c47"),Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showActions,expression:"showActions"}],staticClass:"actions"},[n("div",{staticClass:"define-icon",domProps:{innerHTML:t._s(t.defineIcon)}}),n("div",{staticClass:"define-buttons"},[n("a",{staticClass:"define-link",attrs:{href:t.gDefineUrl,target:"_blank"}},[n("button",{staticClass:"define-button"},[t._v("Define")])]),n("a",{staticClass:"define-link",attrs:{href:t.gSynonymUrl,target:"_blank"}},[n("button",{staticClass:"define-button"},[t._v("Synonyms")])])])])])},Pt=[],St={components:{},computed:{gDefineUrl:function(){var t=this.word.trim().replace(/\s+/g,"+");return"https://www.google.com/#q=define+".concat(t)},gSynonymUrl:function(){var t=encodeURI(this.word.trim());return"http://www.thesaurus.com/browse/".concat(t)},showActions:function(){return!!this.word.trim()}},data:function(){return{defineIcon:T.a.book.toSVG({height:30,width:30}),linkIcon:T.a["link-external"].toSVG({height:20,width:20}),xIcon:T.a.x.toSVG({height:20,width:20})}},methods:{},props:{word:{required:!0,type:String}}},Et=St,Ot=(n("7d9c"),Object(f["a"])(Et,Tt,Pt,!1,null,"8eeb2360",null));Ot.options.__file="wordDefine.vue";var xt=Ot.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.workshops.length>0,expression:"workshops.length > 0"}],staticClass:"workshops-wrap"},[n("tabs-list",{attrs:{"active-index":t.activeWorkshopNameIndex,"data-array":t.workshopNameTabs,"filter-tabs":function(){return!0},"item-name":"Workshop","can-add":!1},on:{"update:activeIndex":t.selectWorkshopNameIndex}}),n("div",{staticClass:"workshop-list"},[n("div",{staticClass:"workshop-list-header"},[n("div",{staticClass:"workshop-list-title"},[t._v("\n        "+t._s(t.currentWorkshopDisplayName)+"\n      ")])]),n("div",{staticClass:"workshop-list-body"},[n("div",{staticClass:"workshop-select"},[n("div",{staticClass:"workshop-select-label"},[t._v("\n          Select a workshop:\n        ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedWorkshopGuid,expression:"selectedWorkshopGuid"}],staticClass:"workshop-select-dropdown",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selectedWorkshopGuid=e.target.multiple?n:n[0]}}},t._l(t.selectableWorkshops,function(e){return t.filterWorkshops(e)?n("option",{key:e.guid,domProps:{value:e.guid}},[t._v("\n            "+t._s(e.title)+"\n          ")]):t._e()}))]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.activeWorkshopsTitle,expression:"activeWorkshopsTitle"}],staticClass:"workshops"},[n("div",{staticClass:"workshop"},[n("div",{staticClass:"workshop-header"},[n("div",{staticClass:"workshop-title"},[t._v("\n              "+t._s(t.activeWorkshopsTitle)+" ("+t._s(t.activeWorkshopsDate)+")\n            ")]),n("div",{staticClass:"workshop-actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.firstActiveWorkshop.archived,expression:"!firstActiveWorkshop.archived"}],staticClass:"workshop-action",on:{click:function(e){t.archiveActiveWorkshops()}}},[t._v("Archive")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.firstActiveWorkshop.archived,expression:"firstActiveWorkshop.archived"}],staticClass:"workshop-action",on:{click:function(e){t.restoreActiveWorkshops()}}},[t._v("Restore")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.firstActiveWorkshop.archived,expression:"firstActiveWorkshop.archived"}],staticClass:"workshop-action button-red",on:{click:function(e){t.deleteActiveWorkshops()}}},[t._v("Delete Forever")])])]),t._l(t.activeWorkshops,function(e){return n("div",{key:e.guid+"|"+e.order,staticClass:"workshop-content"},[n("div",{domProps:{innerHTML:t._s(t.getHtml(e))}})])})],2)])])])],1)},It=[],Dt=(n("ac4d"),n("8a81"),n("55dd"),n("e935")),Nt=n("eed6"),Wt=n.n(Nt),$t=n("6c59"),Rt={components:{TabsList:H},computed:{currentWorkshopDisplayName:function(){return $t["a"][this.currentWorkshopName].displayName},currentWorkshopName:function(){return-1===this.activeWorkshopNameIndex?this.workshopNames[0]:this.workshopNames[this.activeWorkshopNameIndex]||{}},activeWorkshops:function(){var t=this;return this.viewingWorkshops.filter(function(e){return e.guid===t.selectedWorkshopGuid})},activeWorkshopsDate:function(){return this.activeWorkshops&&this.activeWorkshops.length&&new Date(this.activeWorkshops[0].date).toLocaleDateString()},activeWorkshopsTitle:function(){return this.firstActiveWorkshop.title},firstActiveWorkshop:function(){return this.activeWorkshops&&this.activeWorkshops.length&&this.activeWorkshops[0]||{}},selectableWorkshops:function(){return this.viewingWorkshops.filter(function(t){return 0===t.order}).slice(0).sort(function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()})},viewingWorkshops:function(){var t=this;return this.workshops.filter(function(e){return e.workshopName===t.currentWorkshopName})},workshopNames:function(){return Wt()(this.workshops.map(function(t){return t.workshopName}))},workshopNameTabs:function(){return this.workshopNames.map(function(t){return{title:$t["a"][t].displayName}})},workshops:function(){return this.$store.state.workshop.workshops}},data:function(){return{activeWorkshopNameIndex:-1,selectedWorkshopGuid:null}},methods:{archiveActiveWorkshops:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.activeWorkshops[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;this.$store.commit(Dt["b"],{workshop:o})}}catch(s){e=!0,n=s}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}},deleteActiveWorkshops:function(){var t=this;D()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this workshop? All of its content will be lost. This cannot be undone.",title:"Delete Forever?"}).then(function(e){if(e){var n=!0,i=!1,r=void 0;try{for(var o,s=t.activeWorkshops[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;t.$store.commit(Dt["c"],{workshop:a})}}catch(c){i=!0,r=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}t.selectableWorkshops&&t.selectableWorkshops.length?t.selectedWorkshopGuid=t.selectableWorkshops[0].guid:t.selectWorkshopNameIndex(-1)}})},getHtml:function(t){return Object(y["b"])(t.content)},restoreActiveWorkshops:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.activeWorkshops[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;this.$store.commit(Dt["f"],{workshop:o})}}catch(s){e=!0,n=s}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}},selectWorkshopGuid:function(t){this.selectedWorkshopGuid=t},selectWorkshopName:function(t){this.activeWorkshopNameIndex=this.workshopNames.indexOf(t)},selectWorkshopNameIndex:function(t){-1===t&&(t=0,this.selectDefaultWorkshop()),this.activeWorkshopNameIndex=t},selectDefaultWorkshop:function(){this.viewingWorkshops&&this.viewingWorkshops.length&&(this.selectedWorkshopGuid=this.viewingWorkshops[0].guid)}},mounted:function(){this.selectDefaultWorkshop()},props:{filterWorkshops:{required:!0,type:Function}}},jt=Rt,Lt=(n("fed0"),Object(f["a"])(jt,At,It,!1,null,"41a6efe2",null));Lt.options.__file="workshopList.vue";var Mt=Lt.exports,Gt=new k["b"]("COMPOSER_PLAN_SWITCH"),Kt={components:{PlansList:B,QuillEditor:j["a"],TabsList:H,TextMap:dt,TopicList:wt,VueSwitch:bt["a"],WordDefine:xt,WorkshopList:Mt},computed:{activeChapter:function(){return-1===this.activeChapterIndex?this.viewingChapters[0]:this.allChapters[this.activeChapterIndex]||{}},allChapters:function(){return this.$store.state.chapters.chapters},allPlans:function(){return this.$store.state.chapters.plans||[]},allTopics:function(){return this.$store.state.chapters.topics},allWorkshops:function(){return this.$store.state.workshop.workshops},chapterPageCount:function(){return this.getPageCount(this.textContent)},chapterParagraphCount:function(){return this.getParagraphCount(this.textContent)},chapterReadTimeMinutes:function(){return this.getReadTimeMinutes(this.textContent)},chapterWordCount:function(){return this.getWordCount(this.textContent)},documentFullText:function(){return this.$store.state.chapters.chapters.map(function(t){return t.content}).map(function(t){return Object(y["a"])(t)}).join(" ")},documentPageCount:function(){return this.getPageCount(this.documentFullText)},documentReadTimeMinutes:function(){return this.getReadTimeMinutes(this.documentFullText)},documentTitle:function(){return this.$store.state.document.currentDocument.name},documentWordCount:function(){return this.getWordCount(this.documentFullText)},hasChapters:function(){return this.viewingChapters&&this.viewingChapters.length},hasPlans:function(){return this.allPlans&&this.allPlans.length},hasTopics:function(){return this.allTopics&&this.allTopics.length},hasWorkshops:function(){return this.allWorkshops&&this.allWorkshops.length},isPremium:function(){return this.$store.state.user.user.isPremium},mark:function(){return this.selection.text},selection:function(){return this.$store.state.composer.selection},textContent:function(){return Object(y["a"])(this.activeChapter.content)},viewingChapters:function(){return this.allChapters.filter(function(t){return!t.archived})},viewingPlans:function(){var t=this;return this.allPlans.filter(function(e){return!e.archived||t.filters.archived})}},data:function(){return{activeChapterIndex:-1,editorContainerNode:null,editorElement:null,filters:{archived:!1},newChapter:"",outlineSvg:T.a["list-unordered"].toSVG({height:25,width:25}),planSvg:T.a.telescope.toSVG({height:25,width:25}),workshopSvg:T.a.tools.toSVG({height:25,width:25}),scrollTo:{paragraphIndex:-1,searchTermIndex:-1},sidebar:"outline",showStats:!1}},methods:{addChapter:function(t){if(F("chapter",t)){var e={archived:!1,content:null,guid:Object(_["a"])(),title:t,topics:{}};this.$store.commit(C["a"],{chapter:e})}},getMasterTopic:function(t){return this.allTopics.find(function(e){return e.guid===t.guid})},getReadTimeMinutes:function(t){return Math.ceil(this.getWordCount(t)/275)},getPageCount:function(t){return Math.ceil(this.getWordCount(t)/300)},getParagraphCount:function(t){return(t.match(/[\n]+/g)||[]).length},getWordCount:function(t){return(t.match(/[^\s]+/g)||[]).length},hoverChapter:function(){this.showStats=!0},isActive:function(t){return t===this.activeChapterIndex},isViewing:function(t){return!t.archived||this.filters.archived},selectChapter:function(t){-1===t&&(t=0),this.allChapters[t].archived&&!this.filters.archived&&(t=this.allChapters.indexOf(this.viewingChapters[0])),this.activeChapterIndex=t},selectMap:function(t){this.scrollTo=t},showPlan:function(t){return this.viewingPlans.includes(t)},showSection:function(t){return!t.archived||this.filters.archived},showTopic:function(t){var e=this.getMasterTopic(t);return!e||!e.archived||this.filters.archived},showWorkshop:function(t){return!t.archived||this.filters.archived},switchOutline:function(){this.sidebar="outline",Gt.cacheSet("outline")},switchPlans:function(){this.sidebar="plan",Gt.cacheSet("plan")},switchWorkshops:function(){this.sidebar="workshop",Gt.cacheSet("workshop")},unhoverChapter:function(){this.showStats=!1},updateContent:function(t){var e=t.content,n=t.contentId,i=this.allChapters.find(function(t){return t.guid===n});i&&this.$store.commit(C["y"],{chapter:i,newContent:e})},updateSelection:function(t){this.$store.commit(kt,t)}},mounted:function(){this.editorContainerNode=this.$refs.editorContainer,this.editorElement=this.$refs.textEditor,this.sidebar=Gt.cacheGet()||"outline";var t=this.$route.query.chapter;if(t){var e=this.allChapters.find(function(e){return e.guid===t});e.archived&&(this.filters.archived=!0),this.selectChapter(this.allChapters.indexOf(e)||-1)}var n=this.$route.query.workshop,i=this.$route.query.workshopName;if(i&&n){this.switchWorkshops();var r=this.allWorkshops.find(function(t){return t.guid===n});r.archived&&(this.filters.archived=!0),this.$refs.workshopList.selectWorkshopName(i),this.$refs.workshopList.selectWorkshopGuid(n)}this.$router.replace("/write")}},qt=Kt,Ht=(n("88c7"),Object(f["a"])(qt,g,w,!1,null,"2105d8d6",null));Ht.options.__file="composer.page.vue";var Ft=Ht.exports,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"document"},[n("div",{staticClass:"title"},[n("h3",[t._v('\n        "'+t._s(t.documentName)+'"\n      ')])]),n("div",{staticClass:"actions"},[n("label",{staticClass:"name-label",attrs:{for:"documentNameInput"}},[t._v("Change document name:")]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newDocumentName,expression:"newDocumentName"}],staticClass:"name-input",attrs:{id:"documentNameInput",type:"text"},domProps:{value:t.newDocumentName},on:{input:function(e){e.target.composing||(t.newDocumentName=e.target.value)}}}),n("button",{staticClass:"button-green",on:{click:function(e){t.saveDocumentName()}}},[t._v("Save")])])]),n("hr"),n("div",{staticClass:"actions"},[n("button",{staticClass:"button-red",on:{click:function(e){t.deleteDocument()}}},[t._v("Delete Document")])])])])},Ut=[],zt=n("8fdb"),Bt={components:{},computed:{documentGuid:function(){return this.$store.state.document.currentDocument.guid},documentName:function(){return this.$store.state.document.currentDocument.name}},data:function(){return{newDocumentName:""}},methods:{deleteDocument:function(){var t=this;D()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this document? All plans, outlines, and chapters will be lost. This cannot be undone.",title:"Delete Forever?"}).then(function(e){e&&t.$store.dispatch(zt["c"],{guid:t.documentGuid})})},saveDocumentName:function(){this.$store.commit(zt["h"],{guid:this.documentGuid,name:this.newDocumentName})}},mounted:function(){this.newDocumentName=this.documentName}},Qt=Bt,Jt=(n("84d7"),Object(f["a"])(Qt,Vt,Ut,!1,null,"fcb1d9b4",null));Jt.options.__file="documentEdit.page.vue";var Xt=Jt.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"outliner-wrap"},[n("div",{staticClass:"outliner"},[n("div",{staticClass:"filters"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.archived,expression:"filters.archived"}],attrs:{id:"showArchivedCheckbox",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.archived)?t._i(t.filters.archived,null)>-1:t.filters.archived},on:{change:function(e){var n=t.filters.archived,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=null,s=t._i(n,o);i.checked?s<0&&t.$set(t.filters,"archived",n.concat([o])):s>-1&&t.$set(t.filters,"archived",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"archived",r)}}}),n("label",{attrs:{for:"showArchivedCheckbox"}},[t._v("Show Archived")])]),n("hr"),n("div",{staticClass:"chips-wrap chapter-chips"},[n("div",{staticClass:"section-title"},[n("h3",[t._v("Chapters")]),n("button",{staticClass:"help-icon",domProps:{innerHTML:t._s(t.helpIconSvg)},on:{click:function(e){t.helpClick(t.helpChapterChipsNode,"Chapter List")}}})]),n("chips-list",{attrs:{name:"Chapter","name-prop":"title","data-array":t.allChapters,"filter-chips":t.showChapter,"is-deletable":t.isDeletable},on:{add:t.addChapter,delete:t.archiveChapter,rearrange:t.rearrangeChapter,restore:t.restoreChapter,update:t.renameChapter}})],1),n("div",{staticClass:"chips-wrap topic-chips"},[n("div",{staticClass:"section-title"},[n("h3",[t._v("Topics")]),n("button",{staticClass:"help-icon",domProps:{innerHTML:t._s(t.helpIconSvg)},on:{click:function(e){t.helpClick(t.helpTopicChipsNode,"Topic List")}}})]),n("chips-list",{attrs:{name:"Topic","name-prop":"title","data-array":t.allTopics,"filter-chips":t.showTopic,"is-deletable":t.isDeletable},on:{add:t.addTopic,delete:t.archiveTopic,rearrange:t.rearrangeTopic,restore:t.restoreTopic,update:t.renameTopic}})],1),n("hr"),t.viewingChapters.length>0?n("div",{staticClass:"chapters"},[n("div",{staticClass:"section-title"},[n("h3",[t._v("Outline")]),n("button",{staticClass:"help-icon",domProps:{innerHTML:t._s(t.helpIconSvg)},on:{click:function(e){t.helpClick(t.helpChapterBlocksNode,"Outline")}}})]),n("tabs-list",{attrs:{"active-index":t.activeChapterIndex,"data-array":t.allChapters,"filter-tabs":t.showChapter,"item-name":"Chapter"},on:{add:t.addChapter,"update:activeIndex":t.selectChapter}}),t.activeChapter?n("div",{staticClass:"chapter"},[n("div",{staticClass:"chapter-head",class:{light:t.activeChapter.archived}},[n("h4",{staticClass:"chapter-title"},[t._v("\n            "+t._s(t.activeChapter.title)+"\n          ")]),n("div",{staticClass:"chapter-actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.activeChapter.archived,expression:"!activeChapter.archived"}],staticClass:"chapter-action",on:{click:function(e){t.archiveChapter({index:t.activeChapterIndex})}}},[t._v("Archive")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.activeChapter.archived,expression:"activeChapter.archived"}],staticClass:"chapter-action",on:{click:function(e){t.restoreChapter({index:t.activeChapterIndex})}}},[t._v("Restore")]),n("button",{directives:[{name:"show",rawName:"v-show",value:t.activeChapter.archived,expression:"activeChapter.archived"}],staticClass:"chapter-action button-red",on:{click:function(e){t.deleteChapter({index:t.activeChapterIndex})}}},[t._v("Delete Forever")])])]),n("div",{staticClass:"chapter-content"},[n("topic-list",{attrs:{chapter:t.activeChapter,"filter-topics":t.showTopic,topics:t.allTopics}})],1)]):t._e()],1):t._e()]),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"helpChapterChipsModal",staticClass:"help"},[n("p",[t._v("This is the chapter list. It's the easiest place to add, archive, restore, rename, and rearrange chapters.")]),n("p",[t._v('To add a chapter, type its name into the "New Chapter" box and click "Add".')]),n("p",[t._v('\n        To archive a chapter, click the "X" next to its name in the list.\n        Archiving a chapter removes it from your document without deleting it permanently.\n      ')]),n("p",[t._v('To restore an archived chapter, check the "Show Archived" box, then click the "+" next to its name in the list.')]),n("p",[t._v("To rename a chapter, click the pencil icon next to its name in the list.")]),n("p",[t._v("To rearrange a chapter, click and drag it to where you want it to go.")])])]),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"helpTopicChipsModal",staticClass:"help"},[n("p",[t._v("This is the topic list. It's the easiest place to add, archive, restore, rename, and rearrange topics.")]),n("p",[t._v('To add a topic, type its name into the "New Topic" box and click "Add". It will show up in every chapter in the "Outline" section.')]),n("p",[t._v('\n        To archive a topic, click the "X" next to its name in the list.\n        Archiving a topic removes it from all chapters without deleting it permanently.\n      ')]),n("p",[t._v('To restore an archived topic, check the "Show Archived" box, then click the "+" next to its name in the list.')]),n("p",[t._v("To rename a topic, click the pencil icon next to its name in the list.")]),n("p",[t._v("To rearrange a topic, click and drag it to where you want it to go.")])])]),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"helpChapterBlocksModal",staticClass:"help"},[n("p",[t._v("This is where the real work happens. Each of your chapters has a block below, with a section for each topic.")]),n("p",[t._v('\n        A "topic" can be a character arc, a list of subpoints, citations you\'ve found in your research, or really anything\n        that you want to keep handy while you write. Everything you outline here will be visible on the Write page, next to\n        the main editor.\n      ')]),n("p",[t._v("\n        You can update these topics any time you want.\n      ")])])])])},Zt=[],te={components:{ChipsList:R,TabsList:H,TopicList:wt},computed:{activeChapter:function(){return-1===this.activeChapterIndex?null:this.allChapters[this.activeChapterIndex]},allChapters:function(){return this.$store.state.chapters.chapters||[]},allTopics:function(){return this.$store.state.chapters.topics||[]},viewingChapters:function(){var t=this;return this.allChapters.filter(function(e){return!e.archived||t.filters.archived}).filter(function(e){return!t.filters.chapter||e.title.toLowerCase().includes(t.filters.chapter.toLowerCase())})},viewingTopicsFilteredArchived:function(){var t=this;return this.allTopics.filter(function(e){return!e.archived||t.filters.archived})},viewingTopicsFilteredTitle:function(){var t=this;return this.allTopics.filter(function(e){if(!t.filters.topic)return!0;var n=t.filters.topic.toLowerCase(),i=e.title.toLowerCase();return i.includes(n)})}},data:function(){return{activeChapterIndex:-1,addSvg:T.a.plus.toSVG({class:"add-icon--svg",height:14,width:14}),expandSvg:T.a["chevron-down"].toSVG({height:18,width:18}),filters:{archived:!1,chapter:"",topic:""},filtersVisible:!1,helpChapterBlocksNode:null,helpChapterChipsNode:null,helpIconSvg:T.a.question.toSVG({class:"help-icon--svg",height:16,width:16}),helpTopicChipsNode:null}},methods:{addChapter:function(t){if(F("chapter",t)){var e={archived:!1,content:null,guid:Object(_["a"])(),title:t,topics:{}};this.$store.commit(C["a"],{chapter:e})}},addTopic:function(t){if(F("topic",t)){var e={archived:!1,guid:Object(_["a"])(),title:t};this.$store.commit(C["d"],{topic:e})}},archiveChapter:function(t){var e=t.index;this.$store.commit(C["f"],{chapter:this.allChapters[e]}),e!==this.activeChapterIndex||this.filters.archived||this.selectChapter(-1)},archiveTopic:function(t){var e=t.index;this.$store.commit(C["i"],{topic:this.allTopics[e]})},deleteChapter:function(t){var e=this,n=t.index;D()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to delete this chapter? Its outline and all of its written content (from the Write page)\n               will be lost. This cannot be undone.",title:"Delete Forever?"}).then(function(t){t&&(e.$store.commit(C["j"],{chapter:e.allChapters[n]}),n===e.activeChapterIndex&&e.selectChapter(-1))})},getMasterTopic:function(t){return this.allTopics.find(function(e){return e.guid===t.guid})},helpClick:function(t,e){D()({content:t,title:e})},isDeletable:function(t){return!t.archived},rearrangeChapter:function(t){this.$store.commit(C["p"],{chapters:t})},rearrangeTopic:function(t){this.$store.commit(C["s"],{topics:t})},renameChapter:function(t){var e=t.index,n=t.value;F("chapter",n)&&this.$store.commit(C["x"],{chapter:this.allChapters[e],newTitle:n})},renameTopic:function(t){var e=t.index,n=t.value;if(F("topic",n)){var i=this.allTopics[e];this.$store.commit(C["D"],{topic:i,newTitle:n})}},restoreChapter:function(t){var e=t.index;this.$store.commit(C["t"],{chapter:this.allChapters[e]})},restoreTopic:function(t){var e=t.index;this.$store.commit(C["w"],{topic:this.allTopics[e]})},selectChapter:function(t){-1===t&&(t=0),this.allChapters[t].archived&&!this.filters.archived&&(t=this.allChapters.indexOf(this.viewingChapters[0])),this.activeChapterIndex=t},showChapter:function(t){return this.viewingChapters.includes(t)},showTopic:function(t){var e=this.getMasterTopic(t),n=Object(y["a"])(t.content);return this.viewingTopicsFilteredArchived.includes(e)&&(this.viewingTopicsFilteredTitle.includes(e)||n&&n.includes(this.filters.topic))},toggleFilters:function(){this.filtersVisible=!this.filtersVisible}},mounted:function(){this.helpChapterBlocksNode=this.$refs.helpChapterBlocksModal,this.helpChapterChipsNode=this.$refs.helpChapterChipsModal,this.helpTopicChipsNode=this.$refs.helpTopicChipsModal;var t=this.$route.query.chapter;if(t){var e=this.allChapters.find(function(e){return e.guid===t});e.archived&&(this.filters.archived=!0),this.selectChapter(this.allChapters.indexOf(e))}else this.selectChapter(-1);this.$router.replace("/outline")}},ee=te,ne=(n("58e3"),n("a812"),Object(f["a"])(ee,Yt,Zt,!1,null,"3e9b1370",null));ne.options.__file="outliner.page.vue";var ie=ne.exports,re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"planner"},[n("div",{staticClass:"filters"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.archived,expression:"filters.archived"}],staticClass:"show-archived",attrs:{id:"showArchivedCheckbox",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.archived)?t._i(t.filters.archived,null)>-1:t.filters.archived},on:{change:function(e){var n=t.filters.archived,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=null,s=t._i(n,o);i.checked?s<0&&t.$set(t.filters,"archived",n.concat([o])):s>-1&&t.$set(t.filters,"archived",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"archived",r)}}}),n("label",{attrs:{for:"showArchivedCheckbox"}},[t._v("Show Archived")])]),n("hr"),n("div",{staticClass:"chips-wrap plan-chips"},[n("div",{staticClass:"section-title"},[n("h3",[t._v("Plans")]),n("button",{staticClass:"help-icon",domProps:{innerHTML:t._s(t.helpIconSvg)},on:{click:function(e){t.helpClick(t.helpPlanChipsModal,"Plan List")}}})]),n("chips-list",{attrs:{name:"Plan","name-prop":"title","data-array":t.allPlans,"filter-chips":t.showPlan,"is-deletable":t.isDeletable},on:{add:t.addPlan,delete:t.archivePlan,rearrange:t.rearrangePlan,restore:t.restorePlan,update:t.renamePlan}})],1),n("hr"),n("plans-list",{ref:"plansList",attrs:{"filter-plans":t.showPlan,"filter-sections":t.showSection}})],1),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"helpPlanChipsModal",staticClass:"help"},[n("p",[t._v("This is the plan list. It's the easiest place to add, archive, restore, rename, and rearrange plans.")]),n("p",[t._v('To add a plan, type its name into the "New Plan" box and click "Add".')]),n("p",[t._v('\n        To archive a plan, click the "X" next to its name in the list.\n        Archiving a plan removes it from your document without deleting it permanently.\n      ')]),n("p",[t._v('To restore an archived plan, check the "Show Archived" box, then click the "+" next to its name in the list.')]),n("p",[t._v("To rename a plan, click the pencil icon next to its name in the list.")]),n("p",[t._v("To rearrange a plan, click and drag it to where you want it to go.")])])])])},oe=[],se={components:{ChipsList:R,PlansList:B},computed:{allPlans:function(){return this.$store.state.chapters.plans||[]},viewingPlans:function(){var t=this;return this.allPlans.filter(function(e){return!e.archived||t.filters.archived})}},data:function(){return{filters:{archived:!1},helpIconSvg:T.a.question.toSVG({class:"help-icon--svg",height:16,width:16})}},methods:{addPlan:function(t){if(F("plan",t)){var e={archived:!1,guid:Object(_["a"])(),title:t,sections:[]};this.$store.commit(C["b"],{plan:e})}},archivePlan:function(t){var e=t.index;this.$store.commit(C["g"],{plan:this.allPlans[e]}),e===this.activePlanIndex&&(this.activePlanIndex=-1)},helpClick:function(t,e){D()({content:t,title:e})},isDeletable:function(t){return!t.archived},rearrangePlan:function(t){this.$store.commit(C["q"],{plans:t})},renamePlan:function(t){var e=t.index,n=t.value;F("plan",n)&&this.$store.commit(C["z"],{plan:this.allPlans[e],newTitle:n})},restorePlan:function(t){var e=t.index;this.$store.commit(C["u"],{plan:this.allPlans[e]})},showPlan:function(t){return this.viewingPlans.includes(t)},showSection:function(t){return!t.archived||this.filters.archived}},mounted:function(){this.helpPlanChipsModal=this.$refs.helpPlanChipsModal;var t=this.$route.query.plan;if(t){var e=this.allPlans.find(function(e){return e.guid===t});e.archived&&(this.filters.archived=!0),this.$refs.plansList.selectPlan(this.allPlans.indexOf(e))}this.$router.replace("/plan")}},ae=se,ce=(n("0dfa"),Object(f["a"])(ae,re,oe,!1,null,"3b3a778d",null));ce.options.__file="planner.page.vue";var ue=ce.exports,le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"search"},[n("h2",[t._v("Document Search")]),n("p",[t._v("\n      Enter a partial word, full word or phrase and Edward will find all your chapters, outlines, plans and workshops\n      that match it.\n    ")]),n("div",{staticClass:"search-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",staticClass:"search-input",attrs:{type:"text",placeholder:"Search text"},domProps:{value:t.searchText},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.search()},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),n("button",{staticClass:"button-green",on:{click:function(e){t.search()}}},[t._v("Search")])]),n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.loading?n("div",{key:"loading",staticClass:"loading"},[n("pulse-loader")],1):n("div",{key:"results",staticClass:"results"},[t.hasResults?[n("hr"),n("div",{staticClass:"filters"},[n("div",{staticClass:"filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.showChapters,expression:"filters.showChapters"}],attrs:{id:"show-chapters",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.showChapters)?t._i(t.filters.showChapters,null)>-1:t.filters.showChapters},on:{change:function(e){var n=t.filters.showChapters,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=null,s=t._i(n,o);i.checked?s<0&&t.$set(t.filters,"showChapters",n.concat([o])):s>-1&&t.$set(t.filters,"showChapters",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"showChapters",r)}}}),n("label",{attrs:{for:"show-chapters"}},[t._v("Show Chapters")])]),n("div",{staticClass:"filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.showOutlines,expression:"filters.showOutlines"}],attrs:{id:"show-outlines",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.showOutlines)?t._i(t.filters.showOutlines,null)>-1:t.filters.showOutlines},on:{change:function(e){var n=t.filters.showOutlines,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=null,s=t._i(n,o);i.checked?s<0&&t.$set(t.filters,"showOutlines",n.concat([o])):s>-1&&t.$set(t.filters,"showOutlines",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"showOutlines",r)}}}),n("label",{attrs:{for:"show-outlines"}},[t._v("Show Outlines")])]),n("div",{staticClass:"filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.showPlans,expression:"filters.showPlans"}],attrs:{id:"show-plans",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.showPlans)?t._i(t.filters.showPlans,null)>-1:t.filters.showPlans},on:{change:function(e){var n=t.filters.showPlans,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=null,s=t._i(n,o);i.checked?s<0&&t.$set(t.filters,"showPlans",n.concat([o])):s>-1&&t.$set(t.filters,"showPlans",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"showPlans",r)}}}),n("label",{attrs:{for:"show-plans"}},[t._v("Show Plans")])]),n("div",{staticClass:"filter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.showWorkshops,expression:"filters.showWorkshops"}],attrs:{id:"show-workshops",type:"checkbox"},domProps:{checked:Array.isArray(t.filters.showWorkshops)?t._i(t.filters.showWorkshops,null)>-1:t.filters.showWorkshops},on:{change:function(e){var n=t.filters.showWorkshops,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=null,s=t._i(n,o);i.checked?s<0&&t.$set(t.filters,"showWorkshops",n.concat([o])):s>-1&&t.$set(t.filters,"showWorkshops",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.filters,"showWorkshops",r)}}}),n("label",{attrs:{for:"show-workshops"}},[t._v("Show Workshops")])])])]:t._e(),t.searched&&!t.hasResults?n("div",[n("strong",[t._v("No results found.")])]):t._e(),t.matches.chapters.length&&t.filters.showChapters?n("div",{staticClass:"result-set chapter-results"},[n("h3",[t._v("Chapters")]),t._l(t.matches.chapters,function(e){return n("div",{key:e.guid,staticClass:"result"},[n("p",{staticClass:"result-title"},[n("strong",{domProps:{textContent:t._s(e.title)}}),n("router-link",{attrs:{to:"/write?chapter="+e.guid}},[n("button",{staticClass:"link-out",domProps:{innerHTML:t._s(t.linkSvg)}})])],1),t._l(e._matches,function(t){return n("div",{key:t.index},[n("match",{attrs:{match:t}})],1)})],2)})],2):t._e(),t.matches.outlines.length&&t.filters.showOutlines?n("div",{staticClass:"result-set outline-results"},[n("h3",[t._v("Outlines")]),t._l(t.matches.outlines,function(e){return n("div",{key:e.chapterGuid+e.topicGuid,staticClass:"result"},[n("p",{staticClass:"result-title"},[n("strong",[t._v(t._s(e.chapterTitle)+" | "+t._s(e.topicTitle))]),n("router-link",{attrs:{to:"/outline?chapter="+e.chapterGuid}},[n("button",{staticClass:"link-out",domProps:{innerHTML:t._s(t.linkSvg)}})])],1),t._l(e._matches,function(t){return n("div",{key:t.index},[n("match",{attrs:{match:t}})],1)})],2)})],2):t._e(),t.matches.plans.length&&t.filters.showPlans?n("div",{staticClass:"result-set plan-results"},[n("h3",[t._v("Plans")]),t._l(t.matches.plans,function(e){return n("div",{key:e.planGuid+e.sectionGuid,staticClass:"result"},[n("p",{staticClass:"result-title"},[n("strong",[t._v(t._s(e.planTitle)+" | "+t._s(e.sectionTitle))]),n("router-link",{attrs:{to:"/plan?plan="+e.planGuid}},[n("button",{staticClass:"link-out",domProps:{innerHTML:t._s(t.linkSvg)}})])],1),t._l(e._matches,function(t){return n("div",{key:t.index},[n("match",{attrs:{match:t}})],1)})],2)})],2):t._e(),t.matches.workshops.length&&t.filters.showWorkshops?n("div",{staticClass:"result-set workshop-results"},[n("h3",[t._v("Workshops")]),t._l(t.matches.workshops,function(e){return n("div",{key:e.guid,staticClass:"result"},[n("p",{staticClass:"result-title"},[n("strong",[t._v(t._s(e.title))]),n("router-link",{attrs:{to:"/write?workshopName="+e.workshopName+"&workshop="+e.guid}},[n("button",{staticClass:"link-out",domProps:{innerHTML:t._s(t.linkSvg)}})])],1),t._l(e._matches,function(t){return n("div",{key:t.index},[n("match",{attrs:{match:t}})],1)})],2)})],2):t._e()],2)])],1)])},he=[],de=(n("456d"),n("b54a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"match"},[t.match.atHead?t._e():n("span",[t._v("...")]),n("span",{domProps:{textContent:t._s(t.formattedPre)}}),n("em",{domProps:{textContent:t._s(t.formattedQuery)}}),n("span",{domProps:{textContent:t._s(t.formattedPost)}}),t.match.atTail?t._e():n("span",[t._v("...")])])}),pe=[],fe=n("f942"),ve=n.n(fe),me=n("1686"),ge=n.n(me),we={computed:{formattedPre:function(){return ge()(this.match.pre).replace(/\n/g,"  ")},formattedQuery:function(){return this.match.query.replace(/\n/g,"  ")},formattedPost:function(){return ve()(this.match.post).replace(/\n/g,"  ")}},props:{match:{required:!0,type:Object}}},Ce=we,ke=(n("329d"),Object(f["a"])(Ce,de,pe,!1,null,"3b69e175",null));ke.options.__file="match.vue";var ye=ke.exports,_e=n("8a5d"),be=40,Te={components:{Match:ye,PulseLoader:_e["a"]},computed:{allChapters:function(){return this.$store.state.chapters.chapters||[]},allPlans:function(){return this.$store.state.chapters.plans||[]},allTopics:function(){return this.$store.state.chapters.topics||[]},allWorkshops:function(){return this.$store.state.workshop.workshops||[]},hasResults:function(){return this.matches.chapters.length||this.matches.outlines.length||this.matches.plans.length||this.matches.workshops.length}},data:function(){return{filters:{showChapters:!0,showOutlines:!0,showPlans:!0,showWorkshops:!0},linkSvg:T.a.link.toSVG({height:14,width:14}),loading:!1,matches:{chapters:[],outlines:[],plans:[],workshops:[]},searched:!1,searchText:""}},methods:{getMasterTopic:function(t){return this.allTopics.find(function(e){return e.guid===t.guid})},getMatchArray:function(t,e,n){return e.map(function(e){var i=t.slice(Math.max(e-be,0),e),r=t.slice(e,e+n.length),o=t.slice(e+n.length,e+n.length+be);return{atHead:e-be<=0,atTail:e+n.length+be>=t.length-1,pre:i,post:o,index:e,query:r}})},getMatchingChapters:function(t){var e=this;return this.allChapters.map(function(n){var i=Object(y["a"])(n.content),r=Object(y["c"])(t,i);return n._matches=e.getMatchArray(i,r,t),n}).filter(function(e){return e._matches.length>0||e.title.toLowerCase().includes(t)})},getMatchingOutlines:function(t){var e=this;return this.allChapters.reduce(function(n,i){for(var r in i.topics)if(i.topics.hasOwnProperty(r)){var o=i.topics[r],s=Object(y["a"])(o.content),a=Object(y["c"])(t,s),c=e.getMasterTopic(o);n.push({_matches:e.getMatchArray(s,a,t),chapterGuid:i.guid,chapterTitle:i.title,topicGuid:o.guid,topicTitle:c.title})}return n},[]).filter(function(e){return e._matches.length>0||e.topicTitle.toLowerCase().includes(t)})},getMatchingPlans:function(t){var e=this;return this.allPlans.reduce(function(n,i){return n.concat(i.sections.map(function(n){var r=Object(y["a"])(n.content),o=Object(y["c"])(t,r);return{_matches:e.getMatchArray(r,o,t),planGuid:i.guid,planTitle:i.title,sectionGuid:n.guid,sectionTitle:n.title}}))},[]).filter(function(e){return e._matches.length>0||e.sectionTitle.toLowerCase().includes(t)})},getMatchingWorkshops:function(t){var e=this,n=this.allWorkshops.reduce(function(n,i){n[i.guid]=n[i.guid]||{guid:i.guid,title:i.title,workshopName:i.workshopName,_matches:[]};var r=n[i.guid],o=Object(y["a"])(i.content),s=Object(y["c"])(t,o);return r._matches=r._matches.concat(e.getMatchArray(o,s,t)),n},{});return Object.keys(n).map(function(t){return n[t]}).filter(function(e){return e._matches.length>0||e.title.toLowerCase().includes(t)})},search:function(){this.loading=!0,this.searched=!1,this.matches.chapters=this.getMatchingChapters(this.searchText.toLowerCase()),this.matches.outlines=this.getMatchingOutlines(this.searchText.toLowerCase()),this.matches.plans=this.getMatchingPlans(this.searchText.toLowerCase()),this.matches.workshops=this.getMatchingWorkshops(this.searchText.toLowerCase()),this.searched=!0,this.loading=!1}},mounted:function(){this.$refs.searchInput.focus()}},Pe=Te,Se=(n("c286"),Object(f["a"])(Pe,le,he,!1,null,"10533e1c",null));Se.options.__file="search.page.vue";var Ee,Oe,xe=Se.exports,Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"settings"},[t._m(0),n("hr"),n("h4",[t._v("Email")]),n("div",{staticClass:"change-email"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.account.email,expression:"account.email"}],staticClass:"account-input",attrs:{disabled:!t.editingEmail},domProps:{value:t.account.email},on:{input:function(e){e.target.composing||t.$set(t.account,"email",e.target.value)}}}),t.notDemo&&!t.editingEmail?n("button",{staticClass:"button-link",on:{click:function(e){t.editEmail()}}},[t._v("\n        Edit\n      ")]):t._e(),t.editingEmail?n("button",{staticClass:"button-link",on:{click:function(e){t.cancelEditEmail()}}},[t._v("\n        Cancel\n      ")]):t._e(),t.notDemo?n("button",{staticClass:"button-green",attrs:{disabled:!t.editingEmail},on:{click:function(e){t.saveEmail()}}},[t._v("\n        Save\n      ")]):t._e()]),t.error?n("div",{staticClass:"error"},[t._v("\n      That didn't work. Please try again or contact support.\n    ")]):t._e(),n("hr"),n("h4",[t._v("Password")]),n("div",{staticClass:"change-password"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.account.password,expression:"account.password"}],staticClass:"account-input",attrs:{type:"password",disabled:!t.editingPassword},domProps:{value:t.account.password},on:{input:function(e){e.target.composing||t.$set(t.account,"password",e.target.value)}}}),t.notDemo&&!t.editingPassword?n("button",{staticClass:"button-link",on:{click:function(e){t.editPassword()}}},[t._v("\n        Edit\n      ")]):t._e(),t.editingPassword?n("button",{staticClass:"button-link",on:{click:function(e){t.cancelEditPassword()}}},[t._v("\n        Cancel\n      ")]):t._e(),t.notDemo?n("button",{staticClass:"button-green",attrs:{disabled:!t.editingPassword},on:{click:function(e){t.savePassword()}}},[t._v("\n        Save\n      ")]):t._e()]),n("hr"),n("h3",[t._v("Account Status")]),t.notDemo?n("div",{staticClass:"account-type"},[n("p",[t._v("You have a "+t._s(t.accountType)+".")]),t.isPremium?t._e():n("p",[t._v("For a better experience, upgrade to a Premium Account.")]),t._m(1)]):t._e(),n("hr"),n("h3",[t._v("About")]),n("div",{staticClass:"about-app"},[t._m(2),n("p",[n("a",{attrs:{href:"https://twitter.com/edwardtheapp"}},[n("span",{staticClass:"twitter-icon",domProps:{innerHTML:t._s(t.twitterIcon)}})])])])])])},Ie=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("h3",[t._v("Settings")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upgrade-button"},[n("a",{attrs:{href:"/auth#/account"}},[n("button",{staticClass:"button-green"},[t._v("\n            Manage account\n          ")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("Edward was created by "),n("a",{attrs:{href:"http://isaaclyman.com"}},[t._v("Isaac")]),t._v(". For updates on new features and Edward-flavored fun, follow the app on Twitter.")])}],De=n("bc3a"),Ne=n.n(De),We=function(t){return"/api/user/".concat(t)},$e={simpleGet:function(t){return Ne.a.get(t).then(function(t){return t.data})},simplePost:function(t,e){return Ne.a.post(t,e).then(function(t){return t.data})},getUser:function(){return this.simpleGet(We("current"))},logOut:function(){return this.simpleGet(We("logout"))},updateEmail:function(t){return this.simplePost(We("email"),{email:t})},updatePassword:function(t){return this.simplePost(We("password"),{password:t})}},Re=$e,je="COMMIT_NEW_EMAIL",Le="SET_DEFAULT_USER",Me="SET_USER",Ge="SET_USER_PROMISE",Ke="SET_USER_EMAIL",qe="SET_USER_PASSWORD",He={accountType:{description:"Either your internet or our servers are down right now. Any work you do may be lost.",displayName:"Connectivity issues",name:"ERROR"},email:"ERROR",isPremium:!1,verified:!0};function Fe(t){window.Raven&&"function"===typeof window.Raven.setUserContext&&window.Raven.setUserContext(t)}var Ve={state:{user:{},userPromise:new Promise(function(t){Oe=t})},actions:Object(Ct["a"])({},Ke,function(t,e){var n=t.commit,i=e.email;return n(je,{email:i}),Re.updateEmail(i)}),mutations:(Ee={},Object(Ct["a"])(Ee,je,function(t,e){var n=e.email;t.user.email=n}),Object(Ct["a"])(Ee,Le,function(t){t.user=He,Fe()}),Object(Ct["a"])(Ee,Me,function(t,e){t.user=e,Fe(e)}),Object(Ct["a"])(Ee,Ge,function(t,e){e.then(function(t){Oe(t)},function(t){console.error(t),Oe(null,t)})}),Object(Ct["a"])(Ee,qe,function(t,e){var n=e.password;Re.updatePassword(n)}),Ee)},Ue=Ve,ze="************",Be='<svg id="Logo_FIXED" data-name="Logo  FIXED" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><defs><style>.cls-1{fill:none;}.cls-2{fill:#1da1f2;}</style></defs><title>Twitter_Logo_Blue</title><rect class="cls-1" width="400" height="400"/><path class="cls-2" d="M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23"/></svg>',Qe={components:{},computed:{accountType:function(){return this.user.accountType.displayName},isPremium:function(){return this.user.isPremium},notDemo:function(){return"DEMO"!==this.user.accountType.name},user:function(){return this.$store.state.user.user},userPromise:function(){return this.$store.state.user.userPromise}},data:function(){return{account:{email:"",password:ze},editingEmail:!1,editingPassword:!1,error:!1,twitterIcon:Be}},methods:{cancelEditEmail:function(){this.editingEmail=!1,this.account.email=this.user.email},cancelEditPassword:function(){this.editingPassword=!1,this.account.password=ze},editEmail:function(){this.editingEmail=!0},editPassword:function(){this.editingPassword=!0,this.account.password=""},saveEmail:function(){var t=this;this.error=!1,D()({buttons:!0,dangerMode:!0,icon:"warning",text:"Are you sure you want to change your email address? You will have to verify the new address before you can access your account.",title:"Change email and re-verify?"}).then(function(e){e&&t.$store.dispatch(Ke,{email:t.account.email}).then(function(){t.editingEmail=!1,window.location.href="/auth#/verification"},function(e){console.error(e),t.error=!0})})},savePassword:function(){this.$store.commit(qe,{password:this.account.password}),this.editingPassword=!1}},mounted:function(){var t=this;this.userPromise.then(function(){t.account.email=t.user.email})}},Je=Qe,Xe=(n("b9e9"),n("a094"),Object(f["a"])(Je,Ae,Ie,!1,null,"ed1daeb4",null));Xe.options.__file="settings.page.vue";var Ye=Xe.exports,Ze=n("cb46");i["a"].use(u["a"]);var tn=function(){return Re.getUser().then(function(t){if(t.isPremium)return!0;throw new Error("Can't access this route with a Limited account.")})},en=function(){return Ze["a"].isOnline().then(function(){return!0},function(){throw new Error("Can't access this route while offline.")})},nn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,n,i){var r=e.map(function(t){return t()});Promise.all(r).then(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.filter(function(t){return!0!==t});if(0===r.length)return i();var o=e.filter(function(t){return"object"===Object(c["a"])(t)})[0];return i(o||new Error("Navigation was not allowed."))},function(t){return i(t)})}},rn=new u["a"]({routes:[{path:"/",redirect:"/write"},{path:"/plan",name:"Plan",component:ue},{path:"/outline",name:"Outline",component:ie},{path:"/write",name:"Write",component:Ft},{path:"/analyze",name:"Analyze",component:function(){return n.e("analyser").then(n.bind(null,"d522"))},beforeEnter:nn(en)},{path:"/export",name:"Export",component:function(){return n.e("exporter").then(n.bind(null,"3bd7"))},beforeEnter:nn(en)},{path:"/documentEdit",name:"Document Edit",component:Xt},{path:"/settings",name:"Settings",component:Ye},{path:"/search",name:"Search",component:xe},{path:"/workshop/free-write",name:"Free Write",component:function(){return n.e("w-free-write").then(n.bind(null,"30e1"))},beforeEnter:nn(en,tn)},{path:"/workshop/novel-quickstart",name:"Novel Quickstart",component:function(){return n.e("w-novel-quickstart").then(n.bind(null,"5803"))},beforeEnter:nn(en,tn)},{path:"/workshop/unblock",name:"Writer's Unblock",component:function(){return n.e("w-writers-unblock").then(n.bind(null,"b77a"))},beforeEnter:nn(en,tn)},{path:"/workshop/plot",name:"Plot Workshop",component:function(){return n.e("w-plot-workshop").then(n.bind(null,"0e6c"))},beforeEnter:nn(en,tn)},{path:"/workshop/setting",name:"Setting Workshop",component:function(){return n.e("w-setting-workshop").then(n.bind(null,"1471"))},beforeEnter:nn(en,tn)},{path:"*",name:"Page does not exist",component:m}]}),on=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("idle-watcher",[i("transition",{attrs:{name:"wrapper",mode:"out-in"}},[t.loaded&&t.currentDocument&&t.currentDocument.guid?i("div",{key:"app",staticClass:"app",attrs:{id:"app"}},[i("document-menu"),i("div",{staticClass:"app-header"},[i("div",{staticClass:"logo-wrap"},[i("img",{staticClass:"logo",attrs:{src:n("c780")}})]),i("div",{staticClass:"app-header--menu"},[i("main-menu")],1)]),i("div",{staticClass:"page"},[i("transition",{attrs:{name:"wrapper",mode:"out-in"}},[i("router-view")],1)],1)],1):t.loaded?i("div",{key:"wizard",staticClass:"page"},[i("wizard")],1):i("div",{key:"loading",staticClass:"loading"},[i("img",{staticClass:"logo",attrs:{src:n("c780")}}),i("pulse-loader")],1)])],1)},sn=[],an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu"},[n("div",{staticClass:"menu-item"},[n("document-picker")],1),n("div",{staticClass:"menu-item"},[n("router-link",{attrs:{to:"/documentEdit"}},[n("button",{staticClass:"menu-button"},[t._v("\n        Edit\n      ")])]),n("router-link",{attrs:{to:"/export"}},[n("button",{staticClass:"menu-button mobile-hide",attrs:{disabled:!t.isOnline}},[t._v("\n        Download / Upload\n      ")])]),n("hr",{staticClass:"vert-flex"}),n("button",{staticClass:"menu-button",attrs:{disabled:!t.isOnline},on:{click:function(e){t.showWizard()}}},[t._v("\n      New\n    ")])],1),n("div",{staticClass:"spacer"}),t.notDemo?n("div",{staticClass:"menu-item"},[n("router-link",{attrs:{to:"/settings"}},[n("button",{staticClass:"menu-button mobile-hide",attrs:{disabled:!t.isOnline}},[t._v("\n        Settings\n      ")])]),n("a",{attrs:{href:"/auth#/account"}},[n("button",{staticClass:"menu-button button-green mobile-hide",attrs:{disabled:!t.isOnline}},[t._v("\n        Upgrade\n      ")])])],1):t._e(),t.notDemo?t._e():n("div",{staticClass:"menu-item"},[n("a",{attrs:{href:"/auth#/signup"}},[n("button",{staticClass:"menu-button button-green mobile-hide",attrs:{disabled:!t.isOnline}},[t._v("\n        Upgrade\n      ")])])]),n("div",{staticClass:"menu-item"},[n("button",{staticClass:"menu-button",attrs:{disabled:!t.isOnline},on:{click:function(e){t.logOut()}}},[t._v("\n      Log Out\n    ")])])])},cn=[],un=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{directives:[{name:"model",rawName:"v-model",value:t.documentValue,expression:"documentValue"}],staticClass:"document-dropdown",attrs:{disabled:!t.isOnline},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.documentValue=e.target.multiple?n:n[0]},t.changeDocument]}},[t.currentDocument?t._e():n("option",{attrs:{value:""}},[t._v("No document selected")]),t._l(t.allDocuments,function(e){return n("option",{key:e.guid,domProps:{value:e.guid}},[t._v("\n    "+t._s(e.name)+"\n  ")])})],2)},ln=[],hn=n("86e1"),dn={computed:{allDocuments:function(){return this.$store.state.document.ownedDocuments},currentDocument:function(){return this.$store.state.document.currentDocument},isOnline:function(){return this.$store.state.status.status!==hn["e"].OFFLINE}},data:function(){return{documentValue:""}},mounted:function(){this.documentValue=this.currentDocument?this.currentDocument.guid:""},methods:{changeDocument:function(){var t=this;Ze["a"].isOnline().then(function(){var e=t.allDocuments.find(function(e){return e.guid===t.documentValue});!e||t.currentDocument&&e.guid===t.currentDocument.guid||t.$store.dispatch(zt["b"],e)},function(){t.$store.commit(hn["c"]),t.documentValue=t.currentDocument.guid})}}},pn=dn,fn=(n("f241"),Object(f["a"])(pn,un,ln,!1,null,"6669ec1d",null));fn.options.__file="documentPicker.vue";var vn=fn.exports,mn={components:{DocumentPicker:vn},computed:{isOnline:function(){return this.$store.state.status.status!==hn["e"].OFFLINE},notDemo:function(){return"DEMO"!==this.$store.state.user.user.accountType.name}},data:function(){return{}},methods:{logOut:function(){Re.logOut().then(function(){window.location.href="/auth"},function(){D()({icon:"error",text:"Sorry, logout failed. If security is a concern, please clear your cookies and other browsing data and close your browser."})})},showWizard:function(){this.$store.dispatch(zt["g"])}}},gn=mn,wn=(n("6be1"),Object(f["a"])(gn,an,cn,!1,null,"cf75f42c",null));wn.options.__file="documentMenu.vue";var Cn=wn.exports,kn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.needsReload?n("div",{staticClass:"page-wrap"},[n("div",{staticClass:"idle-page"},[n("div",{staticClass:"idle-message"},[n("h4",[t._v("\n        The page has been idle for over 30 minutes.\n      ")]),n("div",[t._v("\n        If you've edited your work on another computer, you should reload the page in order to get your latest content.\n        Otherwise, you may lose your changes.\n      ")]),n("div",{staticClass:"actions"},[n("button",{staticClass:"button-green reload-button",on:{click:function(e){t.reload()}}},[t._v("Reload")]),n("button",{staticClass:"button-red cancel-button",on:{click:function(e){t.backToApp()}}},[t._v("Back to the app")])])])])]):n("div",{staticClass:"page-wrap",class:{fade:t.fadeOn,hidden:t.needsReload},on:{"&click":function(e){t.resetIdleTime()},"&mousemove":function(e){t.resetIdleTime()},"&scroll":function(e){t.resetIdleTime()},"&keypress":function(e){t.resetIdleTime()}}},[t._t("default")],2)},yn=[],_n={computed:{isPremium:function(){return this.user.isPremium},user:function(){return this.$store.state.user.user}},data:function(){return{fadeOn:!1,fadeTimeout:null,idleTimeout:null,needsReload:!1}},methods:{backToApp:function(){this.needsReload=!1,this.fadeOn=!1,this.resetIdleTime()},goIdle:function(){this.isPremium&&(this.fadeTimeout=window.setTimeout(this.showIdlePage,3e3),this.fadeOn=!0)},reload:function(){window.location.reload()},resetIdleTime:function(){if(this.isPremium){this.fadeOn=!1,this.idleTimeout&&window.clearTimeout(this.idleTimeout),this.fadeTimeout&&window.clearTimeout(this.fadeTimeout);var t=18e5;this.idleTimeout=window.setTimeout(this.goIdle,t)}},showIdlePage:function(){this.needsReload=!0}},mounted:function(){this.resetIdleTime()}},bn=_n,Tn=(n("5ca4"),Object(f["a"])(bn,kn,yn,!1,null,"46cd5d12",null));Tn.options.__file="IdleWatcher.vue";var Pn=Tn.exports,Sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-menu"},[n("div",{staticStyle:{display:"none"}},[n("offline-storage")],1),t._l(t.routes,function(e){return[n("router-link",{key:e.name,attrs:{to:e.worksOffline||t.isOnline?e.location:"#"}},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"main-menu--button",attrs:{title:e.tooltip,disabled:!e.worksOffline&&!t.isOnline}},[n("div",{domProps:{innerHTML:t._s(t.getIconSvg(e.icon))}}),n("div",[t._v(t._s(e.name))])])]),n("hr",{key:e.name+"-hr",staticClass:"vert between mobile-hide"})]}),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"main-menu--button",attrs:{title:t.toolsTooltip,disabled:!t.isOnline},on:{click:function(e){t.showWorkshops()}}},[n("div",{domProps:{innerHTML:t._s(t.getIconSvg("tools"))}}),n("div",[t._v("Workshop")])]),n("div",{staticClass:"spacer"}),n("status-signal"),n("hr",{staticClass:"vert mobile-hide"}),n("a",{staticClass:"disguised mobile-hide",attrs:{href:t.isOnline?"/auth#/account":"#"}},[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"account",class:{offline:!t.isOnline},attrs:{title:t.accountType.description}},[n("div",{staticClass:"email"},[t._v("\n        "+t._s(t.email)+"\n      ")]),n("div",{staticClass:"account-type"},[t._v("\n        "+t._s(t.accountType.displayName)+"\n      ")])])]),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"workshopsModal",staticClass:"workshops"},[t.isPremium?t._e():n("p",{staticClass:"warn"},[t._v("\n        Workshops are only available for Premium subscribers.\n      ")]),t._l(t.workshops,function(e){return n("div",{key:e.name,on:{click:function(n){t.startWorkshop(e)}}},[n("div",{staticClass:"workshop",class:{restricted:!t.isPremium||!e.available}},[e.available?t._e():n("div",{staticClass:"workshop-restricted"},[t._v("\n            COMING SOON\n          ")]),e.available&&!t.isPremium?n("div",{staticClass:"workshop-restricted"},[t._v("\n            PREMIUM ONLY\n          ")]):t._e(),n("div",{staticClass:"workshop-details"},[n("div",{staticClass:"workshop-name"},[t._v("\n              "+t._s(e.displayName)+"\n            ")]),n("div",{staticClass:"workshop-description"},[t._v("\n              "+t._s(e.description)+"\n            ")])]),t._m(0,!0)])])})],2)])],2)},En=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"workshop-button"},[n("button",{staticClass:"button-green"},[t._v("\n              Begin\n            ")])])}],On=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{display:"none"}},[n("div",{ref:"chromePermissionModal",staticClass:"offline-storage"},[n("p",[t._v("\n        Edward will work even when you don't have an Internet connection.\n        To avoid data loss when offline, you need to grant app-level permissions on this device,\n        including push notifications.\n      ")]),n("p",[t._v("\n        Do you want to allow this?\n      ")])])]),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"standardPermissionModal",staticClass:"offline-storage"},[n("p",[t._v("\n        Edward will work even when you don't have an Internet connection.\n        To avoid data loss when offline, you need to give permission to store files on your system.\n      ")]),n("p",[t._v("\n        Do you want to allow this?\n      ")])])]),n("div",{staticStyle:{display:"none"}},[n("div",{ref:"permissionFailedModal",staticClass:"offline-storage"},[n("p",[t._v("\n        Failed to get the required permissions. Edward may still work offline,\n        but this could result in data loss.\n      ")])])])])},xn=[],An=n("4a35"),In=Object(An["detect"])(),Dn=new k["b"]("OFFLINE_MODAL_SEEN");function Nn(){return new Promise(function(t,e){var n=Notification.requestPermission(function(e){t(e)});n&&n.then(t,e)}).then(function(t){if("granted"!==t)throw new Error("Push notification permission was not granted.")})}var Wn={computed:{isPremium:function(){return this.$store.state.user.user.isPremium}},data:function(){return{allowsOffline:!0}},methods:{checkOfflineStorage:function(){var t=this;navigator.storage&&navigator.storage.persisted&&navigator.storage.persisted().then(function(e){t.allowsOffline=e;var n=Dn.cacheGet();n||!t.isPremium||e||t.promptForPermission()})},chromePrompt:function(){var t=this;D()({content:this.$refs.chromePermissionModal,title:"Offline Permissions",buttons:{cancel:"No",confirm:"Yes"}}).then(function(e){Dn.cacheSet(!0),e?Nn().then(function(){return navigator.storage.persist().then(function(e){if(t.allowsOffline=e,!e)throw new Error("Could not obtain persistent storage permissions.")})},function(){t.permissionFailed()}):t.allowsOffline=!1})},permissionFailed:function(){D()({content:this.$refs.permissionFailedModal,title:"Permission not obtained",icon:"error"})},promptForPermission:function(){return In&&"chrome"===In.name?this.chromePrompt():this.standardPrompt()},standardPrompt:function(){var t=this;D()({content:this.$refs.standardPermissionModal,title:"Offline Permissions",buttons:{cancel:"No",confirm:"Yes"}}).then(function(e){Dn.cacheSet(!0),e?navigator.storage.persist().then(function(e){t.allowsOffline=e,e||t.permissionFailed()}):t.allowsOffline=!1})}},mounted:function(){this.checkOfflineStorage()}},$n=Wn,Rn=(n("da35"),Object(f["a"])($n,On,xn,!1,null,"1739da34",null));Rn.options.__file="offlineStorage.vue";var jn,Ln=Rn.exports,Mn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isDemo?t._e():n("div",{staticClass:"status-wrap"},[n("div",{staticClass:"status"},[n("div",{staticClass:"status-saving",class:{show:t.isSaving}},[t._v("\n      Saving...\n    ")]),n("div",{staticClass:"status-saved",class:{show:!t.isSaving&&t.saved}},[t._v("\n      Saved "),n("span",{domProps:{innerHTML:t._s(t.savedIcon)}})]),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{enabled:!t.isSaving&&t.saveError},expression:"{ enabled: !isSaving && saveError }"}],staticClass:"status-error",class:{show:!t.isSaving&&t.saveError},attrs:{title:t.saveErrorText}},[t._v("\n      Error "),n("span",{domProps:{innerHTML:t._s(t.errorIcon)}})]),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{enabled:!t.isSaving&&t.offline},expression:"{ enabled: !isSaving && offline }"}],ref:"offlineStatus",staticClass:"status-offline",class:{show:!t.isSaving&&t.offline},attrs:{title:t.offlineText}},[t._v("\n      Offline "),n("span",{domProps:{innerHTML:t._s(t.offlineIcon)}})])])])},Gn=[],Kn=n("efa2"),qn={created:function(){this.checkOffline(),jn=setInterval(this.checkOffline,15e3)},beforeDestroy:function(){clearInterval(jn)},computed:{accountType:function(){return this.$store.state.user.user.accountType||{}},isDemo:function(){return"DEMO"===this.accountType.name},offline:function(){return this.$store.state.status.status===hn["e"].OFFLINE},saved:function(){return this.$store.state.status.status===hn["e"].SAVED},saving:function(){return this.$store.state.status.status===hn["e"].SAVING},saveError:function(){return this.$store.state.status.status===hn["e"].ERROR}},data:function(){return{errorIcon:T.a.alert.toSVG({height:15,width:15}),isSaving:!1,offlineIcon:T.a.plug.toSVG({height:15,width:15}),offlineText:"No internet connection is available. Your work is saved locally. To avoid losing work, don't edit this document on any other device until the connection is restored.",saveErrorText:"An error has occurred. Your work may not be saved.",savedIcon:T.a.check.toSVG({height:15,width:15}),savingDebouncer:window.setTimeout(function(){})}},directives:{tooltip:Kn["a"]},methods:{checkOffline:function(){var t=this;Ze["a"].isOnline().then(function(){t.$store.commit(hn["a"])},function(){t.$store.commit(hn["c"])})}},watch:{offline:function(t,e){if(t!==e&&t){var n=this.$refs.offlineStatus;n._tippy?setTimeout(function(){n._tippy.show()},1e3):console.warn("Expected a Tippy.js instance on statusSignal")}},saving:function(t){var e=this;t&&(this.isSaving=!0),clearTimeout(this.savingDebouncer),this.savingDebouncer=window.setTimeout(function(){e.isSaving=e.saving},500)}}},Hn=qn,Fn=(n("9c67"),Object(f["a"])(Hn,Mn,Gn,!1,null,"7fe01412",null));Fn.options.__file="statusSignal.vue";var Vn=Fn.exports,Un={components:{OfflineStorage:Ln,StatusSignal:Vn},computed:{accountType:function(){return this.$store.state.user.user.accountType||{}},email:function(){return this.$store.state.user.user.email||""},isOnline:function(){return this.$store.state.status.status!==hn["e"].OFFLINE},isPremium:function(){return this.$store.state.user.user.isPremium}},data:function(){return{routes:[{icon:"telescope",location:"/plan",name:"Plan",tooltip:"Make general notes about characters, topics, settings, and more.",worksOffline:!0},{icon:"list-unordered",location:"/outline",name:"Outline",tooltip:"Create and organize chapters and chapter-specific notes.",worksOffline:!0},{icon:"pencil",location:"/write",name:"Write",tooltip:"Write, search and measure your content.",worksOffline:!0},{icon:"pulse",location:"/analyze",name:"Analyze",tooltip:"Get data-driven insights into your writing.",worksOffline:!1},{icon:"search",location:"/search",name:"Search",tooltip:"Search your entire document for a word or phrase.",worksOffline:!0}],toolsTooltip:"Workshop your novel with free or prompted writing exercises.",workshops:Object.keys($t["a"]).map(function(t){return $t["a"][t]})}},directives:{tooltip:Kn["a"]},methods:{getIconSvg:function(t){return T.a[t].toSVG({class:"main-menu--icon",height:25,width:25})},showWorkshops:function(){D()({content:this.$refs.workshopsModal,title:"Workshops",buttons:{cancel:!0}})},startWorkshop:function(t){this.isPremium&&t.available&&(D.a.close(),this.$router.push(t.route))}}},zn=Un,Bn=(n("2544"),n("84e6"),Object(f["a"])(zn,Sn,En,!1,null,"4d7c5f33",null));Bn.options.__file="mainMenu.vue";var Qn=Bn.exports,Jn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"container"},[t._m(0),n("div",{staticClass:"content border-bottom"},[t.hasDocuments?t._e():n("div",[n("p",[t._v("You haven't created any documents yet.")])]),t.hasDocuments?n("div",[n("p",[t._v("Choose a saved document:")]),n("div",{staticClass:"document-picker-wrap"},[n("document-picker")],1)]):t._e()]),n("div",{staticClass:"content"},[t._m(1),n("div",{staticClass:"types"},t._l(t.documentTypes,function(e){return n("button",{key:e.name,staticClass:"type",class:{selected:e===t.selectedType},on:{click:function(n){t.selectDocument(e)}}},[n("div",{domProps:{innerHTML:t._s(e.svg)}}),n("div",[t._v(t._s(e.name))])])})),t.selectedType?[n("div",{staticClass:"title"},[n("label",{attrs:{for:"new-document-title"}},[t._v(t._s(t.selectedType.name)+" title:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{id:"new-document-title"},domProps:{value:t.title},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.createDocument()},input:function(e){e.target.composing||(t.title=e.target.value)}}})]),n("div",{staticClass:"actions"},[t.saving?n("pulse-loader"):t._e(),t.saving?t._e():n("button",{staticClass:"button-green",attrs:{disabled:!t.title},on:{click:function(e){t.createDocument()}}},[t._v("\n            Create\n          ")]),t.error?n("p",{staticClass:"error"},[t._v("\n            That didn't work. Please try again.\n          ")]):t._e()],1)]:t._e()],2)])])},Xn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("p",[n("strong",[t._v("Welcome to Edward.")])]),n("p",[t._v("\n        New here? "),n("a",{attrs:{target:"_blank",href:"https://www.youtube.com/watch?v=OvERL5CPPXM"}},[t._v("Watch the introductory video.")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[t._v("Create a new document:")])])}],Yn=function(t,e,n,i,r){return{name:t,svg:e,plans:n,chapters:i,topics:r}},Zn=Yn("Novel",'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path d="M23 5v13.883l-1 .117v-16c-3.895.119-7.505.762-10.002 2.316-2.496-1.554-6.102-2.197-9.998-2.316v16l-1-.117v-13.883h-1v15h9.057c1.479 0 1.641 1 2.941 1 1.304 0 1.461-1 2.942-1h9.06v-15h-1zm-12 13.645c-1.946-.772-4.137-1.269-7-1.484v-12.051c2.352.197 4.996.675 7 1.922v11.613zm9-1.484c-2.863.215-5.054.712-7 1.484v-11.613c2.004-1.247 4.648-1.725 7-1.922v12.051z"/></svg>',["Synopsis","Plot","Characters","Settings","Ideas"],["Introduction","Chapter 1"],["Events","Scenes","Conversations"]),ti=Yn("Essay",'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path d="M21.155 8.64c-.909 1.519-2.327 3.067-4.097 3.004-.413.706-.852 1.677-1.339 2.803l-1.312.553c.936-2.343 2.231-4.961 3.698-6.994-.67.529-1.746 1.637-2.662 2.783-1.098-1.828-.3-3.691.973-5.179.021.641.359 1.196.601 1.475-.087-.53-.114-1.489.195-2.351.718-.732 1.364-1.271 2.113-1.76-.083.478.08 1.026.262 1.361.024-.49.224-1.43.521-1.84.924-.727 2.332-1.373 3.892-1.495-.081.973-.436 2.575-1.024 3.604-.515.404-1.221.68-1.791.833.493.089 1.031.077 1.494-.001-.269.743-.552 1.428-.998 2.276-.679.468-1.578.732-2.203.825.46.187 1.272.245 1.677.103zm-13.841 3.805l.645.781 4.773-2.791-.668-.768-4.75 2.778zm6.96-.238l-.668-.767-4.805 2.808.645.781 4.828-2.822zm4.679.007c-.421.203-.851.341-1.286.398-.12.231-.246.494-.377.773l.298.342c.623.692.459 1.704-.376 2.239-.773.497-5.341 3.376-6.386 4.035-.074-.721-.358-1.391-.826-1.948-.469-.557-6.115-7.376-7.523-9.178-.469-.6-.575-1.245-.295-1.816.268-.549.842-.918 1.43-.918.919 0 1.408.655 1.549 1.215.16.641-.035 1.231-.623 1.685l1.329 1.624 7.796-4.446c1.422-1.051 1.822-2.991.93-4.513-.618-1.053-1.759-1.706-2.978-1.706-1.188 0-.793-.016-9.565 4.475-1.234.591-2.05 1.787-2.05 3.202 0 .87.308 1.756.889 2.487 1.427 1.794 7.561 9.185 7.616 9.257.371.493.427 1.119.15 1.673-.277.555-.812.886-1.429.886-.919 0-1.408-.655-1.549-1.216-.156-.629.012-1.208.604-1.654l-1.277-1.545c-.822.665-1.277 1.496-1.377 2.442-.232 2.205 1.525 3.993 3.613 3.993.596 0 1.311-.177 1.841-.51l9.427-5.946c.957-.664 1.492-1.781 1.492-2.897 0-.745-.24-1.454-.688-2.003l-.359-.43zm-7.933-10.062c.188-.087.398-.134.609-.134.532 0 .997.281 1.243.752.312.596.226 1.469-.548 1.912l-5.097 2.888c-.051-1.089-.579-2.081-1.455-2.732l5.248-2.686zm2.097 13.383l.361-.905.249-.609-3.449 2.017.645.781 2.194-1.284z"/></svg>',["Thesis Statement","Abstract","Research Notes","Ideas"],["Introduction","Part 1","Part 2","Part 3","Conclusion"],["Arguments","Counter-arguments","Citations"]),ei=Yn("Script",'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path d="M22 1v2h-2v-2h-2v4h-12v-4h-2v2h-2v-2h-2v22h2v-2h2v2h2v-4h12v4h2v-2h2v2h2v-22h-2zm-18 18h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2zm14 9h-12v-8h12v8zm4 3h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2v-2h2v2z"/></svg>',["Synopsis","Plot","Dramatis Personae","Settings","Ideas"],["Opening","First Act","Second Act","Third Act","Denouement"],["Events","Scenes"]),ni=Yn("Blank Document",'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15 2v5h5v15h-16v-20h11zm1-2h-14v24h20v-18l-6-6z"/></svg>',[],["Chapter 1"],[]),ii=[Zn,ti,ei,ni],ri=ii,oi={components:{DocumentPicker:vn,PulseLoader:_e["a"]},computed:{hasDocuments:function(){return this.$store.state.document.ownedDocuments.length>0},isPremium:function(){return this.$store.state.user.user.isPremium}},data:function(){return{documentTypes:ri,error:!1,saving:!1,selectedType:null,title:""}},methods:{createDocument:function(){var t=this,e=this.selectedType,n=this.title;if(e&&n){var i={guid:Object(_["a"])(),name:n};this.saving=!0,this.error=!1,this.$store.dispatch(zt["f"],{document:i,type:e}).then(function(){t.saving=!1,t.isPremium&&"Novel"===e.name&&t.$router.push("/workshop/novel-quickstart")},function(){t.error=!0,t.saving=!1})}},selectDocument:function(t){this.selectedType=t}}},si=oi,ai=(n("de62"),Object(f["a"])(si,Jn,Xn,!1,null,"582964bd",null));ai.options.__file="wizard.vue";var ci=ai.exports,ui=new k["b"]("CURRENT_USER"),li={beforeCreate:function(){var t=this,e=Re.getUser(),n=e.then(function(e){if(e.verified)return ui.cacheSet(e),t.$store.commit(Me,e),e;window.location.href="/auth#/verification"},function(){var e=ui.cacheGet();return e?(t.$store.commit(Me,e),e):(t.$store.commit(Le),t.$store.state.user.user)});this.$store.commit(Ge,n)},created:function(){var t=this;this.$store.dispatch(zt["d"]).then(function(){t.loaded=!0},function(e){console.error(e),t.loaded=!0});var e=null;this.$router.beforeEach(function(n,i,r){clearTimeout(e),e=setTimeout(function(){t.loaded=!1},800),r()}),this.$router.afterEach(function(){clearTimeout(e),t.loaded=!0}),this.$router.onError(function(){clearTimeout(e),t.loaded=!0})},components:{DocumentMenu:Cn,IdleWatcher:Pn,MainMenu:Qn,PulseLoader:_e["a"],Wizard:ci},computed:{currentDocument:function(){return this.$store.state.document.currentDocument}},data:function(){return{loaded:!1}}},hi=li,di=(n("624f"),Object(f["a"])(hi,on,sn,!1,null,"72f00f74",null));di.options.__file="App.vue";var pi=di.exports,fi=(n("f8fb"),n("52df"),n("db43"),n("2f62")),vi=n("5145"),mi={addDocument:[zt["a"]],deleteChapter:[C["j"]],deleteDocument:[zt["e"]],deletePlan:[C["k"]],deleteSection:[C["l"]],deleteTopic:[C["m"]],deleteWorkshop:[Dt["c"]],rearrangeChapter:[C["p"]],rearrangePlan:[C["q"]],rearrangeSection:[C["r"]],rearrangeTopic:[C["s"]],updateChapter:[C["a"],C["e"],C["f"],C["t"],C["x"],C["y"],C["E"]],updateDocument:[zt["h"]],updatePlan:[C["b"],C["g"],C["u"],C["z"]],updateSection:[C["c"],C["h"],C["v"],C["A"],C["B"],C["C"]],updateTopic:[C["d"],C["i"],C["w"],C["D"]],updateWorkshop:[Dt["a"],Dt["b"],Dt["f"]],updateWorkshops:[Dt["g"]]},gi=null,wi=null,Ci=function(){return gi||(gi=Z()(function(){var t;(t=wi).updateChapter.apply(t,arguments)},50)),gi},ki=function(t){t.subscribe(function(t,e){e.user.userPromise.then(function(n){Object(vi["a"])(n).then(function(n){wi=n,yi(t,e,n,Ci())})})})};function yi(t,e,n,i){var r=t.type,o=t.payload,s=e.document.currentDocument&&e.document.currentDocument.guid;mi.addDocument.includes(r)?n.addDocument(o):mi.deleteDocument.includes(r)?n.deleteDocument(o.guid):mi.updateDocument.includes(r)?n.updateDocument(o):s&&(mi.deleteChapter.includes(r)?n.deleteChapter(s,o.chapter.guid):mi.deletePlan.includes(r)?n.deletePlan(s,o.plan.guid):mi.deleteSection.includes(r)?n.deleteSection(s,o.plan.guid,o.section.guid):mi.deleteTopic.includes(r)?n.deleteTopic(s,o.topic.guid):mi.deleteWorkshop.includes(r)?n.deleteWorkshop(s,o.workshop.guid):mi.rearrangeChapter.includes(r)?n.arrangeChapters(s,o.chapters.map(function(t){return t.guid})):mi.rearrangePlan.includes(r)?n.arrangePlans(s,o.plans.map(function(t){return t.guid})):mi.rearrangeSection.includes(r)?n.arrangeSections(s,o.plan.guid,o.sections.map(function(t){return t.guid})):mi.rearrangeTopic.includes(r)?n.arrangeTopics(s,o.topics.map(function(t){return t.guid})):mi.updateChapter.includes(r)?i(s,o.chapter.guid,o.chapter):mi.updatePlan.includes(r)?n.updatePlan(s,o.plan.guid,o.plan):mi.updateSection.includes(r)?n.updateSection(s,o.plan.guid,o.section.guid,o.section):mi.updateTopic.includes(r)?n.updateTopic(s,o.topic.guid,o.topic):(mi.updateWorkshop.includes(r)&&n.updateWorkshops(s,[o.workshop]),mi.updateWorkshops.includes(r)&&n.updateWorkshops(s,o.workshopUpdates.map(function(t){return t.workshop}))))}i["a"].use(fi["a"]);var _i=new fi["a"].Store({modules:{composer:_t,chapters:C["F"],document:zt["i"],status:hn["f"],user:Ue,workshop:Dt["h"]},plugins:[ki]}),bi=_i;window&&!1!==window.isProd&&(o.a.config("https://1deaeecd96244297ad475854be0d5502@sentry.io/540818").addPlugin(a.a,i["a"]).install(),window.Raven=o.a),i["a"].config.productionTip=!1,"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js").then(function(t){console.log("SW registered: ",t)}).catch(function(t){console.log("SW registration failed: ",t)})});e["default"]=new i["a"]({el:"#app",components:{App:pi},router:rn,store:bi,render:function(t){return t("App")}})},"1c03":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{ref:"container",staticClass:"editor"},[n("div",{ref:"editor",on:{keyup:function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter"))&&e.ctrlKey?t.emitDone(e):null}}})]),t.showFullScreen?n("div",[n("quill-full-screen",{attrs:{content:t.content,"content-id":t.contentId},on:{close:function(e){t.hideFullScreen()},"update:content":t.emitFullscreenContent,"update:selection":t.emitSelection}})],1):t._e()])},r=[],o=(n("3b2b"),n("3835")),s=(n("ac6a"),n("d884")),a=n.n(s),c=n("9339"),u=n.n(c),l=(n("8096"),n("36dc")),h=[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote"],["clean"]],d=["header","size","bold","italic","underline","strike","list","blockquote"],p=function(t,e,n,i){var r=h.concat(),o={};i&&(r.push(["fullscreen"]),o.fullscreen=i);var s=new u.a(t,{bounds:n,formats:d,modules:{toolbar:{container:r,handlers:o}},placeholder:e,theme:"snow"});if(i){var c=a.a["device-desktop"].toSVG({height:30}),p=n.querySelector(".ql-fullscreen");p.title="Full-screen writing mode",p.innerHTML=c,Object(l["a"])({distance:10,el:p,interactive:!1,position:"top"})}return s},f=p,v=n("b047"),m=n.n(v),g=n("a318"),w=n.n(g),C=n("63ea"),k=n.n(C),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"full-screen-wrap full-screen"},[n("div",{staticClass:"actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.isWideView,expression:"!isWideView"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"action wide-view",attrs:{title:"Wide view"},domProps:{innerHTML:t._s(t.wideSvg)},on:{click:function(e){t.showWideView()}}}),n("button",{directives:[{name:"show",rawName:"v-show",value:t.isWideView,expression:"isWideView"},{name:"tooltip",rawName:"v-tooltip"}],staticClass:"action narrow-view",attrs:{title:"Book-width view"},domProps:{innerHTML:t._s(t.narrowSvg)},on:{click:function(e){t.showNarrowView()}}}),n("button",{staticClass:"action close",domProps:{innerHTML:t._s(t.exitSvg)},on:{click:function(e){t.close()}}})]),n("div",{ref:"container",staticClass:"container",class:{wide:t.isWideView}},[n("div",{ref:"editor",staticClass:"editor"})])])},_=[],b=n("7f24"),T=n("efa2"),P=new b["b"]("FULL_SCREEN_EDITOR_WIDTH"),S={beforeDestroy:function(){var t=this;this.handlers.forEach(function(e){var n=Object(o["a"])(e,2),i=n[0],r=n[1];return t.quill.off(i,r)})},data:function(){return{exitSvg:a.a.x.toSVG({height:30,width:30}),handlers:[],isWideView:!1,narrowSvg:a.a["screen-normal"].toSVG({height:30,width:30}),quill:null,wideSvg:a.a["screen-full"].toSVG({height:30,width:30})}},directives:{tooltip:T["a"]},methods:{close:function(){this.$emit("close")},emitContent:function(t,e){this.$emit("update:content",{content:t,contentId:e})},emitSelection:function(t){this.$emit("update:selection",t)},listenQuill:function(t){var e=this,n=m()(function(t,n){e.emitContent(t,n)},750,{maxWait:2e3}),i=function(){var i=t.getContents(),r=e.contentId;n(i,r)},r=m()(function(n){var i;n&&(i=n.length?{range:n,text:t.getText(n.index,n.length)}:{range:null,text:""},e.emitSelection(i))},500);t.on("text-change",i),t.on("selection-change",r),this.handlers.push(["text-change",i],["selection-change",r])},showNarrowView:function(){this.isWideView=!1,P.cacheSet(!1)},showWideView:function(){this.isWideView=!0,P.cacheSet(!0)},updateQuill:function(t,e){e&&t.setContents(e,"api")}},mounted:function(){this.isWideView=P.cacheGet()||!1,this.quill=f(this.$refs.editor,"Write here.",this.$refs.container),this.updateQuill(this.quill,this.content),this.listenQuill(this.quill)},props:{content:{required:!0,type:Object},contentId:{default:null,required:!1,type:String}}},E=S,O=(n("4c36"),n("2877")),x=Object(O["a"])(E,y,_,!1,null,"fafac0d6",null);x.options.__file="quillFullScreen.vue";var A=x.exports,I={beforeDestroy:function(){var t=this;this.handlers.forEach(function(e){var n=Object(o["a"])(e,2),i=n[0],r=n[1];return t.quill.off(i,r)})},components:{QuillFullScreen:A},data:function(){return{cachedContentId:null,handlers:[],quill:null,showFullScreen:!1}},methods:{disable:function(){this.quill.enable(!1)},enable:function(){this.quill.enable()},emitContent:function(t,e){this.$emit("update:content",{content:t,contentId:e})},emitFullscreenContent:function(t){var e=t.content,n=t.contentId;this.emitContent(e,n)},emitDone:function(){this.$emit("shortcut:done")},emitSelection:function(t){this.$emit("update:selection",t)},focus:function(){var t=this;this.$nextTick(function(){return t.quill.setSelection(t.quill.getLength(),0,"silent")})},hideFullScreen:function(){this.showFullScreen=!1},listenQuill:function(t){var e=this,n=m()(function(t){e.emitSelection(t)},500),i=function(e){var i;i=e&&e.length?{range:e,text:t.getText(e.index,e.length)}:{range:null,text:""},n(i)},r=m()(function(t,n){e.emitContent(t,n)},750,{maxWait:2e3}),o=function(){var n=t.getSelection();i(n);var o=t.getContents(),s=e.contentId;r(o,s)};t.on("text-change",o),t.on("selection-change",i),this.handlers.push(["text-change",o],["selection-change",i])},updateQuill:function(t,e,n){e&&t.setContents(e,n?"silent":"api")}},mounted:function(){var t=this;this.quill=f(this.$refs.editor,"Write here.",this.container||this.$refs.container,function(){t.showFullScreen=!0}),this.updateQuill(this.quill,this.content,!0),this.listenQuill(this.quill)},props:{container:{default:null,required:!1,type:null},content:{required:!0,type:null},contentId:{required:!1,default:null,type:String},scrollTo:{default:null,type:Object}},watch:{content:function(t){void 0===t||k()(t,this.quill.getContents())||(this.contentId!==this.cachedContentId?(this.cachedContentId=this.contentId,this.quill.setContents(null,"silent"),this.quill.setContents(t,"silent")):this.updateQuill(this.quill,t,!0))},scrollTo:function(t){if(t&&~t.paragraphIndex){var e=this.$refs.editor.querySelector(".ql-editor"),n=e.childNodes[t.paragraphIndex];if(n.parentNode.scrollTop=n.offsetTop,~t.searchTermIndex){var i=this.$store.state.composer.selection.text,r=this.quill.getText(),o=new RegExp(w()(i),"gi"),s=D(o,r),a=s[t.searchTermIndex];this.quill.setSelection(a,"api")}}}}};function D(t,e){var n,i=[];while(n=t.exec(e))i.push({index:n.index,length:n[0].length});return i}var N=I,W=(n("e079"),n("fd93"),Object(O["a"])(N,i,r,!1,null,"47f1beb8",null));W.options.__file="quillEditor.vue";e["a"]=W.exports},"24bb":function(t,e,n){"use strict";var i=n("9e11"),r=n.n(i);r.a},2544:function(t,e,n){"use strict";var i=n("7f9a"),r=n.n(i);r.a},"2eda":function(t,e,n){},"2f2f":function(t,e,n){},"2f5f":function(t,e,n){},"303d":function(t,e,n){},"329d":function(t,e,n){"use strict";var i=n("85d8"),r=n.n(i);r.a},"36dc":function(t,e,n){"use strict";var i=n("89fa"),r=n.n(i),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.arrow,n=void 0===e||e,i=t.content,o=t.distance,s=void 0===o?10:o,a=t.el,c=t.interactive,u=t.placement,l=void 0===u?"bottom":u,h=t.hideOnClick,d=void 0===h||h;return r.a.one(a,{arrow:n,distance:s,hideOnClick:d,html:i,interactive:c,placement:l})};e["a"]=o},"39e3":function(t,e,n){"use strict";var i=n("0b67"),r=n.n(i);r.a},"42f4":function(t,e,n){"use strict";n("456d"),n("55dd");var i=n("3835"),r=(n("f559"),n("6762"),n("2fdb"),n("7f7f"),n("ac6a"),n("d4ec")),o=n("bee2"),s=n("b8ce"),a=n.n(s),c=n("a002"),u=n.n(c),l=n("eed6"),h=n.n(l),d=n("7662"),p=d.orderPromises,f=function(){function t(e){var n=this;if(Object(r["a"])(this,t),!e)throw new Error("Username was not supplied for LocalStorageApi.");u.a.setDriver([u.a.INDEXEDDB,u.a.WEBSQL,u.a.LOCALSTORAGE]),this.storage=u.a,window._storage=this.storage,this.getStorageKeys=function(){return n.storage.keys()},this.planKeyPrefix=function(t){return"".concat(t,"_PLAN_DATA_")},this.planOrderKey=function(t){return"".concat(t,"_PLAN_ORDER")},this.getPlanKey=function(t,e){return"".concat(n.planKeyPrefix(t)).concat(e)},this.sectionKeyPrefix=function(t,e){return"".concat(t,"_SECTION_DATA_").concat(e,"_")},this.sectionOrderKey=function(t,e){return"".concat(t,"_SECTION_ORDER_").concat(e)},this.getSectionKey=function(t,e,i){return"".concat(n.sectionKeyPrefix(t,e)).concat(i)},this.chapterKeyPrefix=function(t){return"".concat(t,"_CHAPTER_DATA_")},this.chapterOrderKey=function(t){return"".concat(t,"_CHAPTER_ORDER")},this.getChapterKey=function(t,e){return"".concat(n.chapterKeyPrefix(t)).concat(e)},this.topicKeyPrefix=function(t){return"".concat(t,"_TOPIC_DATA_")},this.topicOrderKey=function(t){return"".concat(t,"_TOPIC_ORDER")},this.getTopicKey=function(t,e){return"".concat(n.topicKeyPrefix(t)).concat(e)},this.legacyDocumentGuids="DOCUMENT_IDS",this.documentGuidsKey="".concat(e,"_DOCUMENT_IDS"),this.documentsKey=function(t){return"DOCUMENT_".concat(t)}}return Object(o["a"])(t,[{key:"isPremium",value:function(){return!1}},{key:"addDocument",value:function(t){var e=this,n=t.guid,i=t.name;return this._getAllDocumentGuids().then(function(t){if(!t.includes(n))return t.push(n),e.storage.setItem(e.documentGuidsKey,t)}).then(function(){return e.storage.setItem(e.documentsKey(n),{guid:n,name:i})})}},{key:"arrangeChapters",value:function(t,e){return this.storage.setItem(this.chapterOrderKey(t),e)}},{key:"arrangePlans",value:function(t,e){return this.storage.setItem(this.planOrderKey(t),e)}},{key:"arrangeSections",value:function(t,e,n){return this.storage.setItem(this.sectionOrderKey(t,e),n)}},{key:"arrangeTopics",value:function(t,e){return this.storage.setItem(this.topicOrderKey(t),e)}},{key:"deleteChapter",value:function(t,e){var n=this.getChapterKey(t,e);return this.storage.removeItem(n)}},{key:"deleteDocument",value:function(t){var e=this;return this._getAllDocumentGuids().then(function(n){return n.includes(t)&&n.splice(n.indexOf(t),1),e.storage.setItem(e.documentGuidsKey,n)}).then(function(){return Promise.all([e._getAllChapters(t).then(function(n){return Promise.all(n.map(function(n){return e.deleteChapter(t,n.guid)}))}),e._getAllPlans(t).then(function(n){return Promise.all(n.map(function(n){return e._getAllSections(t,n.guid).then(function(i){return Promise.all(i.map(function(i){return e.deleteSection(t,n.guid,i.guid)}))}).then(function(){return e.deletePlan(t,n.guid)})}))}),e._getAllTopics(t).then(function(n){return Promise.all(n.map(function(n){return e.deleteTopic(t,n.guid)}))})]).then(function(){return e.storage.removeItem(e.documentsKey(t))})})}},{key:"deletePlan",value:function(t,e){var n=this.getPlanKey(t,e);return this.storage.removeItem(n)}},{key:"deleteSection",value:function(t,e,n){var i=this.getSectionKey(t,e,n);return this.storage.removeItem(i)}},{key:"deleteTopic",value:function(t,e){var n=this.getTopicKey(t,e);return this.storage.removeItem(n)}},{key:"deleteWorkshop",value:function(){throw new Error("Workshops are a Premium-only feature.")}},{key:"_getAllChapters",value:function(t){var e=this,n=this.chapterKeyPrefix(t);return Promise.all([this._getChaptersSortOrder(t),this.getStorageKeys().then(function(t){return t.filter(function(t){return t.startsWith(n)})})]).then(function(t){var n=Object(i["a"])(t,2),r=n[0],o=n[1];return Promise.all(o.map(function(t){return e.storage.getItem(t)})).then(function(t){return t.sort(function(t,e){return r.indexOf(t.guid)-r.indexOf(e.guid)}),t})})}},{key:"getAllChapters",value:function(t){return this._getAllChapters(t)}},{key:"_getAllDocumentGuids",value:function(){var t=this;return Promise.all([this.storage.getItem(this.legacyDocumentGuids),this.storage.getItem(this.documentGuidsKey)]).then(function(e){var n=Object(i["a"])(e,2),r=n[0],o=n[1];if(Array.isArray(r)){var s=h()(r.concat(o||[]));return t.storage.setItem(t.documentGuidsKey,s).then(function(){return t.storage.removeItem(t.legacyDocumentGuids)}).then(function(){return s})}return h()(o||[])})}},{key:"_getAllDocuments",value:function(){var t=this;return this._getAllDocumentGuids().then(function(e){return Promise.all(e.map(function(e){var n=t.documentsKey(e);return t.storage.getItem(n)}))})}},{key:"getAllDocuments",value:function(){return this._getAllDocuments()}},{key:"_getAllPlans",value:function(t){var e=this,n=this.planKeyPrefix(t);return Promise.all([this._getPlansSortOrder(t),this.getStorageKeys().then(function(t){return t.filter(function(t){return t.startsWith(n)})})]).then(function(n){var r=Object(i["a"])(n,2),o=r[0],s=r[1];return Promise.all(s.map(function(t){return e.storage.getItem(t)})).then(function(n){return Promise.all(n.map(function(n){return e._getAllSections(t,n.guid).then(function(t){n.sections=t})})).then(function(){return n.sort(function(t,e){return o.indexOf(t.guid)-o.indexOf(e.guid)}),n})})})}},{key:"getAllPlans",value:function(t){return this._getAllPlans(t)}},{key:"_getAllSections",value:function(t,e){var n=this,r=this.sectionKeyPrefix(t,e);return Promise.all([this._getSectionSortOrder(t,e),this.getStorageKeys().then(function(t){return t.filter(function(t){return t.startsWith(r)})})]).then(function(t){var e=Object(i["a"])(t,2),r=e[0],o=e[1];return Promise.all(o.map(function(t){return n.storage.getItem(t)})).then(function(t){return t.sort(function(t,e){return r.indexOf(t.guid)-r.indexOf(e.guid)}),t})})}},{key:"_getAllTopics",value:function(t){var e=this,n=this.topicKeyPrefix(t);return Promise.all([this._getTopicsSortOrder(t),this.getStorageKeys().then(function(t){return t.filter(function(t){return t.startsWith(n)})})]).then(function(t){var n=Object(i["a"])(t,2),r=n[0],o=n[1];return Promise.all(o.map(function(t){return e.storage.getItem(t)})).then(function(t){return t.sort(function(t,e){return r.indexOf(t.guid)-r.indexOf(e.guid)}),t})})}},{key:"getAllTopics",value:function(t){return this._getAllTopics(t)}},{key:"_getChaptersSortOrder",value:function(t){return this.storage.getItem(this.chapterOrderKey(t)).then(function(t){return t||[]})}},{key:"_getPlansSortOrder",value:function(t){return this.storage.getItem(this.planOrderKey(t)).then(function(t){return t||[]})}},{key:"_getSectionSortOrder",value:function(t,e){return this.storage.getItem(this.sectionOrderKey(t,e)).then(function(t){return t||[]})}},{key:"_getTopicsSortOrder",value:function(t){return this.storage.getItem(this.topicOrderKey(t)).then(function(t){return t||[]})}},{key:"getAllWorkshops",value:function(){throw new Error("Workshops are a Premium-only feature.")}},{key:"saveAllContent",value:function(t,e){var n=this,i=e.chapters,r=e.plans,o=e.topics,s=o.map(function(e){return function(){return n.updateTopic(t,e.guid,e)}}),a=p(s),c=a.then(function(){var e=i.map(function(e){return function(){return n.updateChapter(t,e.guid,e)}});return p(e)}),u=r.map(function(e){return function(){return n.updatePlan(t,e.guid,e).then(function(){var i=e.sections.map(function(i){return function(){return n.updateSection(t,e.guid,i.guid,i)}});return p(i)})}}),l=p(u);return Promise.all([c,l])}},{key:"updateChapter",value:function(t,e,n){var i=this;if(t){var r=this.getChapterKey(t,e);return Promise.all([this.storage.setItem(r,n),this._getChaptersSortOrder(t).then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangeChapters(t,n)})])}}},{key:"updateDocument",value:function(t){var e=t.guid,n=t.name;return this.storage.setItem(this.documentsKey(e),{guid:e,name:n})}},{key:"updatePlan",value:function(t,e,n){var i=this;if(t){var r=this.getPlanKey(t,e);return n=a()(n),n.sections=null,Promise.all([this.storage.setItem(r,n),this._getPlansSortOrder(t).then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangePlans(t,n)})])}}},{key:"updateSection",value:function(t,e,n,i){var r=this;if(t){var o=this.getSectionKey(t,e,n);return Promise.all([this.storage.setItem(o,i),this._getSectionSortOrder(t,e).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.includes(n))return e.push(n),r.arrangeSections(t,e)})])}}},{key:"updateTopic",value:function(t,e,n){var i=this;if(t){var r=this.getTopicKey(t,e);return Promise.all([this.storage.setItem(r,n),this._getTopicsSortOrder(t).then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangeTopics(t,n)})])}}},{key:"updateWorkshops",value:function(){throw new Error("Workshops are a Premium-only feature.")}},{key:"docExport",value:function(t,e){var n=this;return Promise.all([this._getAllChapters(t),this._getAllTopics(t),this._getAllPlans(t).then(function(e){return Promise.all(e.map(function(e){return n._getAllSections(t,e.guid).then(function(t){return e.sections=t,e})}))})]).then(function(n){var r=Object(i["a"])(n,3),o=r[0],s=r[1],a=r[2],c={guid:t,name:e,chapters:o,topics:s,plans:a};return c})}},{key:"docImport",value:function(t){var e,n=this;return this.docExport(t.guid).then(function(t){e=t}).then(function(){return n.deleteDocument(t.guid)}).then(function(){if(!t)throw new Error("Attempted to import an empty backup");return n.addDocument(t).then(function(){return n.saveAllContent(t.guid,t)})}).then(void 0,function(t){return console.error(t),n.addDocument(e).then(function(){return n.saveAllContent(e.guid,e)})})}},{key:"getFullExport",value:function(){var t=this;return this._getAllDocuments().then(function(e){return Promise.all(e.map(function(e){return Promise.all([t._getAllChapters(e.guid),t._getAllTopics(e.guid),t._getAllPlans(e.guid).then(function(n){return Promise.all(n.map(function(n){return t._getAllSections(e.guid,n.guid).then(function(t){return n.sections=t,n})}))})]).then(function(t){var n=Object(i["a"])(t,3),r=n[0],o=n[1],s=n[2];return e.chapters=r,e.topics=o,e.plans=s,e})}))})}},{key:"revertImport",value:function(t){var e=this;return Promise.all(Object.keys(t).map(function(n){return e.storage.setItem(n,t[n])})).then(void 0,function(t){throw console.error(t),t})}},{key:"doFullImport",value:function(t){var e=this,n={};return this.storage.iterate(function(t,e){n[e]=t}).then(function(){return e.storage.clear().then(function(){if(!t||!Array.isArray(t)||!t.length)throw new Error("Attempted to import an empty backup");var n=t.map(function(t){return function(){return e.addDocument(t).then(function(){return e.saveAllContent(t.guid,t)})}});return p(n)})}).then(void 0,function(t){return console.error(t),e.revertImport(n)})}}]),t}();e["a"]=f},"44d4":function(t,e,n){},"4c36":function(t,e,n){"use strict";var i=n("680d"),r=n.n(i);r.a},"4eb7":function(t,e,n){},5145:function(t,e,n){"use strict";n("7f7f");var i,r,o=n("cb46"),s=(n("456d"),n("55dd"),n("3835")),a=(n("f559"),n("6762"),n("2fdb"),n("ac6a"),n("d4ec")),c=n("bee2"),u=n("b8ce"),l=n.n(u),h=n("a002"),d=n.n(h),p=n("eed6"),f=n.n(p),v=n("7662"),m=v.orderPromises,g=function(){function t(){var e=this;Object(a["a"])(this,t),d.a.setDriver(d.a.LOCALSTORAGE),this.storage=d.a,window._storage=this.storage,this.getStorageKeys=function(){return e.storage.keys()},this.planKeyPrefix=function(t){return"".concat(t,"_PLAN_DATA_")},this.planOrderKey=function(t){return"".concat(t,"_PLAN_ORDER")},this.getPlanKey=function(t,n){return"".concat(e.planKeyPrefix(t)).concat(n)},this.sectionKeyPrefix=function(t,e){return"".concat(t,"_SECTION_DATA_").concat(e,"_")},this.sectionOrderKey=function(t,e){return"".concat(t,"_SECTION_ORDER_").concat(e)},this.getSectionKey=function(t,n,i){return"".concat(e.sectionKeyPrefix(t,n)).concat(i)},this.chapterKeyPrefix=function(t){return"".concat(t,"_CHAPTER_DATA_")},this.chapterOrderKey=function(t){return"".concat(t,"_CHAPTER_ORDER")},this.getChapterKey=function(t,n){return"".concat(e.chapterKeyPrefix(t)).concat(n)},this.topicKeyPrefix=function(t){return"".concat(t,"_TOPIC_DATA_")},this.topicOrderKey=function(t){return"".concat(t,"_TOPIC_ORDER")},this.getTopicKey=function(t,n){return"".concat(e.topicKeyPrefix(t)).concat(n)},this.documentGuidsKey="DOCUMENT_IDS",this.documentsKey=function(t){return"DOCUMENT_".concat(t)}}return Object(c["a"])(t,[{key:"isPremium",value:function(){return!1}},{key:"addDocument",value:function(t){var e=this,n=t.guid,i=t.name;return window.onbeforeunload=function(){localStorage.clear()},this._getAllDocumentGuids().then(function(t){if(!t.includes(n))return t.push(n),e.storage.setItem(e.documentGuidsKey,t)}).then(function(){return e.storage.setItem(e.documentsKey(n),{guid:n,name:i})})}},{key:"arrangeChapters",value:function(t,e){return this.storage.setItem(this.chapterOrderKey(t),e)}},{key:"arrangePlans",value:function(t,e){return this.storage.setItem(this.planOrderKey(t),e)}},{key:"arrangeSections",value:function(t,e,n){return this.storage.setItem(this.sectionOrderKey(t,e),n)}},{key:"arrangeTopics",value:function(t,e){return this.storage.setItem(this.topicOrderKey(t),e)}},{key:"deleteChapter",value:function(t,e){var n=this.getChapterKey(t,e);return this.storage.removeItem(n)}},{key:"deleteDocument",value:function(t){var e=this;return this._getAllDocumentGuids().then(function(n){return n.includes(t)&&n.splice(n.indexOf(t),1),e.storage.setItem(e.documentGuidsKey,n)}).then(function(){return Promise.all([e._getAllChapters(t).then(function(n){return Promise.all(n.map(function(n){return e.deleteChapter(t,n.guid)}))}),e._getAllPlans(t).then(function(n){return Promise.all(n.map(function(n){return e._getAllSections(t,n.guid).then(function(i){return Promise.all(i.map(function(i){return e.deleteSection(t,n.guid,i.guid)}))}).then(function(){return e.deletePlan(t,n.guid)})}))}),e._getAllTopics(t).then(function(n){return Promise.all(n.map(function(n){return e.deleteTopic(t,n.guid)}))})]).then(function(){return e.storage.removeItem(e.documentsKey(t))})})}},{key:"deletePlan",value:function(t,e){var n=this.getPlanKey(t,e);return this.storage.removeItem(n)}},{key:"deleteSection",value:function(t,e,n){var i=this.getSectionKey(t,e,n);return this.storage.removeItem(i)}},{key:"deleteTopic",value:function(t,e){var n=this.getTopicKey(t,e);return this.storage.removeItem(n)}},{key:"deleteWorkshop",value:function(){}},{key:"_getAllChapters",value:function(t){var e=this,n=this.chapterKeyPrefix(t);return Promise.all([this._getChaptersSortOrder(t),this.getStorageKeys().then(function(t){return t.filter(function(t){return t.startsWith(n)})})]).then(function(t){var n=Object(s["a"])(t,2),i=n[0],r=n[1];return Promise.all(r.map(function(t){return e.storage.getItem(t)})).then(function(t){return t.sort(function(t,e){return i.indexOf(t.guid)-i.indexOf(e.guid)}),t})})}},{key:"getAllChapters",value:function(t){return this._getAllChapters(t)}},{key:"_getAllDocumentGuids",value:function(){return this.storage.getItem(this.documentGuidsKey).then(function(t){return f()(t)||[]})}},{key:"_getAllDocuments",value:function(){var t=this;return this._getAllDocumentGuids().then(function(e){return Promise.all(e.map(function(e){var n=t.documentsKey(e);return t.storage.getItem(n)}))})}},{key:"getAllDocuments",value:function(){return this._getAllDocuments()}},{key:"_getAllPlans",value:function(t){var e=this,n=this.planKeyPrefix(t);return Promise.all([this._getPlansSortOrder(t),this.getStorageKeys().then(function(t){return t.filter(function(t){return t.startsWith(n)})})]).then(function(n){var i=Object(s["a"])(n,2),r=i[0],o=i[1];return Promise.all(o.map(function(t){return e.storage.getItem(t)})).then(function(n){return Promise.all(n.map(function(n){return e._getAllSections(t,n.guid).then(function(t){n.sections=t})})).then(function(){return n.sort(function(t,e){return r.indexOf(t.guid)-r.indexOf(e.guid)}),n})})})}},{key:"getAllPlans",value:function(t){return this._getAllPlans(t)}},{key:"_getAllSections",value:function(t,e){var n=this,i=this.sectionKeyPrefix(t,e);return Promise.all([this._getSectionSortOrder(t,e),this.getStorageKeys().then(function(t){return t.filter(function(t){return t.startsWith(i)})})]).then(function(t){var e=Object(s["a"])(t,2),i=e[0],r=e[1];return Promise.all(r.map(function(t){return n.storage.getItem(t)})).then(function(t){return t.sort(function(t,e){return i.indexOf(t.guid)-i.indexOf(e.guid)}),t})})}},{key:"_getAllTopics",value:function(t){var e=this,n=this.topicKeyPrefix(t);return Promise.all([this._getTopicsSortOrder(t),this.getStorageKeys().then(function(t){return t.filter(function(t){return t.startsWith(n)})})]).then(function(t){var n=Object(s["a"])(t,2),i=n[0],r=n[1];return Promise.all(r.map(function(t){return e.storage.getItem(t)})).then(function(t){return t.sort(function(t,e){return i.indexOf(t.guid)-i.indexOf(e.guid)}),t})})}},{key:"getAllTopics",value:function(t){return this._getAllTopics(t)}},{key:"_getChaptersSortOrder",value:function(t){return this.storage.getItem(this.chapterOrderKey(t)).then(function(t){return t||[]})}},{key:"_getPlansSortOrder",value:function(t){return this.storage.getItem(this.planOrderKey(t)).then(function(t){return t||[]})}},{key:"_getSectionSortOrder",value:function(t,e){return this.storage.getItem(this.sectionOrderKey(t,e)).then(function(t){return t||[]})}},{key:"_getTopicsSortOrder",value:function(t){return this.storage.getItem(this.topicOrderKey(t)).then(function(t){return t||[]})}},{key:"getAllWorkshops",value:function(){return[]}},{key:"saveAllContent",value:function(t,e){var n=this,i=e.chapters,r=e.plans,o=e.topics;return Promise.all([Promise.all(i.map(function(e){return n.updateChapter(t,e.guid,e)})),Promise.all(r.map(function(e){return n.updatePlan(t,e.guid,e).then(function(){return Promise.all(e.sections.map(function(i){return n.updateSection(t,e.guid,i.guid,i)}))})})),Promise.all(o.map(function(e){return n.updateTopic(t,e.guid,e)}))])}},{key:"updateChapter",value:function(t,e,n){var i=this;if(t){var r=this.getChapterKey(t,e);return Promise.all([this.storage.setItem(r,n),this._getChaptersSortOrder(t).then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangeChapters(t,n)})])}}},{key:"updateDocument",value:function(t){var e=t.guid,n=t.name;return this.storage.setItem(this.documentsKey(e),{guid:e,name:n})}},{key:"updatePlan",value:function(t,e,n){var i=this;if(t){var r=this.getPlanKey(t,e);return n=l()(n),n.sections=null,Promise.all([this.storage.setItem(r,n),this._getPlansSortOrder(t).then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangePlans(t,n)})])}}},{key:"updateSection",value:function(t,e,n,i){var r=this;if(t){var o=this.getSectionKey(t,e,n);return Promise.all([this.storage.setItem(o,i),this._getSectionSortOrder(t,e).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.includes(n))return e.push(n),r.arrangeSections(t,e)})])}}},{key:"updateTopic",value:function(t,e,n){var i=this;if(t){var r=this.getTopicKey(t,e);return Promise.all([this.storage.setItem(r,n),this._getTopicsSortOrder(t).then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!n.includes(e))return n.push(e),i.arrangeTopics(t,n)})])}}},{key:"updateWorkshops",value:function(){}},{key:"docExport",value:function(t,e){var n=this;return Promise.all([this._getAllChapters(t),this._getAllTopics(t),this._getAllPlans(t).then(function(e){return Promise.all(e.map(function(e){n._getAllSections(t,e.guid).then(function(t){return e.sections=t,e})}))})]).then(function(n){var i=Object(s["a"])(n,3),r=i[0],o=i[1],a=i[2],c={guid:t,name:e,chapters:r,topics:o,plans:a};return c})}},{key:"docImport",value:function(t){var e,n=this;return this.docExport(t.guid).then(function(t){e=t}).then(function(){return n.deleteDocument(t.guid)}).then(function(){if(!t)throw new Error("Attempted to import an empty backup");return n.addDocument(t).then(function(){return n.saveAllContent(t.guid,t)})}).then(void 0,function(t){return console.error(t),n.addDocument(e).then(function(){return n.saveAllContent(e.guid,e)})})}},{key:"getFullExport",value:function(){var t=this;return this._getAllDocuments().then(function(e){return Promise.all(e.map(function(e){return Promise.all([t._getAllChapters(e.guid),t._getAllTopics(e.guid),t._getAllPlans(e.guid).then(function(n){return Promise.all(n.map(function(n){return t._getAllSections(e.guid,n.guid).then(function(t){return n.sections=t,n})}))})]).then(function(t){var n=Object(s["a"])(t,3),i=n[0],r=n[1],o=n[2];return e.chapters=i,e.topics=r,e.plans=o,e})}))})}},{key:"revertImport",value:function(t){var e=this;return Promise.all(Object.keys(t).map(function(n){return e.storage.setItem(n,t[n])})).then(void 0,function(t){throw console.error(t),t})}},{key:"doFullImport",value:function(t){var e=this,n={};return this.storage.iterate(function(t,e){n[e]=t}).then(function(){return e.storage.clear().then(function(){if(!t||!Array.isArray(t)||!t.length)throw new Error("Attempted to import an empty backup");var n=t.map(function(t){return function(){return e.addDocument(t).then(function(){return e.saveAllContent(t.guid,t)})}});return m(n)})}).then(void 0,function(t){return console.error(t),e.revertImport(n)})}}]),t}(),w=g,C=n("42f4"),k=(n("f751"),n("cadf"),n("551c"),n("097d"),n("7f24")),y=n("1112"),_=function(){function t(e){var n=this;if(Object(a["a"])(this,t),!e)throw new Error("Username was not supplied for OfflineStorageApi.");this.store=y["default"].$store,this.requiresSyncCache=new k["b"]("".concat(k["a"],"_HAS_GONE_OFFLINE")),d.a.setDriver([d.a.INDEXEDDB,d.a.WEBSQL,d.a.LOCALSTORAGE]),this.storage=d.a,window._storage=this.storage,this.offlinePrefix="@OFFLINE",this.docGuid=function(){return n.store.state.document.currentDocument.guid},this.docKey=function(){return"".concat(n.offlinePrefix,"_USER_").concat(e,"_DOCUMENT_").concat(n.docGuid())}}return Object(c["a"])(t,[{key:"init",value:function(){return this.requiresSyncCache.cacheSet(!0),Promise.resolve()}},{key:"isPremium",value:function(){return!0}},{key:"getLatestStoredDocument",value:function(){var t=this;return this.storage.keys().then(function(e){var n=e.filter(function(e){return e.startsWith(t.offlinePrefix)})[0];return n?t.storage.getItem(n):null})}},{key:"getStoredDocument",value:function(){return this.storage.getItem(this.docKey())}},{key:"clearOldStorage",value:function(){var t=this;return this.storage.keys().then(function(e){var n=e.filter(function(e){return e.startsWith(t.offlinePrefix)}).map(function(e){return t.storage.removeItem(e)});return Promise.all(n)})}},{key:"updateStorage",value:function(){var t=this,e=l()(this.store.state.document.currentDocument);if(e)return e.chapters=this.store.state.chapters.chapters,e.topics=this.store.state.chapters.topics,e.plans=this.store.state.chapters.plans,e.workshops=this.store.state.workshop.workshops,this.clearOldStorage().then(function(){return t.storage.setItem(t.docKey(),e)});console.warn("Document not yet loaded.")}},{key:"notAllowedError",value:function(){throw new Error("This action is not available while offline.")}},{key:"addDocument",value:function(){return this.notAllowedError()}},{key:"deleteDocument",value:function(){return this.notAllowedError()}},{key:"arrangeChapters",value:function(){return this.updateStorage()}},{key:"arrangePlans",value:function(){return this.updateStorage()}},{key:"arrangeSections",value:function(){return this.updateStorage()}},{key:"arrangeTopics",value:function(){return this.updateStorage()}},{key:"deleteChapter",value:function(){return this.updateStorage()}},{key:"deletePlan",value:function(){return this.updateStorage()}},{key:"deleteSection",value:function(){return this.updateStorage()}},{key:"deleteTopic",value:function(){return this.updateStorage()}},{key:"deleteWorkshop",value:function(){return this.updateStorage()}},{key:"saveAllContent",value:function(){return this.updateStorage()}},{key:"updateChapter",value:function(){return this.updateStorage()}},{key:"updateDocument",value:function(){return this.updateStorage()}},{key:"updatePlan",value:function(){return this.updateStorage()}},{key:"updateSection",value:function(){return this.updateStorage()}},{key:"updateTopic",value:function(){return this.updateStorage()}},{key:"updateWorkshops",value:function(){return this.updateStorage()}},{key:"getAllChapters",value:function(t){return this.getLatestStoredDocument().then(function(e){if(t!==e.guid)throw new Error("Cannot get chapters from a different document while offline.");return e.chapters})}},{key:"getAllDocuments",value:function(){return this.getLatestStoredDocument().then(function(t){return t?[t]:[]})}},{key:"getAllPlans",value:function(t){return this.getLatestStoredDocument().then(function(e){if(t!==e.guid)throw new Error("Cannot get plans from a different document while offline.");return e.plans})}},{key:"getAllTopics",value:function(t){return this.getLatestStoredDocument().then(function(e){if(t!==e.guid)throw new Error("Cannot get topics from a different document while offline.");return e.topics})}},{key:"getAllWorkshops",value:function(t){return this.getLatestStoredDocument().then(function(e){if(t!==e.guid)throw new Error("Cannot get workshops from a different document while offline.");return e.workshops})}},{key:"docExport",value:function(t){if(t!==this.docGuid())throw new Error("Cannot export a different document while offline.");return this.getStoredDocument()}},{key:"docImport",value:function(){throw new Error("Cannot import a document while offline.")}},{key:"getFullExport",value:function(){throw new Error("Cannot export all documents while offline.")}},{key:"doFullImport",value:function(){throw new Error("Cannot do a full import while offline.")}}]),t}(),b=_,T=n("c2b3"),P=n.n(T),S=n("df70"),E=n("86e1"),O=n("8410"),x=n("e935"),A=n("b047"),I=n.n(A),D=function(){function t(e){var n=this;if(Object(a["a"])(this,t),!e)throw new Error("Username was not supplied for ServerStorageApi.");var i=0,r=y["default"].$store;this.offlineStorage=new b(e),this.goOffline=function(){return r.commit(E["c"]),o["a"].isOnlineCached=!1,n.offlineStorage.updateStorage()};var s=function(){return i++,r.commit(E["d"]),n.offlineStorage.updateStorage()},c=function(t,e){i--,i>0||(i=0,t?e?n.goOffline():r.commit(E["b"]):r.commit(E["a"]))};this.wrapStatus=function(t){return s(),t.then(function(){return c(!1)},function(){o["a"].isOnline().then(function(){return c(!0,!1)},function(){return c(!0,!0)})}),t};var u=I()(function(t){t.then(function(){return n.offlineStorage.updateStorage()})},1e3);this.updateStorageAfter=function(t){return u(t),t},this.waitUntilDone=function(){return new Promise(function(t,e){var n=0,i=window.setInterval(function(){n/10>10?e():r.state.status.saving?n++:(window.clearInterval(i),t())},100)})},this.loadDocument=function(t){r.commit(O["n"],{chapters:t.chapters||[],plans:t.plans||[],topics:t.topics||[]}),r.commit(x["d"],{workshops:t.workshops||[]})}}return Object(c["a"])(t,[{key:"init",value:function(){if(this.offlineStorage.requiresSyncCache.cacheGet())return this.syncCache()}},{key:"syncCache",value:function(){var t=this,e="[RESTORED]";return this.offlineStorage.getLatestStoredDocument().then(function(n){var i;if(n&&n.guid)return o["a"].docExport(n.guid).then(function(r){var o=function(t){return t&&t.guid},s=function(t){t&&("string"!==typeof t.title&&(t.title=""),t.title.includes(e)||(t.title="".concat(t.title," ").concat(e)))},a=S["a"].getMostRecentEach(r.chapters,n.chapters,o,s),c=S["a"].getMostRecentEach(r.topics,n.topics,o,s),u=S["a"].getMostRecentEach(r.plans,n.plans,o,s),l=S["a"].getMostRecentEach(r.workshops,n.workshops,function(t){return t&&t.guid?"".concat(t.guid,"|").concat(t.order):null},s),h={name:n.name,chapters:a,topics:c,plans:u,workshops:l};if(!(n.name===r.name&&P()(a,r.chapters)&&P()(c,r.topics)&&P()(u,r.plans)&&P()(l,r.workshops)))return i=Object.assign(r,h),t.docImport(i)},function(){return i=n,t.docImport(n)}).then(function(){return t.offlineStorage.clearOldStorage()}).then(function(){t.loadDocument(i)},function(){t.goOffline().then(function(){throw new Error("Attempted to resolve a cached document and import it, but the doc import API threw an error.")})})}).then(function(){return t.offlineStorage.clearOldStorage().then(function(){return t.offlineStorage.updateStorage()}).then(function(){return t.offlineStorage.requiresSyncCache.cacheSet(!1)})})}},{key:"isPremium",value:function(){return!0}},{key:"addDocument",value:function(t){var e=t.guid,n=t.name;return this.wrapStatus(o["a"].addDocument({guid:e,name:n}).catch(function(t){throw t}))}},{key:"getAllDocuments",value:function(){return o["a"].getDocuments()}},{key:"deleteDocument",value:function(t){return this.wrapStatus(o["a"].deleteDocument({guid:t}))}},{key:"updateDocument",value:function(t){var e=t.guid,n=t.name;return this.wrapStatus(o["a"].updateDocument({guid:e,name:n}))}},{key:"arrangeChapters",value:function(t,e){return this.wrapStatus(o["a"].arrangeChapters({documentGuid:t,chapterGuids:e}))}},{key:"arrangePlans",value:function(t,e){return this.wrapStatus(o["a"].arrangePlans({documentGuid:t,planGuids:e}))}},{key:"arrangeSections",value:function(t,e,n){return this.wrapStatus(o["a"].arrangeSections({documentGuid:t,planGuid:e,sectionGuids:n}))}},{key:"arrangeTopics",value:function(t,e){return this.wrapStatus(o["a"].arrangeTopics({documentGuid:t,topicGuids:e}))}},{key:"deleteChapter",value:function(t,e){return this.wrapStatus(o["a"].deleteChapter({documentGuid:t,chapterGuid:e}))}},{key:"deletePlan",value:function(t,e){return this.wrapStatus(o["a"].deletePlan({documentGuid:t,planGuid:e}))}},{key:"deleteSection",value:function(t,e,n){return this.wrapStatus(o["a"].deleteSection({documentGuid:t,planGuid:e,sectionGuid:n}))}},{key:"deleteTopic",value:function(t,e){return this.wrapStatus(o["a"].deleteTopic({documentGuid:t,topicGuid:e}))}},{key:"deleteWorkshop",value:function(t,e){return this.wrapStatus(o["a"].deleteWorkshopContent({documentGuid:t,guid:e}))}},{key:"getAllChapters",value:function(t){return this.updateStorageAfter(o["a"].getChapters(t))}},{key:"getAllPlans",value:function(t){return this.updateStorageAfter(o["a"].getPlans(t))}},{key:"getAllTopics",value:function(t){return this.updateStorageAfter(o["a"].getTopics(t))}},{key:"getAllWorkshops",value:function(t){return this.updateStorageAfter(o["a"].getWorkshops(t))}},{key:"updateChapter",value:function(t,e,n){return this.wrapStatus(o["a"].updateChapter({documentGuid:t,chapterGuid:e,chapter:n}))}},{key:"updatePlan",value:function(t,e,n){return this.wrapStatus(o["a"].updatePlan({documentGuid:t,planGuid:e,plan:n}))}},{key:"updateSection",value:function(t,e,n,i){return this.wrapStatus(o["a"].updateSection({documentGuid:t,planGuid:e,sectionGuid:n,section:i}))}},{key:"updateTopic",value:function(t,e,n){return this.wrapStatus(o["a"].updateTopic({documentGuid:t,topicGuid:e,topic:n}))}},{key:"updateWorkshops",value:function(t,e){return this.wrapStatus(o["a"].updateWorkshopContents({documentGuid:t,workshops:e}))}},{key:"saveAllContent",value:function(t,e){var n=this,i=e.chapters,r=e.plans,s=e.topics;return this.waitUntilDone().then(function(){return n.wrapStatus(o["a"].saveAllContent({documentGuid:t,chapters:i,plans:r,topics:s}))})}},{key:"docExport",value:function(t){return o["a"].docExport(t)}},{key:"docImport",value:function(t){return o["a"].docImport(t)}},{key:"fullExport",value:function(){return o["a"].fullExport().then(function(t){return JSON.stringify(t)})}},{key:"fullImport",value:function(t){var e=JSON.parse(t);return o["a"].fullImport(e)}},{key:"exportToWord",value:function(t){var e=t.guid,n=t.title,i=t.includeArchived;return o["a"].exportToWord({guid:e,title:n,includeArchived:i})}}]),t}(),N=D;n.d(e,"b",function(){return R}),n.d(e,"a",function(){return G});var W=new Promise(function(t){r=t}),$=function(t){return i||r(t),i=t,t},R=function(){return i?Promise.resolve(i):W},j={Local:{cached:null,get:function(t){return new C["a"](t)}},Demo:{cached:null,get:function(){return new w}},Server:{cached:null,get:function(t){return new N(t)}},Offline:{cached:null,get:function(t){return new b(t)}}},L=Promise.resolve(),M=function(t,e){return t.cached||(t.cached=t.get(e)),"function"===typeof t.cached.init&&i!==t.cached&&(L=t.cached.init()||Promise.resolve()),$(t.cached),L.then(function(){return t.cached})};function G(t){var e;return e=null===o["a"].isOnlineCached?o["a"].isOnline().then(function(){return null},function(){return null}):Promise.resolve(),e.then(function(){var e=o["a"].isOnlineCached;if(!t||!t.accountType)return M(j.Demo);if("DEMO"===t.accountType.name)return M(j.Demo);if(!t.email)throw new Error("User does not have a valid username/email for initializing storage.");return t.isPremium?e?t.isPremium?M(j.Server,t.email):M(j.Local,t.email):M(j.Offline,t.email):M(j.Local,t.email)})}},"58e3":function(t,e,n){"use strict";var i=n("bcba"),r=n.n(i);r.a},"5ca4":function(t,e,n){"use strict";var i=n("6804"),r=n.n(i);r.a},"5f02":function(t,e,n){},"624f":function(t,e,n){"use strict";var i=n("c07c"),r=n.n(i);r.a},"640b":function(t,e,n){},6804:function(t,e,n){},"680d":function(t,e,n){},"68f5":function(t,e,n){},"6bba":function(t,e,n){},"6be1":function(t,e,n){"use strict";var i=n("2eda"),r=n.n(i);r.a},"6c59":function(t,e,n){"use strict";var i=function(t,e,n,i,r){return{name:t,displayName:e,description:n,route:i,available:r}},r={FREE_WRITE:i("FREE_WRITE","Free Writing","Warm up with a brief writing session. No prompts, no rules. Limit by time or word count.","/workshop/free-write",!0),NOVEL_QUICKSTART:i("NOVEL_QUICKSTART","Novel Quickstart","Answer a few basic prompts to get ideas flowing for your novel.","/workshop/novel-quickstart",!0),WRITERS_UNBLOCK:i("WRITERS_UNBLOCK","Writer's Unblock","Got writer's block? Get moving again by doing a word incorporation exercise.","/workshop/unblock",!0),PLOT_WORKSHOP:i("PLOT_WORKSHOP","Plot & Character Workshop","Figure out what happens next and develop your characters by responding to curated prompts.","/workshop/plot",!0),SETTING_WORKSHOP:i("SETTING_WORKSHOP","Setting Workshop","Build a stronger sense of place by exploring the setting of your novel.","/workshop/setting",!0)};e["a"]=r},"71f0":function(t,e,n){"use strict";var i=n("0200"),r=n.n(i);r.a},7662:function(t,e,n){"use strict";n.r(e),n.d(e,"orderPromises",function(){return o}),n.d(e,"getStyledArrayFromChapters",function(){return l});n("28a5");var i=n("4f96"),r=n("2909");n("ac4d"),n("8a81"),n("ac6a"),n("6762"),n("2fdb");function o(t){if(!Array.isArray(t)||t.length&&"function"!==typeof t[0])throw new TypeError("orderPromises expects an array of functions. Received: ".concat(JSON.stringify(t)));if(!t.length)return Promise.resolve();var e=t[0]();if(!e.then)throw new TypeError("A function in the array passed to orderPromises did not return a promise. Returned: ".concat(JSON.stringify(e)));return e.then(function(){return o(t.slice(1))})}function s(){return{text:[],style:[]}}function a(t,e){return{text:t||"",style:e||[]}}var c={bullet:"ul",ordered:"ol"};function u(t){var e=[],n=[];if(!t)return{styles:e,lineStyles:n};for(var i in t)["bold","italic","underline","strike"].includes(i)?e.push(i):"header"!==i?"blockquote"!==i?"list"!==i||n.push(c[t[i]]):n.push("blockquote"):n.push("h".concat(t[i]));return{styles:e,lineStyles:n}}function l(t){var e=[],n=!0,o=!1,c=void 0;try{for(var l,h=t[Symbol.iterator]();!(n=(l=h.next()).done);n=!0){var d=l.value;e.push({text:d.title,style:"chapterHeading",pageBreak:"before"});var p=s(),f=d.content&&d.content.ops||[],v=!0,m=!1,g=void 0;try{for(var w,C=f[Symbol.iterator]();!(v=(w=C.next()).done);v=!0){var k,y=w.value,_=y.insert,b=u(y.attributes),T=b.styles,P=b.lineStyles;if(P.length)(k=p.style).push.apply(k,Object(r["a"])(P));if("\n"!==_)if(_.includes("\n")){var S=_.split("\n"),E=Object(i["a"])(S),O=E[0],x=E.slice(1);if(O){var A=a(O,T);p.text.push(A)}e.push(p),p=s();for(var I=0;I<x.length-1;I++){var D=x[I],N=a(D,T);p.text.push(N),e.push(p),p=s()}var W=x[x.length-1],$=a(W,T);p.text.push($)}else{var R=a(_,T);p.text.push(R)}else e.push(p),p=s()}}catch(j){m=!0,g=j}finally{try{v||null==C.return||C.return()}finally{if(m)throw g}}}}catch(j){o=!0,c=j}finally{try{n||null==h.return||h.return()}finally{if(o)throw c}}return e}},"7ac5":function(t,e,n){"use strict";var i=n("c0dc"),r=n.n(i);r.a},"7d4e":function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"d",function(){return d}),n.d(e,"b",function(){return p}),n.d(e,"c",function(){return f});n("28a5");var i=n("f942"),r=n.n(i),o=n("1686"),s=n.n(o),a=n("ff81"),c=n.n(a),u=function(t){if(!t||!t.ops)return"";var e=t.ops.map(function(t){return t.insert||""}),n=e.join("");return n.trim().length?n:""},l=/^[a-zA-Z0-9'\-_@&]/,h=/[a-zA-Z0-9]+/,d=function(t){var e=u(t),n=e.split(/\s/g);return n.map(function(t){return t=r()(t,".,;:?!\"'`"),t=s()(t,"\"'`"),t}).filter(function(t){return l.test(t)&&h.test(t)})},p=function(t){if(!t||!t.ops)return"";var e=new c.a(t.ops,{});return e.convert()},f=function(t,e){var n=e.toLowerCase(),i=t.toLowerCase(),r=i.length;if(0===r||!n.trim())return[];var o=[],s=0,a=n.indexOf(i,s);while(a>-1)o.push(a),s=a+r,a=n.indexOf(i,s);return o}},"7d9c":function(t,e,n){"use strict";var i=n("9d83"),r=n.n(i);r.a},"7f24":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"c",function(){return c});n("6762"),n("2fdb");var i=n("d4ec"),r=n("bee2"),o=(n("ac4d"),n("8a81"),n("ac6a"),"_all-cache-keys"),s=JSON.parse(window.localStorage.getItem(o))||[],a="UNRESETTABLE";function c(){var t=!0,e=!1,n=void 0;try{for(var i,r=s[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;window.localStorage.removeItem(a)}}catch(c){e=!0,n=c}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}s.splice(0,s.length),window.localStorage.setItem(o,JSON.stringify([]))}var u=function(){function t(e){Object(i["a"])(this,t),this.key=e,e.includes(a)||s.push(e),window.localStorage.setItem(o,JSON.stringify(s))}return Object(r["a"])(t,[{key:"cacheDelete",value:function(){window.localStorage.removeItem(this.key)}},{key:"cacheGet",value:function(){return JSON.parse(window.localStorage.getItem(this.key))}},{key:"cacheSet",value:function(t){window.localStorage.setItem(this.key,JSON.stringify(t))}}]),t}();e["b"]=u},"7f9a":function(t,e,n){},8286:function(t,e,n){},8410:function(t,e,n){"use strict";n.d(e,"o",function(){return u}),n.d(e,"n",function(){return l}),n.d(e,"b",function(){return h}),n.d(e,"g",function(){return d}),n.d(e,"k",function(){return p}),n.d(e,"q",function(){return f}),n.d(e,"u",function(){return v}),n.d(e,"z",function(){return m}),n.d(e,"c",function(){return g}),n.d(e,"h",function(){return w}),n.d(e,"l",function(){return C}),n.d(e,"r",function(){return k}),n.d(e,"v",function(){return y}),n.d(e,"A",function(){return _}),n.d(e,"B",function(){return b}),n.d(e,"C",function(){return T}),n.d(e,"a",function(){return P}),n.d(e,"e",function(){return S}),n.d(e,"f",function(){return E}),n.d(e,"j",function(){return O}),n.d(e,"p",function(){return x}),n.d(e,"t",function(){return A}),n.d(e,"x",function(){return I}),n.d(e,"y",function(){return D}),n.d(e,"d",function(){return N}),n.d(e,"i",function(){return W}),n.d(e,"m",function(){return $}),n.d(e,"s",function(){return R}),n.d(e,"w",function(){return j}),n.d(e,"D",function(){return L}),n.d(e,"E",function(){return M});var i,r=n("2909"),o=n("ade3"),s=(n("7514"),n("6762"),n("2fdb"),n("ceac")),a=n.n(s),c=n("df70"),u="NUKE_CONTENT",l="LOAD_CONTENT",h="ADD_PLAN",d="ARCHIVE_PLAN",p="DELETE_PLAN",f="REARRANGE_PLANS",v="RESTORE_PLAN",m="UPDATE_PLAN",g="ADD_SECTION",w="ARCHIVE_SECTION",C="DELETE_SECTION",k="REARRANGE_SECTIONS",y="RESTORE_SECTION",_="UPDATE_SECTION",b="UPDATE_SECTION_CONTENT",T="UPDATE_SECTION_TAGS",P="ADD_CHAPTER",S="ADD_TOPIC_TO_CHAPTER",E="ARCHIVE_CHAPTER",O="DELETE_CHAPTER",x="REARRANGE_CHAPTERS",A="RESTORE_CHAPTER",I="UPDATE_CHAPTER",D="UPDATE_CHAPTER_CONTENT",N="ADD_TOPIC",W="ARCHIVE_TOPIC",$="DELETE_TOPIC",R="REARRANGE_TOPICS",j="RESTORE_TOPIC",L="UPDATE_TOPIC",M="UPDATE_TOPIC_CONTENT",G={state:{plans:[],chapters:[],topics:[]},mutations:(i={},Object(o["a"])(i,u,function(t){t.plans=[],t.chapters=[],t.topics=[]}),Object(o["a"])(i,l,function(t,e){var n=e.plans,i=e.chapters,r=e.topics;t.plans=n,t.chapters=i,t.topics=r}),Object(o["a"])(i,h,function(t,e){var n=e.plan;c["a"].timestamp(n),t.plans.push(n)}),Object(o["a"])(i,d,function(t,e){var n=e.plan;if(!t.plans.includes(n))throw new Error('ARCHIVE_PLAN: Cannot archive plan "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!0}),Object(o["a"])(i,p,function(t,e){var n=e.plan;if(!t.plans.includes(n))throw new Error('DELETE_PLAN: Cannot delete plan "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),t.plans.splice(t.plans.indexOf(n),1)}),Object(o["a"])(i,f,function(t,e){var n=e.plans;if(!K(t.plans,n))throw new Error("REARRANGE_PLANS: Cannot rearrange plans: an invalid plan array was received.");c["a"].timestampEach(n),t.plans=n}),Object(o["a"])(i,v,function(t,e){var n=e.plan;if(!t.plans.includes(n))throw new Error('RESTORE_PLAN: Cannot restore plan "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!1}),Object(o["a"])(i,m,function(t,e){var n=e.plan,i=e.newTitle;if(!t.plans.includes(n))throw new Error('UPDATE_PLAN: Cannot update plan "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.title=i}),Object(o["a"])(i,g,function(t,e){var n=e.plan,i=e.section;if(!t.plans.includes(n))throw new Error('ADD_SECTION: Cannot mutate plan "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),n.sections.push(i)}),Object(o["a"])(i,w,function(t,e){var n=e.plan,i=e.section;if(!t.plans.includes(n))throw new Error('ARCHIVE_SECTION: Cannot archive section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('ARCHIVE_SECTION: Cannot archive section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),i.archived=!0}),Object(o["a"])(i,C,function(t,e){var n=e.plan,i=e.section;if(!t.plans.includes(n))throw new Error('DELETE_SECTION: Cannot delete section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('DELETE_SECTION: Cannot delete section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),n.sections.splice(n.sections.indexOf(i),1)}),Object(o["a"])(i,k,function(t,e){var n=e.plan,i=e.sections;if(!t.plans.includes(n))throw new Error('REARRANGE_SECTIONS: Cannot rearrange sections of plan "'.concat(n.title,'": does not exist.'));if(!K(n.sections,i))throw new Error("REARRANGE_SECTIONS: Cannot rearrange sections: an invalid section array was received.");c["a"].timestamp(n),c["a"].timestampEach(i),n.sections=i}),Object(o["a"])(i,y,function(t,e){var n=e.plan,i=e.section;if(!t.plans.includes(n))throw new Error('RESTORE_SECTION: Cannot restore section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('RESTORE_SECTION: Cannot restore section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),i.archived=!1}),Object(o["a"])(i,_,function(t,e){var n=e.plan,i=e.section,r=e.newTitle;if(!t.plans.includes(n))throw new Error('UPDATE_SECTION: Cannot update section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('UPDATE_SECTION: Cannot update section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),i.title=r}),Object(o["a"])(i,b,function(t,e){var n=e.plan,i=e.section,r=e.newContent;if(!t.plans.includes(n))throw new Error('UPDATE_SECTION_CONTENT: Cannot update section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('UPDATE_SECTION_CONTENT: Cannot update section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),i.content=r}),Object(o["a"])(i,T,function(t,e){var n=e.plan,i=e.section,r=e.newTags;if(!t.plans.includes(n))throw new Error('UPDATE_SECTION_TAGS: Cannot update section of plan "'.concat(n.title,'": does not exist.'));if(!n.sections.includes(i))throw new Error('UPDATE_SECTION_TAGS: Cannot update section "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),c["a"].timestamp(i),i.tags=r}),Object(o["a"])(i,P,function(t,e){var n=e.chapter;c["a"].timestamp(n),t.chapters.push(n)}),Object(o["a"])(i,S,function(t,e){var n=e.chapter,i=e.topic;if(!t.chapters.includes(n))throw new Error('ADD_TOPIC_TO_CHAPTER: Cannot mutate chapter "'.concat(n.title,'": does not exist.'));if(!t.topics.includes(i))throw new Error('ADD_TOPIC_TO_CHAPTER: Cannot include topic "'.concat(i.title,'": does not exist.'));c["a"].timestamp(n),n.topics[i.guid]={content:null,guid:i.guid}}),Object(o["a"])(i,E,function(t,e){var n=e.chapter;if(!t.chapters.includes(n))throw new Error('ARCHIVE_CHAPTER: Cannot archive chapter "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!0}),Object(o["a"])(i,O,function(t,e){var n=e.chapter;if(!t.chapters.includes(n))throw new Error('DELETE_CHAPTER: Cannot delete chapter "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),t.chapters.splice(t.chapters.indexOf(n),1)}),Object(o["a"])(i,x,function(t,e){var n=e.chapters;if(!K(t.chapters,n))throw new Error("REARRANGE_CHAPTERS: Cannot rearrange chapters: an invalid chapter array was received.");c["a"].timestampEach(n),t.chapters=n}),Object(o["a"])(i,A,function(t,e){var n=e.chapter;if(!t.chapters.includes(n))throw new Error('RESTORE_CHAPTER: Cannot restore chapter "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!1}),Object(o["a"])(i,I,function(t,e){var n=e.chapter,i=e.newTitle;if(!t.chapters.includes(n))throw new Error('UPDATE_CHAPTER: Cannot update chapter "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.title=i}),Object(o["a"])(i,D,function(t,e){var n=e.chapter,i=e.newContent;if(!t.chapters.includes(n))throw new Error('UPDATE_CHAPTER_CONTENT: Cannot update content of chapter "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.content=i}),Object(o["a"])(i,N,function(t,e){var n=e.topic;c["a"].timestamp(n),t.topics.push(n)}),Object(o["a"])(i,W,function(t,e){var n=e.topic;if(!t.topics.includes(n))throw new Error('ARCHIVE_TOPIC: Cannot archive topic "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!0}),Object(o["a"])(i,$,function(t,e){var n=e.topic;if(!t.topics.includes(n))throw new Error('DELETE_TOPIC: Cannot archive topic "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),t.topics.splice(t.topics.indexOf(n),1),t.chapters=t.chapters.map(function(t){return t.topics[n.guid]&&delete t.topics[n.guid],t})}),Object(o["a"])(i,R,function(t,e){var n=e.topics;if(!K(t.topics,n))throw new Error("REARRANGE_TOPICS: Cannot rearrange topics: an invalid topic array was received.");c["a"].timestampEach(n),t.topics=n}),Object(o["a"])(i,j,function(t,e){var n=e.topic;if(!t.topics.includes(n))throw new Error('RESTORE_TOPIC: Cannot restore topic "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.archived=!1}),Object(o["a"])(i,L,function(t,e){var n=e.topic,i=e.newTitle;if(!t.topics.includes(n))throw new Error('UPDATE_TOPIC: Cannot update topic "'.concat(n.title,'": does not exist.'));c["a"].timestamp(n),n.title=i}),Object(o["a"])(i,M,function(t,e){var n=e.chapter,i=e.topic,r=e.newContent;if(!t.chapters.includes(n))throw new Error('UPDATE_TOPIC_CONTENT: Cannot update topic content for chapter "'.concat(n.title,'": does not exist.'));if(!t.topics.find(function(t){return t.guid===i.guid}))throw new Error('UPDATE_TOPIC_CONTENT: Cannot update content of topic "'.concat(i.title,'": does not exist.'));c["a"].timestamp(i),i.content=r}),i)};function K(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;var n=Object(r["a"])(a()(t,e)).concat(Object(r["a"])(a()(e,t)));return 0===n.length}e["F"]=G},"84d7":function(t,e,n){"use strict";var i=n("8c58"),r=n.n(i);r.a},"84e6":function(t,e,n){"use strict";var i=n("a934"),r=n.n(i);r.a},"85d8":function(t,e,n){},"86e1":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return u});var i,r=n("ade3"),o="SET_STATUS_DONE",s="SET_STATUS_ERROR",a="SET_STATUS_OFFLINE",c="SET_STATUS_SAVING",u={SAVED:"SAVED",SAVING:"SAVING",ERROR:"ERROR",OFFLINE:"OFFLINE"},l={state:{status:u.SAVED},mutations:(i={},Object(r["a"])(i,o,function(t){t.status=u.SAVED}),Object(r["a"])(i,s,function(t){t.status=u.ERROR}),Object(r["a"])(i,a,function(t){t.status=u.OFFLINE}),Object(r["a"])(i,c,function(t){t.status!==u.OFFLINE&&(t.status=u.SAVING)}),i)};e["f"]=l},"88c7":function(t,e,n){"use strict";var i=n("9b0a"),r=n.n(i);r.a},"8c58":function(t,e,n){},"8fdb":function(t,e,n){"use strict";n.d(e,"a",function(){return p}),n.d(e,"b",function(){return f}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return m}),n.d(e,"e",function(){return g}),n.d(e,"f",function(){return w}),n.d(e,"g",function(){return C}),n.d(e,"h",function(){return k});var i,r,o=n("ade3"),s=n("be94"),a=n("3835"),c=(n("ac6a"),n("7f7f"),n("7f24")),u=n("5145"),l=n("bec3"),h=n("8410"),d=n("e935"),p="ADD_DOCUMENT",f="CHANGE_DOCUMENT",v="DELETE_DOCUMENT",m="INIT_DOCUMENTS",g="REMOVE_OWNED_DOCUMENT",w="SET_UP_DOCUMENT",C="UNLOAD_CURRENT_DOCUMENT",k="UPDATE_DOCUMENT_NAME",y="LOAD_DOCUMENTS",_="UPDATE_DOCUMENT_METADATA",b=new c["b"]("CURRENT_DOCUMENT"),T={state:{currentDocument:null,ownedDocuments:[]},actions:(i={},Object(o["a"])(i,f,function(t,e){var n=t.commit,i=t.dispatch,r=e.guid,o=e.name,s=e.shouldReset;return i(C,{shouldReset:s}).then(function(){return Object(u["b"])().then(function(t){var e=[t.getAllChapters(r),t.getAllPlans(r),t.getAllTopics(r),t.isPremium()?t.getAllWorkshops(r):Promise.resolve(!1)];return Promise.all(e).then(function(t){var e=Object(a["a"])(t,4),i=e[0],s=e[1],c=e[2],u=e[3];n(h["n"],{plans:s,chapters:i,topics:c}),u&&n(d["d"],{workshops:u}),n(_,{guid:r,name:o}),b.cacheSet({guid:r,name:o})},function(t){throw t})})})}),Object(o["a"])(i,v,function(t,e){var n=t.commit,i=t.dispatch,r=e.guid;i(C).then(function(){n(g,{guid:r})})}),Object(o["a"])(i,m,function(t){var e=t.commit,n=t.dispatch,i=t.state;return Object(u["b"])().then(function(t){return t.getAllDocuments().then(function(t){e(y,t);var r=b.cacheGet();if(r&&i.ownedDocuments.some(function(t){return t.guid===r.guid}))return n(f,Object(s["a"])({},r,{shouldReset:!1}))})},console.error)}),Object(o["a"])(i,w,function(t,e){var n=t.dispatch,i=t.state,r=e.document,o=e.type,s=o.plans.map(function(t){return{archived:!1,guid:Object(l["a"])(),title:t,sections:[{archived:!1,content:null,guid:Object(l["a"])(),tags:[],title:t}]}}),a=o.chapters.map(function(t){return{archived:!1,content:null,guid:Object(l["a"])(),title:t,topics:{}}}),c=o.topics.map(function(t){return{archived:!1,guid:Object(l["a"])(),title:t}});return Object(u["b"])().then(function(t){return Promise.resolve(t.addDocument(r)).then(function(){return t})}).then(function(t){return t.saveAllContent(r.guid,{chapters:a,plans:s,topics:c})}).then(function(){return i.ownedDocuments.push(r)}).then(function(){return n(f,r)})}),Object(o["a"])(i,C,function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shouldReset:!1},i=n.shouldReset;return new Promise(function(t){i&&Object(c["c"])(),e(_,{guid:null,name:null}),e(h["o"]),e(d["e"]),t()})}),i),mutations:(r={},Object(o["a"])(r,p,function(t,e){var n=e.guid,i=e.name;t.ownedDocuments.push({guid:n,name:i})}),Object(o["a"])(r,y,function(t,e){t.ownedDocuments=e}),Object(o["a"])(r,g,function(t,e){var n,i=e.guid;t.ownedDocuments.some(function(t,e){if(t.guid===i)return n=e,!0}),t.ownedDocuments.splice(n,1)}),Object(o["a"])(r,_,function(t,e){var n=e.guid,i=e.name;t.currentDocument={guid:n,name:i}}),Object(o["a"])(r,k,function(t,e){var n=e.guid,i=e.name;t.currentDocument.name=i,b.cacheSet({guid:n,name:i}),t.ownedDocuments.some(function(t){if(t.guid===n)return t.name=i,!0})}),r)};e["i"]=T},"96a4":function(t,e,n){"use strict";var i=n("6bba"),r=n.n(i);r.a},9825:function(t,e,n){"use strict";var i=n("68f5"),r=n.n(i);r.a},"9b0a":function(t,e,n){},"9c67":function(t,e,n){"use strict";var i=n("e4e7"),r=n.n(i);r.a},"9d83":function(t,e,n){},"9e11":function(t,e,n){},"9f10":function(t,e,n){},a094:function(t,e,n){"use strict";var i=n("4eb7"),r=n.n(i);r.a},a812:function(t,e,n){"use strict";var i=n("44d4"),r=n.n(i);r.a},a934:function(t,e,n){},b3eb:function(t,e,n){},b9e9:function(t,e,n){"use strict";var i=n("bc73"),r=n.n(i);r.a},bc73:function(t,e,n){},bcba:function(t,e,n){},bec3:function(t,e,n){"use strict";var i=n("c437"),r=n.n(i),o=function(){return r()()};e["a"]=o},c07c:function(t,e,n){},c0dc:function(t,e,n){},c286:function(t,e,n){"use strict";var i=n("640b"),r=n.n(i);r.a},c780:function(t,e,n){t.exports=n.p+"static/img/logo.604a4bc0.png"},cb46:function(t,e,n){"use strict";n("7f7f");var i=n("d4ec"),r=n("bee2"),o=(n("cadf"),n("551c"),n("097d"),n("bc3a")),s=n.n(o),a=s.a.create({headers:{Pragma:"no-cache","Cache-Control":"no-store"}}),c=function(t){return"/api/".concat(t)},u=function(){function t(){Object(i["a"])(this,t),this.isOnlineCached=null}return Object(r["a"])(t,[{key:"isOnline",value:function(){var t=this,e=this.simpleGet(c("online"));return e.then(function(){t.isOnlineCached=!0},function(){t.isOnlineCached=!1}),e}},{key:"simpleGet",value:function(t){return a.get(t).then(function(t){return t.data})}},{key:"simplePost",value:function(t,e){return a.post(t,e).then(function(t){return t.data})}},{key:"saveAllContent",value:function(t){return this.simplePost(c("document/saveAll"),t)}},{key:"addDocument",value:function(t){return this.simplePost(c("document/add"),t)}},{key:"deleteDocument",value:function(t){return this.simplePost(c("document/delete"),t)}},{key:"getDocuments",value:function(){return this.simpleGet(c("documents")).then(function(t){return t.map(function(t){return t})})}},{key:"updateDocument",value:function(t){return this.simplePost(c("document/update"),t)}},{key:"arrangeChapters",value:function(t){return this.simplePost(c("chapter/arrange"),t)}},{key:"deleteChapter",value:function(t){return this.simplePost(c("chapter/delete"),t)}},{key:"getChapters",value:function(t){return this.simpleGet(c("chapters/".concat(t)))}},{key:"updateChapter",value:function(t){return this.simplePost(c("chapter/update"),t)}},{key:"arrangeTopics",value:function(t){return this.simplePost(c("topic/arrange"),t)}},{key:"deleteTopic",value:function(t){return this.simplePost(c("topic/delete"),t)}},{key:"getTopics",value:function(t){return this.simpleGet(c("topics/".concat(t)))}},{key:"updateTopic",value:function(t){return this.simplePost(c("topic/update"),t)}},{key:"arrangePlans",value:function(t){return this.simplePost(c("plan/arrange"),t)}},{key:"deletePlan",value:function(t){return this.simplePost(c("plan/delete"),t)}},{key:"getPlans",value:function(t){return this.simpleGet(c("plans/".concat(t)))}},{key:"updatePlan",value:function(t){return this.simplePost(c("plan/update"),t)}},{key:"arrangeSections",value:function(t){return this.simplePost(c("section/arrange"),t)}},{key:"deleteSection",value:function(t){return this.simplePost(c("section/delete"),t)}},{key:"updateSection",value:function(t){return this.simplePost(c("section/update"),t)}},{key:"deleteWorkshopContent",value:function(t){var e=t.documentGuid,n=t.guid;return this.simplePost(c("workshop-content/delete"),{documentGuid:e,guid:n})}},{key:"getWorkshops",value:function(t){return this.simpleGet(c("workshop-content/".concat(t)))}},{key:"updateWorkshopContents",value:function(t){var e=t.documentGuid,n=t.workshops;return this.simplePost(c("workshop-content/update"),{documentGuid:e,workshops:n})}},{key:"docExport",value:function(t){return this.simpleGet(c("backup/export/document/".concat(t)))}},{key:"docImport",value:function(t){var e=t.guid,n=t.name,i=t.chapters,r=t.topics,o=t.plans,s=t.workshops;return this.simplePost(c("backup/import/document"),{guid:e,name:n,chapters:i,topics:r,plans:o,workshops:s})}},{key:"fullExport",value:function(){return this.simpleGet(c("backup/export"))}},{key:"fullImport",value:function(t){return this.simplePost(c("backup/import"),t)}},{key:"exportToWord",value:function(t){var e=t.guid,n=t.title,i=t.includeArchived;return new Promise(function(t){window.open(c("word/export-chapters?guid=".concat(e,"&title=").concat(n,"&includeArchived=").concat(!!i)),"_blank"),t()})}}]),t}();e["a"]=new u},d22a:function(t,e,n){"use strict";var i=n("2f2f"),r=n.n(i);r.a},da35:function(t,e,n){"use strict";var i=n("2f5f"),r=n.n(i);r.a},db43:function(t,e,n){},de62:function(t,e,n){"use strict";var i=n("303d"),r=n.n(i);r.a},df70:function(t,e,n){"use strict";n("7514"),n("ac6a");var i=n("d4ec"),r=n("bee2"),o=n("b8ce"),s=n.n(o),a=function(){function t(){Object(i["a"])(this,t),this.timestampField="updated_at"}return Object(r["a"])(t,[{key:"timestamp",value:function(t){t[this.timestampField]=Date.now()}},{key:"timestampEach",value:function(t){var e=this;t.forEach(function(t){return e.timestamp(t)})}},{key:"getTimestamp",value:function(t){return t[this.timestampField]?new Date(t[this.timestampField]).getTime():null}},{key:"getMostRecent",value:function(t,e){var n=this.getTimestamp(t),i=this.getTimestamp(e);return i&&i>n?e:t}},{key:"getMostRecentEach",value:function(t,e,n,i){var r=this,o=[],a=function(r){var a=s()(t[r]);if(!n(a))return"continue";o.push(a);var c=e.find(function(t){return n(t)===n(a)});c||i(a)};for(var c in t)a(c);var u=function(t){var a=s()(e[t]);if(!n(a))return"continue";var c=o.find(function(t){return n(t)===n(a)});if(!c)return i(a),o.splice(t,0,a),"continue";var u=r.getMostRecent(c,a);if(u===c)return"continue";o.splice(o.indexOf(c),1,u)};for(var c in e)u(c);return o}}]),t}();e["a"]=new a},e079:function(t,e,n){"use strict";var i=n("b3eb"),r=n.n(i);r.a},e4e7:function(t,e,n){},e7b2:function(t,e,n){},e935:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return u}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return p});var i,r=n("ade3"),o=(n("ac4d"),n("8a81"),n("ac6a"),n("4f96")),s=(n("6762"),n("2fdb"),n("cadf"),n("551c"),n("097d"),n("df70")),a="ADD_WORKSHOP",c="ARCHIVE_WORKSHOP",u="DELETE_WORKSHOP",l="RESTORE_WORKSHOP",h="UPDATE_WORKSHOPS_CONTENT",d="LOAD_WORKSHOPS",p="NUKE_WORKSHOPS",f={state:{workshops:[]},mutations:(i={},Object(r["a"])(i,a,function(t,e){var n=e.workshop;s["a"].timestamp(n),t.workshops.push(n)}),Object(r["a"])(i,c,function(t,e){var n=e.workshop;if(!t.workshops.includes(n))throw new Error("".concat(c,': Cannot archive workshop "').concat(n.title,'": does not exist.'));s["a"].timestamp(n),n.archived=!0}),Object(r["a"])(i,u,function(t,e){var n=e.workshop;if(!t.workshops.includes(n))throw new Error("".concat(u,': Cannot delete workshop "').concat(n.title,'": does not exist.'));s["a"].timestamp(n),t.workshops.splice(t.workshops.indexOf(n),1)}),Object(r["a"])(i,l,function(t,e){var n=e.workshop;if(!t.workshops.includes(n))throw new Error("".concat(l,': Cannot restore workshop "').concat(n.title,'": does not exist.'));s["a"].timestamp(n),n.archived=!1}),Object(r["a"])(i,h,function(t,e){var n=Object(o["a"])(e.workshopUpdates),i=n.slice(0),r=!0,a=!1,c=void 0;try{for(var u,l=i[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var d=u.value,p=d.workshop,f=d.newContent,v=d.newTitle;if(!t.workshops.includes(p))throw new Error("".concat(h,': Cannot update workshop "').concat(p.title,'": does not exist.'));s["a"].timestamp(p),p.content=f,v&&(p.title=v)}}catch(m){a=!0,c=m}finally{try{r||null==l.return||l.return()}finally{if(a)throw c}}}),Object(r["a"])(i,d,function(t,e){var n=e.workshops;if(!Array.isArray(n))throw new Error("".concat(d,": Cannot load workshops: argument is not an array."));t.workshops=n}),Object(r["a"])(i,p,function(t){t.workshops=[]}),i)};e["h"]=f},efa2:function(t,e,n){"use strict";var i=n("36dc"),r={bind:function(t,e){var n=e.value,r=void 0===n?{}:n,o=r.content,s=r.distance,a=void 0===s?10:s,c=r.interactive,u=void 0!==c&&c,l=r.enabled,h=void 0===l||l,d=Object(i["a"])({content:o,distance:a,el:t,interactive:u});d?h||d.disable():console.warn("Expected a Tippy.js instance to be returned")},update:function(t,e){var n=e.value,i=void 0===n?{}:n,r=i.enabled,o=void 0===r||r,s=t._tippy;s?o?s.enable():s.disable():console.warn("Expected a Tippy.js instance on el with v-tooltip")}};e["a"]=r},f241:function(t,e,n){"use strict";var i=n("e7b2"),r=n.n(i);r.a},f8fb:function(t,e,n){},fd93:function(t,e,n){"use strict";var i=n("9f10"),r=n.n(i);r.a},fed0:function(t,e,n){"use strict";var i=n("017f"),r=n.n(i);r.a}});
//# sourceMappingURL=app.b5109003.js.map